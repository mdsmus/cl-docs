<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
<meta name="generator" content=
"HTML Tidy for Linux/x86 (vers 12 April 2005), see www.w3.org">
<title>CLHS: Chapter 21</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="f_file_e.htm">
<link rel="UP" href="../Front/Contents.htm">
<link rel="NEXT" href="21_a.htm">
<title>CLHS: Section 21.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="21_.htm">
<link rel="UP" href="21_.htm">
<link rel="NEXT" href="21_aa.htm">
<title>CLHS: Section 21.1.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="21_a.htm">
<link rel="UP" href="21_a.htm">
<link rel="NEXT" href="21_aaa.htm">
<title>CLHS: Section 21.1.1.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="21_aa.htm">
<link rel="UP" href="21_aa.htm">
<link rel="NEXT" href="21_aaaa.htm">
<title>CLHS: Section 21.1.1.1.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="21_aaa.htm">
<link rel="UP" href="21_aaa.htm">
<link rel="NEXT" href="21_aaab.htm">
<title>CLHS: Section 21.1.1.1.2</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="21_aaaa.htm">
<link rel="UP" href="21_aaa.htm">
<link rel="NEXT" href="21_aaac.htm">
<title>CLHS: Section 21.1.1.1.3</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="21_aaab.htm">
<link rel="UP" href="21_aaa.htm">
<link rel="NEXT" href="21_aab.htm">
<title>CLHS: Section 21.1.1.2</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="21_aaac.htm">
<link rel="UP" href="21_aa.htm">
<link rel="NEXT" href="21_aaba.htm">
<title>CLHS: Section 21.1.1.2.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="21_aab.htm">
<link rel="UP" href="21_aab.htm">
<link rel="NEXT" href="21_aac.htm">
<title>CLHS: Section 21.1.1.3</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="21_aaba.htm">
<link rel="UP" href="21_aa.htm">
<link rel="NEXT" href="21_ab.htm">
<title>CLHS: Section 21.1.2</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="21_aac.htm">
<link rel="UP" href="21_a.htm">
<link rel="NEXT" href="21_ac.htm">
<title>CLHS: Section 21.1.3</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="21_ab.htm">
<link rel="UP" href="21_a.htm">
<link rel="NEXT" href="21_ad.htm">
<title>CLHS: Section 21.1.4</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="21_ac.htm">
<link rel="UP" href="21_a.htm">
<link rel="NEXT" href="c_stream.htm">
</head>
<body>
<p><a name="chaptwentyone" id="chaptwentyone"></a><a name="streams"
id="streams"></a></p>
<h2>21. Streams</h2>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>21.1 Stream Concepts</h2>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>21.1.1 Introduction to Streams</h2>
<p>A <a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>stream</i></a> is an <a rel="DEFINITION"
href="26_glo_o.htm#object"><i>object</i></a> that can be used with
an input or output function to identify an appropriate source or
sink of <a rel="DEFINITION" href=
"26_glo_c.htm#character"><i>characters</i></a> or <a rel=
"DEFINITION" href="26_glo_b.htm#byte"><i>bytes</i></a> for that
operation. A <a rel="DEFINITION" href=
"26_glo_c.htm#character"><i>character</i></a> <a rel="DEFINITION"
href="26_glo_s.htm#stream"><i>stream</i></a> is a source or sink of
<a rel="DEFINITION" href=
"26_glo_c.htm#character"><i>characters</i></a>. A <a rel=
"DEFINITION" href="26_glo_b.htm#binary"><i>binary</i></a> <a rel=
"DEFINITION" href="26_glo_s.htm#stream"><i>stream</i></a> is a
source or sink of <a rel="DEFINITION" href=
"26_glo_b.htm#byte"><i>bytes</i></a>.</p>
<p>Some operations may be performed on any kind of <a rel=
"DEFINITION" href="26_glo_s.htm#stream"><i>stream</i></a>; the next
figure provides a list of <a rel="DEFINITION" href=
"26_glo_s.htm#standardized"><i>standardized</i></a> operations that
are potentially useful with any kind of <a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>stream</i></a>.</p>
<pre>
<a rel="DEFINITION" href=
"f_close.htm#close">close</a>                 <a rel="DEFINITION"
href="f_stm_el.htm#stream-element-type">stream-element-type</a>  
<a rel="DEFINITION" href=
"f_in_stm.htm#input-stream-p">input-stream-p</a>        <a rel=
"DEFINITION" href="f_stmp.htm#streamp">streamp</a>              
<a rel="DEFINITION" href=
"f_intera.htm#interactive-stream-p">interactive-stream-p</a>  <a rel="DEFINITION"
href="m_w_op_1.htm#with-open-stream">with-open-stream</a>     
<a rel="DEFINITION" href=
"f_in_stm.htm#output-stream-p">output-stream-p</a>                            
</pre>
<p><b>Figure 21-1. Some General-Purpose Stream Operations</b></p>
<p>Other operations are only meaningful on certain <a rel=
"DEFINITION" href="26_glo_s.htm#stream"><i>stream</i></a> <a rel=
"DEFINITION" href="26_glo_t.htm#type"><i>types</i></a>. For
example, <a rel="DEFINITION" href=
"f_rd_cha.htm#read-char"><b>read-char</b></a> is only defined for
<a rel="DEFINITION" href=
"26_glo_c.htm#character"><i>character</i></a> <a rel="DEFINITION"
href="26_glo_s.htm#stream"><i>streams</i></a> and <a rel=
"DEFINITION" href="f_rd_by.htm#read-byte"><b>read-byte</b></a> is
only defined for <a rel="DEFINITION" href=
"26_glo_b.htm#binary"><i>binary</i></a> <a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>streams</i></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>21.1.1.1 Abstract Classifications of Streams</h2>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>21.1.1.1.1 Input, Output, and Bidirectional Streams</h2>
<p>A <a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>stream</i></a>, whether a <a rel=
"DEFINITION" href="26_glo_c.htm#character"><i>character</i></a>
<a rel="DEFINITION" href="26_glo_s.htm#stream"><i>stream</i></a> or
a <a rel="DEFINITION" href="26_glo_b.htm#binary"><i>binary</i></a>
<a rel="DEFINITION" href="26_glo_s.htm#stream"><i>stream</i></a>,
can be an <a rel="DEFINITION" href=
"26_glo_i.htm#input"><i>input</i></a> <a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>stream</i></a> (source of data), an
<a rel="DEFINITION" href="26_glo_o.htm#output"><i>output</i></a>
<a rel="DEFINITION" href="26_glo_s.htm#stream"><i>stream</i></a>
(sink for data), both, or (e.g., when "<tt>:direction :probe</tt>"
is given to <a rel="DEFINITION" href=
"f_open.htm#open"><b>open</b></a>) neither.</p>
<p>The next figure shows <a rel="DEFINITION" href=
"26_glo_o.htm#operator"><i>operators</i></a> relating to <a rel=
"DEFINITION" href="26_glo_i.htm#input"><i>input</i></a> <a rel=
"DEFINITION" href="26_glo_s.htm#stream"><i>streams</i></a>.</p>
<p><a name="inputstreamops" id="inputstreamops"></a></p>
<pre>
<a rel="DEFINITION" href=
"f_clear_.htm#clear-input">clear-input</a>  <a rel="DEFINITION"
href="f_rd_by.htm#read-byte">read-byte</a>            <a rel=
"DEFINITION" href=
"f_rd_fro.htm#read-from-string">read-from-string</a>            
<a rel="DEFINITION" href=
"f_listen.htm#listen">listen</a>       <a rel="DEFINITION" href=
"f_rd_cha.htm#read-char">read-char</a>            <a rel=
"DEFINITION" href=
"f_rd_lin.htm#read-line">read-line</a>                   
<a rel="DEFINITION" href=
"f_peek_c.htm#peek-char">peek-char</a>    <a rel="DEFINITION" href=
"f_rd_c_1.htm#read-char-no-hang">read-char-no-hang</a>    <a rel=
"DEFINITION" href=
"f_rd_rd.htm#read-preserving-whitespace">read-preserving-whitespace</a>  
<a rel="DEFINITION" href=
"f_rd_rd.htm#read">read</a>         <a rel="DEFINITION" href=
"f_rd_del.htm#read-delimited-list">read-delimited-list</a>  <a rel=
"DEFINITION" href=
"f_unrd_c.htm#unread-char">unread-char</a>                 
</pre>
<p><b>Figure 21-2. Operators relating to Input Streams.</b></p>
<p>The next figure shows <a rel="DEFINITION" href=
"26_glo_o.htm#operator"><i>operators</i></a> relating to <a rel=
"DEFINITION" href="26_glo_o.htm#output"><i>output</i></a> <a rel=
"DEFINITION" href="26_glo_s.htm#stream"><i>streams</i></a>.</p>
<p><a name="outputstreamops" id="outputstreamops"></a></p>
<pre>
<a rel="DEFINITION" href=
"f_finish.htm#clear-output">clear-output</a>   <a rel="DEFINITION"
href="f_wr_pr.htm#prin1">prin1</a>            <a rel="DEFINITION"
href="f_wr_pr.htm#write">write</a>            
<a rel="DEFINITION" href=
"f_finish.htm#finish-output">finish-output</a>  <a rel="DEFINITION"
href="f_wr_to_.htm#prin1-to-string">prin1-to-string</a>  <a rel=
"DEFINITION" href="f_wr_by.htm#write-byte">write-byte</a>       
<a rel="DEFINITION" href=
"f_finish.htm#force-output">force-output</a>   <a rel="DEFINITION"
href="f_wr_pr.htm#princ">princ</a>            <a rel="DEFINITION"
href="f_wr_cha.htm#write-char">write-char</a>       
<a rel="DEFINITION" href=
"f_format.htm#format">format</a>         <a rel="DEFINITION" href=
"f_wr_to_.htm#princ-to-string">princ-to-string</a>  <a rel=
"DEFINITION" href="f_wr_stg.htm#write-line">write-line</a>       
<a rel="DEFINITION" href=
"f_terpri.htm#fresh-line">fresh-line</a>     <a rel="DEFINITION"
href="f_wr_pr.htm#print">print</a>            <a rel="DEFINITION"
href="f_wr_stg.htm#write-string">write-string</a>     
<a rel="DEFINITION" href=
"f_wr_pr.htm#pprint">pprint</a>         <a rel="DEFINITION" href=
"f_terpri.htm#terpri">terpri</a>           <a rel="DEFINITION"
href="f_wr_to_.htm#write-to-string">write-to-string</a>  
</pre>
<p><b>Figure 21-3. Operators relating to Output Streams.</b></p>
<p>A <a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>stream</i></a> that is both an <a rel=
"DEFINITION" href="26_glo_i.htm#input"><i>input</i></a> <a rel=
"DEFINITION" href="26_glo_s.htm#stream"><i>stream</i></a> and an
<a rel="DEFINITION" href="26_glo_o.htm#output"><i>output</i></a>
<a rel="DEFINITION" href="26_glo_s.htm#stream"><i>stream</i></a> is
called a <a rel="DEFINITION" href=
"26_glo_b.htm#bidirectional"><i>bidirectional</i></a> <a rel=
"DEFINITION" href="26_glo_s.htm#stream"><i>stream</i></a>. See the
<a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>functions</i></a> <a rel="DEFINITION"
href="f_in_stm.htm#input-stream-p"><b>input-stream-p</b></a> and
<a rel="DEFINITION" href=
"f_in_stm.htm#output-stream-p"><b>output-stream-p</b></a>.</p>
<p>Any of the <a rel="DEFINITION" href=
"26_glo_o.htm#operator"><i>operators</i></a> listed in <a rel=
"DEFINITION" href="#inputstreamops">Figure 21-2</a> or <a rel=
"DEFINITION" href="#outputstreamops">Figure 21-3</a> an be used
with <a rel="DEFINITION" href=
"26_glo_b.htm#bidirectional"><i>bidirectional</i></a> <a rel=
"DEFINITION" href="26_glo_s.htm#stream"><i>streams</i></a>. In
addition, the next figure hows a list of <a rel="DEFINITION" href=
"26_glo_o.htm#operator"><i>operators</i></a> that relate
specificaly to <a rel="DEFINITION" href=
"26_glo_b.htm#bidirectional"><i>bidirectional</i></a> <a rel=
"DEFINITION" href="26_glo_s.htm#stream"><i>streams</i></a>.</p>
<pre>
<a rel="DEFINITION" href=
"f_y_or_n.htm#y-or-n-p">y-or-n-p</a>  <a rel="DEFINITION" href=
"f_y_or_n.htm#yes-or-no-p">yes-or-no-p</a>    
</pre>
<p><b>Figure 21-4. Operators relating to Bidirectional
Streams.</b></p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>21.1.1.1.2 Open and Closed Streams</h2>
<p><a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>Streams</i></a> are either <a rel=
"DEFINITION" href="26_glo_o.htm#open"><i>open</i></a> or <a rel=
"DEFINITION" href="26_glo_c.htm#closed"><i>closed</i></a>.</p>
<p>Except as explicitly specified otherwise, operations that create
and return <a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>streams</i></a> return <a rel="DEFINITION"
href="26_glo_o.htm#open"><i>open</i></a> <a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>streams</i></a>.</p>
<p>The action of <i>closing</i> a <a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>stream</i></a> marks the end of its use as
a source or sink of data, permitting the <a rel="DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementation</i></a> to reclaim
its internal data structures, and to free any external resources
which might have been locked by the <a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>stream</i></a> when it was opened.</p>
<p>Except as explicitly specified otherwise, the consequences are
undefined when a <a rel="DEFINITION" href=
"26_glo_c.htm#closed"><i>closed</i></a> <a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>stream</i></a> is used where a <a rel=
"DEFINITION" href="26_glo_s.htm#stream"><i>stream</i></a> is called
for.</p>
<p>Coercion of <a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>streams</i></a> to <a rel="DEFINITION"
href="26_glo_p.htm#pathname"><i>pathnames</i></a> is permissible
for <a rel="DEFINITION" href=
"26_glo_c.htm#closed"><i>closed</i></a> <a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>streams</i></a>; in some situations, such
as for a <a rel="DEFINITION" href=
"26_glo_t.htm#truename"><i>truename</i></a> computation, the result
might be different for an <a rel="DEFINITION" href=
"26_glo_o.htm#open"><i>open</i></a> <a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>stream</i></a> and for that same <a rel=
"DEFINITION" href="26_glo_s.htm#stream"><i>stream</i></a> once it
has been <a rel="DEFINITION" href=
"26_glo_c.htm#closed"><i>closed</i></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>21.1.1.1.3 Interactive Streams</h2>
<p>An <a rel="DEFINITION" href=
"26_glo_i.htm#interactive_stream"><i>interactive stream</i></a> is
one on which it makes sense to perform interactive querying.</p>
<p>The precise meaning of an <a rel="DEFINITION" href=
"26_glo_i.htm#interactive_stream"><i>interactive stream</i></a> is
<a rel="DEFINITION" href=
"26_glo_i.htm#implementation-defined"><i>implementation-defined</i></a>,
and may depend on the underlying operating system. Some examples of
the things that an <a rel="DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementation</i></a> might
choose to use as identifying characteristics of an <a rel=
"DEFINITION" href="26_glo_i.htm#interactive_stream"><i>interactive
stream</i></a> include:</p>
<dl>
<dt>* The <a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>stream</i></a> is connected to a person
(or equivalent) in such a way that the program can prompt for
information and expect to receive different input depending on the
prompt.<br></dt>
<dt>* The program is expected to prompt for input and support
"normal input editing".<br></dt>
<dt>* <a rel="DEFINITION" href=
"f_rd_cha.htm#read-char"><b>read-char</b></a> might wait for the
user to type something before returning instead of immediately
returning a character or end-of-file.<br></dt>
</dl>
<p>The general intent of having some <a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>streams</i></a> be classified as <a rel=
"DEFINITION" href="26_glo_i.htm#interactive_stream"><i>interactive
streams</i></a> is to allow them to be distinguished from streams
containing batch (or background or command-file) input. Output to
batch streams is typically discarded or saved for later viewing, so
interactive queries to such streams might not have the expected
effect.</p>
<p><a rel="DEFINITION" href=
"26_glo_t.htm#terminal_iSLo"><i>Terminal I/O</i></a> might or might
not be an <a rel="DEFINITION" href=
"26_glo_i.htm#interactive_stream"><i>interactive
stream</i></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>21.1.1.2 Abstract Classifications of Streams</h2>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>21.1.1.2.1 File Streams</h2>
<p>Some <a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>streams</i></a>, called <a rel=
"DEFINITION" href="26_glo_f.htm#file_stream"><i>file
streams</i></a>, provide access to <a rel="DEFINITION" href=
"26_glo_f.htm#file"><i>files</i></a>. An <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a> of <a rel="DEFINITION"
href="26_glo_c.htm#class"><i>class</i></a> <a rel="DEFINITION"
href="t_file_s.htm#file-stream"><b>file-stream</b></a> is used to
represent a <a rel="DEFINITION" href=
"26_glo_f.htm#file_stream"><i>file stream</i></a>.</p>
<p>The basic operation for opening a <a rel="DEFINITION" href=
"26_glo_f.htm#file"><i>file</i></a> is <a rel="DEFINITION" href=
"f_open.htm#open"><b>open</b></a>, which typically returns a
<a rel="DEFINITION" href="26_glo_f.htm#file_stream"><i>file
stream</i></a> (see its dictionary entry for details). The basic
operation for closing a <a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>stream</i></a> is <a rel="DEFINITION"
href="f_close.htm#close"><b>close</b></a>. The macro <a rel=
"DEFINITION" href=
"m_w_open.htm#with-open-file"><b>with-open-file</b></a> is useful
to express the common idiom of opening a <a rel="DEFINITION" href=
"26_glo_f.htm#file"><i>file</i></a> for the duration of a given
body of <a rel="DEFINITION" href=
"26_glo_c.htm#code"><i>code</i></a>, and assuring that the
resulting <a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>stream</i></a> is closed upon exit from
that body.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>21.1.1.3 Other Subclasses of Stream</h2>
<p>The <a rel="DEFINITION" href=
"26_glo_c.htm#class"><i>class</i></a> <a rel="DEFINITION" href=
"t_stream.htm#stream"><b>stream</b></a> has a number of <a rel=
"DEFINITION" href="26_glo_s.htm#subclass"><i>subclasses</i></a>
defined by this specification. The next figure shows some
information about these subclasses.</p>
<pre>
Class                Related Operators             
<a rel="DEFINITION" href=
"t_broadc.htm#broadcast-stream">broadcast-stream</a>     <a rel=
"DEFINITION" href=
"f_mk_bro.htm#make-broadcast-stream">make-broadcast-stream</a>         
                     <a rel="DEFINITION" href=
"f_broadc.htm#broadcast-stream-streams">broadcast-stream-streams</a>      
<a rel="DEFINITION" href=
"t_concat.htm#concatenated-stream">concatenated-stream</a>  <a rel=
"DEFINITION" href=
"f_mk_con.htm#make-concatenated-stream">make-concatenated-stream</a>      
                     <a rel="DEFINITION" href=
"f_conc_1.htm#concatenated-stream-streams">concatenated-stream-streams</a>   
<a rel="DEFINITION" href=
"t_echo_s.htm#echo-stream">echo-stream</a>          <a rel=
"DEFINITION" href=
"f_mk_ech.htm#make-echo-stream">make-echo-stream</a>              
                     <a rel="DEFINITION" href=
"f_echo_s.htm#echo-stream-input-stream">echo-stream-input-stream</a>      
                     <a rel="DEFINITION" href=
"f_echo_s.htm#echo-stream-output-stream">echo-stream-output-stream</a>     
<a rel="DEFINITION" href=
"t_stg_st.htm#string-stream">string-stream</a>        <a rel=
"DEFINITION" href=
"f_mk_s_1.htm#make-string-input-stream">make-string-input-stream</a>      
                     <a rel="DEFINITION" href=
"m_w_in_f.htm#with-input-from-string">with-input-from-string</a>        
                     <a rel="DEFINITION" href=
"f_mk_s_2.htm#make-string-output-stream">make-string-output-stream</a>     
                     <a rel="DEFINITION" href=
"m_w_out_.htm#with-output-to-string">with-output-to-string</a>         
                     <a rel="DEFINITION" href=
"f_get_ou.htm#get-output-stream-string">get-output-stream-string</a>      
<a rel="DEFINITION" href=
"t_syn_st.htm#synonym-stream">synonym-stream</a>       <a rel=
"DEFINITION" href=
"f_mk_syn.htm#make-synonym-stream">make-synonym-stream</a>           
                     <a rel="DEFINITION" href=
"f_syn_st.htm#synonym-stream-symbol">synonym-stream-symbol</a>         
<a rel="DEFINITION" href=
"t_two_wa.htm#two-way-stream">two-way-stream</a>       <a rel=
"DEFINITION" href=
"f_mk_two.htm#make-two-way-stream">make-two-way-stream</a>           
                     <a rel="DEFINITION" href=
"f_two_wa.htm#two-way-stream-input-stream">two-way-stream-input-stream</a>   
                     <a rel="DEFINITION" href=
"f_two_wa.htm#two-way-stream-output-stream">two-way-stream-output-stream</a>  
</pre>
<p><b>Figure 21-5. Defined Names related to Specialized
Streams</b></p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>21.1.2 Stream Variables</h2>
<p><a rel="DEFINITION" href=
"26_glo_v.htm#variable"><i>Variables</i></a> whose <a rel=
"DEFINITION" href="26_glo_v.htm#value"><i>values</i></a> must be
<a rel="DEFINITION" href="26_glo_s.htm#stream"><i>streams</i></a>
are sometimes called <a rel="DEFINITION" href=
"26_glo_s.htm#stream_variable"><i>stream variables</i></a>.</p>
<p>Certain <a rel="DEFINITION" href=
"26_glo_s.htm#stream_variable"><i>stream variables</i></a> are
defined by this specification to be the proper source of input or
output in various <a rel="DEFINITION" href=
"26_glo_s.htm#situation"><i>situations</i></a> where no specific
<a rel="DEFINITION" href="26_glo_s.htm#stream"><i>stream</i></a>
has been specified instead. A complete list of such <a rel=
"DEFINITION" href=
"26_glo_s.htm#standardized"><i>standardized</i></a> <a rel=
"DEFINITION" href="26_glo_s.htm#stream_variable"><i>stream
variables</i></a> appears in the next figure. The consequences are
undefined if at any time the <a rel="DEFINITION" href=
"26_glo_v.htm#value"><i>value</i></a> of any of these <a rel=
"DEFINITION" href="26_glo_v.htm#variable"><i>variables</i></a> is
not an <a rel="DEFINITION" href="26_glo_o.htm#open"><i>open</i></a>
<a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>stream</i></a>.</p>
<p><a name="standardizedstreamvars" id=
"standardizedstreamvars"></a></p>
<pre>
Glossary Term    Variable Name      
<a rel="DEFINITION" href=
"26_glo_d.htm#debug_iSLo">debug I/O</a>        <a rel="DEFINITION"
href="v_debug_.htm#STdebug-ioST">*debug-io*</a>         
<a rel="DEFINITION" href=
"26_glo_e.htm#error_output">error output</a>     <a rel=
"DEFINITION" href=
"v_debug_.htm#STerror-outputST">*error-output*</a>     
<a rel="DEFINITION" href=
"26_glo_q.htm#query_iSLo">query I/O</a>        <a rel="DEFINITION"
href="v_debug_.htm#STquery-ioST">*query-io*</a>         
<a rel="DEFINITION" href=
"26_glo_s.htm#standard_input">standard input</a>   <a rel=
"DEFINITION" href=
"v_debug_.htm#STstandard-inputST">*standard-input*</a>   
<a rel="DEFINITION" href=
"26_glo_s.htm#standard_output">standard output</a>  <a rel=
"DEFINITION" href=
"v_debug_.htm#STstandard-outputST">*standard-output*</a>  
<a rel="DEFINITION" href=
"26_glo_t.htm#terminal_iSLo">terminal I/O</a>     <a rel=
"DEFINITION" href=
"v_termin.htm#STterminal-ioST">*terminal-io*</a>      
<a rel="DEFINITION" href=
"26_glo_t.htm#trace_output">trace output</a>     <a rel=
"DEFINITION" href=
"v_debug_.htm#STtrace-outputST">*trace-output*</a>     
</pre>
<p><b>Figure 21-6. Standardized Stream Variables</b></p>
<p>Note that, by convention, <a rel="DEFINITION" href=
"26_glo_s.htm#standardized"><i>standardized</i></a> <a rel=
"DEFINITION" href="26_glo_s.htm#stream_variable"><i>stream
variables</i></a> have names ending in "<tt>-input*</tt>" if they
must be <a rel="DEFINITION" href=
"26_glo_i.htm#input"><i>input</i></a> <a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>streams</i></a>, ending in
"<tt>-output*</tt>" if they must be <a rel="DEFINITION" href=
"26_glo_o.htm#output"><i>output</i></a> <a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>streams</i></a>, or ending in
"<tt>-io*</tt>" if they must be <a rel="DEFINITION" href=
"26_glo_b.htm#bidirectional"><i>bidirectional</i></a> <a rel=
"DEFINITION" href="26_glo_s.htm#stream"><i>streams</i></a>.</p>
<p>User programs may <a rel="DEFINITION" href=
"26_glo_a.htm#assign"><i>assign</i></a> or <a rel="DEFINITION"
href="26_glo_b.htm#bind"><i>bind</i></a> any <a rel="DEFINITION"
href="26_glo_s.htm#standardized"><i>standardized</i></a> <a rel=
"DEFINITION" href="26_glo_s.htm#stream_variable"><i>stream
variable</i></a> except <a rel="DEFINITION" href=
"v_termin.htm#STterminal-ioST"><b>*terminal-io*</b></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>21.1.3 Stream Arguments to Standardized Functions</h2>
<p>The <a rel="DEFINITION" href=
"26_glo_o.htm#operator"><i>operators</i></a> in the next figure
accept <a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>stream</i></a> <a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>arguments</i></a> that might be either
<a rel="DEFINITION" href="26_glo_o.htm#open"><i>open</i></a> or
<a rel="DEFINITION" href="26_glo_c.htm#closed"><i>closed</i></a>
<a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>streams</i></a>.</p>
<p><a name="openorclosedstreamops" id=
"openorclosedstreamops"></a></p>
<pre>
<a rel="DEFINITION" href=
"f_broadc.htm#broadcast-stream-streams">broadcast-stream-streams</a>     <a rel="DEFINITION"
href="f_file_a.htm#file-author">file-author</a>       <a rel=
"DEFINITION" href=
"f_pnp.htm#pathnamep">pathnamep</a>                     
<a rel="DEFINITION" href=
"f_close.htm#close">close</a>                        <a rel=
"DEFINITION" href=
"f_namest.htm#file-namestring">file-namestring</a>   <a rel=
"DEFINITION" href=
"f_probe_.htm#probe-file">probe-file</a>                    
<a rel="DEFINITION" href=
"f_cmp_fi.htm#compile-file">compile-file</a>                 <a rel="DEFINITION"
href="f_file_w.htm#file-write-date">file-write-date</a>   <a rel=
"DEFINITION" href=
"f_rn_fil.htm#rename-file">rename-file</a>                   
<a rel="DEFINITION" href=
"f_cmp__1.htm#compile-file-pathname">compile-file-pathname</a>        <a rel="DEFINITION"
href="f_namest.htm#host-namestring">host-namestring</a>   <a rel=
"DEFINITION" href=
"f_stmp.htm#streamp">streamp</a>                       
<a rel="DEFINITION" href=
"f_conc_1.htm#concatenated-stream-streams">concatenated-stream-streams</a>  <a rel="DEFINITION"
href="f_load.htm#load">load</a>              <a rel="DEFINITION"
href=
"f_syn_st.htm#synonym-stream-symbol">synonym-stream-symbol</a>         
<a rel="DEFINITION" href=
"f_del_fi.htm#delete-file">delete-file</a>                  <a rel=
"DEFINITION" href=
"a_logica.htm#logical-pathname">logical-pathname</a>  <a rel=
"DEFINITION" href=
"f_tr_log.htm#translate-logical-pathname">translate-logical-pathname</a>    
<a rel="DEFINITION" href=
"f_dir.htm#directory">directory</a>                    <a rel=
"DEFINITION" href=
"f_merge_.htm#merge-pathnames">merge-pathnames</a>   <a rel=
"DEFINITION" href=
"f_tr_pn.htm#translate-pathname">translate-pathname</a>            
<a rel="DEFINITION" href=
"f_namest.htm#directory-namestring">directory-namestring</a>         <a rel="DEFINITION"
href="f_namest.htm#namestring">namestring</a>        <a rel=
"DEFINITION" href=
"f_tn.htm#truename">truename</a>                      
<a rel="DEFINITION" href=
"f_dribbl.htm#dribble">dribble</a>                      <a rel=
"DEFINITION" href="f_open.htm#open">open</a>              <a rel=
"DEFINITION" href=
"f_two_wa.htm#two-way-stream-input-stream">two-way-stream-input-stream</a>   
<a rel="DEFINITION" href=
"f_echo_s.htm#echo-stream-input-stream">echo-stream-input-stream</a>     <a rel="DEFINITION"
href="f_open_s.htm#open-stream-p">open-stream-p</a>     <a rel=
"DEFINITION" href=
"f_two_wa.htm#two-way-stream-output-stream">two-way-stream-output-stream</a>  
echo-stream-ouput-stream     <a rel="DEFINITION" href=
"f_pars_1.htm#parse-namestring">parse-namestring</a>  <a rel=
"DEFINITION" href=
"f_wild_p.htm#wild-pathname-p">wild-pathname-p</a>               
<a rel="DEFINITION" href=
"f_ed.htm#ed">ed</a>                           <a rel="DEFINITION"
href="a_pn.htm#pathname">pathname</a>          <a rel="DEFINITION"
href=
"m_w_open.htm#with-open-file">with-open-file</a>                
<a rel="DEFINITION" href=
"f_namest.htm#enough-namestring">enough-namestring</a>            <a rel="DEFINITION"
href=
"f_pn_mat.htm#pathname-match-p">pathname-match-p</a>                                
</pre>
<p><b>Figure 21-7. Operators that accept either Open or Closed
Streams</b></p>
<p>The <a rel="DEFINITION" href=
"26_glo_o.htm#operator"><i>operators</i></a> in the next figure
accept <a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>stream</i></a> <a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>arguments</i></a> that must be <a rel=
"DEFINITION" href="26_glo_o.htm#open"><i>open</i></a> <a rel=
"DEFINITION" href="26_glo_s.htm#stream"><i>streams</i></a>.</p>
<pre>
<a rel="DEFINITION" href=
"f_clear_.htm#clear-input">clear-input</a>               <a rel=
"DEFINITION" href=
"f_in_stm.htm#output-stream-p">output-stream-p</a>          <a rel=
"DEFINITION" href=
"f_rd_c_1.htm#read-char-no-hang">read-char-no-hang</a>           
<a rel="DEFINITION" href=
"f_finish.htm#clear-output">clear-output</a>              <a rel=
"DEFINITION" href=
"f_peek_c.htm#peek-char">peek-char</a>                <a rel=
"DEFINITION" href=
"f_rd_del.htm#read-delimited-list">read-delimited-list</a>         
<a rel="DEFINITION" href=
"f_file_l.htm#file-length">file-length</a>               <a rel=
"DEFINITION" href=
"f_wr_pr.htm#pprint">pprint</a>                   <a rel=
"DEFINITION" href=
"f_rd_lin.htm#read-line">read-line</a>                   
<a rel="DEFINITION" href=
"f_file_p.htm#file-position">file-position</a>             <a rel=
"DEFINITION" href=
"f_ppr_fi.htm#pprint-fill">pprint-fill</a>              <a rel=
"DEFINITION" href=
"f_rd_rd.htm#read-preserving-whitespace">read-preserving-whitespace</a>  
<a rel="DEFINITION" href=
"f_file_s.htm#file-string-length">file-string-length</a>        <a rel="DEFINITION"
href=
"f_ppr_in.htm#pprint-indent">pprint-indent</a>            <a rel=
"DEFINITION" href=
"f_stm_el.htm#stream-element-type">stream-element-type</a>         
<a rel="DEFINITION" href=
"f_finish.htm#finish-output">finish-output</a>             <a rel=
"DEFINITION" href=
"f_ppr_fi.htm#pprint-linear">pprint-linear</a>            <a rel=
"DEFINITION" href=
"f_stm_ex.htm#stream-external-format">stream-external-format</a>      
<a rel="DEFINITION" href=
"f_finish.htm#force-output">force-output</a>              <a rel=
"DEFINITION" href=
"m_ppr_lo.htm#pprint-logical-block">pprint-logical-block</a>     <a rel="DEFINITION"
href="f_terpri.htm#terpri">terpri</a>                      
<a rel="DEFINITION" href=
"f_format.htm#format">format</a>                    <a rel=
"DEFINITION" href=
"f_ppr_nl.htm#pprint-newline">pprint-newline</a>           <a rel=
"DEFINITION" href=
"f_unrd_c.htm#unread-char">unread-char</a>                 
<a rel="DEFINITION" href=
"f_terpri.htm#fresh-line">fresh-line</a>                <a rel=
"DEFINITION" href=
"f_ppr_ta.htm#pprint-tab">pprint-tab</a>               <a rel=
"DEFINITION" href=
"m_w_op_1.htm#with-open-stream">with-open-stream</a>            
<a rel="DEFINITION" href=
"f_get_ou.htm#get-output-stream-string">get-output-stream-string</a>  <a rel="DEFINITION"
href=
"f_ppr_fi.htm#pprint-tabular">pprint-tabular</a>           <a rel=
"DEFINITION" href=
"f_wr_pr.htm#write">write</a>                       
<a rel="DEFINITION" href=
"f_in_stm.htm#input-stream-p">input-stream-p</a>            <a rel=
"DEFINITION" href=
"f_wr_pr.htm#prin1">prin1</a>                    <a rel=
"DEFINITION" href=
"f_wr_by.htm#write-byte">write-byte</a>                  
<a rel="DEFINITION" href=
"f_intera.htm#interactive-stream-p">interactive-stream-p</a>      <a rel="DEFINITION"
href="f_wr_pr.htm#princ">princ</a>                    <a rel=
"DEFINITION" href=
"f_wr_cha.htm#write-char">write-char</a>                  
<a rel="DEFINITION" href=
"f_listen.htm#listen">listen</a>                    <a rel=
"DEFINITION" href=
"f_wr_pr.htm#print">print</a>                    <a rel=
"DEFINITION" href=
"f_wr_stg.htm#write-line">write-line</a>                  
<a rel="DEFINITION" href=
"f_mk_bro.htm#make-broadcast-stream">make-broadcast-stream</a>     <a rel="DEFINITION"
href=
"f_pr_obj.htm#print-object">print-object</a>             <a rel=
"DEFINITION" href=
"f_wr_stg.htm#write-string">write-string</a>                
<a rel="DEFINITION" href=
"f_mk_con.htm#make-concatenated-stream">make-concatenated-stream</a>  <a rel="DEFINITION"
href=
"m_pr_unr.htm#print-unreadable-object">print-unreadable-object</a>  <a rel="DEFINITION"
href="f_y_or_n.htm#y-or-n-p">y-or-n-p</a>                    
<a rel="DEFINITION" href=
"f_mk_ech.htm#make-echo-stream">make-echo-stream</a>          <a rel="DEFINITION"
href="f_rd_rd.htm#read">read</a>                     <a rel=
"DEFINITION" href=
"f_y_or_n.htm#yes-or-no-p">yes-or-no-p</a>                 
<a rel="DEFINITION" href=
"f_mk_syn.htm#make-synonym-stream">make-synonym-stream</a>       <a rel="DEFINITION"
href=
"f_rd_by.htm#read-byte">read-byte</a>                                            
<a rel="DEFINITION" href=
"f_mk_two.htm#make-two-way-stream">make-two-way-stream</a>       <a rel="DEFINITION"
href=
"f_rd_cha.htm#read-char">read-char</a>                                            
</pre>
<p><b>Figure 21-8. Operators that accept Open Streams only</b></p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>21.1.4 Restrictions on Composite Streams</h2>
<p>The consequences are undefined if any <i>component</i> of a
<a rel="DEFINITION" href=
"26_glo_c.htm#composite_stream"><i>composite stream</i></a> is
<a rel="DEFINITION" href="26_glo_c.htm#closed"><i>closed</i></a>
before the <a rel="DEFINITION" href=
"26_glo_c.htm#composite_stream"><i>composite stream</i></a> is
<a rel="DEFINITION" href=
"26_glo_c.htm#closed"><i>closed</i></a>.</p>
<p>The consequences are undefined if the <a rel="DEFINITION" href=
"26_glo_s.htm#synonym_stream_symbol"><i>synonym stream
symbol</i></a> is not <a rel="DEFINITION" href=
"26_glo_b.htm#bound"><i>bound</i></a> to an <a rel="DEFINITION"
href="26_glo_o.htm#open"><i>open</i></a> <a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>stream</i></a> from the time of the
<a rel="DEFINITION" href="26_glo_s.htm#synonym_stream"><i>synonym
stream</i></a>'s creation until the time it is <a rel="DEFINITION"
href="26_glo_c.htm#closed"><i>closed</i></a>.</p>
</body>
</html>
