<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content=
"HTML Tidy for Linux/x86 (vers 12 April 2005), see www.w3.org">
<title>CLHS: Chapter 3</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="02_di.htm">
<link rel="UP" href="../Front/Contents.htm">
<link rel="NEXT" href="03_a.htm">
<title>CLHS: Section 3.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_.htm">
<link rel="UP" href="03_.htm">
<link rel="NEXT" href="03_aa.htm">
<title>CLHS: Section 3.1.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_a.htm">
<link rel="UP" href="03_a.htm">
<link rel="NEXT" href="03_aaa.htm">
<title>CLHS: Section 3.1.1.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_aa.htm">
<link rel="UP" href="03_aa.htm">
<link rel="NEXT" href="03_aab.htm">
<title>CLHS: Section 3.1.1.2</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_aaa.htm">
<link rel="UP" href="03_aa.htm">
<link rel="NEXT" href="03_aac.htm">
<title>CLHS: Section 3.1.1.3</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_aab.htm">
<link rel="UP" href="03_aa.htm">
<link rel="NEXT" href="03_aaca.htm">
<title>CLHS: Section 3.1.1.3.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_aac.htm">
<link rel="UP" href="03_aac.htm">
<link rel="NEXT" href="03_aad.htm">
<title>CLHS: Section 3.1.1.4</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_aaca.htm">
<link rel="UP" href="03_aa.htm">
<link rel="NEXT" href="03_ab.htm">
<title>CLHS: Section 3.1.2</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_aad.htm">
<link rel="UP" href="03_a.htm">
<link rel="NEXT" href="03_aba.htm">
<title>CLHS: Section 3.1.2.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_ab.htm">
<link rel="UP" href="03_ab.htm">
<link rel="NEXT" href="03_abaa.htm">
<title>CLHS: Section 3.1.2.1.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_aba.htm">
<link rel="UP" href="03_aba.htm">
<link rel="NEXT" href="03_abaaa.htm">
<title>CLHS: Section 3.1.2.1.1.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_abaa.htm">
<link rel="UP" href="03_abaa.htm">
<link rel="NEXT" href="03_abaab.htm">
<title>CLHS: Section 3.1.2.1.1.2</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_abaaa.htm">
<link rel="UP" href="03_abaa.htm">
<link rel="NEXT" href="03_abaac.htm">
<title>CLHS: Section 3.1.2.1.1.3</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_abaab.htm">
<link rel="UP" href="03_abaa.htm">
<link rel="NEXT" href="03_abaad.htm">
<title>CLHS: Section 3.1.2.1.1.4</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_abaac.htm">
<link rel="UP" href="03_abaa.htm">
<link rel="NEXT" href="03_abab.htm">
<title>CLHS: Section 3.1.2.1.2</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_abaad.htm">
<link rel="UP" href="03_aba.htm">
<link rel="NEXT" href="03_ababa.htm">
<title>CLHS: Section 3.1.2.1.2.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_abab.htm">
<link rel="UP" href="03_abab.htm">
<link rel="NEXT" href="03_ababb.htm">
<title>CLHS: Section 3.1.2.1.2.2</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_ababa.htm">
<link rel="UP" href="03_abab.htm">
<link rel="NEXT" href="03_ababc.htm">
<title>CLHS: Section 3.1.2.1.2.3</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_ababb.htm">
<link rel="UP" href="03_abab.htm">
<link rel="NEXT" href="03_ababd.htm">
<title>CLHS: Section 3.1.2.1.2.4</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_ababc.htm">
<link rel="UP" href="03_abab.htm">
<link rel="NEXT" href="03_abac.htm">
<title>CLHS: Section 3.1.2.1.3</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_ababd.htm">
<link rel="UP" href="03_aba.htm">
<link rel="NEXT" href="03_abaca.htm">
<title>CLHS: Section 3.1.2.1.3.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_abac.htm">
<link rel="UP" href="03_abac.htm">
<link rel="NEXT" href="03_ac.htm">
<title>CLHS: Section 3.1.3</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_abaca.htm">
<link rel="UP" href="03_a.htm">
<link rel="NEXT" href="03_ad.htm">
<title>CLHS: Section 3.1.4</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_ac.htm">
<link rel="UP" href="03_a.htm">
<link rel="NEXT" href="03_ae.htm">
<title>CLHS: Section 3.1.5</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_ad.htm">
<link rel="UP" href="03_a.htm">
<link rel="NEXT" href="03_af.htm">
<title>CLHS: Section 3.1.6</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_ae.htm">
<link rel="UP" href="03_a.htm">
<link rel="NEXT" href="03_ag.htm">
<title>CLHS: Section 3.1.7</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_af.htm">
<link rel="UP" href="03_a.htm">
<link rel="NEXT" href="03_b.htm">
<title>CLHS: Section 3.2</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_ag.htm">
<link rel="UP" href="03_.htm">
<link rel="NEXT" href="03_ba.htm">
<title>CLHS: Section 3.2.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_b.htm">
<link rel="UP" href="03_b.htm">
<link rel="NEXT" href="03_bb.htm">
<title>CLHS: Section 3.2.2</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_ba.htm">
<link rel="UP" href="03_b.htm">
<link rel="NEXT" href="03_bba.htm">
<title>CLHS: Section 3.2.2.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_bb.htm">
<link rel="UP" href="03_bb.htm">
<link rel="NEXT" href="03_bbaa.htm">
<title>CLHS: Section 3.2.2.1.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_bba.htm">
<link rel="UP" href="03_bba.htm">
<link rel="NEXT" href="03_bbab.htm">
<title>CLHS: Section 3.2.2.1.2</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_bbaa.htm">
<link rel="UP" href="03_bba.htm">
<link rel="NEXT" href="03_bbac.htm">
<title>CLHS: Section 3.2.2.1.3</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_bbab.htm">
<link rel="UP" href="03_bba.htm">
<link rel="NEXT" href="03_bbaca.htm">
<title>CLHS: Section 3.2.2.1.3.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_bbac.htm">
<link rel="UP" href="03_bbac.htm">
<link rel="NEXT" href="03_bbb.htm">
<title>CLHS: Section 3.2.2.2</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_bbaca.htm">
<link rel="UP" href="03_bb.htm">
<link rel="NEXT" href="03_bbc.htm">
<title>CLHS: Section 3.2.2.3</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_bbb.htm">
<link rel="UP" href="03_bb.htm">
<link rel="NEXT" href="03_bc.htm">
<title>CLHS: Section 3.2.3</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_bbc.htm">
<link rel="UP" href="03_b.htm">
<link rel="NEXT" href="03_bca.htm">
<title>CLHS: Section 3.2.3.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_bc.htm">
<link rel="UP" href="03_bc.htm">
<link rel="NEXT" href="03_bcaa.htm">
<title>CLHS: Section 3.2.3.1.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_bca.htm">
<link rel="UP" href="03_bca.htm">
<link rel="NEXT" href="03_bcab.htm">
<title>CLHS: Section 3.2.3.1.2</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_bcaa.htm">
<link rel="UP" href="03_bca.htm">
<link rel="NEXT" href="03_bd.htm">
<title>CLHS: Section 3.2.4</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_bcab.htm">
<link rel="UP" href="03_b.htm">
<link rel="NEXT" href="03_bda.htm">
<title>CLHS: Section 3.2.4.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_bd.htm">
<link rel="UP" href="03_bd.htm">
<link rel="NEXT" href="03_bdb.htm">
<title>CLHS: Section 3.2.4.2</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_bda.htm">
<link rel="UP" href="03_bd.htm">
<link rel="NEXT" href="03_bdba.htm">
<title>CLHS: Section 3.2.4.2.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_bdb.htm">
<link rel="UP" href="03_bdb.htm">
<link rel="NEXT" href="03_bdbb.htm">
<title>CLHS: Section 3.2.4.2.2</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_bdba.htm">
<link rel="UP" href="03_bdb.htm">
<link rel="NEXT" href="03_bdc.htm">
<title>CLHS: Section 3.2.4.3</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_bdbb.htm">
<link rel="UP" href="03_bd.htm">
<link rel="NEXT" href="03_bdd.htm">
<title>CLHS: Section 3.2.4.4</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_bdc.htm">
<link rel="UP" href="03_bd.htm">
<link rel="NEXT" href="03_be.htm">
<title>CLHS: Section 3.2.5</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_bdd.htm">
<link rel="UP" href="03_b.htm">
<link rel="NEXT" href="03_c.htm">
<title>CLHS: Section 3.3</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_be.htm">
<link rel="UP" href="03_.htm">
<link rel="NEXT" href="03_ca.htm">
<title>CLHS: Section 3.3.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_c.htm">
<link rel="UP" href="03_c.htm">
<link rel="NEXT" href="03_cb.htm">
<title>CLHS: Section 3.3.2</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_ca.htm">
<link rel="UP" href="03_c.htm">
<link rel="NEXT" href="03_cc.htm">
<title>CLHS: Section 3.3.3</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_cb.htm">
<link rel="UP" href="03_c.htm">
<link rel="NEXT" href="03_cca.htm">
<title>CLHS: Section 3.3.3.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_cc.htm">
<link rel="UP" href="03_cc.htm">
<link rel="NEXT" href="03_cd.htm">
<title>CLHS: Section 3.3.4</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_cca.htm">
<link rel="UP" href="03_c.htm">
<link rel="NEXT" href="03_cda.htm">
<title>CLHS: Section 3.3.4.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_cd.htm">
<link rel="UP" href="03_cd.htm">
<link rel="NEXT" href="03_d.htm">
<title>CLHS: Section 3.4</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_cda.htm">
<link rel="UP" href="03_.htm">
<link rel="NEXT" href="03_da.htm">
<title>CLHS: Section 3.4.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_d.htm">
<link rel="UP" href="03_d.htm">
<link rel="NEXT" href="03_daa.htm">
<title>CLHS: Section 3.4.1.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_da.htm">
<link rel="UP" href="03_da.htm">
<link rel="NEXT" href="03_dab.htm">
<title>CLHS: Section 3.4.1.2</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_daa.htm">
<link rel="UP" href="03_da.htm">
<link rel="NEXT" href="03_dac.htm">
<title>CLHS: Section 3.4.1.3</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_dab.htm">
<link rel="UP" href="03_da.htm">
<link rel="NEXT" href="03_dad.htm">
<title>CLHS: Section 3.4.1.4</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_dac.htm">
<link rel="UP" href="03_da.htm">
<link rel="NEXT" href="03_dada.htm">
<title>CLHS: Section 3.4.1.4.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_dad.htm">
<link rel="UP" href="03_dad.htm">
<link rel="NEXT" href="03_dadaa.htm">
<title>CLHS: Section 3.4.1.4.1.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_dada.htm">
<link rel="UP" href="03_dada.htm">
<link rel="NEXT" href="03_dae.htm">
<title>CLHS: Section 3.4.1.5</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_dadaa.htm">
<link rel="UP" href="03_da.htm">
<link rel="NEXT" href="03_daf.htm">
<title>CLHS: Section 3.4.1.6</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_dae.htm">
<link rel="UP" href="03_da.htm">
<link rel="NEXT" href="03_db.htm">
<title>CLHS: Section 3.4.2</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_daf.htm">
<link rel="UP" href="03_d.htm">
<link rel="NEXT" href="03_dc.htm">
<title>CLHS: Section 3.4.3</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_db.htm">
<link rel="UP" href="03_d.htm">
<link rel="NEXT" href="03_dd.htm">
<title>CLHS: Section 3.4.4</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_dc.htm">
<link rel="UP" href="03_d.htm">
<link rel="NEXT" href="03_dda.htm">
<title>CLHS: Section 3.4.4.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_dd.htm">
<link rel="UP" href="03_dd.htm">
<link rel="NEXT" href="03_ddaa.htm">
<title>CLHS: Section 3.4.4.1.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_dda.htm">
<link rel="UP" href="03_dda.htm">
<link rel="NEXT" href="03_ddaaa.htm">
<title>CLHS: Section 3.4.4.1.1.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_ddaa.htm">
<link rel="UP" href="03_ddaa.htm">
<link rel="NEXT" href="03_ddab.htm">
<title>CLHS: Section 3.4.4.1.2</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_ddaaa.htm">
<link rel="UP" href="03_dda.htm">
<link rel="NEXT" href="03_de.htm">
<title>CLHS: Section 3.4.5</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_ddab.htm">
<link rel="UP" href="03_d.htm">
<link rel="NEXT" href="03_df.htm">
<title>CLHS: Section 3.4.6</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_de.htm">
<link rel="UP" href="03_d.htm">
<link rel="NEXT" href="03_dg.htm">
<title>CLHS: Section 3.4.7</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_df.htm">
<link rel="UP" href="03_d.htm">
<link rel="NEXT" href="03_dh.htm">
<title>CLHS: Section 3.4.8</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_dg.htm">
<link rel="UP" href="03_d.htm">
<link rel="NEXT" href="03_di.htm">
<title>CLHS: Section 3.4.9</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_dh.htm">
<link rel="UP" href="03_d.htm">
<link rel="NEXT" href="03_dj.htm">
<title>CLHS: Section 3.4.10</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_di.htm">
<link rel="UP" href="03_d.htm">
<link rel="NEXT" href="03_dk.htm">
<title>CLHS: Section 3.4.11</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_dj.htm">
<link rel="UP" href="03_d.htm">
<link rel="NEXT" href="03_e.htm">
<title>CLHS: Section 3.5</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_dk.htm">
<link rel="UP" href="03_.htm">
<link rel="NEXT" href="03_ea.htm">
<title>CLHS: Section 3.5.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_e.htm">
<link rel="UP" href="03_e.htm">
<link rel="NEXT" href="03_eaa.htm">
<title>CLHS: Section 3.5.1.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_ea.htm">
<link rel="UP" href="03_ea.htm">
<link rel="NEXT" href="03_eaaa.htm">
<title>CLHS: Section 3.5.1.1.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_eaa.htm">
<link rel="UP" href="03_eaa.htm">
<link rel="NEXT" href="03_eab.htm">
<title>CLHS: Section 3.5.1.2</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_eaaa.htm">
<link rel="UP" href="03_ea.htm">
<link rel="NEXT" href="03_eac.htm">
<title>CLHS: Section 3.5.1.3</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_eab.htm">
<link rel="UP" href="03_ea.htm">
<link rel="NEXT" href="03_ead.htm">
<title>CLHS: Section 3.5.1.4</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_eac.htm">
<link rel="UP" href="03_ea.htm">
<link rel="NEXT" href="03_eae.htm">
<title>CLHS: Section 3.5.1.5</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_ead.htm">
<link rel="UP" href="03_ea.htm">
<link rel="NEXT" href="03_eaf.htm">
<title>CLHS: Section 3.5.1.6</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_eae.htm">
<link rel="UP" href="03_ea.htm">
<link rel="NEXT" href="03_eag.htm">
<title>CLHS: Section 3.5.1.7</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_eaf.htm">
<link rel="UP" href="03_ea.htm">
<link rel="NEXT" href="03_eah.htm">
<title>CLHS: Section 3.5.1.8</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_eag.htm">
<link rel="UP" href="03_ea.htm">
<link rel="NEXT" href="03_f.htm">
<title>CLHS: Section 3.6</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_eah.htm">
<link rel="UP" href="03_.htm">
<link rel="NEXT" href="03_g.htm">
<title>CLHS: Section 3.7</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_f.htm">
<link rel="UP" href="03_.htm">
<link rel="NEXT" href="03_ga.htm">
<title>CLHS: Section 3.7.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_g.htm">
<link rel="UP" href="03_g.htm">
<link rel="NEXT" href="03_gb.htm">
<title>CLHS: Section 3.7.2</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_ga.htm">
<link rel="UP" href="03_g.htm">
<link rel="NEXT" href="03_gba.htm">
<title>CLHS: Section 3.7.2.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="03_gb.htm">
<link rel="UP" href="03_gb.htm">
<link rel="NEXT" href="c_evalua.htm">
</head>
<body>
<p><a name="chapthree" id="chapthree"></a><a name=
"evaluationandcompilation" id="evaluationandcompilation"></a></p>
<h2>3. Evaluation and Compilation</h2>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1 Evaluation</h2>
<p><i>Execution</i> of <a rel="DEFINITION" href=
"26_glo_c.htm#code"><i>code</i></a> can be accomplished by a
variety of means ranging from direct interpretation of a <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> representing
a <a rel="DEFINITION" href=
"26_glo_p.htm#program"><i>program</i></a> to invocation of <a rel=
"DEFINITION" href="26_glo_c.htm#compiled_code"><i>compiled
code</i></a> produced by a <a rel="DEFINITION" href=
"26_glo_c.htm#compiler"><i>compiler</i></a>.</p>
<p><a rel="DEFINITION" href=
"26_glo_e.htm#evaluation"><i>Evaluation</i></a> is the process by
which a <a rel="DEFINITION" href=
"26_glo_p.htm#program"><i>program</i></a> is <i>executed</i> in
Common Lisp. The mechanism of <a rel="DEFINITION" href=
"26_glo_e.htm#evaluation"><i>evaluation</i></a> is manifested both
implicitly through the effect of the <a rel="DEFINITION" href=
"26_glo_l.htm#lisp_read-eval-print_loop"><i>Lisp read-eval-print
loop</i></a>, and explicitly through the presence of the <a rel=
"DEFINITION" href="26_glo_f.htm#function"><i>functions</i></a>
<a rel="DEFINITION" href="f_eval.htm#eval"><b>eval</b></a>, <a rel=
"DEFINITION" href="f_cmp.htm#compile"><b>compile</b></a>, <a rel=
"DEFINITION" href=
"f_cmp_fi.htm#compile-file"><b>compile-file</b></a>, and <a rel=
"DEFINITION" href="f_load.htm#load"><b>load</b></a>. Any of these
facilities might share the same execution strategy, or each might
use a different one.</p>
<p>The behavior of a <a rel="DEFINITION" href=
"26_glo_c.htm#conforming_program"><i>conforming program</i></a>
processed by <a rel="DEFINITION" href=
"f_eval.htm#eval"><b>eval</b></a> and by <a rel="DEFINITION" href=
"f_cmp_fi.htm#compile-file"><b>compile-file</b></a> might differ;
see <a rel="CHILD" href="03_bbc.htm">Section 3.2.2.3 (Semantic
Constraints)</a>.</p>
<p><a rel="DEFINITION" href=
"26_glo_e.htm#evaluation"><i>Evaluation</i></a> can be understood
in terms of a model in which an interpreter recursively traverses a
<a rel="DEFINITION" href="26_glo_f.htm#form"><i>form</i></a>
performing each step of the computation as it goes. This model,
which describes the semantics of Common Lisp <a rel="DEFINITION"
href="26_glo_p.htm#program"><i>programs</i></a>, is described in
<a rel="CHILD" href="03_ab.htm">Section 3.1.2 (The Evaluation
Model)</a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1.1 Introduction to Environments</h2>
<p>A <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> is an association between
a <a rel="DEFINITION" href="26_glo_n.htm#name"><i>name</i></a> and
that which the name denotes. <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>Bindings</i></a> are <i>established</i>
in a <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_environment"><i>lexical environment</i></a>
or a <a rel="DEFINITION" href=
"26_glo_d.htm#dynamic_environment"><i>dynamic environment</i></a>
by particular <a rel="DEFINITION" href=
"26_glo_s.htm#special_operator"><i>special operators</i></a>.</p>
<p>An <a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environment</i></a> is a set of
<a rel="DEFINITION" href="26_glo_b.htm#binding"><i>bindings</i></a>
and other information used during evaluation (e.g., to associate
meanings with names).</p>
<p><a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>Bindings</i></a> in an <a rel=
"DEFINITION" href="26_glo_e.htm#environment"><i>environment</i></a>
are partitioned into <a rel="DEFINITION" href=
"26_glo_n.htm#namespace"><i>namespaces</i></a>. A single <a rel=
"DEFINITION" href="26_glo_n.htm#name"><i>name</i></a> can
simultaneously have more than one associated <a rel="DEFINITION"
href="26_glo_b.htm#binding"><i>binding</i></a> per <a rel=
"DEFINITION" href=
"26_glo_e.htm#environment"><i>environment</i></a>, but can have
only one associated <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> per <a rel="DEFINITION"
href="26_glo_n.htm#namespace"><i>namespace</i></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1.1.1 The Global Environment</h2>
<p>The <a rel="DEFINITION" href=
"26_glo_g.htm#global_environment"><i>global environment</i></a> is
that part of an <a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environment</i></a> that contains
<a rel="DEFINITION" href="26_glo_b.htm#binding"><i>bindings</i></a>
with both <a rel="DEFINITION" href=
"26_glo_i.htm#indefinite_scope"><i>indefinite scope</i></a> and
<a rel="DEFINITION" href=
"26_glo_i.htm#indefinite_extent"><i>indefinite extent</i></a>. The
<a rel="DEFINITION" href=
"26_glo_g.htm#global_environment"><i>global environment</i></a>
contains, among other things, the following:</p>
<ul>
<li><a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>bindings</i></a> of <a rel="DEFINITION"
href="26_glo_d.htm#dynamic_variable"><i>dynamic variables</i></a>
and <a rel="DEFINITION" href=
"26_glo_c.htm#constant_variable"><i>constant
variables</i></a>.</li>
<li><a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>bindings</i></a> of <a rel="DEFINITION"
href="26_glo_f.htm#function"><i>functions</i></a>, <a rel=
"DEFINITION" href="26_glo_m.htm#macro"><i>macros</i></a>, and
<a rel="DEFINITION" href="26_glo_s.htm#special_operator"><i>special
operators</i></a>.</li>
<li><a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>bindings</i></a> of <a rel="DEFINITION"
href="26_glo_c.htm#compiler_macro"><i>compiler macros</i></a>.</li>
<li><a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>bindings</i></a> of <a rel="DEFINITION"
href="26_glo_t.htm#type"><i>type</i></a> and <a rel="DEFINITION"
href="26_glo_c.htm#class"><i>class</i></a> <a rel="DEFINITION"
href="26_glo_n.htm#name"><i>names</i></a></li>
<li>information about <a rel="DEFINITION" href=
"26_glo_p.htm#proclamation"><i>proclamations</i></a>.</li>
</ul>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1.1.2 Dynamic Environments</h2>
<p>A <a rel="DEFINITION" href=
"26_glo_d.htm#dynamic_environment"><i>dynamic environment</i></a>
for <a rel="DEFINITION" href=
"26_glo_e.htm#evaluation"><i>evaluation</i></a> is that part of an
<a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environment</i></a> that contains
<a rel="DEFINITION" href="26_glo_b.htm#binding"><i>bindings</i></a>
whose duration is bounded by points of <i>establishment</i> and
<i>disestablishment</i> within the execution of the <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> that
established the <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a>. A <a rel="DEFINITION"
href="26_glo_d.htm#dynamic_environment"><i>dynamic
environment</i></a> contains, among other things, the
following:</p>
<ul>
<li><a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>bindings</i></a> for <a rel="DEFINITION"
href="26_glo_d.htm#dynamic_variable"><i>dynamic
variables</i></a>.</li>
<li>information about <a rel="DEFINITION" href=
"26_glo_a.htm#active"><i>active</i></a> <a rel="DEFINITION" href=
"26_glo_c.htm#catch_tag"><i>catch tags</i></a>.</li>
<li>information about <a rel="DEFINITION" href=
"26_glo_e.htm#exit_point"><i>exit points</i></a> established by
<a rel="DEFINITION" href=
"s_unwind.htm#unwind-protect"><b>unwind-protect</b></a>.</li>
<li>information about <a rel="DEFINITION" href=
"26_glo_a.htm#active"><i>active</i></a> <a rel="DEFINITION" href=
"26_glo_h.htm#handler"><i>handlers</i></a> and <a rel="DEFINITION"
href="26_glo_r.htm#restart"><i>restarts</i></a>.</li>
</ul>
<p>The <a rel="DEFINITION" href=
"26_glo_d.htm#dynamic_environment"><i>dynamic environment</i></a>
that is active at any given point in the <i>execution</i> of a
<a rel="DEFINITION" href="26_glo_p.htm#program"><i>program</i></a>
is referred to by definite reference as "the current <a rel=
"DEFINITION" href="26_glo_d.htm#dynamic_environment"><i>dynamic
environment</i></a>," or sometimes as just "the <a rel="DEFINITION"
href="26_glo_d.htm#dynamic_environment"><i>dynamic
environment</i></a>."</p>
<p>Within a given <a rel="DEFINITION" href=
"26_glo_n.htm#namespace"><i>namespace</i></a>, a <a rel=
"DEFINITION" href="26_glo_n.htm#name"><i>name</i></a> is said to be
<a rel="DEFINITION" href="26_glo_b.htm#bound"><i>bound</i></a> in a
<a rel="DEFINITION" href=
"26_glo_d.htm#dynamic_environment"><i>dynamic environment</i></a>
if there is a <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> associated with its
<a rel="DEFINITION" href="26_glo_n.htm#name"><i>name</i></a> in the
<a rel="DEFINITION" href=
"26_glo_d.htm#dynamic_environment"><i>dynamic environment</i></a>
or, if not, there is a <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> associated with its name
in the <a rel="DEFINITION" href=
"26_glo_g.htm#global_environment"><i>global
environment</i></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1.1.3 Lexical Environments</h2>
<p>A <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_environment"><i>lexical environment</i></a>
for <a rel="DEFINITION" href=
"26_glo_e.htm#evaluation"><i>evaluation</i></a> at some position in
a <a rel="DEFINITION" href=
"26_glo_p.htm#program"><i>program</i></a> is that part of the
<a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environment</i></a> that contains
information having <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_scope"><i>lexical scope</i></a> within the
<a rel="DEFINITION" href="26_glo_f.htm#form"><i>forms</i></a>
containing that position. A <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_environment"><i>lexical environment</i></a>
contains, among other things, the following:</p>
<ul>
<li><a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>bindings</i></a> of <a rel="DEFINITION"
href="26_glo_l.htm#lexical_variable"><i>lexical variables</i></a>
and <a rel="DEFINITION" href="26_glo_s.htm#symbol_macro"><i>symbol
macros</i></a>.</li>
<li><a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>bindings</i></a> of <a rel="DEFINITION"
href="26_glo_f.htm#function"><i>functions</i></a> and <a rel=
"DEFINITION" href="26_glo_m.htm#macro"><i>macros</i></a>. (Implicit
in this is information about those <a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro"><i>compiler macros</i></a> that are
locally disabled.)</li>
<li><a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>bindings</i></a> of <a rel="DEFINITION"
href="26_glo_b.htm#block_tag"><i>block tags</i></a>.</li>
<li><a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>bindings</i></a> of <a rel="DEFINITION"
href="26_glo_g.htm#go_tag"><i>go tags</i></a>.</li>
<li>information about <a rel="DEFINITION" href=
"26_glo_d.htm#declaration"><i>declarations</i></a>.</li>
</ul>
<p>The <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_environment"><i>lexical environment</i></a>
that is active at any given position in a <a rel="DEFINITION" href=
"26_glo_p.htm#program"><i>program</i></a> being semantically
processed is referred to by definite reference as "the current
<a rel="DEFINITION" href=
"26_glo_l.htm#lexical_environment"><i>lexical environment</i></a>,"
or sometimes as just "the <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_environment"><i>lexical
environment</i></a>."</p>
<p>Within a given <a rel="DEFINITION" href=
"26_glo_n.htm#namespace"><i>namespace</i></a>, a <a rel=
"DEFINITION" href="26_glo_n.htm#name"><i>name</i></a> is said to be
<a rel="DEFINITION" href="26_glo_b.htm#bound"><i>bound</i></a> in a
<a rel="DEFINITION" href=
"26_glo_l.htm#lexical_environment"><i>lexical environment</i></a>
if there is a <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> associated with its
<a rel="DEFINITION" href="26_glo_n.htm#name"><i>name</i></a> in the
<a rel="DEFINITION" href=
"26_glo_l.htm#lexical_environment"><i>lexical environment</i></a>
or, if not, there is a <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> associated with its name
in the <a rel="DEFINITION" href=
"26_glo_g.htm#global_environment"><i>global
environment</i></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1.1.3.1 The Null Lexical Environment</h2>
<p>The <a rel="DEFINITION" href=
"26_glo_n.htm#null_lexical_environment"><i>null lexical
environment</i></a> is equivalent to the <a rel="DEFINITION" href=
"26_glo_g.htm#global_environment"><i>global
environment</i></a>.</p>
<p>Although in general the representation of an <a rel="DEFINITION"
href="26_glo_e.htm#environment"><i>environment</i></a> <a rel=
"DEFINITION" href="26_glo_o.htm#object"><i>object</i></a> is
<a rel="DEFINITION" href=
"26_glo_i.htm#implementation-dependent"><i>implementation-dependent</i></a>,
<a rel="DEFINITION" href="a_nil.htm#nil"><b>nil</b></a> can be used
in any situation where an <a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environment</i></a> <a rel=
"DEFINITION" href="26_glo_o.htm#object"><i>object</i></a> is called
for in order to denote the <a rel="DEFINITION" href=
"26_glo_n.htm#null_lexical_environment"><i>null lexical
environment</i></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1.1.4 Environment Objects</h2>
<p>Some <a rel="DEFINITION" href=
"26_glo_o.htm#operator"><i>operators</i></a> make use of an <a rel=
"DEFINITION" href="26_glo_o.htm#object"><i>object</i></a>, called
an <a rel="DEFINITION" href=
"26_glo_e.htm#environment_object"><i>environment object</i></a>,
that represents the set of <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_binding"><i>lexical bindings</i></a> needed
to perform semantic analysis on a <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> in a given <a rel="DEFINITION"
href="26_glo_l.htm#lexical_environment"><i>lexical
environment</i></a>. The set of <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>bindings</i></a> in an <a rel=
"DEFINITION" href="26_glo_e.htm#environment_object"><i>environment
object</i></a> may be a subset of the <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>bindings</i></a> that would be needed to
actually perform an <a rel="DEFINITION" href=
"26_glo_e.htm#evaluation"><i>evaluation</i></a>; for example,
<a rel="DEFINITION" href="26_glo_v.htm#value"><i>values</i></a>
associated with <a rel="DEFINITION" href=
"26_glo_v.htm#variable"><i>variable</i></a> <a rel="DEFINITION"
href="26_glo_n.htm#name"><i>names</i></a> and <a rel="DEFINITION"
href="26_glo_f.htm#function_name"><i>function names</i></a> in the
corresponding <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_environment"><i>lexical environment</i></a>
might not be available in an <a rel="DEFINITION" href=
"26_glo_e.htm#environment_object"><i>environment
object</i></a>.</p>
<p>The <a rel="DEFINITION" href="26_glo_t.htm#type"><i>type</i></a>
and nature of an <a rel="DEFINITION" href=
"26_glo_e.htm#environment_object"><i>environment object</i></a> is
<a rel="DEFINITION" href=
"26_glo_i.htm#implementation-dependent"><i>implementation-dependent</i></a>.
The <a rel="DEFINITION" href="26_glo_v.htm#value"><i>values</i></a>
of <a rel="DEFINITION" href=
"26_glo_e.htm#environment_parameter"><i>environment
parameters</i></a> to <a rel="DEFINITION" href=
"26_glo_m.htm#macro_function"><i>macro functions</i></a> are
examples of <a rel="DEFINITION" href=
"26_glo_e.htm#environment_object"><i>environment
objects</i></a>.</p>
<p>The <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a> <a rel="DEFINITION" href=
"a_nil.htm#nil"><b>nil</b></a> when used as an <a rel="DEFINITION"
href="26_glo_e.htm#environment_object"><i>environment
object</i></a> denotes the <a rel="DEFINITION" href=
"26_glo_n.htm#null_lexical_environment"><i>null lexical
environment</i></a>; see <a rel="CHILD" href="03_aaca.htm">Section
3.1.1.3.1 (The Null Lexical Environment)</a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1.2 The Evaluation Model</h2>
<p>A Common Lisp system evaluates <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>forms</i></a> with respect to lexical,
dynamic, and global <a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environments</i></a>. The following
sections describe the components of the Common Lisp evaluation
model.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1.2.1 Form Evaluation</h2>
<p><a rel="DEFINITION" href="26_glo_f.htm#form"><i>Forms</i></a>
fall into three categories: <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbols</i></a>, <a rel="DEFINITION" href=
"26_glo_c.htm#cons"><i>conses</i></a>, and <a rel="DEFINITION"
href="26_glo_s.htm#self-evaluating_object"><i>self-evaluating
objects</i></a>. The following sections explain these
categories.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1.2.1.1 Symbols as Forms</h2>
<p>If a <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> is a <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbol</i></a>, then it is either a
<a rel="DEFINITION" href="26_glo_s.htm#symbol_macro"><i>symbol
macro</i></a> or a <a rel="DEFINITION" href=
"26_glo_v.htm#variable"><i>variable</i></a>.</p>
<p>The <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbol</i></a> names a <a rel="DEFINITION"
href="26_glo_s.htm#symbol_macro"><i>symbol macro</i></a> if there
is a <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> of the <a rel=
"DEFINITION" href="26_glo_s.htm#symbol"><i>symbol</i></a> as a
<a rel="DEFINITION" href="26_glo_s.htm#symbol_macro"><i>symbol
macro</i></a> in the current <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_environment"><i>lexical environment</i></a>
(see <a rel="DEFINITION" href=
"m_defi_1.htm#define-symbol-macro"><b>define-symbol-macro</b></a>
and <a rel="DEFINITION" href=
"s_symbol.htm#symbol-macrolet"><b>symbol-macrolet</b></a>). If the
<a rel="DEFINITION" href="26_glo_s.htm#symbol"><i>symbol</i></a> is
a <a rel="DEFINITION" href="26_glo_s.htm#symbol_macro"><i>symbol
macro</i></a>, its expansion function is obtained. The expansion
function is a function of two arguments, and is invoked by calling
the <a rel="DEFINITION" href=
"26_glo_m.htm#macroexpand_hook"><i>macroexpand hook</i></a> with
the expansion function as its first argument, the <a rel=
"DEFINITION" href="26_glo_s.htm#symbol"><i>symbol</i></a> as its
second argument, and an <a rel="DEFINITION" href=
"26_glo_e.htm#environment_object"><i>environment object</i></a>
(corresponding to the current <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_environment"><i>lexical environment</i></a>)
as its third argument. The <a rel="DEFINITION" href=
"26_glo_m.htm#macroexpand_hook"><i>macroexpand hook</i></a>, in
turn, calls the expansion function with the <a rel="DEFINITION"
href="26_glo_f.htm#form"><i>form</i></a> as its first argument and
the <a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environment</i></a> as its second
argument. The <a rel="DEFINITION" href=
"26_glo_v.htm#value"><i>value</i></a> of the expansion function,
which is passed through by the <a rel="DEFINITION" href=
"26_glo_m.htm#macroexpand_hook"><i>macroexpand hook</i></a>, is a
<a rel="DEFINITION" href="26_glo_f.htm#form"><i>form</i></a>. This
resulting <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> is processed in place of the
original <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbol</i></a>.</p>
<p>If a <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> is a <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbol</i></a> that is not a <a rel=
"DEFINITION" href="26_glo_s.htm#symbol_macro"><i>symbol
macro</i></a>, then it is the <a rel="DEFINITION" href=
"26_glo_n.htm#name"><i>name</i></a> of a <a rel="DEFINITION" href=
"26_glo_v.htm#variable"><i>variable</i></a>, and the <a rel=
"DEFINITION" href="26_glo_v.htm#value"><i>value</i></a> of that
<a rel="DEFINITION" href=
"26_glo_v.htm#variable"><i>variable</i></a> is returned. There are
three kinds of variables: <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_variable"><i>lexical variables</i></a>,
<a rel="DEFINITION" href="26_glo_d.htm#dynamic_variable"><i>dynamic
variables</i></a>, and <a rel="DEFINITION" href=
"26_glo_c.htm#constant_variable"><i>constant variables</i></a>. A
<a rel="DEFINITION" href=
"26_glo_v.htm#variable"><i>variable</i></a> can store one <a rel=
"DEFINITION" href="26_glo_o.htm#object"><i>object</i></a>. The main
operations on a <a rel="DEFINITION" href=
"26_glo_v.htm#variable"><i>variable</i></a> are to <a rel=
"DEFINITION" href="26_glo_r.htm#read"><i>read</i></a>[1] and to
<a rel="DEFINITION" href="26_glo_w.htm#write"><i>write</i></a>[1]
its <a rel="DEFINITION" href=
"26_glo_v.htm#value"><i>value</i></a>.</p>
<p>An error of <a rel="DEFINITION" href=
"26_glo_t.htm#type"><i>type</i></a> <a rel="DEFINITION" href=
"e_unbo_1.htm#unbound-variable"><b>unbound-variable</b></a> should
be signaled if an <a rel="DEFINITION" href=
"26_glo_u.htm#unbound_variable"><i>unbound variable</i></a> is
referenced.</p>
<p><a rel="DEFINITION" href=
"26_glo_n.htm#non-constant_variable"><i>Non-constant
variables</i></a> can be <i>assigned</i> by using <a rel=
"DEFINITION" href="s_setq.htm#setq"><b>setq</b></a> or <a rel=
"DEFINITION" href="26_glo_b.htm#bound"><i>bound</i></a>[3] by using
<a rel="DEFINITION" href="s_let_l.htm#let"><b>let</b></a>. The next
figure lists some <a rel="DEFINITION" href=
"26_glo_d.htm#defined_name"><i>defined names</i></a> that are
applicable to assigning, binding, and defining <a rel="DEFINITION"
href="26_glo_v.htm#variable"><i>variables</i></a>.</p>
<pre>
<a rel="DEFINITION" href=
"f_boundp.htm#boundp">boundp</a>        <a rel="DEFINITION" href=
"s_let_l.htm#let">let</a>                  <a rel="DEFINITION"
href="s_progv.htm#progv">progv</a>         
<a rel="DEFINITION" href=
"m_defcon.htm#defconstant">defconstant</a>   <a rel="DEFINITION"
href="s_let_l.htm#letST">let*</a>                 <a rel=
"DEFINITION" href="m_psetq.htm#psetq">psetq</a>         
<a rel="DEFINITION" href=
"m_defpar.htm#defparameter">defparameter</a>  <a rel="DEFINITION"
href="f_makunb.htm#makunbound">makunbound</a>           <a rel=
"DEFINITION" href="f_set.htm#set">set</a>           
<a rel="DEFINITION" href=
"m_defpar.htm#defvar">defvar</a>        <a rel="DEFINITION" href=
"m_multip.htm#multiple-value-bind">multiple-value-bind</a>  <a rel=
"DEFINITION" href="s_setq.htm#setq">setq</a>          
<a rel="DEFINITION" href=
"a_lambda.htm#lambda">lambda</a>        <a rel="DEFINITION" href=
"m_mult_2.htm#multiple-value-setq">multiple-value-setq</a>  <a rel=
"DEFINITION" href="f_symb_5.htm#symbol-value">symbol-value</a>  
</pre>
<p><b>Figure 3-1. Some Defined Names Applicable to
Variables</b></p>
<p>The following is a description of each kind of variable.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1.2.1.1.1 Lexical Variables</h2>
<p>A <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_variable"><i>lexical variable</i></a> is a
<a rel="DEFINITION" href=
"26_glo_v.htm#variable"><i>variable</i></a> that can be referenced
only within the <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_scope"><i>lexical scope</i></a> of the
<a rel="DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> that
establishes that <a rel="DEFINITION" href=
"26_glo_v.htm#variable"><i>variable</i></a>; <a rel="DEFINITION"
href="26_glo_l.htm#lexical_variable"><i>lexical variables</i></a>
have <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_scope"><i>lexical scope</i></a>. Each time a
<a rel="DEFINITION" href="26_glo_f.htm#form"><i>form</i></a>
creates a <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_binding"><i>lexical binding</i></a> of a
<a rel="DEFINITION" href=
"26_glo_v.htm#variable"><i>variable</i></a>, a <a rel="DEFINITION"
href="26_glo_f.htm#fresh"><i>fresh</i></a> <a rel="DEFINITION"
href="26_glo_b.htm#binding"><i>binding</i></a> is
<i>established</i>.</p>
<p>Within the <a rel="DEFINITION" href=
"26_glo_s.htm#scope"><i>scope</i></a> of a <a rel="DEFINITION"
href="26_glo_b.htm#binding"><i>binding</i></a> for a <a rel=
"DEFINITION" href="26_glo_l.htm#lexical_variable"><i>lexical
variable</i></a> <a rel="DEFINITION" href=
"26_glo_n.htm#name"><i>name</i></a>, uses of that <a rel=
"DEFINITION" href="26_glo_n.htm#name"><i>name</i></a> as a <a rel=
"DEFINITION" href="26_glo_v.htm#variable"><i>variable</i></a> are
considered to be references to that <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> except where the <a rel=
"DEFINITION" href="26_glo_v.htm#variable"><i>variable</i></a> is
<i>shadowed</i>[2] by a <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> that <a rel="DEFINITION" href=
"26_glo_e.htm#establish"><i>establishes</i></a> a <a rel=
"DEFINITION" href="26_glo_f.htm#fresh"><i>fresh</i></a> <a rel=
"DEFINITION" href="26_glo_b.htm#binding"><i>binding</i></a> for
that <a rel="DEFINITION" href=
"26_glo_v.htm#variable"><i>variable</i></a> <a rel="DEFINITION"
href="26_glo_n.htm#name"><i>name</i></a>, or by a <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> that locally
<a rel="DEFINITION" href="26_glo_d.htm#declare"><i>declares</i></a>
the <a rel="DEFINITION" href="26_glo_n.htm#name"><i>name</i></a>
<a rel="DEFINITION" href=
"d_specia.htm#special"><b>special</b></a>.</p>
<p>A <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_variable"><i>lexical variable</i></a> always
has a <a rel="DEFINITION" href=
"26_glo_v.htm#value"><i>value</i></a>. There is no <a rel=
"DEFINITION" href="26_glo_o.htm#operator"><i>operator</i></a> that
introduces a <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> for a <a rel="DEFINITION"
href="26_glo_l.htm#lexical_variable"><i>lexical variable</i></a>
without giving it an initial <a rel="DEFINITION" href=
"26_glo_v.htm#value"><i>value</i></a>, nor is there any <a rel=
"DEFINITION" href="26_glo_o.htm#operator"><i>operator</i></a> that
can make a <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_variable"><i>lexical variable</i></a> be
<a rel="DEFINITION" href=
"26_glo_u.htm#unbound"><i>unbound</i></a>.</p>
<p><a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>Bindings</i></a> of <a rel="DEFINITION"
href="26_glo_l.htm#lexical_variable"><i>lexical variables</i></a>
are found in the <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_environment"><i>lexical
environment</i></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1.2.1.1.2 Dynamic Variables</h2>
<p>A <a rel="DEFINITION" href=
"26_glo_v.htm#variable"><i>variable</i></a> is a <a rel=
"DEFINITION" href="26_glo_d.htm#dynamic_variable"><i>dynamic
variable</i></a> if one of the following conditions hold:</p>
<ul>
<li>It is locally declared or globally proclaimed <a rel=
"DEFINITION" href="d_specia.htm#special"><b>special</b></a>.</li>
<li>It occurs textually within a <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> that creates a <a rel=
"DEFINITION" href="26_glo_d.htm#dynamic_binding"><i>dynamic
binding</i></a> for a <a rel="DEFINITION" href=
"26_glo_v.htm#variable"><i>variable</i></a> of the <a rel=
"DEFINITION" href="26_glo_s.htm#same"><i>same</i></a> <a rel=
"DEFINITION" href="26_glo_n.htm#name"><i>name</i></a>, and the
<a rel="DEFINITION" href="26_glo_b.htm#binding"><i>binding</i></a>
is not <i>shadowed</i>[2] by a <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> that creates a <a rel=
"DEFINITION" href="26_glo_l.htm#lexical_binding"><i>lexical
binding</i></a> of the same <a rel="DEFINITION" href=
"26_glo_v.htm#variable"><i>variable</i></a> <a rel="DEFINITION"
href="26_glo_n.htm#name"><i>name</i></a>.</li>
</ul>
<p>A <a rel="DEFINITION" href=
"26_glo_d.htm#dynamic_variable"><i>dynamic variable</i></a> can be
referenced at any time in any <a rel="DEFINITION" href=
"26_glo_p.htm#program"><i>program</i></a>; there is no textual
limitation on references to <a rel="DEFINITION" href=
"26_glo_d.htm#dynamic_variable"><i>dynamic variables</i></a>. At
any given time, all <a rel="DEFINITION" href=
"26_glo_d.htm#dynamic_variable"><i>dynamic variables</i></a> with a
given name refer to exactly one <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a>, either in the <a rel=
"DEFINITION" href="26_glo_d.htm#dynamic_environment"><i>dynamic
environment</i></a> or in the <a rel="DEFINITION" href=
"26_glo_g.htm#global_environment"><i>global
environment</i></a>.</p>
<p>The <a rel="DEFINITION" href=
"26_glo_v.htm#value"><i>value</i></a> part of the <a rel=
"DEFINITION" href="26_glo_b.htm#binding"><i>binding</i></a> for a
<a rel="DEFINITION" href="26_glo_d.htm#dynamic_variable"><i>dynamic
variable</i></a> might be empty; in this case, the <a rel=
"DEFINITION" href="26_glo_d.htm#dynamic_variable"><i>dynamic
variable</i></a> is said to have no <a rel="DEFINITION" href=
"26_glo_v.htm#value"><i>value</i></a>, or to be <a rel="DEFINITION"
href="26_glo_u.htm#unbound"><i>unbound</i></a>. A <a rel=
"DEFINITION" href="26_glo_d.htm#dynamic_variable"><i>dynamic
variable</i></a> can be made <a rel="DEFINITION" href=
"26_glo_u.htm#unbound"><i>unbound</i></a> by using <a rel=
"DEFINITION" href=
"f_makunb.htm#makunbound"><b>makunbound</b></a>.</p>
<p>The effect of <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> a <a rel="DEFINITION"
href="26_glo_d.htm#dynamic_variable"><i>dynamic variable</i></a> is
to create a new <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> to which all references
to that <a rel="DEFINITION" href=
"26_glo_d.htm#dynamic_variable"><i>dynamic variable</i></a> in any
<a rel="DEFINITION" href="26_glo_p.htm#program"><i>program</i></a>
refer for the duration of the <a rel="DEFINITION" href=
"26_glo_e.htm#evaluation"><i>evaluation</i></a> of the <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> that creates
the <a rel="DEFINITION" href=
"26_glo_d.htm#dynamic_binding"><i>dynamic binding</i></a>.</p>
<p>A <a rel="DEFINITION" href=
"26_glo_d.htm#dynamic_variable"><i>dynamic variable</i></a> can be
referenced outside the <a rel="DEFINITION" href=
"26_glo_d.htm#dynamic_extent"><i>dynamic extent</i></a> of a
<a rel="DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> that
<a rel="DEFINITION" href="26_glo_b.htm#bind"><i>binds</i></a> it.
Such a <a rel="DEFINITION" href=
"26_glo_v.htm#variable"><i>variable</i></a> is sometimes called a
"global variable" but is still in all respects just a <a rel=
"DEFINITION" href="26_glo_d.htm#dynamic_variable"><i>dynamic
variable</i></a> whose <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> happens to exist in the
<a rel="DEFINITION" href=
"26_glo_g.htm#global_environment"><i>global environment</i></a>
rather than in some <a rel="DEFINITION" href=
"26_glo_d.htm#dynamic_environment"><i>dynamic
environment</i></a>.</p>
<p>A <a rel="DEFINITION" href=
"26_glo_d.htm#dynamic_variable"><i>dynamic variable</i></a> is
<a rel="DEFINITION" href="26_glo_u.htm#unbound"><i>unbound</i></a>
unless and until explicitly assigned a value, except for those
variables whose initial value is defined in this specification or
by an <a rel="DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementation</i></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1.2.1.1.3 Constant Variables</h2>
<p>Certain variables, called <a rel="DEFINITION" href=
"26_glo_c.htm#constant_variable"><i>constant variables</i></a>, are
reserved as "named constants." The consequences are undefined if an
attempt is made to assign a value to, or create a <a rel=
"DEFINITION" href="26_glo_b.htm#binding"><i>binding</i></a> for a
<a rel="DEFINITION" href=
"26_glo_c.htm#constant_variable"><i>constant variable</i></a>,
except that a `compatible' redefinition of a <a rel="DEFINITION"
href="26_glo_c.htm#constant_variable"><i>constant variable</i></a>
using <a rel="DEFINITION" href=
"m_defcon.htm#defconstant"><b>defconstant</b></a> is permitted; see
the <a rel="DEFINITION" href="26_glo_m.htm#macro"><i>macro</i></a>
<a rel="DEFINITION" href=
"m_defcon.htm#defconstant"><b>defconstant</b></a>.</p>
<p><a rel="DEFINITION" href=
"26_glo_k.htm#keyword"><i>Keywords</i></a>, <a rel="DEFINITION"
href="26_glo_s.htm#symbol"><i>symbols</i></a> defined by Common
Lisp or the <a rel="DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementation</i></a> as constant
(such as <a rel="DEFINITION" href="a_nil.htm#nil"><b>nil</b></a>,
<a rel="DEFINITION" href="a_t.htm#t"><b>t</b></a>, and <a rel=
"DEFINITION" href="v_pi.htm#pi"><b>pi</b></a>), and <a rel=
"DEFINITION" href="26_glo_s.htm#symbol"><i>symbols</i></a> declared
as constant using <a rel="DEFINITION" href=
"m_defcon.htm#defconstant"><b>defconstant</b></a> are <a rel=
"DEFINITION" href="26_glo_c.htm#constant_variable"><i>constant
variables</i></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1.2.1.1.4 Symbols Naming Both Lexical and Dynamic
Variables</h2>
<p>The same <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbol</i></a> can name both a <a rel=
"DEFINITION" href="26_glo_l.htm#lexical_variable"><i>lexical
variable</i></a> and a <a rel="DEFINITION" href=
"26_glo_d.htm#dynamic_variable"><i>dynamic variable</i></a>, but
never in the same <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_environment"><i>lexical
environment</i></a>.</p>
<p>In the following example, the <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbol</i></a> <tt>x</tt> is used, at
different times, as the <a rel="DEFINITION" href=
"26_glo_n.htm#name"><i>name</i></a> of a <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_variable"><i>lexical variable</i></a> and as
the <a rel="DEFINITION" href="26_glo_n.htm#name"><i>name</i></a> of
a <a rel="DEFINITION" href=
"26_glo_d.htm#dynamic_variable"><i>dynamic variable</i></a>.</p>
<pre>
 (let ((x 1))            ;Binds a special variable X
   (declare (special x))
   (let ((x 2))          ;Binds a lexical variable X
     (+ x                ;Reads a lexical variable X
        (locally (declare (special x))
                 x))))   ;Reads a special variable X
=&gt;  3
</pre>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1.2.1.2 Conses as Forms</h2>
<p>A <a rel="DEFINITION" href="26_glo_c.htm#cons"><i>cons</i></a>
that is used as a <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> is called a <a rel="DEFINITION"
href="26_glo_c.htm#compound_form"><i>compound form</i></a>.</p>
<p>If the <a rel="DEFINITION" href=
"26_glo_c.htm#car"><i>car</i></a> of that <a rel="DEFINITION" href=
"26_glo_c.htm#compound_form"><i>compound form</i></a> is a <a rel=
"DEFINITION" href="26_glo_s.htm#symbol"><i>symbol</i></a>, that
<a rel="DEFINITION" href="26_glo_s.htm#symbol"><i>symbol</i></a> is
the <a rel="DEFINITION" href="26_glo_n.htm#name"><i>name</i></a> of
an <a rel="DEFINITION" href=
"26_glo_o.htm#operator"><i>operator</i></a>, and the <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> is either a
<a rel="DEFINITION" href="26_glo_s.htm#special_form"><i>special
form</i></a>, a <a rel="DEFINITION" href=
"26_glo_m.htm#macro_form"><i>macro form</i></a>, or a <a rel=
"DEFINITION" href="26_glo_f.htm#function_form"><i>function
form</i></a>, depending on the <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> <a rel="DEFINITION"
href="26_glo_b.htm#binding"><i>binding</i></a> of the <a rel=
"DEFINITION" href="26_glo_o.htm#operator"><i>operator</i></a> in
the current <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_environment"><i>lexical environment</i></a>.
If the <a rel="DEFINITION" href=
"26_glo_o.htm#operator"><i>operator</i></a> is neither a <a rel=
"DEFINITION" href="26_glo_s.htm#special_operator"><i>special
operator</i></a> nor a <a rel="DEFINITION" href=
"26_glo_m.htm#macro_name"><i>macro name</i></a>, it is assumed to
be a <a rel="DEFINITION" href=
"26_glo_f.htm#function_name"><i>function name</i></a> (even if
there is no definition for such a <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a>).</p>
<p>If the <a rel="DEFINITION" href=
"26_glo_c.htm#car"><i>car</i></a> of the <a rel="DEFINITION" href=
"26_glo_c.htm#compound_form"><i>compound form</i></a> is not a
<a rel="DEFINITION" href="26_glo_s.htm#symbol"><i>symbol</i></a>,
then that <a rel="DEFINITION" href=
"26_glo_c.htm#car"><i>car</i></a> must be a <a rel="DEFINITION"
href="26_glo_l.htm#lambda_expression"><i>lambda expression</i></a>,
in which case the <a rel="DEFINITION" href=
"26_glo_c.htm#compound_form"><i>compound form</i></a> is a <a rel=
"DEFINITION" href="26_glo_l.htm#lambda_form"><i>lambda
form</i></a>.</p>
<p>How a <a rel="DEFINITION" href=
"26_glo_c.htm#compound_form"><i>compound form</i></a> is processed
depends on whether it is classified as a <a rel="DEFINITION" href=
"26_glo_s.htm#special_form"><i>special form</i></a>, a <a rel=
"DEFINITION" href="26_glo_m.htm#macro_form"><i>macro form</i></a>,
a <a rel="DEFINITION" href="26_glo_f.htm#function_form"><i>function
form</i></a>, or a <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_form"><i>lambda form</i></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1.2.1.2.1 Special Forms</h2>
<p>A <a rel="DEFINITION" href=
"26_glo_s.htm#special_form"><i>special form</i></a> is a <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> with special
syntax, special evaluation rules, or both, possibly manipulating
the evaluation environment, control flow, or both. A <a rel=
"DEFINITION" href="26_glo_s.htm#special_operator"><i>special
operator</i></a> has access to the current <a rel="DEFINITION"
href="26_glo_l.htm#lexical_environment"><i>lexical
environment</i></a> and the current <a rel="DEFINITION" href=
"26_glo_d.htm#dynamic_environment"><i>dynamic environment</i></a>.
Each <a rel="DEFINITION" href=
"26_glo_s.htm#special_operator"><i>special operator</i></a> defines
the manner in which its <a rel="DEFINITION" href=
"26_glo_s.htm#subexpression"><i>subexpressions</i></a> are
treated---which are <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>forms</i></a>, which are special syntax,
<i>etc</i>.</p>
<p>Some <a rel="DEFINITION" href=
"26_glo_s.htm#special_operator"><i>special operators</i></a> create
new lexical or dynamic <a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environments</i></a> for use during
the <a rel="DEFINITION" href=
"26_glo_e.htm#evaluation"><i>evaluation</i></a> of <a rel=
"DEFINITION" href="26_glo_s.htm#subform"><i>subforms</i></a> of the
<a rel="DEFINITION" href="26_glo_s.htm#special_form"><i>special
form</i></a>. For example, <a rel="DEFINITION" href=
"s_block.htm#block"><b>block</b></a> creates a new <a rel=
"DEFINITION" href="26_glo_l.htm#lexical_environment"><i>lexical
environment</i></a> that is the same as the one in force at the
point of evaluation of the <a rel="DEFINITION" href=
"s_block.htm#block"><b>block</b></a> <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> with the addition of a <a rel=
"DEFINITION" href="26_glo_b.htm#binding"><i>binding</i></a> of the
<a rel="DEFINITION" href="s_block.htm#block"><b>block</b></a> name
to an <a rel="DEFINITION" href="26_glo_e.htm#exit_point"><i>exit
point</i></a> from the <a rel="DEFINITION" href=
"s_block.htm#block"><b>block</b></a>.</p>
<p>The set of <a rel="DEFINITION" href=
"26_glo_s.htm#special_operator"><i>special operator</i></a> <a rel=
"DEFINITION" href="26_glo_n.htm#name"><i>names</i></a> is fixed in
Common Lisp; no way is provided for the user to define a <a rel=
"DEFINITION" href="26_glo_s.htm#special_operator"><i>special
operator</i></a>. The next figure lists all of the Common Lisp
<a rel="DEFINITION" href="26_glo_s.htm#symbol"><i>symbols</i></a>
that have definitions as <a rel="DEFINITION" href=
"26_glo_s.htm#special_operator"><i>special operators</i></a>.</p>
<p><a name="clspecialops" id="clspecialops"></a></p>
<pre>
<a rel="DEFINITION" href="s_block.htm#block">block</a>      <a rel=
"DEFINITION" href=
"s_let_l.htm#letST">let*</a>                  <a rel="DEFINITION"
href="s_ret_fr.htm#return-from">return-from</a>      
<a rel="DEFINITION" href="s_catch.htm#catch">catch</a>      <a rel=
"DEFINITION" href=
"s_ld_tim.htm#load-time-value">load-time-value</a>       <a rel=
"DEFINITION" href="s_setq.htm#setq">setq</a>             
<a rel="DEFINITION" href=
"s_eval_w.htm#eval-when">eval-when</a>  <a rel="DEFINITION" href=
"s_locall.htm#locally">locally</a>               <a rel=
"DEFINITION" href=
"s_symbol.htm#symbol-macrolet">symbol-macrolet</a>  
<a rel="DEFINITION" href="s_flet_.htm#flet">flet</a>       <a rel=
"DEFINITION" href=
"s_flet_.htm#macrolet">macrolet</a>              <a rel=
"DEFINITION" href="s_tagbod.htm#tagbody">tagbody</a>          
<a rel="DEFINITION" href="a_fn.htm#function">function</a>   <a rel=
"DEFINITION" href=
"s_multip.htm#multiple-value-call">multiple-value-call</a>   <a rel="DEFINITION"
href="s_the.htm#the">the</a>              
<a rel="DEFINITION" href="s_go.htm#go">go</a>         <a rel=
"DEFINITION" href=
"s_mult_1.htm#multiple-value-prog1">multiple-value-prog1</a>  <a rel="DEFINITION"
href="s_throw.htm#throw">throw</a>            
<a rel="DEFINITION" href="s_if.htm#if">if</a>         <a rel=
"DEFINITION" href=
"s_progn.htm#progn">progn</a>                 <a rel="DEFINITION"
href="s_unwind.htm#unwind-protect">unwind-protect</a>   
<a rel="DEFINITION" href=
"s_flet_.htm#labels">labels</a>     <a rel="DEFINITION" href=
"s_progv.htm#progv">progv</a>                                  
<a rel="DEFINITION" href="s_let_l.htm#let">let</a>        <a rel=
"DEFINITION" href=
"s_quote.htm#quote">quote</a>                                  
</pre>
<p><b>Figure 3-2. Common Lisp Special Operators</b></p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1.2.1.2.2 Macro Forms</h2>
<p>If the <a rel="DEFINITION" href=
"26_glo_o.htm#operator"><i>operator</i></a> names a <a rel=
"DEFINITION" href="26_glo_m.htm#macro"><i>macro</i></a>, its
associated <a rel="DEFINITION" href=
"26_glo_m.htm#macro_function"><i>macro function</i></a> is applied
to the entire <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> and the result of that
application is used in place of the original <a rel="DEFINITION"
href="26_glo_f.htm#form"><i>form</i></a>.</p>
<p>Specifically, a <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbol</i></a> names a <a rel="DEFINITION"
href="26_glo_m.htm#macro"><i>macro</i></a> in a given <a rel=
"DEFINITION" href="26_glo_l.htm#lexical_environment"><i>lexical
environment</i></a> if <a rel="DEFINITION" href=
"f_macro_.htm#macro-function"><b>macro-function</b></a> is <a rel=
"DEFINITION" href="26_glo_t.htm#true"><i>true</i></a> of the
<a rel="DEFINITION" href="26_glo_s.htm#symbol"><i>symbol</i></a>
and that <a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environment</i></a>. The <a rel=
"DEFINITION" href="26_glo_f.htm#function"><i>function</i></a>
returned by <a rel="DEFINITION" href=
"f_macro_.htm#macro-function"><b>macro-function</b></a> is a
<a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> of two arguments,
called the expansion function. The expansion function is invoked by
calling the <a rel="DEFINITION" href=
"26_glo_m.htm#macroexpand_hook"><i>macroexpand hook</i></a> with
the expansion function as its first argument, the entire <a rel=
"DEFINITION" href="26_glo_m.htm#macro_form"><i>macro form</i></a>
as its second argument, and an <a rel="DEFINITION" href=
"26_glo_e.htm#environment_object"><i>environment object</i></a>
(corresponding to the current <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_environment"><i>lexical environment</i></a>)
as its third argument. The <a rel="DEFINITION" href=
"26_glo_m.htm#macroexpand_hook"><i>macroexpand hook</i></a>, in
turn, calls the expansion function with the <a rel="DEFINITION"
href="26_glo_f.htm#form"><i>form</i></a> as its first argument and
the <a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environment</i></a> as its second
argument. The <a rel="DEFINITION" href=
"26_glo_v.htm#value"><i>value</i></a> of the expansion function,
which is passed through by the <a rel="DEFINITION" href=
"26_glo_m.htm#macroexpand_hook"><i>macroexpand hook</i></a>, is a
<a rel="DEFINITION" href="26_glo_f.htm#form"><i>form</i></a>. The
returned <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> is <i>evaluated</i> in place of
the original <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a>.</p>
<p>The consequences are undefined if a <a rel="DEFINITION" href=
"26_glo_m.htm#macro_function"><i>macro function</i></a>
destructively modifies any part of its <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> argument.</p>
<p>A <a rel="DEFINITION" href="26_glo_m.htm#macro_name"><i>macro
name</i></a> is not a <a rel="DEFINITION" href=
"26_glo_f.htm#function_designator"><i>function designator</i></a>,
and cannot be used as the <i>function</i> argument to <a rel=
"DEFINITION" href="26_glo_f.htm#function"><i>functions</i></a> such
as <a rel="DEFINITION" href="f_apply.htm#apply"><b>apply</b></a>,
<a rel="DEFINITION" href="f_funcal.htm#funcall"><b>funcall</b></a>,
or <a rel="DEFINITION" href="f_map.htm#map"><b>map</b></a>.</p>
<p>An <a rel="DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementation</i></a> is free to
implement a Common Lisp <a rel="DEFINITION" href=
"26_glo_s.htm#special_operator"><i>special operator</i></a> as a
<a rel="DEFINITION" href="26_glo_m.htm#macro"><i>macro</i></a>. An
<a rel="DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementation</i></a> is free to
implement any <a rel="DEFINITION" href=
"26_glo_m.htm#macro"><i>macro</i></a> <a rel="DEFINITION" href=
"26_glo_o.htm#operator"><i>operator</i></a> as a <a rel=
"DEFINITION" href="26_glo_s.htm#special_operator"><i>special
operator</i></a>, but only if an equivalent definition of the
<a rel="DEFINITION" href="26_glo_m.htm#macro"><i>macro</i></a> is
also provided.</p>
<p>The next figure lists some <a rel="DEFINITION" href=
"26_glo_d.htm#defined_name"><i>defined names</i></a> that are
applicable to <a rel="DEFINITION" href=
"26_glo_m.htm#macro"><i>macros</i></a>.</p>
<pre>
<a rel="DEFINITION" href=
"v_mexp_h.htm#STmacroexpand-hookST">*macroexpand-hook*</a>  <a rel=
"DEFINITION" href=
"f_macro_.htm#macro-function">macro-function</a>  <a rel=
"DEFINITION" href="f_mexp_.htm#macroexpand-1">macroexpand-1</a>  
<a rel="DEFINITION" href=
"m_defmac.htm#defmacro">defmacro</a>            <a rel="DEFINITION"
href="f_mexp_.htm#macroexpand">macroexpand</a>     <a rel=
"DEFINITION" href="s_flet_.htm#macrolet">macrolet</a>       
</pre>
<p><b>Figure 3-3. Defined names applicable to macros</b></p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1.2.1.2.3 Function Forms</h2>
<p>If the <a rel="DEFINITION" href=
"26_glo_o.htm#operator"><i>operator</i></a> is a <a rel=
"DEFINITION" href="26_glo_s.htm#symbol"><i>symbol</i></a> naming a
<a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a>, the <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> represents a
<a rel="DEFINITION" href="26_glo_f.htm#function_form"><i>function
form</i></a>, and the <a rel="DEFINITION" href=
"26_glo_c.htm#cdr"><i>cdr</i></a> of the list contains the <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>forms</i></a> which when
evaluated will supply the arguments passed to the <a rel=
"DEFINITION" href="26_glo_f.htm#function"><i>function</i></a>.</p>
<p>When a <a rel="DEFINITION" href=
"26_glo_f.htm#function_name"><i>function name</i></a> is not
defined, an error of <a rel="DEFINITION" href=
"26_glo_t.htm#type"><i>type</i></a> <a rel="DEFINITION" href=
"e_undefi.htm#undefined-function"><b>undefined-function</b></a>
should be signaled at run time; see <a rel="CHILD" href=
"03_bbc.htm">Section 3.2.2.3 (Semantic Constraints)</a>.</p>
<p>A <a rel="DEFINITION" href=
"26_glo_f.htm#function_form"><i>function form</i></a> is evaluated
as follows:</p>
<p>The <a rel="DEFINITION" href=
"26_glo_s.htm#subform"><i>subforms</i></a> in the <a rel=
"DEFINITION" href="26_glo_c.htm#cdr"><i>cdr</i></a> of the original
<a rel="DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> are
evaluated in left-to-right order in the current lexical and dynamic
<a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environments</i></a>. The <a rel=
"DEFINITION" href="26_glo_p.htm#primary_value"><i>primary
value</i></a> of each such <a rel="DEFINITION" href=
"26_glo_e.htm#evaluation"><i>evaluation</i></a> becomes an <a rel=
"DEFINITION" href="26_glo_a.htm#argument"><i>argument</i></a> to
the named <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a>; any additional <a rel=
"DEFINITION" href="26_glo_v.htm#value"><i>values</i></a> returned
by the <a rel="DEFINITION" href=
"26_glo_s.htm#subform"><i>subforms</i></a> are discarded.</p>
<p>The <a rel="DEFINITION" href=
"26_glo_f.htm#functional_value"><i>functional value</i></a> of the
<a rel="DEFINITION" href=
"26_glo_o.htm#operator"><i>operator</i></a> is retrieved from the
<a rel="DEFINITION" href=
"26_glo_l.htm#lexical_environment"><i>lexical environment</i></a>,
and that <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> is invoked with the
indicated arguments.</p>
<p>Although the order of <a rel="DEFINITION" href=
"26_glo_e.htm#evaluation"><i>evaluation</i></a> of the <a rel=
"DEFINITION" href="26_glo_a.htm#argument"><i>argument</i></a>
<a rel="DEFINITION" href="26_glo_s.htm#subform"><i>subforms</i></a>
themselves is strictly left-to-right, it is not specified whether
the definition of the <a rel="DEFINITION" href=
"26_glo_o.htm#operator"><i>operator</i></a> in a <a rel=
"DEFINITION" href="26_glo_f.htm#function_form"><i>function
form</i></a> is looked up before the <a rel="DEFINITION" href=
"26_glo_e.htm#evaluation"><i>evaluation</i></a> of the <a rel=
"DEFINITION" href="26_glo_a.htm#argument"><i>argument</i></a>
<a rel="DEFINITION" href=
"26_glo_s.htm#subform"><i>subforms</i></a>, after the <a rel=
"DEFINITION" href="26_glo_e.htm#evaluation"><i>evaluation</i></a>
of the <a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>argument</i></a> <a rel="DEFINITION"
href="26_glo_s.htm#subform"><i>subforms</i></a>, or between the
<a rel="DEFINITION" href=
"26_glo_e.htm#evaluation"><i>evaluation</i></a> of any two <a rel=
"DEFINITION" href="26_glo_a.htm#argument"><i>argument</i></a>
<a rel="DEFINITION" href="26_glo_s.htm#subform"><i>subforms</i></a>
if there is more than one such <a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>argument</i></a> <a rel="DEFINITION"
href="26_glo_s.htm#subform"><i>subform</i></a>. For example, the
following might return 23 or 24.</p>
<pre>
 (defun foo (x) (+ x 3))
 (defun bar () (setf (symbol-function 'foo) #'(lambda (x) (+ x 4))))
 (foo (progn (bar) 20))
</pre>
<p>A <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> for a <a rel="DEFINITION"
href="26_glo_f.htm#function_name"><i>function name</i></a> can be
<i>established</i> in one of several ways. A <a rel="DEFINITION"
href="26_glo_b.htm#binding"><i>binding</i></a> for a <a rel=
"DEFINITION" href="26_glo_f.htm#function_name"><i>function
name</i></a> in the <a rel="DEFINITION" href=
"26_glo_g.htm#global_environment"><i>global environment</i></a> can
be <i>established</i> by <a rel="DEFINITION" href=
"m_defun.htm#defun"><b>defun</b></a>, <a rel="DEFINITION" href=
"m_setf_.htm#setf"><b>setf</b></a> of <a rel="DEFINITION" href=
"f_fdefin.htm#fdefinition"><b>fdefinition</b></a>, <a rel=
"DEFINITION" href="m_setf_.htm#setf"><b>setf</b></a> of <a rel=
"DEFINITION" href=
"f_symb_1.htm#symbol-function"><b>symbol-function</b></a>, <a rel=
"DEFINITION" href=
"f_ensure.htm#ensure-generic-function"><b>ensure-generic-function</b></a>,
<a rel="DEFINITION" href=
"m_defmet.htm#defmethod"><b>defmethod</b></a> (implicitly, due to
<a rel="DEFINITION" href=
"f_ensure.htm#ensure-generic-function"><b>ensure-generic-function</b></a>),
or <a rel="DEFINITION" href=
"m_defgen.htm#defgeneric"><b>defgeneric</b></a>. A <a rel=
"DEFINITION" href="26_glo_b.htm#binding"><i>binding</i></a> for a
<a rel="DEFINITION" href="26_glo_f.htm#function_name"><i>function
name</i></a> in the <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_environment"><i>lexical environment</i></a>
can be <i>established</i> by <a rel="DEFINITION" href=
"s_flet_.htm#flet"><b>flet</b></a> or <a rel="DEFINITION" href=
"s_flet_.htm#labels"><b>labels</b></a>.</p>
<p>The next figure lists some <a rel="DEFINITION" href=
"26_glo_d.htm#defined_name"><i>defined names</i></a> that are
applicable to <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>functions</i></a>.</p>
<pre>
<a rel="DEFINITION" href=
"f_apply.htm#apply">apply</a>                 <a rel="DEFINITION"
href="f_fdefin.htm#fdefinition">fdefinition</a>  <a rel=
"DEFINITION" href="f_mapc_.htm#mapcan">mapcan</a>               
<a rel="DEFINITION" href=
"v_call_a.htm#call-arguments-limit">call-arguments-limit</a>  <a rel="DEFINITION"
href="s_flet_.htm#flet">flet</a>         <a rel="DEFINITION" href=
"f_mapc_.htm#mapcar">mapcar</a>               
<a rel="DEFINITION" href=
"f_comple.htm#complement">complement</a>            <a rel=
"DEFINITION" href=
"f_fmakun.htm#fmakunbound">fmakunbound</a>  <a rel="DEFINITION"
href="f_mapc_.htm#mapcon">mapcon</a>               
<a rel="DEFINITION" href=
"f_cons_1.htm#constantly">constantly</a>            <a rel=
"DEFINITION" href="f_funcal.htm#funcall">funcall</a>      <a rel=
"DEFINITION" href="f_mapc_.htm#mapl">mapl</a>                 
<a rel="DEFINITION" href=
"m_defgen.htm#defgeneric">defgeneric</a>            <a rel=
"DEFINITION" href="a_fn.htm#function">function</a>     <a rel=
"DEFINITION" href="f_mapc_.htm#maplist">maplist</a>              
<a rel="DEFINITION" href=
"m_defmet.htm#defmethod">defmethod</a>             <a rel=
"DEFINITION" href="f_fnp.htm#functionp">functionp</a>    <a rel=
"DEFINITION" href=
"s_multip.htm#multiple-value-call">multiple-value-call</a>  
<a rel="DEFINITION" href=
"m_defun.htm#defun">defun</a>                 <a rel="DEFINITION"
href="s_flet_.htm#labels">labels</a>       <a rel="DEFINITION"
href="f_reduce.htm#reduce">reduce</a>               
<a rel="DEFINITION" href=
"f_fbound.htm#fboundp">fboundp</a>               <a rel=
"DEFINITION" href="f_map.htm#map">map</a>          <a rel=
"DEFINITION" href=
"f_symb_1.htm#symbol-function">symbol-function</a>      
</pre>
<p><b>Figure 3-4. Some function-related defined names</b></p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1.2.1.2.4 Lambda Forms</h2>
<p>A <a rel="DEFINITION" href="26_glo_l.htm#lambda_form"><i>lambda
form</i></a> is similar to a <a rel="DEFINITION" href=
"26_glo_f.htm#function_form"><i>function form</i></a>, except that
the <a rel="DEFINITION" href=
"26_glo_f.htm#function_name"><i>function name</i></a> is replaced
by a <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_expression"><i>lambda expression</i></a>.</p>
<p>A <a rel="DEFINITION" href="26_glo_l.htm#lambda_form"><i>lambda
form</i></a> is equivalent to using <a rel="DEFINITION" href=
"f_funcal.htm#funcall"><i>funcall</i></a> of a <a rel="DEFINITION"
href="26_glo_l.htm#lexical_closure"><i>lexical closure</i></a> of
the <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_expression"><i>lambda expression</i></a> on
the given <a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>arguments</i></a>. (In practice, some
compilers are more likely to produce inline code for a <a rel=
"DEFINITION" href="26_glo_l.htm#lambda_form"><i>lambda form</i></a>
than for an arbitrary named function that has been declared <a rel=
"DEFINITION" href="d_inline.htm#inline"><b>inline</b></a>; however,
such a difference is not semantic.)</p>
<p>For further information, see <a rel="CHILD" href=
"03_ac.htm">Section 3.1.3 (Lambda Expressions)</a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1.2.1.3 Self-Evaluating Objects</h2>
<p>A <a rel="DEFINITION" href="26_glo_f.htm#form"><i>form</i></a>
that is neither a <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbol</i></a> nor a <a rel="DEFINITION"
href="26_glo_c.htm#cons"><i>cons</i></a> is defined to be a <a rel=
"DEFINITION" href=
"26_glo_s.htm#self-evaluating_object"><i>self-evaluating
object</i></a>. <i>Evaluating</i> such an <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a> <a rel="DEFINITION" href=
"26_glo_y.htm#yield"><i>yields</i></a> the <a rel="DEFINITION"
href="26_glo_s.htm#same"><i>same</i></a> <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a> as a result.</p>
<p>Certain specific <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbols</i></a> and <a rel="DEFINITION"
href="26_glo_c.htm#cons"><i>conses</i></a> might also happen to be
"self-evaluating" but only as a special case of a more general set
of rules for the <a rel="DEFINITION" href=
"26_glo_e.htm#evaluation"><i>evaluation</i></a> of <a rel=
"DEFINITION" href="26_glo_s.htm#symbol"><i>symbols</i></a> and
<a rel="DEFINITION" href="26_glo_c.htm#cons"><i>conses</i></a>;
such <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>objects</i></a> are not considered to be
<a rel="DEFINITION" href=
"26_glo_s.htm#self-evaluating_object"><i>self-evaluating
objects</i></a>.</p>
<p>The consequences are undefined if <a rel="DEFINITION" href=
"26_glo_l.htm#literal"><i>literal</i></a> <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>objects</i></a> (including <a rel=
"DEFINITION" href=
"26_glo_s.htm#self-evaluating_object"><i>self-evaluating
objects</i></a>) are destructively modified.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1.2.1.3.1 Examples of Self-Evaluating Objects</h2>
<p><a rel="DEFINITION" href=
"26_glo_n.htm#number"><i>Numbers</i></a>, <a rel="DEFINITION" href=
"26_glo_p.htm#pathname"><i>pathnames</i></a>, and <a rel=
"DEFINITION" href="26_glo_a.htm#array"><i>arrays</i></a> are
examples of <a rel="DEFINITION" href=
"26_glo_s.htm#self-evaluating_object"><i>self-evaluating
objects</i></a>.</p>
<pre>
 3 =&gt;  3
 #c(2/3 5/8) =&gt;  #C(2/3 5/8)
 #p"S:[BILL]OTHELLO.TXT" =&gt;  #P"S:[BILL]OTHELLO.TXT"
 #(a b c) =&gt;  #(A B C)
 "fred smith" =&gt;  "fred smith"
</pre>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1.3 Lambda Expressions</h2>
<p>In a <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_expression"><i>lambda expression</i></a>, the
body is evaluated in a lexical <a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environment</i></a> that is formed by
adding the <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> of each <a rel=
"DEFINITION" href="26_glo_p.htm#parameter"><i>parameter</i></a> in
the <a rel="DEFINITION" href="26_glo_l.htm#lambda_list"><i>lambda
list</i></a> with the corresponding <a rel="DEFINITION" href=
"26_glo_v.htm#value"><i>value</i></a> from the <a rel="DEFINITION"
href="26_glo_a.htm#argument"><i>arguments</i></a> to the current
lexical <a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environment</i></a>.</p>
<p>For further discussion of how <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>bindings</i></a> are <i>established</i>
based on the <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list"><i>lambda list</i></a>, see <a rel=
"CHILD" href="03_d.htm">Section 3.4 (Lambda Lists)</a>.</p>
<p>The body of a <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_expression"><i>lambda expression</i></a> is an
<a rel="DEFINITION" href="26_glo_i.htm#implicit_progn"><i>implicit
progn</i></a>; the <a rel="DEFINITION" href=
"26_glo_v.htm#value"><i>values</i></a> it returns are returned by
the <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_expression"><i>lambda expression</i></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1.4 Closures and Lexical Binding</h2>
<p>A <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_closure"><i>lexical closure</i></a> is a
<a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> that can refer to and
alter the values of <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_binding"><i>lexical bindings</i></a>
<i>established</i> by <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>forms</i></a> that textually include the
function definition.</p>
<p>Consider this code, where <tt>x</tt> is not declared <a rel=
"DEFINITION" href="d_specia.htm#special"><b>special</b></a>:</p>
<pre>
 (defun two-funs (x)
   (list (function (lambda () x))
         (function (lambda (y) (setq x y)))))
 (setq funs (two-funs 6))
 (funcall (car funs)) =&gt;  6
 (funcall (cadr funs) 43) =&gt;  43
 (funcall (car funs)) =&gt;  43
</pre>
<p>The <a rel="DEFINITION" href=
"s_fn.htm#function"><b>function</b></a> <a rel="DEFINITION" href=
"26_glo_s.htm#special_form"><i>special form</i></a> coerces a
<a rel="DEFINITION" href="26_glo_l.htm#lambda_expression"><i>lambda
expression</i></a> into a <a rel="DEFINITION" href=
"26_glo_c.htm#closure"><i>closure</i></a> in which the <a rel=
"DEFINITION" href="26_glo_l.htm#lexical_environment"><i>lexical
environment</i></a> in effect when the <a rel="DEFINITION" href=
"26_glo_s.htm#special_form"><i>special form</i></a> is evaluated is
captured along with the <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_expression"><i>lambda expression</i></a>.</p>
<p>The function <tt>two-funs</tt> returns a <a rel="DEFINITION"
href="26_glo_l.htm#list"><i>list</i></a> of two <a rel="DEFINITION"
href="26_glo_f.htm#function"><i>functions</i></a>, each of which
refers to the <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> of the variable
<tt>x</tt> created on entry to the function <tt>two-funs</tt> when
it was called. This variable has the value <tt>6</tt> initially,
but <a rel="DEFINITION" href="s_setq.htm#setq"><b>setq</b></a> can
alter this <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a>. The <a rel="DEFINITION"
href="26_glo_l.htm#lexical_closure"><i>lexical closure</i></a>
created for the first <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_expression"><i>lambda expression</i></a> does
not "snapshot" the <a rel="DEFINITION" href=
"26_glo_v.htm#value"><i>value</i></a> <tt>6</tt> for <tt>x</tt>
when the <a rel="DEFINITION" href=
"26_glo_c.htm#closure"><i>closure</i></a> is created; rather it
captures the <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> of <tt>x</tt>. The second
<a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> can be used to alter
the <a rel="DEFINITION" href="26_glo_v.htm#value"><i>value</i></a>
in the same (captured) <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> (to <tt>43</tt>, in the
example), and this altered variable binding then affects the value
returned by the first <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a>.</p>
<p>In situations where a <a rel="DEFINITION" href=
"26_glo_c.htm#closure"><i>closure</i></a> of a <a rel="DEFINITION"
href="26_glo_l.htm#lambda_expression"><i>lambda expression</i></a>
over the same set of <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>bindings</i></a> may be produced more
than once, the various resulting <a rel="DEFINITION" href=
"26_glo_c.htm#closure"><i>closures</i></a> may or may not be
<a rel="DEFINITION" href=
"26_glo_i.htm#identical"><i>identical</i></a>, at the discretion of
the <a rel="DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementation</i></a>. That is,
two <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>functions</i></a> that are behaviorally
indistinguishable might or might not be <a rel="DEFINITION" href=
"26_glo_i.htm#identical"><i>identical</i></a>. Two <a rel=
"DEFINITION" href="26_glo_f.htm#function"><i>functions</i></a> that
are behaviorally distinguishable are <a rel="DEFINITION" href=
"26_glo_d.htm#distinct"><i>distinct</i></a>. For example:</p>
<pre>
 (let ((x 5) (funs '()))
   (dotimes (j 10)                          
     (push #'(lambda (z)                        
               (if (null z) (setq x 0) (+ x z)))
           funs))
   funs)
</pre>
The result of the above <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> is a <a rel="DEFINITION" href=
"26_glo_l.htm#list"><i>list</i></a> of ten <a rel="DEFINITION"
href="26_glo_c.htm#closure"><i>closures</i></a>. Each requires only
the <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> of <tt>x</tt>. It is the
same <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> in each case, but the ten
<a rel="DEFINITION" href="26_glo_c.htm#closure"><i>closure</i></a>
<a rel="DEFINITION" href="26_glo_o.htm#object"><i>objects</i></a>
might or might not be <a rel="DEFINITION" href=
"26_glo_i.htm#identical"><i>identical</i></a>. On the other hand,
the result of the <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a>
<pre>
 (let ((funs '()))     
   (dotimes (j 10)
     (let ((x 5))
       (push (function (lambda (z)
                        (if (null z) (setq x 0) (+ x z))))
             funs)))
  funs)
</pre>
is also a <a rel="DEFINITION" href=
"26_glo_l.htm#list"><i>list</i></a> of ten <a rel="DEFINITION"
href="26_glo_c.htm#closure"><i>closures</i></a>. However, in this
case no two of the <a rel="DEFINITION" href=
"26_glo_c.htm#closure"><i>closure</i></a> <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>objects</i></a> can be <a rel="DEFINITION"
href="26_glo_i.htm#identical"><i>identical</i></a> because each
<a rel="DEFINITION" href="26_glo_c.htm#closure"><i>closure</i></a>
is closed over a distinct <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> of <tt>x</tt>, and these
<a rel="DEFINITION" href="26_glo_b.htm#binding"><i>bindings</i></a>
can be behaviorally distinguished because of the use of <a rel=
"DEFINITION" href="s_setq.htm#setq"><b>setq</b></a>.
<p>The result of the <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a></p>
<pre>
 (let ((funs '()))
   (dotimes (j 10)
     (let ((x 5))
       (push (function (lambda (z) (+ x z)))
            funs)))
   funs)
</pre>
is a <a rel="DEFINITION" href="26_glo_l.htm#list"><i>list</i></a>
of ten <a rel="DEFINITION" href=
"26_glo_c.htm#closure"><i>closure</i></a> <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>objects</i></a> that might or might not be
<a rel="DEFINITION" href=
"26_glo_i.htm#identical"><i>identical</i></a>. A different <a rel=
"DEFINITION" href="26_glo_b.htm#binding"><i>binding</i></a> of
<tt>x</tt> is involved for each <a rel="DEFINITION" href=
"26_glo_c.htm#closure"><i>closure</i></a>, but the <a rel=
"DEFINITION" href="26_glo_b.htm#binding"><i>bindings</i></a> cannot
be distinguished because their values are the <a rel="DEFINITION"
href="26_glo_s.htm#same"><i>same</i></a> and immutable (there being
no occurrence of <a rel="DEFINITION" href=
"s_setq.htm#setq"><b>setq</b></a> on <tt>x</tt>). A compiler could
internally transform the <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> to
<pre>
 (let ((funs '()))
   (dotimes (j 10)
     (push (function (lambda (z) (+ 5 z)))
           funs))
  funs)
</pre>
where the <a rel="DEFINITION" href=
"26_glo_c.htm#closure"><i>closures</i></a> may be <a rel=
"DEFINITION" href="26_glo_i.htm#identical"><i>identical</i></a>.
<p>It is possible that a <a rel="DEFINITION" href=
"26_glo_c.htm#closure"><i>closure</i></a> does not close over any
variable bindings. In the code fragment</p>
<pre>
 (mapcar (function (lambda (x) (+ x 2))) y)
</pre>
the function <tt>(lambda (x) (+ x 2))</tt> contains no references
to any outside object. In this case, the same <a rel="DEFINITION"
href="26_glo_c.htm#closure"><i>closure</i></a> might be returned
for all evaluations of the <a rel="DEFINITION" href=
"s_fn.htm#function"><b>function</b></a> <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a>. 
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1.5 Shadowing</h2>
<p>If two <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>forms</i></a> that <a rel="DEFINITION" href=
"26_glo_e.htm#establish"><i>establish</i></a> <a rel="DEFINITION"
href="26_glo_l.htm#lexical_binding"><i>lexical bindings</i></a>
with the same <a rel="DEFINITION" href=
"26_glo_n.htm#name"><i>name</i></a> N are textually nested, then
references to N within the inner <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> refer to the <a rel=
"DEFINITION" href="26_glo_b.htm#binding"><i>binding</i></a>
established by the inner <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a>; the inner <a rel="DEFINITION"
href="26_glo_b.htm#binding"><i>binding</i></a> for N <a rel=
"DEFINITION" href="26_glo_s.htm#shadow"><i>shadows</i></a> the
outer <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> for N. Outside the inner
<a rel="DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> but
inside the outer one, references to N refer to the <a rel=
"DEFINITION" href="26_glo_b.htm#binding"><i>binding</i></a>
established by the outer <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a>. For example:</p>
<pre>
 (defun test (x z)
   (let ((z (* x 2)))
     (print z))
   z)
</pre>
The <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> of the variable
<tt>z</tt> by <a rel="DEFINITION" href=
"s_let_l.htm#let"><b>let</b></a> shadows the <a rel="DEFINITION"
href="26_glo_p.htm#parameter"><i>parameter</i></a> binding for the
function <tt>test</tt>. The reference to the variable <tt>z</tt> in
the <a rel="DEFINITION" href="f_wr_pr.htm#print"><b>print</b></a>
<a rel="DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> refers
to the <a rel="DEFINITION" href="s_let_l.htm#let"><b>let</b></a>
binding. The reference to <tt>z</tt> at the end of the function
<tt>test</tt> refers to the <a rel="DEFINITION" href=
"26_glo_p.htm#parameter"><i>parameter</i></a> named <tt>z</tt>.
<p>Constructs that are lexically scoped act as if new names were
generated for each <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a> on each execution.
Therefore, dynamic shadowing cannot occur. For example:</p>
<pre>
 (defun contorted-example (f g x)
   (if (= x 0)
       (funcall f)
       (block here
          (+ 5 (contorted-example g
                                  #'(lambda () (return-from here 4))
                                  (- x 1))))))
</pre>
Consider the call <tt>(contorted-example nil nil 2)</tt>. This
produces <tt>4</tt>. During the course of execution, there are
three calls to <tt>contorted-example</tt>, interleaved with two
blocks:
<pre>
 (contorted-example nil nil 2)
   (block here1 ...)
     (contorted-example nil #'(lambda () (return-from here1 4)) 1)
       (block here2 ...)
         (contorted-example #'(lambda () (return-from here1 4))
                            #'(lambda () (return-from here2 4))
                            0)
             (funcall f)
                    where f =&gt;  #'(lambda () (return-from here1 4))
                 (return-from here1 4)
</pre>
At the time the <tt>funcall</tt> is executed there are two <a rel=
"DEFINITION" href="s_block.htm#block"><b>block</b></a> <a rel=
"DEFINITION" href="26_glo_e.htm#exit_point"><i>exit points</i></a>
outstanding, each apparently named <tt>here</tt>. The <a rel=
"DEFINITION" href="s_ret_fr.htm#return-from"><b>return-from</b></a>
<a rel="DEFINITION" href="26_glo_f.htm#form"><i>form</i></a>
executed as a result of the <tt>funcall</tt> operation refers to
the outer outstanding <a rel="DEFINITION" href=
"26_glo_e.htm#exit_point"><i>exit point</i></a> (here1), not the
inner one (here2). It refers to that <a rel="DEFINITION" href=
"26_glo_e.htm#exit_point"><i>exit point</i></a> textually visible
at the point of execution of <a rel="DEFINITION" href=
"s_fn.htm#function"><b>function</b></a> (here abbreviated by the
<tt>#'</tt> syntax) that resulted in creation of the <a rel=
"DEFINITION" href="26_glo_f.htm#function"><i>function</i></a>
<a rel="DEFINITION" href="26_glo_o.htm#object"><i>object</i></a>
actually invoked by <a rel="DEFINITION" href=
"f_funcal.htm#funcall"><b>funcall</b></a>.
<p>If, in this example, one were to change the <tt>(funcall f)</tt>
to <tt>(funcall g)</tt>, then the value of the call
<tt>(contorted-example nil nil 2)</tt> would be <tt>9</tt>. The
value would change because <a rel="DEFINITION" href=
"f_funcal.htm#funcall"><b>funcall</b></a> would cause the execution
of <tt>(return-from here</tt>2 <tt>4)</tt>, thereby causing a
return from the inner <a rel="DEFINITION" href=
"26_glo_e.htm#exit_point"><i>exit point</i></a> (here2). When that
occurs, the value <tt>4</tt> is returned from the middle invocation
of <tt>contorted-example</tt>, <tt>5</tt> is added to that to get
<tt>9</tt>, and that value is returned from the outer block and the
outermost call to <tt>contorted-example</tt>. The point is that the
choice of <a rel="DEFINITION" href=
"26_glo_e.htm#exit_point"><i>exit point</i></a> returned from has
nothing to do with its being innermost or outermost; rather, it
depends on the lexical environment that is packaged up with a
<a rel="DEFINITION" href="26_glo_l.htm#lambda_expression"><i>lambda
expression</i></a> when <a rel="DEFINITION" href=
"s_fn.htm#function"><b>function</b></a> is executed.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1.6 Extent</h2>
<tt>Contorted-example</tt> works only because the <a rel=
"DEFINITION" href="26_glo_f.htm#function"><i>function</i></a> named
by <tt>f</tt> is invoked during the <a rel="DEFINITION" href=
"26_glo_e.htm#extent"><i>extent</i></a> of the <a rel="DEFINITION"
href="26_glo_e.htm#exit_point"><i>exit point</i></a>. Once the flow
of execution has left the block, the <a rel="DEFINITION" href=
"26_glo_e.htm#exit_point"><i>exit point</i></a> is
<i>disestablished</i>. For example:
<pre>
 (defun invalid-example ()
   (let ((y (block here #'(lambda (z) (return-from here z)))))
     (if (numberp y) y (funcall y 5))))
</pre>
One might expect the call <tt>(invalid-example)</tt> to produce
<tt>5</tt> by the following incorrect reasoning: <a rel=
"DEFINITION" href="s_let_l.htm#let"><b>let</b></a> binds <tt>y</tt>
to the value of <a rel="DEFINITION" href=
"s_block.htm#block"><b>block</b></a>; this value is a <a rel=
"DEFINITION" href="26_glo_f.htm#function"><i>function</i></a>
resulting from the <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_expression"><i>lambda expression</i></a>.
Because <tt>y</tt> is not a number, it is invoked on the value
<tt>5</tt>. The <a rel="DEFINITION" href=
"s_ret_fr.htm#return-from"><b>return-from</b></a> should then
return this value from the <a rel="DEFINITION" href=
"26_glo_e.htm#exit_point"><i>exit point</i></a> named
<tt>here</tt>, thereby exiting from the block again and giving
<tt>y</tt> the value <tt>5</tt> which, being a number, is then
returned as the value of the call to <tt>invalid-example</tt>.
<p>The argument fails only because <a rel="DEFINITION" href=
"26_glo_e.htm#exit_point"><i>exit points</i></a> have <a rel=
"DEFINITION" href="26_glo_d.htm#dynamic_extent"><i>dynamic
extent</i></a>. The argument is correct up to the execution of
<a rel="DEFINITION" href=
"s_ret_fr.htm#return-from"><b>return-from</b></a>. The execution of
<a rel="DEFINITION" href=
"s_ret_fr.htm#return-from"><b>return-from</b></a> should signal an
error of <a rel="DEFINITION" href=
"26_glo_t.htm#type"><i>type</i></a> <a rel="DEFINITION" href=
"e_contro.htm#control-error"><b>control-error</b></a>, however, not
because it cannot refer to the <a rel="DEFINITION" href=
"26_glo_e.htm#exit_point"><i>exit point</i></a>, but because it
does correctly refer to an <a rel="DEFINITION" href=
"26_glo_e.htm#exit_point"><i>exit point</i></a> and that <a rel=
"DEFINITION" href="26_glo_e.htm#exit_point"><i>exit point</i></a>
has been <i>disestablished</i>.</p>
<p>A reference by name to a dynamic <a rel="DEFINITION" href=
"26_glo_e.htm#exit_point"><i>exit point</i></a> binding such as a
<a rel="DEFINITION" href="26_glo_c.htm#catch_tag"><i>catch
tag</i></a> refers to the most recently <i>established</i> <a rel=
"DEFINITION" href="26_glo_b.htm#binding"><i>binding</i></a> of that
name that has not been <i>disestablished</i>. For example:</p>
<pre>
 (defun fun1 (x)
   (catch 'trap (+ 3 (fun2 x))))
 (defun fun2 (y)
   (catch 'trap (* 5 (fun3 y))))
 (defun fun3 (z)
   (throw 'trap z))
</pre>
Consider the call <tt>(fun1 7)</tt>. The result is <tt>10</tt>. At
the time the <a rel="DEFINITION" href=
"s_throw.htm#throw"><b>throw</b></a> is executed, there are two
outstanding catchers with the name <tt>trap</tt>: one established
within procedure <tt>fun1</tt>, and the other within procedure
<tt>fun2</tt>. The latter is the more recent, and so the value
<tt>7</tt> is returned from <a rel="DEFINITION" href=
"s_catch.htm#catch"><b>catch</b></a> in <tt>fun2</tt>. Viewed from
within <tt>fun3</tt>, the <a rel="DEFINITION" href=
"s_catch.htm#catch"><b>catch</b></a> in <tt>fun2</tt> shadows the
one in <tt>fun1</tt>. Had <tt>fun2</tt> been defined as
<pre>
 (defun fun2 (y)
   (catch 'snare (* 5 (fun3 y))))
</pre>
then the two <a rel="DEFINITION" href=
"26_glo_e.htm#exit_point"><i>exit points</i></a> would have
different <a rel="DEFINITION" href=
"26_glo_n.htm#name"><i>names</i></a>, and therefore the one in
<tt>fun1</tt> would not be shadowed. The result would then have
been <tt>7</tt>. 
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.1.7 Return Values</h2>
<p>Ordinarily the result of calling a <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> is a single <a rel=
"DEFINITION" href="26_glo_o.htm#object"><i>object</i></a>.
Sometimes, however, it is convenient for a function to compute
several <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>objects</i></a> and return them.</p>
<p>In order to receive other than exactly one value from a <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>form</i></a>, one of
several <a rel="DEFINITION" href=
"26_glo_s.htm#special_form"><i>special forms</i></a> or <a rel=
"DEFINITION" href="26_glo_m.htm#macro"><i>macros</i></a> must be
used to request those values. If a <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> produces <a rel="DEFINITION"
href="26_glo_m.htm#multiple_values"><i>multiple values</i></a>
which were not requested in this way, then the first value is given
to the caller and all others are discarded; if the <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> produces zero
values, then the caller receives <a rel="DEFINITION" href=
"a_nil.htm#nil"><b>nil</b></a> as a value.</p>
<p>The next figure lists some <a rel="DEFINITION" href=
"26_glo_o.htm#operator"><i>operators</i></a> for receiving <a rel=
"DEFINITION" href="26_glo_m.htm#multiple_values"><i>multiple
values</i></a>[2]. These <a rel="DEFINITION" href=
"26_glo_o.htm#operator"><i>operators</i></a> can be used to specify
one or more <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>forms</i></a> to <a rel="DEFINITION" href=
"26_glo_e.htm#evaluate"><i>evaluate</i></a> and where to put the
<a rel="DEFINITION" href="26_glo_v.htm#value"><i>values</i></a>
returned by those <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>forms</i></a>.</p>
<pre>
<a rel="DEFINITION" href=
"m_multip.htm#multiple-value-bind">multiple-value-bind</a>  <a rel=
"DEFINITION" href=
"s_mult_1.htm#multiple-value-prog1">multiple-value-prog1</a>  <a rel="DEFINITION"
href="s_ret_fr.htm#return-from">return-from</a>  
<a rel="DEFINITION" href=
"s_multip.htm#multiple-value-call">multiple-value-call</a>  <a rel=
"DEFINITION" href=
"m_mult_2.htm#multiple-value-setq">multiple-value-setq</a>   <a rel="DEFINITION"
href="s_throw.htm#throw">throw</a>        
<a rel="DEFINITION" href=
"m_mult_1.htm#multiple-value-list">multiple-value-list</a>  <a rel=
"DEFINITION" href=
"m_return.htm#return">return</a>                             
</pre>
<p><b>Figure 3-5. Some operators applicable to receiving multiple
values</b></p>
<p>The <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> <a rel="DEFINITION"
href="f_values.htm#values"><b>values</b></a> can produce <a rel=
"DEFINITION" href="26_glo_m.htm#multiple_values"><i>multiple
values</i></a>[2]. <tt>(values)</tt> returns zero values;
<tt>(values</tt> <i>form</i><tt>)</tt> returns the <a rel=
"DEFINITION" href="26_glo_p.htm#primary_value"><i>primary
value</i></a> returned by <i>form</i>; <tt>(values</tt>
<i>form1</i> <i>form2</i><tt>)</tt> returns two values, the <a rel=
"DEFINITION" href="26_glo_p.htm#primary_value"><i>primary
value</i></a> of <i>form1</i> and the <a rel="DEFINITION" href=
"26_glo_p.htm#primary_value"><i>primary value</i></a> of
<i>form2</i>; and so on.</p>
<p>See <a rel="DEFINITION" href=
"v_multip.htm#multiple-values-limit"><b>multiple-values-limit</b></a>
and <a rel="DEFINITION" href=
"f_vals_l.htm#values-list"><b>values-list</b></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.2 Compilation</h2>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.2.1 Compiler Terminology</h2>
<p>The following terminology is used in this section.</p>
<p>The <a rel="DEFINITION" href=
"26_glo_c.htm#compiler"><i>compiler</i></a> is a utility that
translates code into an <a rel="DEFINITION" href=
"26_glo_i.htm#implementation-dependent"><i>implementation-dependent</i></a>
form that might be represented or executed efficiently. The term
<a rel="DEFINITION" href=
"26_glo_c.htm#compiler"><i>compiler</i></a> refers to both of the
<a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>functions</i></a> <a rel="DEFINITION"
href="f_cmp.htm#compile"><b>compile</b></a> and <a rel="DEFINITION"
href="f_cmp_fi.htm#compile-file"><b>compile-file</b></a>.</p>
<p>The term <a rel="DEFINITION" href=
"26_glo_c.htm#compiled_code"><i>compiled code</i></a> refers to
<a rel="DEFINITION" href="26_glo_o.htm#object"><i>objects</i></a>
representing compiled programs, such as <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>objects</i></a> constructed by <a rel=
"DEFINITION" href="f_cmp.htm#compile"><b>compile</b></a> or by
<a rel="DEFINITION" href="f_load.htm#load"><b>load</b></a> when
<i>loading</i> a <a rel="DEFINITION" href=
"26_glo_c.htm#compiled_file"><i>compiled file</i></a>.</p>
<p>The term <a rel="DEFINITION" href=
"26_glo_i.htm#implicit_compilation"><i>implicit compilation</i></a>
refers to <a rel="DEFINITION" href=
"26_glo_c.htm#compilation"><i>compilation</i></a> performed during
<a rel="DEFINITION" href=
"26_glo_e.htm#evaluation"><i>evaluation</i></a>.</p>
<p>The term <a rel="DEFINITION" href=
"26_glo_l.htm#literal"><i>literal</i></a> <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a> refers to a quoted <a rel=
"DEFINITION" href="26_glo_o.htm#object"><i>object</i></a> or a
<a rel="DEFINITION" href=
"26_glo_s.htm#self-evaluating_object"><i>self-evaluating
object</i></a> or an <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a> that is a substructure of
such an <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a>. A <a rel="DEFINITION"
href="26_glo_c.htm#constant_variable"><i>constant variable</i></a>
is not itself a <a rel="DEFINITION" href=
"26_glo_l.htm#literal"><i>literal</i></a> <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a>.</p>
<p>The term <a rel="DEFINITION" href=
"26_glo_c.htm#coalesce"><i>coalesce</i></a> is defined as follows.
Suppose <tt>A</tt> and <tt>B</tt> are two <a rel="DEFINITION" href=
"26_glo_l.htm#literal"><i>literal</i></a> <a rel="DEFINITION" href=
"26_glo_c.htm#constant"><i>constants</i></a> in the <a rel=
"DEFINITION" href="26_glo_s.htm#source_code"><i>source
code</i></a>, and that <tt>A'</tt> and <tt>B'</tt> are the
corresponding <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>objects</i></a> in the <a rel="DEFINITION"
href="26_glo_c.htm#compiled_code"><i>compiled code</i></a>. If
<tt>A'</tt> and <tt>B'</tt> are <a rel="DEFINITION" href=
"f_eql.htm#eql"><b>eql</b></a> but <tt>A</tt> and <tt>B</tt> are
not <a rel="DEFINITION" href="f_eql.htm#eql"><b>eql</b></a>, then
it is said that <tt>A</tt> and <tt>B</tt> have been coalesced by
the compiler.</p>
<p>The term <a rel="DEFINITION" href=
"26_glo_m.htm#minimal_compilation"><i>minimal compilation</i></a>
refers to actions the compiler must take at <a rel="DEFINITION"
href="26_glo_c.htm#compile_time"><i>compile time</i></a>. These
actions are specified in <a rel="CHILD" href="03_bb.htm">Section
3.2.2 (Compilation Semantics)</a>.</p>
<p>The verb <a rel="DEFINITION" href=
"26_glo_p.htm#process"><i>process</i></a> refers to performing
<a rel="DEFINITION" href=
"26_glo_m.htm#minimal_compilation"><i>minimal compilation</i></a>,
determining the time of evaluation for a <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a>, and possibly <i>evaluating</i>
that <a rel="DEFINITION" href="26_glo_f.htm#form"><i>form</i></a>
(if required).</p>
<p>The term <a rel="DEFINITION" href=
"26_glo_f.htm#further_compilation"><i>further compilation</i></a>
refers to <a rel="DEFINITION" href=
"26_glo_i.htm#implementation-dependent"><i>implementation-dependent</i></a>
compilation beyond <a rel="DEFINITION" href=
"26_glo_m.htm#minimal_compilation"><i>minimal compilation</i></a>.
That is, <i>processing</i> does not imply complete compilation.
Block compilation and generation of machine-specific instructions
are examples of further compilation. Further compilation is
permitted to take place at <a rel="DEFINITION" href=
"26_glo_r.htm#run_time"><i>run time</i></a>.</p>
<p>Four different <a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environments</i></a> relevant to
compilation are distinguished: the <a rel="DEFINITION" href=
"26_glo_s.htm#startup_environment"><i>startup environment</i></a>,
the <a rel="DEFINITION" href=
"26_glo_c.htm#compilation_environment"><i>compilation
environment</i></a>, the <a rel="DEFINITION" href=
"26_glo_e.htm#evaluation_environment"><i>evaluation
environment</i></a>, and the <a rel="DEFINITION" href=
"26_glo_r.htm#run-time_environment"><i>run-time
environment</i></a>.</p>
<p>The <a rel="DEFINITION" href=
"26_glo_s.htm#startup_environment"><i>startup environment</i></a>
is the <a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environment</i></a> of the <a rel=
"DEFINITION" href="26_glo_l.htm#lisp_image"><i>Lisp image</i></a>
from which the <a rel="DEFINITION" href=
"26_glo_c.htm#compiler"><i>compiler</i></a> was invoked.</p>
<p>The <a rel="DEFINITION" href=
"26_glo_c.htm#compilation_environment"><i>compilation
environment</i></a> is maintained by the compiler and is used to
hold definitions and declarations to be used internally by the
compiler. Only those parts of a definition needed for correct
compilation are saved. The <a rel="DEFINITION" href=
"26_glo_c.htm#compilation_environment"><i>compilation
environment</i></a> is used as the <a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environment</i></a> <a rel=
"DEFINITION" href="26_glo_a.htm#argument"><i>argument</i></a> to
macro expanders called by the compiler. It is unspecified whether a
definition available in the <a rel="DEFINITION" href=
"26_glo_c.htm#compilation_environment"><i>compilation
environment</i></a> can be used in an <a rel="DEFINITION" href=
"26_glo_e.htm#evaluation"><i>evaluation</i></a> initiated in the
<a rel="DEFINITION" href=
"26_glo_s.htm#startup_environment"><i>startup environment</i></a>
or <a rel="DEFINITION" href=
"26_glo_e.htm#evaluation_environment"><i>evaluation
environment</i></a>.</p>
<p>The <a rel="DEFINITION" href=
"26_glo_e.htm#evaluation_environment"><i>evaluation
environment</i></a> is a <a rel="DEFINITION" href=
"26_glo_r.htm#run-time_environment"><i>run-time environment</i></a>
in which macro expanders and code specified by <a rel="DEFINITION"
href="s_eval_w.htm#eval-when"><b>eval-when</b></a> to be evaluated
are evaluated. All evaluations initiated by the <a rel="DEFINITION"
href="26_glo_c.htm#compiler"><i>compiler</i></a> take place in the
<a rel="DEFINITION" href=
"26_glo_e.htm#evaluation_environment"><i>evaluation
environment</i></a>.</p>
<p>The <a rel="DEFINITION" href=
"26_glo_r.htm#run-time_environment"><i>run-time environment</i></a>
is the <a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environment</i></a> in which the
program being compiled will be executed.</p>
<p>The <a rel="DEFINITION" href=
"26_glo_c.htm#compilation_environment"><i>compilation
environment</i></a> inherits from the <a rel="DEFINITION" href=
"26_glo_e.htm#evaluation_environment"><i>evaluation
environment</i></a>, and the <a rel="DEFINITION" href=
"26_glo_c.htm#compilation_environment"><i>compilation
environment</i></a> and <a rel="DEFINITION" href=
"26_glo_e.htm#evaluation_environment"><i>evaluation
environment</i></a> might be <a rel="DEFINITION" href=
"26_glo_i.htm#identical"><i>identical</i></a>. The <a rel=
"DEFINITION" href=
"26_glo_e.htm#evaluation_environment"><i>evaluation
environment</i></a> inherits from the <a rel="DEFINITION" href=
"26_glo_s.htm#startup_environment"><i>startup environment</i></a>,
and the <a rel="DEFINITION" href=
"26_glo_s.htm#startup_environment"><i>startup environment</i></a>
and <a rel="DEFINITION" href=
"26_glo_e.htm#evaluation_environment"><i>evaluation
environment</i></a> might be <a rel="DEFINITION" href=
"26_glo_i.htm#identical"><i>identical</i></a>.</p>
<p>The term <a rel="DEFINITION" href=
"26_glo_c.htm#compile_time"><i>compile time</i></a> refers to the
duration of time that the compiler is processing <a rel=
"DEFINITION" href="26_glo_s.htm#source_code"><i>source
code</i></a>. At <a rel="DEFINITION" href=
"26_glo_c.htm#compile_time"><i>compile time</i></a>, only the
<a rel="DEFINITION" href=
"26_glo_c.htm#compilation_environment"><i>compilation
environment</i></a> and the <a rel="DEFINITION" href=
"26_glo_e.htm#evaluation_environment"><i>evaluation
environment</i></a> are available.</p>
<p>The term <a rel="DEFINITION" href=
"26_glo_c.htm#compile-time_definition"><i>compile-time
definition</i></a> refers to a definition in the <a rel=
"DEFINITION" href=
"26_glo_c.htm#compilation_environment"><i>compilation
environment</i></a>. For example, when compiling a file, the
definition of a function might be retained in the <a rel=
"DEFINITION" href=
"26_glo_c.htm#compilation_environment"><i>compilation
environment</i></a> if it is declared <a rel="DEFINITION" href=
"d_inline.htm#inline"><b>inline</b></a>. This definition might not
be available in the <a rel="DEFINITION" href=
"26_glo_e.htm#evaluation_environment"><i>evaluation
environment</i></a>.</p>
<p>The term <a rel="DEFINITION" href="26_glo_r.htm#run_time"><i>run
time</i></a> refers to the duration of time that the loader is
loading compiled code or compiled code is being executed. At run
time, only the <a rel="DEFINITION" href=
"26_glo_r.htm#run-time_environment"><i>run-time environment</i></a>
is available.</p>
<p>The term <a rel="DEFINITION" href=
"26_glo_r.htm#run-time_definition"><i>run-time definition</i></a>
refers to a definition in the <a rel="DEFINITION" href=
"26_glo_r.htm#run-time_environment"><i>run-time
environment</i></a>.</p>
<p>The term <a rel="DEFINITION" href=
"26_glo_r.htm#run-time_compiler"><i>run-time compiler</i></a>
refers to the <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> <a rel="DEFINITION"
href="f_cmp.htm#compile"><b>compile</b></a> or <a rel="DEFINITION"
href="26_glo_i.htm#implicit_compilation"><i>implicit
compilation</i></a>, for which the compilation and run-time <a rel=
"DEFINITION" href=
"26_glo_e.htm#environment"><i>environments</i></a> are maintained
in the same <a rel="DEFINITION" href=
"26_glo_l.htm#lisp_image"><i>Lisp image</i></a>. Note that when the
<a rel="DEFINITION" href=
"26_glo_r.htm#run-time_compiler"><i>run-time compiler</i></a> is
used, the <a rel="DEFINITION" href=
"26_glo_r.htm#run-time_environment"><i>run-time environment</i></a>
and <a rel="DEFINITION" href=
"26_glo_s.htm#startup_environment"><i>startup environment</i></a>
are the same.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.2.2 Compilation Semantics</h2>
<p>Conceptually, compilation is a process that traverses code,
performs certain kinds of syntactic and semantic analyses using
information (such as proclamations and <a rel="DEFINITION" href=
"26_glo_m.htm#macro"><i>macro</i></a> definitions) present in the
<a rel="DEFINITION" href=
"26_glo_c.htm#compilation_environment"><i>compilation
environment</i></a>, and produces equivalent, possibly more
efficient code.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.2.2.1 Compiler Macros</h2>
<p>A <a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro"><i>compiler macro</i></a> can be
defined for a <a rel="DEFINITION" href=
"26_glo_n.htm#name"><i>name</i></a> that also names a <a rel=
"DEFINITION" href="26_glo_f.htm#function"><i>function</i></a> or
<a rel="DEFINITION" href="26_glo_m.htm#macro"><i>macro</i></a>.
That is, it is possible for a <a rel="DEFINITION" href=
"26_glo_f.htm#function_name"><i>function name</i></a> to name both
a <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> and a <a rel=
"DEFINITION" href="26_glo_c.htm#compiler_macro"><i>compiler
macro</i></a>.</p>
<p>A <a rel="DEFINITION" href=
"26_glo_f.htm#function_name"><i>function name</i></a> names a
<a rel="DEFINITION" href="26_glo_c.htm#compiler_macro"><i>compiler
macro</i></a> if <a rel="DEFINITION" href=
"f_cmp_ma.htm#compiler-macro-function"><b>compiler-macro-function</b></a>
is <a rel="DEFINITION" href="26_glo_t.htm#true"><i>true</i></a> of
the <a rel="DEFINITION" href=
"26_glo_f.htm#function_name"><i>function name</i></a> in the
<a rel="DEFINITION" href=
"26_glo_l.htm#lexical_environment"><i>lexical environment</i></a>
in which it appears. Creating a <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_binding"><i>lexical binding</i></a> for the
<a rel="DEFINITION" href="26_glo_f.htm#function_name"><i>function
name</i></a> not only creates a new local <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> or <a rel="DEFINITION"
href="26_glo_m.htm#macro"><i>macro</i></a> definition, but also
<a rel="DEFINITION" href=
"26_glo_s.htm#shadow"><i>shadows</i></a>[2] the <a rel="DEFINITION"
href="26_glo_c.htm#compiler_macro"><i>compiler macro</i></a>.</p>
<p>The <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> returned by <a rel=
"DEFINITION" href=
"f_cmp_ma.htm#compiler-macro-function"><b>compiler-macro-function</b></a>
is a <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> of two arguments,
called the expansion function. To expand a <a rel="DEFINITION"
href="26_glo_c.htm#compiler_macro"><i>compiler macro</i></a>, the
expansion function is invoked by calling the <a rel="DEFINITION"
href="26_glo_m.htm#macroexpand_hook"><i>macroexpand hook</i></a>
with the expansion function as its first argument, the entire
compiler macro <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> as its second argument, and the
current compilation <a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environment</i></a> (or with the
current lexical <a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environment</i></a>, if the <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> is being
processed by something other than <a rel="DEFINITION" href=
"f_cmp_fi.htm#compile-file"><b>compile-file</b></a>) as its third
argument. The <a rel="DEFINITION" href=
"26_glo_m.htm#macroexpand_hook"><i>macroexpand hook</i></a>, in
turn, calls the expansion function with the <a rel="DEFINITION"
href="26_glo_f.htm#form"><i>form</i></a> as its first argument and
the <a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environment</i></a> as its second
argument. The return value from the expansion function, which is
passed through by the <a rel="DEFINITION" href=
"26_glo_m.htm#macroexpand_hook"><i>macroexpand hook</i></a>, might
either be the <a rel="DEFINITION" href=
"26_glo_s.htm#same"><i>same</i></a> <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a>, or else a form that can, at
the discretion of the <a rel="DEFINITION" href=
"26_glo_c.htm#code"><i>code</i></a> doing the expansion, be used in
place of the original <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a>.</p>
<pre>
<a rel="DEFINITION" href=
"v_mexp_h.htm#STmacroexpand-hookST">*macroexpand-hook*</a>  <a rel=
"DEFINITION" href=
"f_cmp_ma.htm#compiler-macro-function">compiler-macro-function</a>  <a rel="DEFINITION"
href=
"m_define.htm#define-compiler-macro">define-compiler-macro</a>  
</pre>
<p><b>Figure 3-6. Defined names applicable to compiler
macros</b></p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.2.2.1.1 Purpose of Compiler Macros</h2>
<p>The purpose of the <a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro"><i>compiler macro</i></a> facility is
to permit selective source code transformations as optimization
advice to the <a rel="DEFINITION" href=
"26_glo_c.htm#compiler"><i>compiler</i></a>. When a <a rel=
"DEFINITION" href="26_glo_c.htm#compound_form"><i>compound
form</i></a> is being processed (as by the compiler), if the
<a rel="DEFINITION" href=
"26_glo_o.htm#operator"><i>operator</i></a> names a <a rel=
"DEFINITION" href="26_glo_c.htm#compiler_macro"><i>compiler
macro</i></a> then the <a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro_function"><i>compiler macro
function</i></a> may be invoked on the form, and the resulting
expansion recursively processed in preference to performing the
usual processing on the original <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> according to its normal
interpretation as a <a rel="DEFINITION" href=
"26_glo_f.htm#function_form"><i>function form</i></a> or <a rel=
"DEFINITION" href="26_glo_m.htm#macro_form"><i>macro
form</i></a>.</p>
<p>A <a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro_function"><i>compiler macro
function</i></a>, like a <a rel="DEFINITION" href=
"26_glo_m.htm#macro_function"><i>macro function</i></a>, is a
<a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> of two <a rel=
"DEFINITION" href="26_glo_a.htm#argument"><i>arguments</i></a>: the
entire call <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> and the <a rel="DEFINITION"
href="26_glo_e.htm#environment"><i>environment</i></a>. Unlike an
ordinary <a rel="DEFINITION" href=
"26_glo_m.htm#macro_function"><i>macro function</i></a>, a <a rel=
"DEFINITION" href=
"26_glo_c.htm#compiler_macro_function"><i>compiler macro
function</i></a> can decline to provide an expansion merely by
returning a value that is the <a rel="DEFINITION" href=
"26_glo_s.htm#same"><i>same</i></a> as the original <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>form</i></a>. The
consequences are undefined if a <a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro_function"><i>compiler macro
function</i></a> destructively modifies any part of its <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> argument.</p>
<p>The <a rel="DEFINITION" href="26_glo_f.htm#form"><i>form</i></a>
passed to the compiler macro function can either be a <a rel=
"DEFINITION" href="26_glo_l.htm#list"><i>list</i></a> whose <a rel=
"DEFINITION" href="26_glo_c.htm#car"><i>car</i></a> is the function
name, or a <a rel="DEFINITION" href=
"26_glo_l.htm#list"><i>list</i></a> whose <a rel="DEFINITION" href=
"26_glo_c.htm#car"><i>car</i></a> is <a rel="DEFINITION" href=
"f_funcal.htm#funcall"><b>funcall</b></a> and whose <a rel=
"DEFINITION" href="26_glo_c.htm#cadr"><i>cadr</i></a> is a list
<tt>(function</tt> <i>name</i><tt>)</tt>; note that this affects
destructuring of the form argument by the <a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro_function"><i>compiler macro
function</i></a>. <a rel="DEFINITION" href=
"m_define.htm#define-compiler-macro"><b>define-compiler-macro</b></a>
arranges for destructuring of arguments to be performed correctly
for both possible formats.</p>
<p>When <a rel="DEFINITION" href=
"f_cmp_fi.htm#compile-file"><b>compile-file</b></a> chooses to
expand a <a rel="DEFINITION" href=
"26_glo_t.htm#top_level_form"><i>top level form</i></a> that is a
<a rel="DEFINITION" href="26_glo_c.htm#compiler_macro"><i>compiler
macro</i></a> <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a>, the expansion is also treated
as a <a rel="DEFINITION" href="26_glo_t.htm#top_level_form"><i>top
level form</i></a> for the purposes of <a rel="DEFINITION" href=
"s_eval_w.htm#eval-when"><b>eval-when</b></a> processing; see
<a rel="CHILD" href="03_bca.htm">Section 3.2.3.1 (Processing of Top
Level Forms)</a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.2.2.1.2 Naming of Compiler Macros</h2>
<p><a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro"><i>Compiler macros</i></a> may be
defined for <a rel="DEFINITION" href=
"26_glo_f.htm#function_name"><i>function names</i></a> that name
<a rel="DEFINITION" href="26_glo_m.htm#macro"><i>macros</i></a> as
well as <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>functions</i></a>.</p>
<p><a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro"><i>Compiler macro</i></a> definitions
are strictly global. There is no provision for defining local
<a rel="DEFINITION" href="26_glo_c.htm#compiler_macro"><i>compiler
macros</i></a> in the way that <a rel="DEFINITION" href=
"s_flet_.htm#macrolet"><b>macrolet</b></a> defines local <a rel=
"DEFINITION" href="26_glo_m.htm#macro"><i>macros</i></a>. Lexical
bindings of a function name shadow any compiler macro definition
associated with the name as well as its global <a rel="DEFINITION"
href="26_glo_f.htm#function"><i>function</i></a> or <a rel=
"DEFINITION" href="26_glo_m.htm#macro"><i>macro</i></a>
definition.</p>
<p>Note that the presence of a compiler macro definition does not
affect the values returned by functions that access <a rel=
"DEFINITION" href="26_glo_f.htm#function"><i>function</i></a>
definitions (e.g., <a rel="DEFINITION" href=
"f_fbound.htm#fboundp"><b>fboundp</b></a>) or <a rel="DEFINITION"
href="26_glo_m.htm#macro"><i>macro</i></a> definitions (e.g.,
<a rel="DEFINITION" href=
"f_mexp_.htm#macroexpand"><b>macroexpand</b></a>). Compiler macros
are global, and the function <a rel="DEFINITION" href=
"f_cmp_ma.htm#compiler-macro-function"><b>compiler-macro-function</b></a>
is sufficient to resolve their interaction with other lexical and
global definitions.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.2.2.1.3 When Compiler Macros Are Used</h2>
<p>The presence of a <a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro"><i>compiler macro</i></a> definition
for a <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> or <a rel="DEFINITION"
href="26_glo_m.htm#macro"><i>macro</i></a> indicates that it is
desirable for the <a rel="DEFINITION" href=
"26_glo_c.htm#compiler"><i>compiler</i></a> to use the expansion of
the <a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro"><i>compiler macro</i></a> instead of
the original <a rel="DEFINITION" href=
"26_glo_f.htm#function_form"><i>function form</i></a> or <a rel=
"DEFINITION" href="26_glo_m.htm#macro_form"><i>macro form</i></a>.
However, no language processor (compiler, evaluator, or other code
walker) is ever required to actually invoke <a rel="DEFINITION"
href="26_glo_c.htm#compiler_macro_function"><i>compiler macro
functions</i></a>, or to make use of the resulting expansion if it
does invoke a <a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro_function"><i>compiler macro
function</i></a>.</p>
<p>When the <a rel="DEFINITION" href=
"26_glo_c.htm#compiler"><i>compiler</i></a> encounters a <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> during
processing that represents a call to a <a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro"><i>compiler macro</i></a> <a rel=
"DEFINITION" href="26_glo_n.htm#name"><i>name</i></a> (that is not
declared <a rel="DEFINITION" href=
"d_inline.htm#notinline"><b>notinline</b></a>), the <a rel=
"DEFINITION" href="26_glo_c.htm#compiler"><i>compiler</i></a> might
expand the <a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro"><i>compiler macro</i></a>, and might
use the expansion in place of the original <a rel="DEFINITION"
href="26_glo_f.htm#form"><i>form</i></a>.</p>
<p>When <a rel="DEFINITION" href="f_eval.htm#eval"><b>eval</b></a>
encounters a <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> during processing that
represents a call to a <a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro"><i>compiler macro</i></a> <a rel=
"DEFINITION" href="26_glo_n.htm#name"><i>name</i></a> (that is not
declared <a rel="DEFINITION" href=
"d_inline.htm#notinline"><b>notinline</b></a>), <a rel="DEFINITION"
href="f_eval.htm#eval"><b>eval</b></a> might expand the <a rel=
"DEFINITION" href="26_glo_c.htm#compiler_macro"><i>compiler
macro</i></a>, and might use the expansion in place of the original
<a rel="DEFINITION" href="26_glo_f.htm#form"><i>form</i></a>.</p>
<p>There are two situations in which a <a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro"><i>compiler macro</i></a> definition
must not be applied by any language processor:</p>
<ul>
<li>The global function name binding associated with the compiler
macro is shadowed by a lexical binding of the function name.</li>
<li>The function name has been declared or proclaimed <a rel=
"DEFINITION" href="d_inline.htm#notinline"><b>notinline</b></a> and
the call form appears within the scope of the declaration.</li>
</ul>
<p>It is unspecified whether <a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro"><i>compiler macros</i></a> are
expanded or used in any other situations.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.2.2.1.3.1 Notes about the Implementation of Compiler
Macros</h2>
<p>Although it is technically permissible, as described above, for
<a rel="DEFINITION" href="f_eval.htm#eval"><b>eval</b></a> to treat
<a rel="DEFINITION" href="26_glo_c.htm#compiler_macro"><i>compiler
macros</i></a> in the same situations as <a rel="DEFINITION" href=
"26_glo_c.htm#compiler"><i>compiler</i></a> might, this is not
necessarily a good idea in <a rel="DEFINITION" href=
"26_glo_i.htm#interpreted_implementation"><i>interpreted
implementations</i></a>.</p>
<p><a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro"><i>Compiler macros</i></a> exist for
the purpose of trading compile-time speed for run-time speed.
Programmers who write <a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro"><i>compiler macros</i></a> tend to
assume that the <a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro"><i>compiler macros</i></a> can take
more time than normal <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>functions</i></a> and <a rel=
"DEFINITION" href="26_glo_m.htm#macro"><i>macros</i></a> in order
to produce code which is especially optimal for use at run time.
Since <a rel="DEFINITION" href="f_eval.htm#eval"><b>eval</b></a> in
an <a rel="DEFINITION" href=
"26_glo_i.htm#interpreted_implementation"><i>interpreted
implementation</i></a> might perform semantic analysis of the same
form multiple times, it might be inefficient in general for the
<a rel="DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementation</i></a> to choose
to call <a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro"><i>compiler macros</i></a> on every
such <a rel="DEFINITION" href=
"26_glo_e.htm#evaluation"><i>evaluation</i></a>.</p>
<p>Nevertheless, the decision about what to do in these situations
is left to each <a rel="DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementation</i></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.2.2.2 Minimal Compilation</h2>
<p><a rel="DEFINITION" href=
"26_glo_m.htm#minimal_compilation"><i>Minimal compilation</i></a>
is defined as follows:</p>
<ul>
<li>All <a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro"><i>compiler macro</i></a> calls
appearing in the <a rel="DEFINITION" href=
"26_glo_s.htm#source_code"><i>source code</i></a> being compiled
are expanded, if at all, at compile time; they will not be expanded
at run time.</li>
<li>All <a rel="DEFINITION" href=
"26_glo_m.htm#macro"><i>macro</i></a> and <a rel="DEFINITION" href=
"26_glo_s.htm#symbol_macro"><i>symbol macro</i></a> calls appearing
in the source code being compiled are expanded at compile time in
such a way that they will not be expanded again at run time.
<a rel="DEFINITION" href="s_flet_.htm#macrolet"><b>macrolet</b></a>
and <a rel="DEFINITION" href=
"s_symbol.htm#symbol-macrolet"><b>symbol-macrolet</b></a> are
effectively replaced by <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>forms</i></a> corresponding to their bodies
in which calls to <a rel="DEFINITION" href=
"26_glo_m.htm#macro"><i>macros</i></a> are replaced by their
expansions.</li>
<li>The first <a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>argument</i></a> in a <a rel=
"DEFINITION" href=
"s_ld_tim.htm#load-time-value"><b>load-time-value</b></a> <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> in <a rel=
"DEFINITION" href="26_glo_s.htm#source_code"><i>source code</i></a>
processed by <a rel="DEFINITION" href=
"f_cmp.htm#compile"><b>compile</b></a> is <i>evaluated</i> at
<a rel="DEFINITION" href="26_glo_c.htm#compile_time"><i>compile
time</i></a>; in <a rel="DEFINITION" href=
"26_glo_s.htm#source_code"><i>source code</i></a> processed by
<a rel="DEFINITION" href=
"f_cmp_fi.htm#compile-file"><b>compile-file</b></a>, the compiler
arranges for it to be <i>evaluated</i> at <a rel="DEFINITION" href=
"26_glo_l.htm#load_time"><i>load time</i></a>. In either case, the
result of the <a rel="DEFINITION" href=
"26_glo_e.htm#evaluation"><i>evaluation</i></a> is remembered and
used later as the value of the <a rel="DEFINITION" href=
"s_ld_tim.htm#load-time-value"><b>load-time-value</b></a> <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> at <a rel=
"DEFINITION" href="26_glo_e.htm#execution_time"><i>execution
time</i></a>.</li>
</ul>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.2.2.3 Semantic Constraints</h2>
<p>All <a rel="DEFINITION" href=
"26_glo_c.htm#conforming_program"><i>conforming programs</i></a>
must obey the following constraints, which are designed to minimize
the observable differences between compiled and interpreted
programs:</p>
<ul>
<li>Definitions of any referenced <a rel="DEFINITION" href=
"26_glo_m.htm#macro"><i>macros</i></a> must be present in the
<a rel="DEFINITION" href=
"26_glo_c.htm#compilation_environment"><i>compilation
environment</i></a>. Any <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> that is a <a rel="DEFINITION"
href="26_glo_l.htm#list"><i>list</i></a> beginning with a <a rel=
"DEFINITION" href="26_glo_s.htm#symbol"><i>symbol</i></a> that does
not name a <a rel="DEFINITION" href=
"26_glo_s.htm#special_operator"><i>special operator</i></a> or a
<a rel="DEFINITION" href="26_glo_m.htm#macro"><i>macro</i></a>
defined in the <a rel="DEFINITION" href=
"26_glo_c.htm#compilation_environment"><i>compilation
environment</i></a> is treated by the compiler as a function
call.</li>
<li><a rel="DEFINITION" href=
"d_specia.htm#special"><b>Special</b></a> proclamations for <a rel=
"DEFINITION" href="26_glo_d.htm#dynamic_variable"><i>dynamic
variables</i></a> must be made in the <a rel="DEFINITION" href=
"26_glo_c.htm#compilation_environment"><i>compilation
environment</i></a>. Any <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> for which there is no
<a rel="DEFINITION" href="d_specia.htm#special"><b>special</b></a>
declaration or proclamation in the <a rel="DEFINITION" href=
"26_glo_c.htm#compilation_environment"><i>compilation
environment</i></a> is treated by the compiler as a <a rel=
"DEFINITION" href="26_glo_l.htm#lexical_binding"><i>lexical
binding</i></a>.</li>
<li>The definition of a function that is defined and declared
<a rel="DEFINITION" href="d_inline.htm#inline"><b>inline</b></a> in
the <a rel="DEFINITION" href=
"26_glo_c.htm#compilation_environment"><i>compilation
environment</i></a> must be the same at run time.</li>
<li>Within a <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> named F, the compiler
may (but is not required to) assume that an apparent recursive call
to a <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> named F refers to the
same definition of F, unless that function has been declared
<a rel="DEFINITION" href=
"d_inline.htm#notinline"><b>notinline</b></a>. The consequences of
redefining such a recursively defined <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> F while it is executing
are undefined.</li>
<li>A call within a file to a named function that is defined in the
same file refers to that function, unless that function has been
declared <a rel="DEFINITION" href=
"d_inline.htm#notinline"><b>notinline</b></a>. The consequences are
unspecified if functions are redefined individually at run time or
multiply defined in the same file.</li>
<li>The argument syntax and number of return values for all
functions whose <a rel="DEFINITION" href=
"d_ftype.htm#ftype"><b>ftype</b></a> is declared at compile time
must remain the same at run time.</li>
<li><a rel="DEFINITION" href=
"26_glo_c.htm#constant_variable"><i>Constant variables</i></a>
defined in the <a rel="DEFINITION" href=
"26_glo_c.htm#compilation_environment"><i>compilation
environment</i></a> must have a <a rel="DEFINITION" href=
"26_glo_s.htm#similar"><i>similar</i></a> value at run time. A
reference to a <a rel="DEFINITION" href=
"26_glo_c.htm#constant_variable"><i>constant variable</i></a> in
<a rel="DEFINITION" href="26_glo_s.htm#source_code"><i>source
code</i></a> is equivalent to a reference to a <a rel="DEFINITION"
href="26_glo_l.htm#literal"><i>literal</i></a> <a rel="DEFINITION"
href="26_glo_o.htm#object"><i>object</i></a> that is the <a rel=
"DEFINITION" href="26_glo_v.htm#value"><i>value</i></a> of the
<a rel="DEFINITION" href=
"26_glo_c.htm#constant_variable"><i>constant variable</i></a>.</li>
<li>Type definitions made with <a rel="DEFINITION" href=
"m_deftp.htm#deftype"><b>deftype</b></a> or <a rel="DEFINITION"
href="m_defstr.htm#defstruct"><b>defstruct</b></a> in the <a rel=
"DEFINITION" href=
"26_glo_c.htm#compilation_environment"><i>compilation
environment</i></a> must retain the same definition at run time.
Classes defined by <a rel="DEFINITION" href=
"m_defcla.htm#defclass"><b>defclass</b></a> in the <a rel=
"DEFINITION" href=
"26_glo_c.htm#compilation_environment"><i>compilation
environment</i></a> must be defined at run time to have the same
<a rel="DEFINITION" href=
"26_glo_s.htm#superclass"><i>superclasses</i></a> and same <a rel=
"DEFINITION" href="26_glo_m.htm#metaclass"><i>metaclass</i></a>.
<p>This implies that <a rel="DEFINITION" href=
"26_glo_s.htm#subtype"><i>subtype</i></a>/<a rel="DEFINITION" href=
"26_glo_s.htm#supertype"><i>supertype</i></a> relationships of
<a rel="DEFINITION" href="26_glo_t.htm#type_specifier"><i>type
specifiers</i></a> must not change between <a rel="DEFINITION"
href="26_glo_c.htm#compile_time"><i>compile time</i></a> and
<a rel="DEFINITION" href="26_glo_r.htm#run_time"><i>run
time</i></a>.</p>
</li>
<li>Type declarations present in the compilation <a rel=
"DEFINITION" href="26_glo_e.htm#environment"><i>environment</i></a>
must accurately describe the corresponding values at run time;
otherwise, the consequences are undefined. It is permissible for an
unknown <a rel="DEFINITION" href=
"26_glo_t.htm#type"><i>type</i></a> to appear in a declaration at
compile time, though a warning might be signaled in such a
case.</li>
<li>Except in the situations explicitly listed above, a <a rel=
"DEFINITION" href="26_glo_f.htm#function"><i>function</i></a>
defined in the <a rel="DEFINITION" href=
"26_glo_e.htm#evaluation_environment"><i>evaluation
environment</i></a> is permitted to have a different definition or
a different <a rel="DEFINITION" href=
"26_glo_s.htm#signature"><i>signature</i></a> at run time, and the
run-time definition prevails.</li>
</ul>
<p><a rel="DEFINITION" href=
"26_glo_c.htm#conforming_program"><i>Conforming programs</i></a>
should not be written using any additional assumptions about
consistency between the run-time <a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environment</i></a> and the startup,
evaluation, and compilation <a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environments</i></a>.</p>
<p>Except where noted, when a compile-time and a run-time
definition are different, one of the following occurs at run
time:</p>
<ul>
<li>an error of <a rel="DEFINITION" href=
"26_glo_t.htm#type"><i>type</i></a> <a rel="DEFINITION" href=
"e_error.htm#error"><b>error</b></a> is signaled</li>
<li>the compile-time definition prevails</li>
<li>the run-time definition prevails</li>
</ul>
<p>If the <a rel="DEFINITION" href=
"26_glo_c.htm#compiler"><i>compiler</i></a> processes a <a rel=
"DEFINITION" href="26_glo_f.htm#function_form"><i>function
form</i></a> whose <a rel="DEFINITION" href=
"26_glo_o.htm#operator"><i>operator</i></a> is not defined at
compile time, no error is signaled at compile time.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.2.3 File Compilation</h2>
<p>The <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> <a rel="DEFINITION"
href="f_cmp_fi.htm#compile-file"><b>compile-file</b></a> performs
compilation of <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>forms</i></a> in a file following the rules
specified in <a rel="CHILD" href="03_bb.htm">Section 3.2.2
(Compilation Semantics)</a>, and produces an output file that can
be loaded by using <a rel="DEFINITION" href=
"f_load.htm#load"><b>load</b></a>.</p>
<p>Normally, the <a rel="DEFINITION" href=
"26_glo_t.htm#top_level_form"><i>top level forms</i></a> appearing
in a file compiled with <a rel="DEFINITION" href=
"f_cmp_fi.htm#compile-file"><b>compile-file</b></a> are evaluated
only when the resulting compiled file is loaded, and not when the
file is compiled. However, it is typically the case that some forms
in the file need to be evaluated at compile time so the remainder
of the file can be read and compiled correctly.</p>
<p>The <a rel="DEFINITION" href=
"s_eval_w.htm#eval-when"><b>eval-when</b></a> <a rel="DEFINITION"
href="26_glo_s.htm#special_form"><i>special form</i></a> can be
used to control whether a <a rel="DEFINITION" href=
"26_glo_t.htm#top_level_form"><i>top level form</i></a> is
evaluated at compile time, load time, or both. It is possible to
specify any of three situations with <a rel="DEFINITION" href=
"s_eval_w.htm#eval-when"><b>eval-when</b></a>, denoted by the
symbols <tt>:compile-toplevel</tt>, <tt>:load-toplevel</tt>, and
<tt>:execute</tt>. For top level <a rel="DEFINITION" href=
"s_eval_w.htm#eval-when"><b>eval-when</b></a> forms,
<tt>:compile-toplevel</tt> specifies that the compiler must
evaluate the body at compile time, and <tt>:load-toplevel</tt>
specifies that the compiler must arrange to evaluate the body at
load time. For non-top level <a rel="DEFINITION" href=
"s_eval_w.htm#eval-when"><b>eval-when</b></a> forms,
<tt>:execute</tt> specifies that the body must be executed in the
run-time <a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environment</i></a>.</p>
<p>The behavior of this <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> can be more precisely
understood in terms of a model of how <a rel="DEFINITION" href=
"f_cmp_fi.htm#compile-file"><b>compile-file</b></a> processes forms
in a file to be compiled. There are two processing modes, called
"not-compile-time" and "compile-time-too".</p>
<p>Successive forms are read from the file by <a rel="DEFINITION"
href="f_cmp_fi.htm#compile-file"><b>compile-file</b></a> and
processed in not-compile-time mode; in this mode, <a rel=
"DEFINITION" href=
"f_cmp_fi.htm#compile-file"><b>compile-file</b></a> arranges for
forms to be evaluated only at load time and not at compile time.
When <a rel="DEFINITION" href=
"f_cmp_fi.htm#compile-file"><b>compile-file</b></a> is in
compile-time-too mode, forms are evaluated both at compile time and
load time.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.2.3.1 Processing of Top Level Forms</h2>
<p>Processing of <a rel="DEFINITION" href=
"26_glo_t.htm#top_level_form"><i>top level forms</i></a> in the
file compiler is defined as follows:</p>
<ol>
<li>If the <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> is a <a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro_form"><i>compiler macro form</i></a>
(not disabled by a <a rel="DEFINITION" href=
"d_inline.htm#notinline"><b>notinline</b></a> <a rel="DEFINITION"
href="26_glo_d.htm#declaration"><i>declaration</i></a>), the
<a rel="DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementation</i></a> might or
might not choose to compute the <a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro_expansion"><i>compiler macro
expansion</i></a> of the <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> and, having performed the
expansion, might or might not choose to process the result as a
<a rel="DEFINITION" href="26_glo_t.htm#top_level_form"><i>top level
form</i></a> in the same processing mode (compile-time-too or
not-compile-time). If it declines to obtain or use the expansion,
it must process the original <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a>.</li>
<li>If the form is a <a rel="DEFINITION" href=
"26_glo_m.htm#macro_form"><i>macro form</i></a>, its <a rel=
"DEFINITION" href="26_glo_m.htm#macro_expansion"><i>macro
expansion</i></a> is computed and processed as a <a rel=
"DEFINITION" href="26_glo_t.htm#top_level_form"><i>top level
form</i></a> in the same processing mode (compile-time-too or
not-compile-time).</li>
<li>If the form is a <a rel="DEFINITION" href=
"s_progn.htm#progn"><b>progn</b></a> form, each of its body <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>forms</i></a> is
sequentially processed as a <a rel="DEFINITION" href=
"26_glo_t.htm#top_level_form"><i>top level form</i></a> in the same
processing mode.</li>
<li>If the form is a <a rel="DEFINITION" href=
"s_locall.htm#locally"><b>locally</b></a>, <a rel="DEFINITION"
href="s_flet_.htm#macrolet"><b>macrolet</b></a>, or <a rel=
"DEFINITION" href=
"s_symbol.htm#symbol-macrolet"><b>symbol-macrolet</b></a>, <a rel=
"DEFINITION" href=
"f_cmp_fi.htm#compile-file"><b>compile-file</b></a> establishes the
appropriate bindings and processes the body forms as <a rel=
"DEFINITION" href="26_glo_t.htm#top_level_form"><i>top level
forms</i></a> with those bindings in effect in the same processing
mode. (Note that this implies that the lexical <a rel="DEFINITION"
href="26_glo_e.htm#environment"><i>environment</i></a> in which
<a rel="DEFINITION" href="26_glo_t.htm#top_level_form"><i>top level
forms</i></a> are processed is not necessarily the <a rel=
"DEFINITION" href="26_glo_n.htm#null_lexical_environment"><i>null
lexical environment</i></a>.)</li>
<li>If the form is an <a rel="DEFINITION" href=
"s_eval_w.htm#eval-when"><b>eval-when</b></a> form, it is handled
according to the next figure.
<p>plus .5 fil</p>
<pre>
                                                 
CT   LT   E    Mode  Action    New Mode          
----------
                                                 
Yes  Yes  ---  ---   Process   compile-time-too  
No   Yes  Yes  CTT   Process   compile-time-too  
No   Yes  Yes  NCT   Process   not-compile-time  
No   Yes  No   ---   Process   not-compile-time  
Yes  No   ---  ---   Evaluate  ---               
No   No   Yes  CTT   Evaluate  ---               
No   No   Yes  NCT   Discard   ---               
No   No   No   ---   Discard   ---               
                                                 
          
</pre>
<p><b>Figure 3-7. EVAL-WHEN processing</b></p>
<p>Column <b>CT</b> indicates whether <tt>:compile-toplevel</tt> is
specified. Column <b>LT</b> indicates whether
<tt>:load-toplevel</tt> is specified. Column <b>E</b> indicates
whether <tt>:execute</tt> is specified. Column <b>Mode</b>
indicates the processing mode; a dash (---) indicates that the
processing mode is not relevant.</p>
<p>The <b>Action</b> column specifies one of three actions:</p>
<dl>
<dt><b>Process:</b> process the body as <a rel="DEFINITION" href=
"26_glo_t.htm#top_level_form"><i>top level forms</i></a> in the
specified mode.<br></dt>
<dt><b>Evaluate:</b> evaluate the body in the dynamic execution
context of the compiler, using the <a rel="DEFINITION" href=
"26_glo_e.htm#evaluation_environment"><i>evaluation
environment</i></a> as the global environment and the <a rel=
"DEFINITION" href="26_glo_l.htm#lexical_environment"><i>lexical
environment</i></a> in which the <a rel="DEFINITION" href=
"s_eval_w.htm#eval-when"><b>eval-when</b></a> appears.<br></dt>
<dt><b>Discard:</b> ignore the <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a>.<br></dt>
</dl>
<p>The <b>New Mode</b> column indicates the new processing mode. A
dash (---) indicates the compiler remains in its current mode.</p>
</li>
<li>Otherwise, the form is a <a rel="DEFINITION" href=
"26_glo_t.htm#top_level_form"><i>top level form</i></a> that is not
one of the special cases. In compile-time-too mode, the compiler
first evaluates the form in the evaluation <a rel="DEFINITION"
href="26_glo_e.htm#environment"><i>environment</i></a> and then
minimally compiles it. In not-compile-time mode, the <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> is simply
minimally compiled. All <a rel="DEFINITION" href=
"26_glo_s.htm#subform"><i>subforms</i></a> are treated as <a rel=
"DEFINITION" href=
"26_glo_n.htm#non-top-level_form"><i>non-top-level forms</i></a>.
<p>Note that <a rel="DEFINITION" href=
"26_glo_t.htm#top_level_form"><i>top level forms</i></a> are
processed in the order in which they textually appear in the file
and that each <a rel="DEFINITION" href=
"26_glo_t.htm#top_level_form"><i>top level form</i></a> read by the
compiler is processed before the next is read. However, the order
of processing (including macro expansion) of <a rel="DEFINITION"
href="26_glo_s.htm#subform"><i>subforms</i></a> that are not
<a rel="DEFINITION" href="26_glo_t.htm#top_level_form"><i>top level
forms</i></a> and the order of further compilation is unspecified
as long as Common Lisp semantics are preserved.</p>
</li>
</ol>
<p><a rel="DEFINITION" href=
"s_eval_w.htm#eval-when"><b>eval-when</b></a> forms cause
compile-time evaluation only at top level. Both
<tt>:compile-toplevel</tt> and <tt>:load-toplevel</tt> situation
specifications are ignored for <a rel="DEFINITION" href=
"26_glo_n.htm#non-top-level_form"><i>non-top-level forms</i></a>.
For <a rel="DEFINITION" href=
"26_glo_n.htm#non-top-level_form"><i>non-top-level forms</i></a>,
an <a rel="DEFINITION" href=
"s_eval_w.htm#eval-when"><b>eval-when</b></a> specifying the
<tt>:execute</tt> situation is treated as an <a rel="DEFINITION"
href="26_glo_i.htm#implicit_progn"><i>implicit progn</i></a>
including the <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>forms</i></a> in the body of the <a rel=
"DEFINITION" href="s_eval_w.htm#eval-when"><b>eval-when</b></a>
<a rel="DEFINITION" href="26_glo_f.htm#form"><i>form</i></a>;
otherwise, the <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>forms</i></a> in the body are ignored.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.2.3.1.1 Processing of Defining Macros</h2>
<p>Defining <a rel="DEFINITION" href=
"26_glo_m.htm#macro"><i>macros</i></a> (such as <a rel="DEFINITION"
href="m_defmac.htm#defmacro"><b>defmacro</b></a> or <a rel=
"DEFINITION" href="m_defpar.htm#defvar"><b>defvar</b></a>)
appearing within a file being processed by <a rel="DEFINITION"
href="f_cmp_fi.htm#compile-file"><b>compile-file</b></a> normally
have compile-time side effects which affect how subsequent <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>forms</i></a> in the same
<a rel="DEFINITION" href="26_glo_f.htm#file"><i>file</i></a> are
compiled. A convenient model for explaining how these side effects
happen is that the defining macro expands into one or more <a rel=
"DEFINITION" href="s_eval_w.htm#eval-when"><b>eval-when</b></a>
<a rel="DEFINITION" href="26_glo_f.htm#form"><i>forms</i></a>, and
that the calls which cause the compile-time side effects to happen
appear in the body of an <tt>(eval-when (:compile-toplevel)
...)</tt> <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a>.</p>
<p>The compile-time side effects may cause information about the
definition to be stored differently than if the defining macro had
been processed in the `normal' way (either interpretively or by
loading the compiled file).</p>
<p>In particular, the information stored by the defining <a rel=
"DEFINITION" href="26_glo_m.htm#macro"><i>macros</i></a> at compile
time might or might not be available to the interpreter (either
during or after compilation), or during subsequent calls to the
<a rel="DEFINITION" href=
"26_glo_c.htm#compiler"><i>compiler</i></a>. For example, the
following code is nonportable because it assumes that the <a rel=
"DEFINITION" href="26_glo_c.htm#compiler"><i>compiler</i></a>
stores the macro definition of <tt>foo</tt> where it is available
to the interpreter:</p>
<pre>
 (defmacro foo (x) `(car ,x))
 (eval-when (:execute :compile-toplevel :load-toplevel)
   (print (foo '(a b c))))
</pre>
<p>A portable way to do the same thing would be to include the
macro definition inside the <a rel="DEFINITION" href=
"s_eval_w.htm#eval-when"><b>eval-when</b></a> <a rel="DEFINITION"
href="26_glo_f.htm#form"><i>form</i></a>, as in:</p>
<pre>
 (eval-when (:execute :compile-toplevel :load-toplevel)
   (defmacro foo (x) `(car ,x))
   (print (foo '(a b c))))
</pre>
<p>The next figure lists macros that make definitions available
both in the compilation and run-time <a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environments</i></a>. It is not
specified whether definitions made available in the <a rel=
"DEFINITION" href=
"26_glo_c.htm#compilation_environment"><i>compilation
environment</i></a> are available in the evaluation <a rel=
"DEFINITION" href=
"26_glo_e.htm#environment"><i>environment</i></a>, nor is it
specified whether they are available in subsequent compilation
units or subsequent invocations of the compiler. As with <a rel=
"DEFINITION" href="s_eval_w.htm#eval-when"><b>eval-when</b></a>,
these compile-time side effects happen only when the defining
macros appear at top level.</p>
<pre>
<a rel="DEFINITION" href=
"m_declai.htm#declaim">declaim</a>                <a rel=
"DEFINITION" href=
"m_defi_2.htm#define-modify-macro">define-modify-macro</a>   <a rel="DEFINITION"
href="m_defset.htm#defsetf">defsetf</a>    
<a rel="DEFINITION" href=
"m_defcla.htm#defclass">defclass</a>               <a rel=
"DEFINITION" href=
"m_defi_3.htm#define-setf-expander">define-setf-expander</a>  <a rel="DEFINITION"
href="m_defstr.htm#defstruct">defstruct</a>  
<a rel="DEFINITION" href=
"m_defcon.htm#defconstant">defconstant</a>            <a rel=
"DEFINITION" href=
"m_defmac.htm#defmacro">defmacro</a>              <a rel=
"DEFINITION" href="m_deftp.htm#deftype">deftype</a>    
<a rel="DEFINITION" href=
"m_define.htm#define-compiler-macro">define-compiler-macro</a>  <a rel="DEFINITION"
href="m_defpkg.htm#defpackage">defpackage</a>            <a rel=
"DEFINITION" href="m_defpar.htm#defvar">defvar</a>     
<a rel="DEFINITION" href=
"m_defi_5.htm#define-condition">define-condition</a>       <a rel=
"DEFINITION" href=
"m_defpar.htm#defparameter">defparameter</a>                     
</pre>
<p><b>Figure 3-8. Defining Macros That Affect the Compile-Time
Environment</b></p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.2.3.1.2 Constraints on Macros and Compiler Macros</h2>
<p>Except where explicitly stated otherwise, no <a rel="DEFINITION"
href="26_glo_m.htm#macro"><i>macro</i></a> defined in the Common
Lisp standard produces an expansion that could cause any of the
<a rel="DEFINITION" href="26_glo_s.htm#subform"><i>subforms</i></a>
of the <a rel="DEFINITION" href="26_glo_m.htm#macro_form"><i>macro
form</i></a> to be treated as <a rel="DEFINITION" href=
"26_glo_t.htm#top_level_form"><i>top level forms</i></a>. If an
<a rel="DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementation</i></a> also
provides a <a rel="DEFINITION" href=
"26_glo_s.htm#special_operator"><i>special operator</i></a>
definition of a Common Lisp <a rel="DEFINITION" href=
"26_glo_m.htm#macro"><i>macro</i></a>, the <a rel="DEFINITION"
href="26_glo_s.htm#special_operator"><i>special operator</i></a>
definition must be semantically equivalent in this respect.</p>
<p><a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro"><i>Compiler macro</i></a> expansions
must also have the same top level evaluation semantics as the
<a rel="DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> which
they replace. This is of concern both to <a rel="DEFINITION" href=
"26_glo_c.htm#conforming_implementation"><i>conforming
implementations</i></a> and to <a rel="DEFINITION" href=
"26_glo_c.htm#conforming_program"><i>conforming
programs</i></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.2.4 Literal Objects in Compiled Files</h2>
<p>The functions <a rel="DEFINITION" href=
"f_eval.htm#eval"><b>eval</b></a> and <a rel="DEFINITION" href=
"f_cmp.htm#compile"><b>compile</b></a> are required to ensure that
<a rel="DEFINITION" href="26_glo_l.htm#literal"><i>literal</i></a>
<a rel="DEFINITION" href="26_glo_o.htm#object"><i>objects</i></a>
referenced within the resulting interpreted or compiled code
objects are the <a rel="DEFINITION" href=
"26_glo_s.htm#same"><i>same</i></a> as the corresponding <a rel=
"DEFINITION" href="26_glo_o.htm#object"><i>objects</i></a> in the
<a rel="DEFINITION" href="26_glo_s.htm#source_code"><i>source
code</i></a>. <a rel="DEFINITION" href=
"f_cmp_fi.htm#compile-file"><b>compile-file</b></a>, on the other
hand, must produce a <a rel="DEFINITION" href=
"26_glo_c.htm#compiled_file"><i>compiled file</i></a> that, when
loaded with <a rel="DEFINITION" href=
"f_load.htm#load"><b>load</b></a>, constructs the <a rel=
"DEFINITION" href="26_glo_o.htm#object"><i>objects</i></a> defined
by the <a rel="DEFINITION" href=
"26_glo_s.htm#source_code"><i>source code</i></a> and produces
references to them.</p>
<p>In the case of <a rel="DEFINITION" href=
"f_cmp_fi.htm#compile-file"><b>compile-file</b></a>, <a rel=
"DEFINITION" href="26_glo_o.htm#object"><i>objects</i></a>
constructed by <a rel="DEFINITION" href=
"f_load.htm#load"><b>load</b></a> of the <a rel="DEFINITION" href=
"26_glo_c.htm#compiled_file"><i>compiled file</i></a> cannot be
spoken of as being the <a rel="DEFINITION" href=
"26_glo_s.htm#same"><i>same</i></a> as the <a rel="DEFINITION"
href="26_glo_o.htm#object"><i>objects</i></a> constructed at
compile time, because the <a rel="DEFINITION" href=
"26_glo_c.htm#compiled_file"><i>compiled file</i></a> may be loaded
into a different <a rel="DEFINITION" href=
"26_glo_l.htm#lisp_image"><i>Lisp image</i></a> than the one in
which it was compiled. This section defines the concept of <a rel=
"DEFINITION" href="26_glo_s.htm#similarity"><i>similarity</i></a>
which relates <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>objects</i></a> in the <a rel="DEFINITION"
href="26_glo_e.htm#evaluation_environment"><i>evaluation
environment</i></a> to the corresponding <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>objects</i></a> in the <a rel="DEFINITION"
href="26_glo_r.htm#run-time_environment"><i>run-time
environment</i></a>.</p>
<p>The constraints on <a rel="DEFINITION" href=
"26_glo_l.htm#literal"><i>literal</i></a> <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>objects</i></a> described in this section
apply only to <a rel="DEFINITION" href=
"f_cmp_fi.htm#compile-file"><b>compile-file</b></a>; <a rel=
"DEFINITION" href="f_eval.htm#eval"><b>eval</b></a> and <a rel=
"DEFINITION" href="f_cmp.htm#compile"><b>compile</b></a> do not
copy or coalesce constants.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.2.4.1 Externalizable Objects</h2>
<p>The fact that the <a rel="DEFINITION" href=
"26_glo_f.htm#file_compiler"><i>file compiler</i></a> represents
<a rel="DEFINITION" href="26_glo_l.htm#literal"><i>literal</i></a>
<a rel="DEFINITION" href="26_glo_o.htm#object"><i>objects</i></a>
externally in a <a rel="DEFINITION" href=
"26_glo_c.htm#compiled_file"><i>compiled file</i></a> and must
later reconstruct suitable equivalents of those <a rel="DEFINITION"
href="26_glo_o.htm#object"><i>objects</i></a> when that <a rel=
"DEFINITION" href="26_glo_f.htm#file"><i>file</i></a> is loaded
imposes a need for constraints on the nature of the <a rel=
"DEFINITION" href="26_glo_o.htm#object"><i>objects</i></a> that can
be used as <a rel="DEFINITION" href=
"26_glo_l.htm#literal"><i>literal</i></a> <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>objects</i></a> in <a rel="DEFINITION"
href="26_glo_c.htm#code"><i>code</i></a> to be processed by the
<a rel="DEFINITION" href="26_glo_f.htm#file_compiler"><i>file
compiler</i></a>.</p>
<p>An <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a> that can be used as a
<a rel="DEFINITION" href="26_glo_l.htm#literal"><i>literal</i></a>
<a rel="DEFINITION" href="26_glo_o.htm#object"><i>object</i></a> in
<a rel="DEFINITION" href="26_glo_c.htm#code"><i>code</i></a> to be
processed by the <a rel="DEFINITION" href=
"26_glo_f.htm#file_compiler"><i>file compiler</i></a> is called an
<a rel="DEFINITION" href=
"26_glo_e.htm#externalizable_object"><i>externalizable
object</i></a>.</p>
<p>We define that two <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>objects</i></a> are <a rel="DEFINITION"
href="26_glo_s.htm#similar"><i>similar</i></a> if they satisfy a
two-place conceptual equivalence predicate (defined below), which
is independent of the <a rel="DEFINITION" href=
"26_glo_l.htm#lisp_image"><i>Lisp image</i></a> so that the two
<a rel="DEFINITION" href="26_glo_o.htm#object"><i>objects</i></a>
in different <a rel="DEFINITION" href=
"26_glo_l.htm#lisp_image"><i>Lisp images</i></a> can be understood
to be equivalent under this predicate. Further, by inspecting the
definition of this conceptual predicate, the programmer can
anticipate what aspects of an <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a> are reliably preserved by
<a rel="DEFINITION" href="26_glo_f.htm#file"><i>file</i></a>
<a rel="DEFINITION" href=
"26_glo_c.htm#compilation"><i>compilation</i></a>.</p>
<p>The <a rel="DEFINITION" href=
"26_glo_f.htm#file_compiler"><i>file compiler</i></a> must
cooperate with the <a rel="DEFINITION" href=
"26_glo_l.htm#loader"><i>loader</i></a> in order to assure that in
each case where an <a rel="DEFINITION" href=
"26_glo_e.htm#externalizable_object"><i>externalizable
object</i></a> is processed as a <a rel="DEFINITION" href=
"26_glo_l.htm#literal"><i>literal</i></a> <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a>, the <a rel="DEFINITION"
href="26_glo_l.htm#loader"><i>loader</i></a> will construct a
<a rel="DEFINITION" href="26_glo_s.htm#similar"><i>similar</i></a>
<a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a>.</p>
<p>The set of <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>objects</i></a> that are <a rel=
"DEFINITION" href=
"26_glo_e.htm#externalizable_object"><i>externalizable
objects</i></a> are those for which the new conceptual term
"<a rel="DEFINITION" href=
"26_glo_s.htm#similar"><i>similar</i></a>" is defined, such that
when a <a rel="DEFINITION" href=
"26_glo_c.htm#compiled_file"><i>compiled file</i></a> is
<i>loaded</i>, an <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a> can be constructed which
can be shown to be <a rel="DEFINITION" href=
"26_glo_s.htm#similar"><i>similar</i></a> to the original <a rel=
"DEFINITION" href="26_glo_o.htm#object"><i>object</i></a> which
existed at the time the <a rel="DEFINITION" href=
"26_glo_f.htm#file_compiler"><i>file compiler</i></a> was
operating.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.2.4.2 Similarity of Literal Objects</h2>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.2.4.2.1 Similarity of Aggregate Objects</h2>
<p>Of the <a rel="DEFINITION" href=
"26_glo_t.htm#type"><i>types</i></a> over which <a rel="DEFINITION"
href="26_glo_s.htm#similarity"><i>similarity</i></a> is defined,
some are treated as aggregate objects. For these types, <a rel=
"DEFINITION" href="26_glo_s.htm#similarity"><i>similarity</i></a>
is defined recursively. We say that an <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a> of these types has certain
"basic qualities" and to satisfy the <a rel="DEFINITION" href=
"26_glo_s.htm#similarity"><i>similarity</i></a> relationship, the
values of the corresponding qualities of the two <a rel=
"DEFINITION" href="26_glo_o.htm#object"><i>objects</i></a> must
also be similar.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.2.4.2.2 Definition of Similarity</h2>
<p>Two <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>objects</i></a> S (in <a rel="DEFINITION"
href="26_glo_s.htm#source_code"><i>source code</i></a>) and C (in
<a rel="DEFINITION" href="26_glo_c.htm#compiled_code"><i>compiled
code</i></a>) are defined to be <a rel="DEFINITION" href=
"26_glo_s.htm#similar"><i>similar</i></a> if and only if they are
both of one of the <a rel="DEFINITION" href=
"26_glo_t.htm#type"><i>types</i></a> listed here (or defined by the
<a rel="DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementation</i></a>) and they
both satisfy all additional requirements of <a rel="DEFINITION"
href="26_glo_s.htm#similarity"><i>similarity</i></a> indicated for
that <a rel="DEFINITION" href=
"26_glo_t.htm#type"><i>type</i></a>.</p>
<dl>
<dt><a rel="DEFINITION" href=
"t_number.htm#number"><b>number</b></a><br></dt>
<dd>Two <a rel="DEFINITION" href=
"26_glo_n.htm#number"><i>numbers</i></a> S and C are <a rel=
"DEFINITION" href="26_glo_s.htm#similar"><i>similar</i></a> if they
are of the same <a rel="DEFINITION" href=
"26_glo_t.htm#type"><i>type</i></a> and represent the same
mathematical value.</dd>
<dt><a rel="DEFINITION" href=
"t_ch.htm#character"><b>character</b></a><br></dt>
<dd>Two <a rel="DEFINITION" href=
"26_glo_s.htm#simple"><i>simple</i></a> <a rel="DEFINITION" href=
"26_glo_c.htm#character"><i>characters</i></a> S and C are <a rel=
"DEFINITION" href="26_glo_s.htm#similar"><i>similar</i></a> if they
have <a rel="DEFINITION" href=
"26_glo_s.htm#similar"><i>similar</i></a> <a rel="DEFINITION" href=
"26_glo_c.htm#code"><i>code</i></a> <a rel="DEFINITION" href=
"26_glo_a.htm#attribute"><i>attributes</i></a>.
<p><a rel="DEFINITION" href=
"26_glo_i.htm#implementation"><i>Implementations</i></a> providing
additional, <a rel="DEFINITION" href=
"26_glo_i.htm#implementation-defined"><i>implementation-defined</i></a>
<a rel="DEFINITION" href=
"26_glo_a.htm#attribute"><i>attributes</i></a> must define whether
and how <a rel="DEFINITION" href=
"26_glo_n.htm#non-simple"><i>non-simple</i></a> <a rel="DEFINITION"
href="26_glo_c.htm#character"><i>characters</i></a> can be regarded
as <a rel="DEFINITION" href=
"26_glo_s.htm#similar"><i>similar</i></a>.</p>
</dd>
<dt><a rel="DEFINITION" href=
"t_symbol.htm#symbol"><b>symbol</b></a><br></dt>
<dd>Two <a rel="DEFINITION" href=
"26_glo_a.htm#apparently_uninterned"><i>apparently
uninterned</i></a> <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbols</i></a> S and C are <a rel=
"DEFINITION" href="26_glo_s.htm#similar"><i>similar</i></a> if
their <a rel="DEFINITION" href="26_glo_n.htm#name"><i>names</i></a>
are <a rel="DEFINITION" href=
"26_glo_s.htm#similar"><i>similar</i></a>.
<p>Two <a rel="DEFINITION" href=
"26_glo_i.htm#interned"><i>interned</i></a> symbols S and C are
<a rel="DEFINITION" href="26_glo_s.htm#similar"><i>similar</i></a>
if their <a rel="DEFINITION" href=
"26_glo_n.htm#name"><i>names</i></a> are <a rel="DEFINITION" href=
"26_glo_s.htm#similar"><i>similar</i></a>, and if either S is
accessible in the <a rel="DEFINITION" href=
"26_glo_c.htm#current_package"><i>current package</i></a> at
compile time and C is accessible in the <a rel="DEFINITION" href=
"26_glo_c.htm#current_package"><i>current package</i></a> at load
time, or C is accessible in the <a rel="DEFINITION" href=
"26_glo_p.htm#package"><i>package</i></a> that is <a rel=
"DEFINITION" href="26_glo_s.htm#similar"><i>similar</i></a> to the
<a rel="DEFINITION" href="26_glo_h.htm#home_package"><i>home
package</i></a> of S.</p>
<p>(Note that <a rel="DEFINITION" href=
"26_glo_s.htm#similarity"><i>similarity</i></a> of <a rel=
"DEFINITION" href="26_glo_s.htm#symbol"><i>symbols</i></a> is
dependent on neither the <a rel="DEFINITION" href=
"26_glo_c.htm#current_readtable"><i>current readtable</i></a> nor
how the <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> <a rel="DEFINITION"
href="f_rd_rd.htm#read"><b>read</b></a> would parse the <a rel=
"DEFINITION" href="26_glo_c.htm#character"><i>characters</i></a> in
the <a rel="DEFINITION" href="26_glo_n.htm#name"><i>name</i></a> of
the <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbol</i></a>.)</p>
</dd>
<dt><a rel="DEFINITION" href=
"t_pkg.htm#package"><b>package</b></a><br></dt>
<dd>Two <a rel="DEFINITION" href=
"26_glo_p.htm#package"><i>packages</i></a> S and C are <a rel=
"DEFINITION" href="26_glo_s.htm#similar"><i>similar</i></a> if
their <a rel="DEFINITION" href="26_glo_n.htm#name"><i>names</i></a>
are <a rel="DEFINITION" href=
"26_glo_s.htm#similar"><i>similar</i></a>.
<p>Note that although a <a rel="DEFINITION" href=
"26_glo_p.htm#package"><i>package</i></a> <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a> is an <a rel="DEFINITION"
href="26_glo_e.htm#externalizable_object"><i>externalizable
object</i></a>, the programmer is responsible for ensuring that the
corresponding <a rel="DEFINITION" href=
"26_glo_p.htm#package"><i>package</i></a> is already in existence
when code referencing it as a <a rel="DEFINITION" href=
"26_glo_l.htm#literal"><i>literal</i></a> <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a> is <i>loaded</i>. The
<a rel="DEFINITION" href="26_glo_l.htm#loader"><i>loader</i></a>
finds the corresponding <a rel="DEFINITION" href=
"26_glo_p.htm#package"><i>package</i></a> <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a> as if by calling <a rel=
"DEFINITION" href=
"f_find_p.htm#find-package"><b>find-package</b></a> with that
<a rel="DEFINITION" href="26_glo_n.htm#name"><i>name</i></a> as an
<a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>argument</i></a>. An error is signaled
by the <a rel="DEFINITION" href=
"26_glo_l.htm#loader"><i>loader</i></a> if no <a rel="DEFINITION"
href="26_glo_p.htm#package"><i>package</i></a> exists at load
time.</p>
</dd>
<dt><a rel="DEFINITION" href=
"t_rnd_st.htm#random-state"><b>random-state</b></a><br></dt>
<dd>Two <a rel="DEFINITION" href=
"26_glo_r.htm#random_state"><i>random states</i></a> S and C are
<a rel="DEFINITION" href="26_glo_s.htm#similar"><i>similar</i></a>
if S would always produce the same sequence of pseudo-random
numbers as a <a rel="DEFINITION" href=
"26_glo_c.htm#copy"><i>copy</i></a>[5] of C when given as the
<i>random-state</i> <a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>argument</i></a> to the <a rel=
"DEFINITION" href="26_glo_f.htm#function"><i>function</i></a>
<a rel="DEFINITION" href="f_random.htm#random"><b>random</b></a>,
assuming equivalent <i>limit</i> <a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>arguments</i></a> in each case.
<p>(Note that since C has been processed by the <a rel="DEFINITION"
href="26_glo_f.htm#file_compiler"><i>file compiler</i></a>, it
cannot be used directly as an <a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>argument</i></a> to <a rel="DEFINITION"
href="f_random.htm#random"><b>random</b></a> because <a rel=
"DEFINITION" href="f_random.htm#random"><b>random</b></a> would
perform a side effect.)</p>
</dd>
<dt><a rel="DEFINITION" href=
"t_cons.htm#cons"><b>cons</b></a><br></dt>
<dd>Two <a rel="DEFINITION" href=
"26_glo_c.htm#cons"><i>conses</i></a>, S and C, are <a rel=
"DEFINITION" href="26_glo_s.htm#similar"><i>similar</i></a> if the
<a rel="DEFINITION" href="26_glo_c.htm#car"><i>car</i></a>[2] of S
is <a rel="DEFINITION" href=
"26_glo_s.htm#similar"><i>similar</i></a> to the <a rel=
"DEFINITION" href="26_glo_c.htm#car"><i>car</i></a>[2] of C, and
the <a rel="DEFINITION" href="26_glo_c.htm#cdr"><i>cdr</i></a>[2]
of S is <a rel="DEFINITION" href=
"26_glo_s.htm#similar"><i>similar</i></a> to the <a rel=
"DEFINITION" href="26_glo_c.htm#cdr"><i>cdr</i></a>[2] of C.</dd>
<dt><a rel="DEFINITION" href=
"t_array.htm#array"><b>array</b></a><br></dt>
<dd>Two one-dimensional <a rel="DEFINITION" href=
"26_glo_a.htm#array"><i>arrays</i></a>, S and C, are <a rel=
"DEFINITION" href="26_glo_s.htm#similar"><i>similar</i></a> if the
<a rel="DEFINITION" href="26_glo_l.htm#length"><i>length</i></a> of
S is <a rel="DEFINITION" href=
"26_glo_s.htm#similar"><i>similar</i></a> to the <a rel=
"DEFINITION" href="26_glo_l.htm#length"><i>length</i></a> of C, the
<a rel="DEFINITION" href=
"26_glo_a.htm#actual_array_element_type"><i>actual array element
type</i></a> of S is <a rel="DEFINITION" href=
"26_glo_s.htm#similar"><i>similar</i></a> to the <a rel=
"DEFINITION" href=
"26_glo_a.htm#actual_array_element_type"><i>actual array element
type</i></a> of C, and each <a rel="DEFINITION" href=
"26_glo_a.htm#active"><i>active</i></a> <a rel="DEFINITION" href=
"26_glo_e.htm#element"><i>element</i></a> of S is <a rel=
"DEFINITION" href="26_glo_s.htm#similar"><i>similar</i></a> to the
corresponding <a rel="DEFINITION" href=
"26_glo_e.htm#element"><i>element</i></a> of C.
<p>Two <a rel="DEFINITION" href=
"26_glo_a.htm#array"><i>arrays</i></a> of <a rel="DEFINITION" href=
"26_glo_r.htm#rank"><i>rank</i></a> other than one, S and C, are
<a rel="DEFINITION" href="26_glo_s.htm#similar"><i>similar</i></a>
if the <a rel="DEFINITION" href="26_glo_r.htm#rank"><i>rank</i></a>
of S is <a rel="DEFINITION" href=
"26_glo_s.htm#similar"><i>similar</i></a> to the <a rel=
"DEFINITION" href="26_glo_r.htm#rank"><i>rank</i></a> of C, each
<a rel="DEFINITION" href=
"26_glo_d.htm#dimension"><i>dimension</i></a>[1] of S is <a rel=
"DEFINITION" href="26_glo_s.htm#similar"><i>similar</i></a> to the
corresponding <a rel="DEFINITION" href=
"26_glo_d.htm#dimension"><i>dimension</i></a>[1] of C, the <a rel=
"DEFINITION" href=
"26_glo_a.htm#actual_array_element_type"><i>actual array element
type</i></a> of S is <a rel="DEFINITION" href=
"26_glo_s.htm#similar"><i>similar</i></a> to the <a rel=
"DEFINITION" href=
"26_glo_a.htm#actual_array_element_type"><i>actual array element
type</i></a> of C, and each <a rel="DEFINITION" href=
"26_glo_e.htm#element"><i>element</i></a> of S is <a rel=
"DEFINITION" href="26_glo_s.htm#similar"><i>similar</i></a> to the
corresponding <a rel="DEFINITION" href=
"26_glo_e.htm#element"><i>element</i></a> of C.</p>
<p>In addition, if S is a <a rel="DEFINITION" href=
"26_glo_s.htm#simple_array"><i>simple array</i></a>, then C must
also be a <a rel="DEFINITION" href=
"26_glo_s.htm#simple_array"><i>simple array</i></a>. If S is a
<a rel="DEFINITION" href=
"26_glo_d.htm#displaced_array"><i>displaced array</i></a>, has a
<a rel="DEFINITION" href="26_glo_f.htm#fill_pointer"><i>fill
pointer</i></a>, or is <a rel="DEFINITION" href=
"26_glo_a.htm#actually_adjustable"><i>actually adjustable</i></a>,
C is permitted to lack any or all of these qualities.</p>
</dd>
<dt><a rel="DEFINITION" href=
"t_hash_t.htm#hash-table"><b>hash-table</b></a><br></dt>
<dd>Two <a rel="DEFINITION" href="26_glo_h.htm#hash_table"><i>hash
tables</i></a> S and C are <a rel="DEFINITION" href=
"26_glo_s.htm#similar"><i>similar</i></a> if they meet the
following three requirements:
<ol>
<li>They both have the same test (e.g., they are both <a rel=
"DEFINITION" href="f_eql.htm#eql"><b>eql</b></a> <a rel=
"DEFINITION" href="26_glo_h.htm#hash_table"><i>hash
tables</i></a>).</li>
<li>There is a unique one-to-one correspondence between the keys of
the two <a rel="DEFINITION" href="26_glo_h.htm#hash_table"><i>hash
tables</i></a>, such that the corresponding keys are <a rel=
"DEFINITION" href="26_glo_s.htm#similar"><i>similar</i></a>.</li>
<li>For all keys, the values associated with two corresponding keys
are <a rel="DEFINITION" href=
"26_glo_s.htm#similar"><i>similar</i></a>.</li>
</ol>
<p>If there is more than one possible one-to-one correspondence
between the keys of S and C, the consequences are unspecified. A
<a rel="DEFINITION" href=
"26_glo_c.htm#conforming_program"><i>conforming program</i></a>
cannot use a table such as S as an <i>externalizable
constant</i>.</p>
</dd>
<dt><a rel="DEFINITION" href=
"t_pn.htm#pathname"><b>pathname</b></a><br></dt>
<dd>Two <a rel="DEFINITION" href=
"26_glo_p.htm#pathname"><i>pathnames</i></a> S and C are <a rel=
"DEFINITION" href="26_glo_s.htm#similar"><i>similar</i></a> if all
corresponding <a rel="DEFINITION" href=
"26_glo_p.htm#pathname"><i>pathname</i></a> <i>components</i> are
<a rel="DEFINITION" href=
"26_glo_s.htm#similar"><i>similar</i></a>.</dd>
<dt><a rel="DEFINITION" href=
"t_fn.htm#function"><b>function</b></a><br></dt>
<dd><a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>Functions</i></a> are not <a rel=
"DEFINITION" href=
"26_glo_e.htm#externalizable_object"><i>externalizable
objects</i></a>.</dd>
<dt><a rel="DEFINITION" href=
"t_stu_ob.htm#structure-object"><b>structure-object</b></a> and
<a rel="DEFINITION" href=
"t_std_ob.htm#standard-object"><b>standard-object</b></a><br></dt>
<dd>A general-purpose concept of <a rel="DEFINITION" href=
"26_glo_s.htm#similarity"><i>similarity</i></a> does not exist for
<a rel="DEFINITION" href=
"26_glo_s.htm#structure"><i>structures</i></a> and <a rel=
"DEFINITION" href="26_glo_s.htm#standard_object"><i>standard
objects</i></a>. However, a <a rel="DEFINITION" href=
"26_glo_c.htm#conforming_program"><i>conforming program</i></a> is
permitted to define a <a rel="DEFINITION" href=
"f_mk_ld_.htm#make-load-form"><b>make-load-form</b></a> <a rel=
"DEFINITION" href="26_glo_m.htm#method"><i>method</i></a> for any
<a rel="DEFINITION" href="26_glo_c.htm#class"><i>class</i></a> K
defined by that <a rel="DEFINITION" href=
"26_glo_p.htm#program"><i>program</i></a> that is a <a rel=
"DEFINITION" href="26_glo_s.htm#subclass"><i>subclass</i></a> of
either <a rel="DEFINITION" href=
"t_stu_ob.htm#structure-object"><b>structure-object</b></a> or
<a rel="DEFINITION" href=
"t_std_ob.htm#standard-object"><b>standard-object</b></a>. The
effect of such a <a rel="DEFINITION" href=
"26_glo_m.htm#method"><i>method</i></a> is to define that an
<a rel="DEFINITION" href="26_glo_o.htm#object"><i>object</i></a> S
of <a rel="DEFINITION" href="26_glo_t.htm#type"><i>type</i></a> K
in <a rel="DEFINITION" href="26_glo_s.htm#source_code"><i>source
code</i></a> is <a rel="DEFINITION" href=
"26_glo_s.htm#similar"><i>similar</i></a> to an <a rel="DEFINITION"
href="26_glo_o.htm#object"><i>object</i></a> C of <a rel=
"DEFINITION" href="26_glo_t.htm#type"><i>type</i></a> K in <a rel=
"DEFINITION" href="26_glo_c.htm#compiled_code"><i>compiled
code</i></a> if C was constructed from <a rel="DEFINITION" href=
"26_glo_c.htm#code"><i>code</i></a> produced by calling <a rel=
"DEFINITION" href=
"f_mk_ld_.htm#make-load-form"><b>make-load-form</b></a> on S.</dd>
</dl>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.2.4.3 Extensions to Similarity Rules</h2>
<p>Some <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>objects</i></a>, such as <a rel=
"DEFINITION" href="26_glo_s.htm#stream"><i>streams</i></a>,
<b>readtables</b>, and <b>methods</b> are not <a rel="DEFINITION"
href="26_glo_e.htm#externalizable_object"><i>externalizable
objects</i></a> under the definition of similarity given above.
That is, such <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>objects</i></a> may not portably appear as
<a rel="DEFINITION" href="26_glo_l.htm#literal"><i>literal</i></a>
<a rel="DEFINITION" href="26_glo_o.htm#object"><i>objects</i></a>
in <a rel="DEFINITION" href="26_glo_c.htm#code"><i>code</i></a> to
be processed by the <a rel="DEFINITION" href=
"26_glo_f.htm#file_compiler"><i>file compiler</i></a>.</p>
<p>An <a rel="DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementation</i></a> is
permitted to extend the rules of similarity, so that other kinds of
<a rel="DEFINITION" href="26_glo_o.htm#object"><i>objects</i></a>
are <a rel="DEFINITION" href=
"26_glo_e.htm#externalizable_object"><i>externalizable
objects</i></a> for that <a rel="DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementation</i></a>.</p>
<p>If for some kind of <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a>, <a rel="DEFINITION" href=
"26_glo_s.htm#similarity"><i>similarity</i></a> is neither defined
by this specification nor by the <a rel="DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementation</i></a>, then the
<a rel="DEFINITION" href="26_glo_f.htm#file_compiler"><i>file
compiler</i></a> must signal an error upon encountering such an
<a rel="DEFINITION" href="26_glo_o.htm#object"><i>object</i></a> as
a <a rel="DEFINITION" href=
"26_glo_l.htm#literal"><i>literal</i></a> <a rel="DEFINITION" href=
"26_glo_c.htm#constant"><i>constant</i></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.2.4.4 Additional Constraints on Externalizable Objects</h2>
<p>If two <a rel="DEFINITION" href=
"26_glo_l.htm#literal"><i>literal</i></a> <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>objects</i></a> appearing in the source
code for a single file processed with the <a rel="DEFINITION" href=
"26_glo_f.htm#file_compiler"><i>file compiler</i></a> are the
<a rel="DEFINITION" href=
"26_glo_i.htm#identical"><i>identical</i></a>, the corresponding
<a rel="DEFINITION" href="26_glo_o.htm#object"><i>objects</i></a>
in the <a rel="DEFINITION" href=
"26_glo_c.htm#compiled_code"><i>compiled code</i></a> must also be
the <a rel="DEFINITION" href=
"26_glo_i.htm#identical"><i>identical</i></a>. With the exception
of <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbols</i></a> and <a rel="DEFINITION"
href="26_glo_p.htm#package"><i>packages</i></a>, any two <a rel=
"DEFINITION" href="26_glo_l.htm#literal"><i>literal</i></a> <a rel=
"DEFINITION" href="26_glo_o.htm#object"><i>objects</i></a> in
<a rel="DEFINITION" href="26_glo_c.htm#code"><i>code</i></a> being
processed by the <a rel="DEFINITION" href=
"26_glo_f.htm#file_compiler"><i>file compiler</i></a> may be
<i>coalesced</i> if and only if they are <a rel="DEFINITION" href=
"26_glo_s.htm#similar"><i>similar</i></a>; if they are either both
<a rel="DEFINITION" href="26_glo_s.htm#symbol"><i>symbols</i></a>
or both <a rel="DEFINITION" href=
"26_glo_p.htm#package"><i>packages</i></a>, they may only be
<i>coalesced</i> if and only if they are <a rel="DEFINITION" href=
"26_glo_i.htm#identical"><i>identical</i></a>.</p>
<p><a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>Objects</i></a> containing circular
references can be <a rel="DEFINITION" href=
"26_glo_e.htm#externalizable_object"><i>externalizable
objects</i></a>. The <a rel="DEFINITION" href=
"26_glo_f.htm#file_compiler"><i>file compiler</i></a> is required
to preserve <a rel="DEFINITION" href=
"f_eql.htm#eql"><b>eql</b></a>ness of substructures within a
<a rel="DEFINITION" href="26_glo_f.htm#file"><i>file</i></a>.
Preserving <a rel="DEFINITION" href=
"f_eql.htm#eql"><b>eql</b></a>ness means that subobjects that are
the <a rel="DEFINITION" href="26_glo_s.htm#same"><i>same</i></a> in
the <a rel="DEFINITION" href="26_glo_s.htm#source_code"><i>source
code</i></a> must be the <a rel="DEFINITION" href=
"26_glo_s.htm#same"><i>same</i></a> in the corresponding <a rel=
"DEFINITION" href="26_glo_c.htm#compiled_code"><i>compiled
code</i></a>.</p>
<p>In addition, the following are constraints on the handling of
<a rel="DEFINITION" href="26_glo_l.htm#literal"><i>literal</i></a>
<a rel="DEFINITION" href="26_glo_o.htm#object"><i>objects</i></a>
by the <a rel="DEFINITION" href=
"26_glo_f.htm#file_compiler"><i>file compiler</i></a>:</p>
<dl>
<dt><b>array:</b> If an <a rel="DEFINITION" href=
"26_glo_a.htm#array"><i>array</i></a> in the source code is a
<a rel="DEFINITION" href="26_glo_s.htm#simple_array"><i>simple
array</i></a>, then the corresponding <a rel="DEFINITION" href=
"26_glo_a.htm#array"><i>array</i></a> in the compiled code will
also be a <a rel="DEFINITION" href=
"26_glo_s.htm#simple_array"><i>simple array</i></a>. If an <a rel=
"DEFINITION" href="26_glo_a.htm#array"><i>array</i></a> in the
source code is displaced, has a <a rel="DEFINITION" href=
"26_glo_f.htm#fill_pointer"><i>fill pointer</i></a>, or is <a rel=
"DEFINITION" href="26_glo_a.htm#actually_adjustable"><i>actually
adjustable</i></a>, the corresponding <a rel="DEFINITION" href=
"26_glo_a.htm#array"><i>array</i></a> in the compiled code might
lack any or all of these qualities. If an <a rel="DEFINITION" href=
"26_glo_a.htm#array"><i>array</i></a> in the source code has a fill
pointer, then the corresponding <a rel="DEFINITION" href=
"26_glo_a.htm#array"><i>array</i></a> in the compiled code might be
only the size implied by the fill pointer.<br></dt>
<dt><b>packages:</b> The loader is required to find the
corresponding <a rel="DEFINITION" href=
"26_glo_p.htm#package"><i>package</i></a> <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a> as if by calling <a rel=
"DEFINITION" href=
"f_find_p.htm#find-package"><b>find-package</b></a> with the
package name as an argument. An error of <a rel="DEFINITION" href=
"26_glo_t.htm#type"><i>type</i></a> <a rel="DEFINITION" href=
"e_pkg_er.htm#package-error"><b>package-error</b></a> is signaled
if no <a rel="DEFINITION" href=
"26_glo_p.htm#package"><i>package</i></a> of that name exists at
load time.<br></dt>
<dt><b>random-state:</b> A constant <a rel="DEFINITION" href=
"26_glo_r.htm#random_state"><i>random state</i></a> object cannot
be used as the state argument to the <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> <a rel="DEFINITION"
href="f_random.htm#random"><b>random</b></a> because <a rel=
"DEFINITION" href="f_random.htm#random"><b>random</b></a> modifies
this data structure.<br></dt>
<dt><b>structure, standard-object:</b> <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>Objects</i></a> of <a rel="DEFINITION"
href="26_glo_t.htm#type"><i>type</i></a> <a rel="DEFINITION" href=
"t_stu_ob.htm#structure-object"><b>structure-object</b></a> and
<a rel="DEFINITION" href=
"t_std_ob.htm#standard-object"><b>standard-object</b></a> may
appear in compiled constants if there is an appropriate <a rel=
"DEFINITION" href=
"f_mk_ld_.htm#make-load-form"><b>make-load-form</b></a> method
defined for that <a rel="DEFINITION" href=
"26_glo_t.htm#type"><i>type</i></a>.<br></dt>
<dd>The <a rel="DEFINITION" href=
"26_glo_f.htm#file_compiler"><i>file compiler</i></a> calls <a rel=
"DEFINITION" href=
"f_mk_ld_.htm#make-load-form"><b>make-load-form</b></a> on any
<a rel="DEFINITION" href="26_glo_o.htm#object"><i>object</i></a>
that is referenced as a <a rel="DEFINITION" href=
"26_glo_l.htm#literal"><i>literal</i></a> <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a> if the <a rel="DEFINITION"
href="26_glo_o.htm#object"><i>object</i></a> is a <a rel=
"DEFINITION" href=
"26_glo_g.htm#generalized_instance"><i>generalized instance</i></a>
of <a rel="DEFINITION" href=
"t_std_ob.htm#standard-object"><b>standard-object</b></a>, <a rel=
"DEFINITION" href=
"t_stu_ob.htm#structure-object"><b>structure-object</b></a>,
<a rel="DEFINITION" href=
"e_cnd.htm#condition"><b>condition</b></a>, or any of a (possibly
empty) <a rel="DEFINITION" href=
"26_glo_i.htm#implementation-dependent"><i>implementation-dependent</i></a>
set of other <a rel="DEFINITION" href=
"26_glo_c.htm#class"><i>classes</i></a>. The <a rel="DEFINITION"
href="26_glo_f.htm#file_compiler"><i>file compiler</i></a> only
calls <a rel="DEFINITION" href=
"f_mk_ld_.htm#make-load-form"><b>make-load-form</b></a> once for
any given <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a> within a single <a rel=
"DEFINITION" href="26_glo_f.htm#file"><i>file</i></a>.</dd>
<dt><b>symbol:</b> In order to guarantee that <a rel="DEFINITION"
href="26_glo_c.htm#compiled_file"><i>compiled files</i></a> can be
<i>loaded</i> correctly, users must ensure that the <a rel=
"DEFINITION" href="26_glo_p.htm#package"><i>packages</i></a>
referenced in those <a rel="DEFINITION" href=
"26_glo_f.htm#file"><i>files</i></a> are defined consistently at
compile time and load time. <a rel="DEFINITION" href=
"26_glo_c.htm#conforming_program"><i>Conforming programs</i></a>
must satisfy the following requirements:<br></dt>
<dd>
<ol>
<li>The <a rel="DEFINITION" href=
"26_glo_c.htm#current_package"><i>current package</i></a> when a
<a rel="DEFINITION" href="26_glo_t.htm#top_level_form"><i>top level
form</i></a> in the <a rel="DEFINITION" href=
"26_glo_f.htm#file"><i>file</i></a> is processed by <a rel=
"DEFINITION" href=
"f_cmp_fi.htm#compile-file"><b>compile-file</b></a> must be the
same as the <a rel="DEFINITION" href=
"26_glo_c.htm#current_package"><i>current package</i></a> when the
<a rel="DEFINITION" href="26_glo_c.htm#code"><i>code</i></a>
corresponding to that <a rel="DEFINITION" href=
"26_glo_t.htm#top_level_form"><i>top level form</i></a> in the
<a rel="DEFINITION" href="26_glo_c.htm#compiled_file"><i>compiled
file</i></a> is executed by <a rel="DEFINITION" href=
"f_load.htm#load"><b>load</b></a>. In particular:
<dl>
<dt>a. Any <a rel="DEFINITION" href=
"26_glo_t.htm#top_level_form"><i>top level form</i></a> in a
<a rel="DEFINITION" href="26_glo_f.htm#file"><i>file</i></a> that
alters the <a rel="DEFINITION" href=
"26_glo_c.htm#current_package"><i>current package</i></a> must
change it to a <a rel="DEFINITION" href=
"26_glo_p.htm#package"><i>package</i></a> of the same <a rel=
"DEFINITION" href="26_glo_n.htm#name"><i>name</i></a> both at
compile time and at load time.<br></dt>
<dt>b. If the first <a rel="DEFINITION" href=
"26_glo_n.htm#non-atomic"><i>non-atomic</i></a> <a rel="DEFINITION"
href="26_glo_t.htm#top_level_form"><i>top level form</i></a> in the
<a rel="DEFINITION" href="26_glo_f.htm#file"><i>file</i></a> is not
an <a rel="DEFINITION" href=
"m_in_pkg.htm#in-package"><b>in-package</b></a> <a rel="DEFINITION"
href="26_glo_f.htm#form"><i>form</i></a>, then the <a rel=
"DEFINITION" href="26_glo_c.htm#current_package"><i>current
package</i></a> at the time <a rel="DEFINITION" href=
"f_load.htm#load"><b>load</b></a> is called must be a <a rel=
"DEFINITION" href="26_glo_p.htm#package"><i>package</i></a> with
the same <a rel="DEFINITION" href=
"26_glo_n.htm#name"><i>name</i></a> as the package that was the
<a rel="DEFINITION" href="26_glo_c.htm#current_package"><i>current
package</i></a> at the time <a rel="DEFINITION" href=
"f_cmp_fi.htm#compile-file"><b>compile-file</b></a> was
called.<br></dt>
</dl>
</li>
<li>For all <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbols</i></a> appearing lexically within
a <a rel="DEFINITION" href="26_glo_t.htm#top_level_form"><i>top
level form</i></a> that were <a rel="DEFINITION" href=
"26_glo_a.htm#accessible"><i>accessible</i></a> in the <a rel=
"DEFINITION" href="26_glo_p.htm#package"><i>package</i></a> that
was the <a rel="DEFINITION" href=
"26_glo_c.htm#current_package"><i>current package</i></a> during
processing of that <a rel="DEFINITION" href=
"26_glo_t.htm#top_level_form"><i>top level form</i></a> at compile
time, but whose <a rel="DEFINITION" href=
"26_glo_h.htm#home_package"><i>home package</i></a> was another
<a rel="DEFINITION" href="26_glo_p.htm#package"><i>package</i></a>,
at load time there must be a <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbol</i></a> with the same <a rel=
"DEFINITION" href="26_glo_n.htm#name"><i>name</i></a> that is
<a rel="DEFINITION" href=
"26_glo_a.htm#accessible"><i>accessible</i></a> in both the
load-time <a rel="DEFINITION" href=
"26_glo_c.htm#current_package"><i>current package</i></a> and in
the <a rel="DEFINITION" href=
"26_glo_p.htm#package"><i>package</i></a> with the same <a rel=
"DEFINITION" href="26_glo_n.htm#name"><i>name</i></a> as the
compile-time <a rel="DEFINITION" href=
"26_glo_h.htm#home_package"><i>home package</i></a>.</li>
<li>For all <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbols</i></a> represented in the <a rel=
"DEFINITION" href="26_glo_c.htm#compiled_file"><i>compiled
file</i></a> that were <a rel="DEFINITION" href=
"26_glo_e.htm#external_symbol"><i>external symbols</i></a> in their
<a rel="DEFINITION" href="26_glo_h.htm#home_package"><i>home
package</i></a> at compile time, there must be a <a rel=
"DEFINITION" href="26_glo_s.htm#symbol"><i>symbol</i></a> with the
same <a rel="DEFINITION" href="26_glo_n.htm#name"><i>name</i></a>
that is an <a rel="DEFINITION" href=
"26_glo_e.htm#external_symbol"><i>external symbol</i></a> in the
<a rel="DEFINITION" href="26_glo_p.htm#package"><i>package</i></a>
with the same <a rel="DEFINITION" href=
"26_glo_n.htm#name"><i>name</i></a> at load time.</li>
</ol>
<p>If any of these conditions do not hold, the <a rel="DEFINITION"
href="26_glo_p.htm#package"><i>package</i></a> in which the <a rel=
"DEFINITION" href="26_glo_l.htm#loader"><i>loader</i></a> looks for
the affected <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbols</i></a> is unspecified. <a rel=
"DEFINITION" href=
"26_glo_i.htm#implementation"><i>Implementations</i></a> are
permitted to signal an error or to define this behavior.</p>
</dd>
</dl>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.2.5 Exceptional Situations in the Compiler</h2>
<p><a rel="DEFINITION" href="f_cmp.htm#compile"><b>compile</b></a>
and <a rel="DEFINITION" href=
"f_cmp_fi.htm#compile-file"><b>compile-file</b></a> are permitted
to signal errors and warnings, including errors due to compile-time
processing of <tt>(eval-when (:compile-toplevel) ...)</tt> forms,
macro expansion, and conditions signaled by the compiler
itself.</p>
<p><a rel="DEFINITION" href=
"26_glo_c.htm#condition"><i>Conditions</i></a> of <a rel=
"DEFINITION" href="26_glo_t.htm#type"><i>type</i></a> <a rel=
"DEFINITION" href="e_error.htm#error"><b>error</b></a> might be
signaled by the compiler in situations where the compilation cannot
proceed without intervention.</p>
<p>In addition to situations for which the standard specifies that
<a rel="DEFINITION" href=
"26_glo_c.htm#condition"><i>conditions</i></a> of <a rel=
"DEFINITION" href="26_glo_t.htm#type"><i>type</i></a> <a rel=
"DEFINITION" href="e_warnin.htm#warning"><b>warning</b></a> must or
might be signaled, warnings might be signaled in situations where
the compiler can determine that the consequences are undefined or
that a run-time error will be signaled. Examples of this situation
are as follows: violating type declarations, altering or assigning
the value of a constant defined with <a rel="DEFINITION" href=
"m_defcon.htm#defconstant"><b>defconstant</b></a>, calling built-in
Lisp functions with a wrong number of arguments or malformed
keyword argument lists, and using unrecognized declaration
specifiers.</p>
<p>The compiler is permitted to issue warnings about matters of
programming style as conditions of <a rel="DEFINITION" href=
"26_glo_t.htm#type"><i>type</i></a> <a rel="DEFINITION" href=
"e_style_.htm#style-warning"><b>style-warning</b></a>. Examples of
this situation are as follows: redefining a function using a
different argument list, calling a function with a wrong number of
arguments, not declaring <a rel="DEFINITION" href=
"d_ignore.htm#ignore"><b>ignore</b></a> of a local variable that is
not referenced, and referencing a variable declared <a rel=
"DEFINITION" href="d_ignore.htm#ignore"><b>ignore</b></a>.</p>
<p>Both <a rel="DEFINITION" href=
"f_cmp.htm#compile"><b>compile</b></a> and <a rel="DEFINITION"
href="f_cmp_fi.htm#compile-file"><b>compile-file</b></a> are
permitted (but not required) to <a rel="DEFINITION" href=
"26_glo_e.htm#establish"><i>establish</i></a> a <a rel="DEFINITION"
href="26_glo_h.htm#handler"><i>handler</i></a> for <a rel=
"DEFINITION" href="26_glo_c.htm#condition"><i>conditions</i></a> of
<a rel="DEFINITION" href="26_glo_t.htm#type"><i>type</i></a>
<a rel="DEFINITION" href="e_error.htm#error"><b>error</b></a>. For
example, they might signal a warning, and restart compilation from
some <a rel="DEFINITION" href=
"26_glo_i.htm#implementation-dependent"><i>implementation-dependent</i></a>
point in order to let the compilation proceed without manual
intervention.</p>
<p>Both <a rel="DEFINITION" href=
"f_cmp.htm#compile"><b>compile</b></a> and <a rel="DEFINITION"
href="f_cmp_fi.htm#compile-file"><b>compile-file</b></a> return
three values, the second two indicating whether the source code
being compiled contained errors and whether style warnings were
issued.</p>
<p>Some warnings might be deferred until the end of compilation.
See <a rel="DEFINITION" href=
"m_w_comp.htm#with-compilation-unit"><b>with-compilation-unit</b></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.3 Declarations</h2>
<p><a rel="DEFINITION" href=
"26_glo_d.htm#declaration"><i>Declarations</i></a> provide a way of
specifying information for use by program processors, such as the
evaluator or the compiler.</p>
<p><a rel="DEFINITION" href=
"26_glo_l.htm#local_declaration"><i>Local declarations</i></a> can
be embedded in executable code using <a rel="DEFINITION" href=
"s_declar.htm#declare"><b>declare</b></a>. <a rel="DEFINITION"
href="26_glo_g.htm#global_declaration"><i>Global
declarations</i></a>, or <a rel="DEFINITION" href=
"26_glo_p.htm#proclamation"><i>proclamations</i></a>, are
established by <a rel="DEFINITION" href=
"f_procla.htm#proclaim"><b>proclaim</b></a> or <a rel="DEFINITION"
href="m_declai.htm#declaim"><b>declaim</b></a>.</p>
<p>The <a rel="DEFINITION" href="s_the.htm#the"><b>the</b></a>
<a rel="DEFINITION" href="26_glo_s.htm#special_form"><i>special
form</i></a> provides a shorthand notation for making a <a rel=
"DEFINITION" href="26_glo_l.htm#local_declaration"><i>local
declaration</i></a> about the <a rel="DEFINITION" href=
"26_glo_t.htm#type"><i>type</i></a> of the <a rel="DEFINITION"
href="26_glo_v.htm#value"><i>value</i></a> of a given <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>form</i></a>.</p>
<p>The consequences are undefined if a program violates a <a rel=
"DEFINITION" href="26_glo_d.htm#declaration"><i>declaration</i></a>
or a <a rel="DEFINITION" href=
"26_glo_p.htm#proclamation"><i>proclamation</i></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.3.1 Minimal Declaration Processing Requirements</h2>
<p>In general, an <a rel="DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementation</i></a> is free to
ignore <a rel="DEFINITION" href=
"26_glo_d.htm#declaration_specifier"><i>declaration
specifiers</i></a> except for the <a rel="DEFINITION" href=
"d_declar.htm#declaration"><b>declaration</b></a>, <a rel=
"DEFINITION" href="d_inline.htm#notinline"><b>notinline</b></a>,
<a rel="DEFINITION" href="d_optimi.htm#safety"><b>safety</b></a>,
and <a rel="DEFINITION" href=
"d_specia.htm#special"><b>special</b></a> <a rel="DEFINITION" href=
"26_glo_d.htm#declaration_specifier"><i>declaration
specifiers</i></a>.</p>
<p>A <a rel="DEFINITION" href=
"d_declar.htm#declaration"><b>declaration</b></a> <a rel=
"DEFINITION" href="26_glo_d.htm#declaration"><i>declaration</i></a>
must suppress warnings about unrecognized <a rel="DEFINITION" href=
"26_glo_d.htm#declaration"><i>declarations</i></a> of the kind that
it declares. If an <a rel="DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementation</i></a> does not
produce warnings about unrecognized declarations, it may safely
ignore this <a rel="DEFINITION" href=
"26_glo_d.htm#declaration"><i>declaration</i></a>.</p>
<p>A <a rel="DEFINITION" href=
"d_inline.htm#notinline"><b>notinline</b></a> <a rel="DEFINITION"
href="26_glo_d.htm#declaration"><i>declaration</i></a> must be
recognized by any <a rel="DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementation</i></a> that
supports inline functions or <a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro"><i>compiler macros</i></a> in order
to disable those facilities. An <a rel="DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementation</i></a> that does
not use inline functions or <a rel="DEFINITION" href=
"26_glo_c.htm#compiler_macro"><i>compiler macros</i></a> may safely
ignore this <a rel="DEFINITION" href=
"26_glo_d.htm#declaration"><i>declaration</i></a>.</p>
<p>A <a rel="DEFINITION" href=
"d_optimi.htm#safety"><b>safety</b></a> <a rel="DEFINITION" href=
"26_glo_d.htm#declaration"><i>declaration</i></a> that increases
the current safety level must always be recognized. An <a rel=
"DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementation</i></a> that always
processes code as if safety were high may safely ignore this
<a rel="DEFINITION" href=
"26_glo_d.htm#declaration"><i>declaration</i></a>.</p>
<p>A <a rel="DEFINITION" href=
"d_specia.htm#special"><b>special</b></a> <a rel="DEFINITION" href=
"26_glo_d.htm#declaration"><i>declaration</i></a> must be processed
by all <a rel="DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementations</i></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.3.2 Declaration Specifiers</h2>
<p>A <a rel="DEFINITION" href=
"26_glo_d.htm#declaration_specifier"><i>declaration
specifier</i></a> is an <a rel="DEFINITION" href=
"26_glo_e.htm#expression"><i>expression</i></a> that can appear at
top level of a <a rel="DEFINITION" href=
"s_declar.htm#declare"><b>declare</b></a> expression or a <a rel=
"DEFINITION" href="m_declai.htm#declaim"><b>declaim</b></a> form,
or as the argument to <a rel="DEFINITION" href=
"f_procla.htm#proclaim"><b>proclaim</b></a>. It is a <a rel=
"DEFINITION" href="26_glo_l.htm#list"><i>list</i></a> whose <a rel=
"DEFINITION" href="26_glo_c.htm#car"><i>car</i></a> is a <a rel=
"DEFINITION" href=
"26_glo_d.htm#declaration_identifier"><i>declaration
identifier</i></a>, and whose <a rel="DEFINITION" href=
"26_glo_c.htm#cdr"><i>cdr</i></a> is data interpreted according to
rules specific to the <a rel="DEFINITION" href=
"26_glo_d.htm#declaration_identifier"><i>declaration
identifier</i></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.3.3 Declaration Identifiers</h2>
<p>The next figure shows a list of all <a rel="DEFINITION" href=
"26_glo_d.htm#declaration_identifier"><i>declaration
identifiers</i></a> defined by this standard.</p>
<pre>
<a rel="DEFINITION" href=
"d_declar.htm#declaration">declaration</a>     <a rel="DEFINITION"
href="d_ignore.htm#ignore">ignore</a>     <a rel="DEFINITION" href=
"d_specia.htm#special">special</a>  
<a rel="DEFINITION" href=
"d_dynami.htm#dynamic-extent">dynamic-extent</a>  <a rel=
"DEFINITION" href="d_inline.htm#inline">inline</a>     <a rel=
"DEFINITION" href="a_type.htm#type">type</a>     
<a rel="DEFINITION" href=
"d_ftype.htm#ftype">ftype</a>           <a rel="DEFINITION" href=
"d_inline.htm#notinline">notinline</a>           
<a rel="DEFINITION" href=
"d_ignore.htm#ignorable">ignorable</a>       <a rel="DEFINITION"
href="d_optimi.htm#optimize">optimize</a>            
</pre>
<p><b>Figure 3-9. Common Lisp Declaration Identifiers</b></p>
<p>An implementation is free to support other (<a rel="DEFINITION"
href=
"26_glo_i.htm#implementation-defined"><i>implementation-defined</i></a>)
<a rel="DEFINITION" href=
"26_glo_d.htm#declaration_identifier"><i>declaration
identifiers</i></a> as well. A warning might be issued if a <a rel=
"DEFINITION" href=
"26_glo_d.htm#declaration_identifier"><i>declaration
identifier</i></a> is not among those defined above, is not defined
by the <a rel="DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementation</i></a>, is not a
<a rel="DEFINITION" href="26_glo_t.htm#type"><i>type</i></a>
<a rel="DEFINITION" href="26_glo_n.htm#name"><i>name</i></a>, and
has not been declared in a <a rel="DEFINITION" href=
"d_declar.htm#declaration"><b>declaration</b></a> <a rel=
"DEFINITION" href=
"26_glo_p.htm#proclamation"><i>proclamation</i></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.3.3.1 Shorthand notation for Type Declarations</h2>
<p>A <a rel="DEFINITION" href="26_glo_t.htm#type_specifier"><i>type
specifier</i></a> can be used as a <a rel="DEFINITION" href=
"26_glo_d.htm#declaration_identifier"><i>declaration
identifier</i></a>. <tt>(</tt><i>type-specifier</i>
<i>var</i><b>*</b><tt>)</tt> is taken as shorthand for
<tt>(type</tt> <i>type-specifier</i>
<i>var</i><b>*</b><tt>)</tt>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.3.4 Declaration Scope</h2>
<p><a rel="DEFINITION" href=
"26_glo_d.htm#declaration"><i>Declarations</i></a> can be divided
into two kinds: those that apply to the <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>bindings</i></a> of <a rel="DEFINITION"
href="26_glo_v.htm#variable"><i>variables</i></a> or <a rel=
"DEFINITION" href="26_glo_f.htm#function"><i>functions</i></a>; and
those that do not apply to <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>bindings</i></a>.</p>
<p>A <a rel="DEFINITION" href=
"26_glo_d.htm#declaration"><i>declaration</i></a> that appears at
the head of a binding <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> and applies to a <a rel=
"DEFINITION" href="26_glo_v.htm#variable"><i>variable</i></a> or
<a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> <a rel="DEFINITION"
href="26_glo_b.htm#binding"><i>binding</i></a> made by that <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> is called a
<a rel="DEFINITION" href="26_glo_b.htm#bound_declaration"><i>bound
declaration</i></a>; such a <a rel="DEFINITION" href=
"26_glo_d.htm#declaration"><i>declaration</i></a> affects both the
<a rel="DEFINITION" href="26_glo_b.htm#binding"><i>binding</i></a>
and any references within the <a rel="DEFINITION" href=
"26_glo_s.htm#scope"><i>scope</i></a> of the <a rel="DEFINITION"
href="26_glo_d.htm#declaration"><i>declaration</i></a>.</p>
<p><a rel="DEFINITION" href=
"26_glo_d.htm#declaration"><i>Declarations</i></a> that are not
<a rel="DEFINITION" href="26_glo_b.htm#bound_declaration"><i>bound
declarations</i></a> are called <a rel="DEFINITION" href=
"26_glo_f.htm#free_declaration"><i>free declarations</i></a>.</p>
<p>A <a rel="DEFINITION" href=
"26_glo_f.htm#free_declaration"><i>free declaration</i></a> in a
<a rel="DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> F1
that applies to a <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> for a <a rel="DEFINITION"
href="26_glo_n.htm#name"><i>name</i></a> N <i>established</i> by
some <a rel="DEFINITION" href="26_glo_f.htm#form"><i>form</i></a>
F2 of which F1 is a <a rel="DEFINITION" href=
"26_glo_s.htm#subform"><i>subform</i></a> affects only references
to N within F1; it does not to apply to other references to N
outside of F1, nor does it affect the manner in which the <a rel=
"DEFINITION" href="26_glo_b.htm#binding"><i>binding</i></a> of N by
F2 is <i>established</i>.</p>
<p><a rel="DEFINITION" href=
"26_glo_d.htm#declaration"><i>Declarations</i></a> that do not
apply to <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>bindings</i></a> can only appear as
<a rel="DEFINITION" href="26_glo_f.htm#free_declaration"><i>free
declarations</i></a>.</p>
<p>The <a rel="DEFINITION" href=
"26_glo_s.htm#scope"><i>scope</i></a> of a <a rel="DEFINITION"
href="26_glo_b.htm#bound_declaration"><i>bound declaration</i></a>
is the same as the <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_scope"><i>lexical scope</i></a> of the
<a rel="DEFINITION" href="26_glo_b.htm#binding"><i>binding</i></a>
to which it applies; for <a rel="DEFINITION" href=
"26_glo_s.htm#special_variable"><i>special variables</i></a>, this
means the <a rel="DEFINITION" href=
"26_glo_s.htm#scope"><i>scope</i></a> that the <a rel="DEFINITION"
href="26_glo_b.htm#binding"><i>binding</i></a> would have had had
it been a <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_binding"><i>lexical binding</i></a>.</p>
<p>Unless explicitly stated otherwise, the <a rel="DEFINITION"
href="26_glo_s.htm#scope"><i>scope</i></a> of a <a rel="DEFINITION"
href="26_glo_f.htm#free_declaration"><i>free declaration</i></a>
includes only the body <a rel="DEFINITION" href=
"26_glo_s.htm#subform"><i>subforms</i></a> of the <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> at whose head
it appears, and no other <a rel="DEFINITION" href=
"26_glo_s.htm#subform"><i>subforms</i></a>. The <a rel="DEFINITION"
href="26_glo_s.htm#scope"><i>scope</i></a> of <a rel="DEFINITION"
href="26_glo_f.htm#free_declaration"><i>free declarations</i></a>
specifically does not include <a rel="DEFINITION" href=
"26_glo_i.htm#initialization_form"><i>initialization forms</i></a>
for <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>bindings</i></a> established by the
<a rel="DEFINITION" href="26_glo_f.htm#form"><i>form</i></a>
containing the <a rel="DEFINITION" href=
"26_glo_d.htm#declaration"><i>declarations</i></a>.</p>
<p>Some <a rel="DEFINITION" href=
"26_glo_i.htm#iteration_form"><i>iteration forms</i></a> include
step, end-test, or result <a rel="DEFINITION" href=
"26_glo_s.htm#subform"><i>subforms</i></a> that are also included
in the <a rel="DEFINITION" href=
"26_glo_s.htm#scope"><i>scope</i></a> of <a rel="DEFINITION" href=
"26_glo_d.htm#declaration"><i>declarations</i></a> that appear in
the <a rel="DEFINITION" href=
"26_glo_i.htm#iteration_form"><i>iteration form</i></a>.
Specifically, the <a rel="DEFINITION" href=
"26_glo_i.htm#iteration_form"><i>iteration forms</i></a> and
<a rel="DEFINITION" href="26_glo_s.htm#subform"><i>subforms</i></a>
involved are:</p>
<ul>
<li><a rel="DEFINITION" href="m_do_do.htm#do"><b>do</b></a>,
<a rel="DEFINITION" href="m_do_do.htm#doST"><b>do*</b></a>:
<i>step-forms</i>, <i>end-test-form</i>, and
<i>result-forms</i>.</li>
<li><a rel="DEFINITION" href=
"m_dolist.htm#dolist"><b>dolist</b></a>, <a rel="DEFINITION" href=
"m_dotime.htm#dotimes"><b>dotimes</b></a>: <i>result-form</i></li>
<li><a rel="DEFINITION" href=
"m_do_sym.htm#do-all-symbols"><b>do-all-symbols</b></a>, <a rel=
"DEFINITION" href=
"m_do_sym.htm#do-external-symbols"><b>do-external-symbols</b></a>,
<a rel="DEFINITION" href=
"m_do_sym.htm#do-symbols"><b>do-symbols</b></a>:
<i>result-form</i></li>
</ul>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.3.4.1 Examples of Declaration Scope</h2>
<p>Here is an example illustrating the <a rel="DEFINITION" href=
"26_glo_s.htm#scope"><i>scope</i></a> of <a rel="DEFINITION" href=
"26_glo_b.htm#bound_declaration"><i>bound declarations</i></a>.</p>
<pre>
 (let ((x 1))                ;[1] 1st occurrence of x
   (declare (special x))     ;[2] 2nd occurrence of x
   (let ((x 2))              ;[3] 3rd occurrence of x
     (let ((old-x x)         ;[4] 4th occurrence of x
           (x 3))            ;[5] 5th occurrence of x
       (declare (special x)) ;[6] 6th occurrence of x
       (list old-x x))))     ;[7] 7th occurrence of x
=&gt;  (2 3)
</pre>
<p>The first occurrence of <tt>x</tt> <a rel="DEFINITION" href=
"26_glo_e.htm#establish"><i>establishes</i></a> a <a rel=
"DEFINITION" href="26_glo_d.htm#dynamic_binding"><i>dynamic
binding</i></a> of <tt>x</tt> because of the <a rel="DEFINITION"
href="d_specia.htm#special"><b>special</b></a> <a rel="DEFINITION"
href="26_glo_d.htm#declaration"><i>declaration</i></a> for
<tt>x</tt> in the second line. The third occurrence of <tt>x</tt>
<a rel="DEFINITION" href=
"26_glo_e.htm#establish"><i>establishes</i></a> a <a rel=
"DEFINITION" href="26_glo_l.htm#lexical_binding"><i>lexical
binding</i></a> of <tt>x</tt> (because there is no <a rel=
"DEFINITION" href="d_specia.htm#special"><b>special</b></a> <a rel=
"DEFINITION" href="26_glo_d.htm#declaration"><i>declaration</i></a>
in the corresponding <a rel="DEFINITION" href=
"s_let_l.htm#let"><b>let</b></a> <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a>). The fourth occurrence of
<tt>x</tt> <i>x</i> is a reference to the <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_binding"><i>lexical binding</i></a> of
<tt>x</tt> established in the third line. The fifth occurrence of
<tt>x</tt> <a rel="DEFINITION" href=
"26_glo_e.htm#establish"><i>establishes</i></a> a <a rel=
"DEFINITION" href="26_glo_d.htm#dynamic_binding"><i>dynamic
binding</i></a> of <i>x</i> for the body of the <a rel="DEFINITION"
href="s_let_l.htm#let"><b>let</b></a> <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> that begins on that line
because of the <a rel="DEFINITION" href=
"d_specia.htm#special"><b>special</b></a> <a rel="DEFINITION" href=
"26_glo_d.htm#declaration"><i>declaration</i></a> for <tt>x</tt> in
the sixth line. The reference to <tt>x</tt> in the fourth line is
not affected by the <a rel="DEFINITION" href=
"d_specia.htm#special"><b>special</b></a> <a rel="DEFINITION" href=
"26_glo_d.htm#declaration"><i>declaration</i></a> in the sixth line
because that reference is not within the "would-be <a rel=
"DEFINITION" href="26_glo_l.htm#lexical_scope"><i>lexical
scope</i></a>" of the <a rel="DEFINITION" href=
"26_glo_v.htm#variable"><i>variable</i></a> <tt>x</tt> in the fifth
line. The reference to <tt>x</tt> in the seventh line is a
reference to the <a rel="DEFINITION" href=
"26_glo_d.htm#dynamic_binding"><i>dynamic binding</i></a> of
<i>x</i> <i>established</i> in the fifth line.</p>
<p>Here is another example, to illustrate the <a rel="DEFINITION"
href="26_glo_s.htm#scope"><i>scope</i></a> of a <a rel="DEFINITION"
href="26_glo_f.htm#free_declaration"><i>free declaration</i></a>.
In the following:</p>
<pre>
 (lambda (&amp;optional (x (foo 1))) ;[1]
   (declare (notinline foo))     ;[2]
   (foo x))                      ;[3]
</pre>
<p>the <a rel="DEFINITION" href="26_glo_c.htm#call"><i>call</i></a>
to <tt>foo</tt> in the first line might be compiled inline even
though the <a rel="DEFINITION" href=
"26_glo_c.htm#call"><i>call</i></a> to <tt>foo</tt> in the third
line must not be. This is because the <a rel="DEFINITION" href=
"d_inline.htm#notinline"><b>notinline</b></a> <a rel="DEFINITION"
href="26_glo_d.htm#declaration"><i>declaration</i></a> for
<tt>foo</tt> in the second line applies only to the body on the
third line. In order to suppress inlining for both <a rel=
"DEFINITION" href="26_glo_c.htm#call"><i>calls</i></a>, one might
write:</p>
<pre>
 (locally (declare (notinline foo)) ;[1]
   (lambda (&amp;optional (x (foo 1)))  ;[2]
     (foo x)))                      ;[3]
</pre>
<p>or, alternatively:</p>
<pre>
 (lambda (&amp;optional                               ;[1]
            (x (locally (declare (notinline foo)) ;[2]
                 (foo 1))))                       ;[3]
   (declare (notinline foo))                      ;[4]
   (foo x))                                       ;[5]
</pre>
<p>Finally, here is an example that shows the <a rel="DEFINITION"
href="26_glo_s.htm#scope"><i>scope</i></a> of <a rel="DEFINITION"
href="26_glo_d.htm#declaration"><i>declarations</i></a> in an
<a rel="DEFINITION" href="26_glo_i.htm#iteration_form"><i>iteration
form</i></a>.</p>
<pre>
 (let ((x  1))                     ;[1]
   (declare (special x))           ;[2]
     (let ((x 2))                  ;[3]
       (dotimes (i x x)            ;[4]
         (declare (special x)))))  ;[5]
=&gt;  1
</pre>
<p>In this example, the first reference to <tt>x</tt> on the fourth
line is to the <a rel="DEFINITION" href=
"26_glo_l.htm#lexical_binding"><i>lexical binding</i></a> of
<tt>x</tt> established on the third line. However, the second
occurrence of <tt>x</tt> on the fourth line lies within the <a rel=
"DEFINITION" href="26_glo_s.htm#scope"><i>scope</i></a> of the
<a rel="DEFINITION" href="26_glo_f.htm#free_declaration"><i>free
declaration</i></a> on the fifth line (because this is the
<i>result-form</i> of the <a rel="DEFINITION" href=
"m_dotime.htm#dotimes"><b>dotimes</b></a>) and therefore refers to
the <a rel="DEFINITION" href=
"26_glo_d.htm#dynamic_binding"><i>dynamic binding</i></a> of
<tt>x</tt>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.4 Lambda Lists</h2>
<p>A <a rel="DEFINITION" href="26_glo_l.htm#lambda_list"><i>lambda
list</i></a> is a <a rel="DEFINITION" href=
"26_glo_l.htm#list"><i>list</i></a> that specifies a set of <a rel=
"DEFINITION" href="26_glo_p.htm#parameter"><i>parameters</i></a>
(sometimes called <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_variable"><i>lambda variables</i></a>) and a
protocol for receiving <a rel="DEFINITION" href=
"26_glo_v.htm#value"><i>values</i></a> for those <a rel=
"DEFINITION" href=
"26_glo_p.htm#parameter"><i>parameters</i></a>.</p>
<p>There are several kinds of <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list"><i>lambda lists</i></a>.</p>
<pre>
Context                                      Kind of Lambda List                              
<a rel="DEFINITION" href="m_defun.htm#defun">defun</a> <a rel=
"DEFINITION" href=
"26_glo_f.htm#form">form</a>                                   <a rel="DEFINITION"
href=
"26_glo_o.htm#ordinary_lambda_list">ordinary lambda list</a>                             
<a rel="DEFINITION" href=
"m_defmac.htm#defmacro">defmacro</a> <a rel="DEFINITION" href=
"26_glo_f.htm#form">form</a>                                <a rel=
"DEFINITION" href=
"26_glo_m.htm#macro_lambda_list">macro lambda list</a>                                
<a rel="DEFINITION" href=
"26_glo_l.htm#lambda_expression">lambda expression</a>                            <a rel="DEFINITION"
href=
"26_glo_o.htm#ordinary_lambda_list">ordinary lambda list</a>                             
<a rel="DEFINITION" href="s_flet_.htm#flet">flet</a> local <a rel=
"DEFINITION" href=
"26_glo_f.htm#function">function</a> definition               <a rel="DEFINITION"
href=
"26_glo_o.htm#ordinary_lambda_list">ordinary lambda list</a>                             
<a rel="DEFINITION" href=
"s_flet_.htm#labels">labels</a> local <a rel="DEFINITION" href=
"26_glo_f.htm#function">function</a> definition             <a rel=
"DEFINITION" href=
"26_glo_o.htm#ordinary_lambda_list">ordinary lambda list</a>                             
<a rel="DEFINITION" href=
"m_hand_1.htm#handler-case">handler-case</a> clause specification            <a rel="DEFINITION"
href=
"26_glo_o.htm#ordinary_lambda_list">ordinary lambda list</a>                             
<a rel="DEFINITION" href=
"m_rst_ca.htm#restart-case">restart-case</a> clause specification            <a rel="DEFINITION"
href=
"26_glo_o.htm#ordinary_lambda_list">ordinary lambda list</a>                             
<a rel="DEFINITION" href=
"s_flet_.htm#macrolet">macrolet</a> local <a rel="DEFINITION" href=
"26_glo_m.htm#macro">macro</a> definition              <a rel=
"DEFINITION" href=
"26_glo_m.htm#macro_lambda_list">macro lambda list</a>                                
<a rel="DEFINITION" href=
"m_defi_4.htm#define-method-combination">define-method-combination</a>                    <a rel="DEFINITION"
href=
"26_glo_o.htm#ordinary_lambda_list">ordinary lambda list</a>                             
<a rel="DEFINITION" href=
"m_defi_4.htm#define-method-combination">define-method-combination</a> :arguments option  <a rel="DEFINITION"
href=
"26_glo_d.htm#define-method-combination_arguments_lambda_list">define-method-combination arguments lambda list</a>  
<a rel="DEFINITION" href=
"m_defstr.htm#defstruct">defstruct</a> :constructor option                <a rel="DEFINITION"
href=
"26_glo_b.htm#boa_lambda_list">boa lambda list</a>                                  
<a rel="DEFINITION" href=
"m_defgen.htm#defgeneric">defgeneric</a> <a rel="DEFINITION" href=
"26_glo_f.htm#form">form</a>                              <a rel=
"DEFINITION" href=
"26_glo_g.htm#generic_function_lambda_list">generic function lambda list</a>                     
<a rel="DEFINITION" href=
"m_defgen.htm#defgeneric">defgeneric</a> <a rel="DEFINITION" href=
"26_glo_m.htm#method">method</a> clause                     <a rel=
"DEFINITION" href=
"26_glo_s.htm#specialized_lambda_list">specialized lambda list</a>                          
<a rel="DEFINITION" href=
"m_defmet.htm#defmethod">defmethod</a> <a rel="DEFINITION" href=
"26_glo_f.htm#form">form</a>                               <a rel=
"DEFINITION" href=
"26_glo_s.htm#specialized_lambda_list">specialized lambda list</a>                          
<a rel="DEFINITION" href="m_defset.htm#defsetf">defsetf</a> <a rel=
"DEFINITION" href=
"26_glo_f.htm#form">form</a>                                 <a rel="DEFINITION"
href=
"26_glo_d.htm#defsetf_lambda_list">defsetf lambda list</a>                              
<a rel="DEFINITION" href=
"m_defi_3.htm#define-setf-expander">define-setf-expander</a> <a rel="DEFINITION"
href="26_glo_f.htm#form">form</a>                    <a rel=
"DEFINITION" href=
"26_glo_m.htm#macro_lambda_list">macro lambda list</a>                                
<a rel="DEFINITION" href="m_deftp.htm#deftype">deftype</a> <a rel=
"DEFINITION" href=
"26_glo_f.htm#form">form</a>                                 <a rel="DEFINITION"
href=
"26_glo_d.htm#deftype_lambda_list">deftype lambda list</a>                              
<a rel="DEFINITION" href=
"m_destru.htm#destructuring-bind">destructuring-bind</a> <a rel=
"DEFINITION" href=
"26_glo_f.htm#form">form</a>                      <a rel=
"DEFINITION" href=
"26_glo_d.htm#destructuring_lambda_list">destructuring lambda list</a>                        
<a rel="DEFINITION" href=
"m_define.htm#define-compiler-macro">define-compiler-macro</a> <a rel="DEFINITION"
href="26_glo_f.htm#form">form</a>                   <a rel=
"DEFINITION" href=
"26_glo_m.htm#macro_lambda_list">macro lambda list</a>                                
<a rel="DEFINITION" href=
"m_defi_2.htm#define-modify-macro">define-modify-macro</a> <a rel=
"DEFINITION" href=
"26_glo_f.htm#form">form</a>                     <a rel=
"DEFINITION" href=
"26_glo_d.htm#define-modify-macro_lambda_list">define-modify-macro lambda list</a>                  
</pre>
<p><b>Figure 3-10. What Kind of Lambda Lists to Use</b></p>
<p>The next figure lists some <a rel="DEFINITION" href=
"26_glo_d.htm#defined_name"><i>defined names</i></a> that are
applicable to <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list"><i>lambda lists</i></a>.</p>
<pre>
<a rel="DEFINITION" href=
"v_lambda.htm#lambda-list-keywords">lambda-list-keywords</a>  <a rel="DEFINITION"
href=
"v_lamb_1.htm#lambda-parameters-limit">lambda-parameters-limit</a>    
</pre>
<p><b>Figure 3-11. Defined names applicable to lambda lists</b></p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.4.1 Ordinary Lambda Lists</h2>
<a name="AMoptional" id="AMoptional"></a> <a name="AMrest" id=
"AMrest"></a> <a name="AMkey" id="AMkey"></a> <a name=
"AMallow-other-keys" id="AMallow-other-keys"></a> <a name="AMaux"
id="AMaux"></a>
<p>An <a rel="DEFINITION" href=
"26_glo_o.htm#ordinary_lambda_list"><i>ordinary lambda list</i></a>
is used to describe how a set of <a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>arguments</i></a> is received by an
<i>ordinary</i> <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a>. The <a rel=
"DEFINITION" href="26_glo_d.htm#defined_name"><i>defined
names</i></a> in the next figure are those which use <a rel=
"DEFINITION" href="26_glo_o.htm#ordinary_lambda_list"><i>ordinary
lambda lists</i></a>:</p>
<pre>
<a rel="DEFINITION" href=
"m_defi_4.htm#define-method-combination">define-method-combination</a>  <a rel="DEFINITION"
href="m_hand_1.htm#handler-case">handler-case</a>  <a rel=
"DEFINITION" href="m_rst_ca.htm#restart-case">restart-case</a>  
<a rel="DEFINITION" href=
"m_defun.htm#defun">defun</a>                      <a rel=
"DEFINITION" href=
"s_flet_.htm#labels">labels</a>                      
<a rel="DEFINITION" href=
"s_flet_.htm#flet">flet</a>                       <a rel=
"DEFINITION" href=
"a_lambda.htm#lambda">lambda</a>                      
</pre>
<p><b>Figure 3-12. Standardized Operators that use Ordinary Lambda
Lists</b></p>
<p>An <a rel="DEFINITION" href=
"26_glo_o.htm#ordinary_lambda_list"><i>ordinary lambda list</i></a>
can contain the <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list_keyword"><i>lambda list keywords</i></a>
shown in the next figure.</p>
<pre>
&amp;allow-other-keys  &amp;key       &amp;rest  
&amp;aux               &amp;optional         
</pre>
<p><b>Figure 3-13. Lambda List Keywords used by Ordinary Lambda
Lists</b></p>
<p>Each <a rel="DEFINITION" href=
"26_glo_e.htm#element"><i>element</i></a> of a <a rel="DEFINITION"
href="26_glo_l.htm#lambda_list"><i>lambda list</i></a> is either a
parameter specifier or a <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list_keyword"><i>lambda list keyword</i></a>.
Implementations are free to provide additional <a rel="DEFINITION"
href="26_glo_l.htm#lambda_list_keyword"><i>lambda list
keywords</i></a>. For a list of all <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list_keyword"><i>lambda list keywords</i></a>
used by the implementation, see <a rel="DEFINITION" href=
"v_lambda.htm#lambda-list-keywords"><b>lambda-list-keywords</b></a>.</p>
<p>The syntax for <a rel="DEFINITION" href=
"26_glo_o.htm#ordinary_lambda_list"><i>ordinary lambda
lists</i></a> is as follows:</p>
<pre>
lambda-list::= (var* 
                [&amp;optional {var | (var [init-form [supplied-p-parameter]])}*] 
                [&amp;rest var] 
                [&amp;key {var | ({var | (keyword-name var)} [init-form [supplied-p-parameter]])}* [&amp;allow-other-keys]] 
                [&amp;aux {var | (var [init-form])}*]) 
</pre>
<p>A <i>var</i> or <i>supplied-p-parameter</i> must be a <a rel=
"DEFINITION" href="26_glo_s.htm#symbol"><i>symbol</i></a> that is
not the name of a <a rel="DEFINITION" href=
"26_glo_c.htm#constant_variable"><i>constant variable</i></a>.</p>
<p>An <i>init-form</i> can be any <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a>. Whenever any <i>init-form</i>
is evaluated for any parameter specifier, that <a rel="DEFINITION"
href="26_glo_f.htm#form"><i>form</i></a> may refer to any parameter
variable to the left of the specifier in which the <i>init-form</i>
appears, including any <i>supplied-p-parameter</i> variables, and
may rely on the fact that no other parameter variable has yet been
bound (including its own parameter variable).</p>
<p>A <i>keyword-name</i> can be any <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbol</i></a>, but by convention is
normally a <a rel="DEFINITION" href=
"26_glo_k.htm#keyword"><i>keyword</i></a>[1]; all <a rel=
"DEFINITION" href=
"26_glo_s.htm#standardized"><i>standardized</i></a> <a rel=
"DEFINITION" href="26_glo_f.htm#function"><i>functions</i></a>
follow that convention.</p>
<p>An <a rel="DEFINITION" href=
"26_glo_o.htm#ordinary_lambda_list"><i>ordinary lambda list</i></a>
has five parts, any or all of which may be empty. For information
about the treatment of argument mismatches, see <a rel="CHILD"
href="03_e.htm">Section 3.5 (Error Checking in Function
Calls)</a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.4.1.1 Specifiers for the required parameters</h2>
<p>These are all the parameter specifiers up to the first <a rel=
"DEFINITION" href="26_glo_l.htm#lambda_list_keyword"><i>lambda list
keyword</i></a>; if there are no <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list_keyword"><i>lambda list keywords</i></a>,
then all the specifiers are for required parameters. Each required
parameter is specified by a parameter variable <i>var</i>.
<i>var</i> is bound as a lexical variable unless it is declared
<a rel="DEFINITION" href=
"d_specia.htm#special"><b>special</b></a>.</p>
<p>If there are <tt>n</tt> required parameters (<tt>n</tt> may be
zero), there must be at least <tt>n</tt> passed arguments, and the
required parameters are bound to the first <tt>n</tt> passed
arguments; see <a rel="CHILD" href="03_e.htm">Section 3.5 (Error
Checking in Function Calls)</a>. The other parameters are then
processed using any remaining arguments.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.4.1.2 Specifiers for optional parameters</h2>
<p>If <tt>&amp;optional</tt> is present, the optional parameter
specifiers are those following <tt>&amp;optional</tt> up to the
next <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list_keyword"><i>lambda list keyword</i></a>
or the end of the list. If optional parameters are specified, then
each one is processed as follows. If any unprocessed arguments
remain, then the parameter variable <i>var</i> is bound to the next
remaining argument, just as for a required parameter. If no
arguments remain, however, then <i>init-form</i> is evaluated, and
the parameter variable is bound to the resulting value (or to
<a rel="DEFINITION" href="a_nil.htm#nil"><b>nil</b></a> if no
<i>init-form</i> appears in the parameter specifier). If another
variable name <i>supplied-p-parameter</i> appears in the specifier,
it is bound to <a rel="DEFINITION" href=
"26_glo_t.htm#true"><i>true</i></a> if an argument had been
available, and to <a rel="DEFINITION" href=
"26_glo_f.htm#false"><i>false</i></a> if no argument remained (and
therefore <i>init-form</i> had to be evaluated).
<i>Supplied-p-parameter</i> is bound not to an argument but to a
value indicating whether or not an argument had been supplied for
the corresponding <i>var</i>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.4.1.3 A specifier for a rest parameter</h2>
<p><tt>&amp;rest</tt>, if present, must be followed by a single
<a rel="DEFINITION" href="26_glo_r.htm#rest_parameter"><i>rest
parameter</i></a> specifier, which in turn must be followed by
another <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list_keyword"><i>lambda list keyword</i></a>
or the end of the <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list"><i>lambda list</i></a>. After all
optional parameter specifiers have been processed, then there may
or may not be a <a rel="DEFINITION" href=
"26_glo_r.htm#rest_parameter"><i>rest parameter</i></a>. If there
is a <a rel="DEFINITION" href="26_glo_r.htm#rest_parameter"><i>rest
parameter</i></a>, it is bound to a <a rel="DEFINITION" href=
"26_glo_l.htm#list"><i>list</i></a> of all as-yet-unprocessed
arguments. If no unprocessed arguments remain, the <a rel=
"DEFINITION" href="26_glo_r.htm#rest_parameter"><i>rest
parameter</i></a> is bound to the <a rel="DEFINITION" href=
"26_glo_e.htm#empty_list"><i>empty list</i></a>. If there is no
<a rel="DEFINITION" href="26_glo_r.htm#rest_parameter"><i>rest
parameter</i></a> and there are no <a rel="DEFINITION" href=
"26_glo_k.htm#keyword_parameter"><i>keyword parameters</i></a>,
then an error should be signaled if any unprocessed arguments
remain; see <a rel="CHILD" href="03_e.htm">Section 3.5 (Error
Checking in Function Calls)</a>. The value of a <a rel="DEFINITION"
href="26_glo_r.htm#rest_parameter"><i>rest parameter</i></a> is
permitted, but not required, to share structure with the last
argument to <a rel="DEFINITION" href=
"f_apply.htm#apply"><b>apply</b></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.4.1.4 Specifiers for keyword parameters</h2>
<p>If <tt>&amp;key</tt> is present, all specifiers up to the next
<a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list_keyword"><i>lambda list keyword</i></a>
or the end of the <a rel="DEFINITION" href=
"26_glo_l.htm#list"><i>list</i></a> are keyword parameter
specifiers. When keyword parameters are processed, the same
arguments are processed that would be made into a <a rel=
"DEFINITION" href="26_glo_l.htm#list"><i>list</i></a> for a <a rel=
"DEFINITION" href="26_glo_r.htm#rest_parameter"><i>rest
parameter</i></a>. It is permitted to specify both
<tt>&amp;rest</tt> and <tt>&amp;key</tt>. In this case the
remaining arguments are used for both purposes; that is, all
remaining arguments are made into a <a rel="DEFINITION" href=
"26_glo_l.htm#list"><i>list</i></a> for the <a rel="DEFINITION"
href="26_glo_r.htm#rest_parameter"><i>rest parameter</i></a>, and
are also processed for the <tt>&amp;key</tt> parameters. If
<tt>&amp;key</tt> is specified, there must remain an even number of
arguments; see <a rel="CHILD" href="03_eaf.htm">Section 3.5.1.6
(Odd Number of Keyword Arguments)</a>. These arguments are
considered as pairs, the first argument in each pair being
interpreted as a name and the second as the corresponding value.
The first <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a> of each pair must be a
<a rel="DEFINITION" href="26_glo_s.htm#symbol"><i>symbol</i></a>;
see <a rel="CHILD" href="03_eae.htm">Section 3.5.1.5 (Invalid
Keyword Arguments)</a>. The keyword parameter specifiers may
optionally be followed by the <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list_keyword"><i>lambda list keyword</i></a>
<tt>&amp;allow-other-keys</tt>.</p>
<p>In each keyword parameter specifier must be a name <i>var</i>
for the parameter variable. If the <i>var</i> appears alone or in a
<tt>(</tt><i>var</i> <i>init-form</i><tt>)</tt> combination, the
keyword name used when matching <a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>arguments</i></a> to <a rel="DEFINITION"
href="26_glo_p.htm#parameter"><i>parameters</i></a> is a <a rel=
"DEFINITION" href="26_glo_s.htm#symbol"><i>symbol</i></a> in the
<tt>KEYWORD</tt> package whose <a rel="DEFINITION" href=
"26_glo_n.htm#name"><i>name</i></a> is the <a rel="DEFINITION"
href="26_glo_s.htm#same"><i>same</i></a> (under <a rel="DEFINITION"
href="f_stgeq_.htm#stringEQ"><b>string=</b></a>) as <i>var</i>'s.
If the notation <tt>((</tt><i>keyword-name</i> <i>var</i><tt>)</tt>
<i>init-form</i><tt>)</tt> is used, then the keyword name used to
match <a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>arguments</i></a> to <a rel="DEFINITION"
href="26_glo_p.htm#parameter"><i>parameters</i></a> is
<i>keyword-name</i>, which may be a <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbol</i></a> in any <a rel="DEFINITION"
href="26_glo_p.htm#package"><i>package</i></a>. (Of course, if it
is not a <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbol</i></a> in the <tt>KEYWORD</tt>
package, it does not necessarily self-evaluate, so care must be
taken when calling the function to make sure that normal evaluation
still yields the keyword name.) Thus</p>
<pre>
 (defun foo (&amp;key radix (type 'integer)) ...)
</pre>
means exactly the same as
<pre>
 (defun foo (&amp;key ((:radix radix)) ((:type type) 'integer)) ...)
</pre>
<p>The keyword parameter specifiers are, like all parameter
specifiers, effectively processed from left to right. For each
keyword parameter specifier, if there is an argument pair whose
name matches that specifier's name (that is, the names are <a rel=
"DEFINITION" href="f_eq.htm#eq"><b>eq</b></a>), then the parameter
variable for that specifier is bound to the second item (the value)
of that argument pair. If more than one such argument pair matches,
the leftmost argument pair is used. If no such argument pair
exists, then the <i>init-form</i> for that specifier is evaluated
and the parameter variable is bound to that value (or to <a rel=
"DEFINITION" href="a_nil.htm#nil"><b>nil</b></a> if no
<i>init-form</i> was specified). <i>supplied-p-parameter</i> is
treated as for <tt>&amp;optional</tt> parameters: it is bound to
<a rel="DEFINITION" href="26_glo_t.htm#true"><i>true</i></a> if
there was a matching argument pair, and to <a rel="DEFINITION"
href="26_glo_f.htm#false"><i>false</i></a> otherwise.</p>
<p>Unless keyword argument checking is suppressed, an argument pair
must a name matched by a parameter specifier; see <a rel="CHILD"
href="03_ead.htm">Section 3.5.1.4 (Unrecognized Keyword
Arguments)</a>.</p>
<p>If keyword argument checking is suppressed, then it is permitted
for an argument pair to match no parameter specifier, and the
argument pair is ignored, but such an argument pair is accessible
through the <a rel="DEFINITION" href=
"26_glo_r.htm#rest_parameter"><i>rest parameter</i></a> if one was
supplied. The purpose of these mechanisms is to allow sharing of
argument lists among several <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_expression"><i>lambda expressions</i></a> and
to allow either the caller or the called <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_expression"><i>lambda expression</i></a> to
specify that such sharing may be taking place.</p>
<p>Note that if <tt>&amp;key</tt> is present, a keyword argument of
<tt>:allow-other-keys</tt> is always permitted---regardless of
whether the associated value is <a rel="DEFINITION" href=
"26_glo_t.htm#true"><i>true</i></a> or <a rel="DEFINITION" href=
"26_glo_f.htm#false"><i>false</i></a>. However, if the value is
<a rel="DEFINITION" href="26_glo_f.htm#false"><i>false</i></a>,
other non-matching keywords are not tolerated (unless
<tt>&amp;allow-other-keys</tt> was used).</p>
<p>Furthermore, if the receiving argument list specifies a regular
argument which would be flagged by <tt>:allow-other-keys</tt>, then
<tt>:allow-other-keys</tt> has both its special-cased meaning
(identifying whether additional keywords are permitted) and its
normal meaning (data flow into the function in question).</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.4.1.4.1 Suppressing Keyword Argument Checking</h2>
<p>If <tt>&amp;allow-other-keys</tt> was specified in the <a rel=
"DEFINITION" href="26_glo_l.htm#lambda_list"><i>lambda list</i></a>
of a <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a>, <a rel="DEFINITION"
href="26_glo_k.htm#keyword"><i>keyword</i></a>[2] <a rel=
"DEFINITION" href="26_glo_a.htm#argument"><i>argument</i></a>
checking is suppressed in calls to that <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a>.</p>
<p>If the <tt>:allow-other-keys</tt> <a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>argument</i></a> is <a rel="DEFINITION"
href="26_glo_t.htm#true"><i>true</i></a> in a call to a <a rel=
"DEFINITION" href="26_glo_f.htm#function"><i>function</i></a>,
<a rel="DEFINITION" href=
"26_glo_k.htm#keyword"><i>keyword</i></a>[2] <a rel="DEFINITION"
href="26_glo_a.htm#argument"><i>argument</i></a> checking is
suppressed in that call.</p>
<p>The <tt>:allow-other-keys</tt> <a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>argument</i></a> is permissible in all
situations involving <a rel="DEFINITION" href=
"26_glo_k.htm#keyword"><i>keyword</i></a>[2] <a rel="DEFINITION"
href="26_glo_a.htm#argument"><i>arguments</i></a>, even when its
associated <a rel="DEFINITION" href=
"26_glo_v.htm#value"><i>value</i></a> is <a rel="DEFINITION" href=
"26_glo_f.htm#false"><i>false</i></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.4.1.4.1.1 Examples of Suppressing Keyword Argument
Checking</h2>
<pre>
;;; The caller can supply :ALLOW-OTHER-KEYS T to suppress checking.
 ((lambda (&amp;key x) x) :x 1 :y 2 :allow-other-keys t) =&gt;  1
;;; The callee can use &amp;ALLOW-OTHER-KEYS to suppress checking.
 ((lambda (&amp;key x &amp;allow-other-keys) x) :x 1 :y 2) =&gt;  1
;;; :ALLOW-OTHER-KEYS NIL is always permitted.
 ((lambda (&amp;key) t) :allow-other-keys nil) =&gt;  T
;;; As with other keyword arguments, only the left-most pair
;;; named :ALLOW-OTHER-KEYS has any effect.
 ((lambda (&amp;key x) x) 
  :x 1 :y 2 :allow-other-keys t :allow-other-keys nil)
=&gt;  1
;;; Only the left-most pair named :ALLOW-OTHER-KEYS has any effect,
;;; so in safe code this signals a PROGRAM-ERROR (and might enter the
;;; debugger).  In unsafe code, the consequences are undefined.
 ((lambda (&amp;key x) x)                   ;This call is not valid
  :x 1 :y 2 :allow-other-keys nil :allow-other-keys t)
</pre>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.4.1.5 Specifiers for &amp;aux variables</h2>
<p>These are not really parameters. If the <a rel="DEFINITION"
href="26_glo_l.htm#lambda_list_keyword"><i>lambda list
keyword</i></a> <tt>&amp;aux</tt> is present, all specifiers after
it are auxiliary variable specifiers. After all parameter
specifiers have been processed, the auxiliary variable specifiers
(those following <tt>&amp;aux</tt>) are processed from left to
right. For each one, <i>init-form</i> is evaluated and <i>var</i>
is bound to that value (or to <a rel="DEFINITION" href=
"a_nil.htm#nil"><b>nil</b></a> if no <i>init-form</i> was
specified). <tt>&amp;aux</tt> variable processing is analogous to
<a rel="DEFINITION" href="s_let_l.htm#letST"><b>let*</b></a>
processing.</p>
<pre>
 (lambda (x y &amp;aux (a (car x)) (b 2) c) (list x y a b c))
    ==  (lambda (x y) (let* ((a (car x)) (b 2) c) (list x y a b c)))
</pre>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.4.1.6 Examples of Ordinary Lambda Lists</h2>
<p>Here are some examples involving <a rel="DEFINITION" href=
"26_glo_o.htm#optional_parameter"><i>optional parameters</i></a>
and <a rel="DEFINITION" href="26_glo_r.htm#rest_parameter"><i>rest
parameters</i></a>:</p>
<pre>
 ((lambda (a b) (+ a (* b 3))) 4 5) =&gt;  19
 ((lambda (a &amp;optional (b 2)) (+ a (* b 3))) 4 5) =&gt;  19
 ((lambda (a &amp;optional (b 2)) (+ a (* b 3))) 4) =&gt;  10
 ((lambda (&amp;optional (a 2 b) (c 3 d) &amp;rest x) (list a b c d x)))
=&gt;  (2 NIL 3 NIL NIL)
 ((lambda (&amp;optional (a 2 b) (c 3 d) &amp;rest x) (list a b c d x)) 6)
=&gt;  (6 T 3 NIL NIL)
 ((lambda (&amp;optional (a 2 b) (c 3 d) &amp;rest x) (list a b c d x)) 6 3)
=&gt;  (6 T 3 T NIL)
 ((lambda (&amp;optional (a 2 b) (c 3 d) &amp;rest x) (list a b c d x)) 6 3 8)
=&gt;  (6 T 3 T (8))
 ((lambda (&amp;optional (a 2 b) (c 3 d) &amp;rest x) (list a b c d x))
  6 3 8 9 10 11)
=&gt;  (6 t 3 t (8 9 10 11))
</pre>
<p>Here are some examples involving <a rel="DEFINITION" href=
"26_glo_k.htm#keyword_parameter"><i>keyword parameters</i></a>:</p>
<pre>
 ((lambda (a b &amp;key c d) (list a b c d)) 1 2) =&gt;  (1 2 NIL NIL)
 ((lambda (a b &amp;key c d) (list a b c d)) 1 2 :c 6) =&gt;  (1 2 6 NIL)
 ((lambda (a b &amp;key c d) (list a b c d)) 1 2 :d 8) =&gt;  (1 2 NIL 8)
 ((lambda (a b &amp;key c d) (list a b c d)) 1 2 :c 6 :d 8) =&gt;  (1 2 6 8)
 ((lambda (a b &amp;key c d) (list a b c d)) 1 2 :d 8 :c 6) =&gt;  (1 2 6 8)
 ((lambda (a b &amp;key c d) (list a b c d)) :a 1 :d 8 :c 6) =&gt;  (:a 1 6 8)
 ((lambda (a b &amp;key c d) (list a b c d)) :a :b :c :d) =&gt;  (:a :b :d NIL)
 ((lambda (a b &amp;key ((:sea c)) d) (list a b c d)) 1 2 :sea 6) =&gt;  (1 2 6 NIL)
 ((lambda (a b &amp;key ((c c)) d) (list a b c d)) 1 2 'c 6) =&gt;  (1 2 6 NIL)
</pre>
<p>Here are some examples involving <a rel="DEFINITION" href=
"26_glo_o.htm#optional_parameter"><i>optional parameters</i></a>,
<a rel="DEFINITION" href="26_glo_r.htm#rest_parameter"><i>rest
parameters</i></a>, and <a rel="DEFINITION" href=
"26_glo_k.htm#keyword_parameter"><i>keyword parameters</i></a>
together:</p>
<pre>
 ((lambda (a &amp;optional (b 3) &amp;rest x &amp;key c (d a))
    (list a b c d x)) 1)   
=&gt;  (1 3 NIL 1 ()) 
 ((lambda (a &amp;optional (b 3) &amp;rest x &amp;key c (d a))
    (list a b c d x)) 1 2)
=&gt;  (1 2 NIL 1 ())
 ((lambda (a &amp;optional (b 3) &amp;rest x &amp;key c (d a))
    (list a b c d x)) :c 7)
=&gt;  (:c 7 NIL :c ())
 ((lambda (a &amp;optional (b 3) &amp;rest x &amp;key c (d a))
    (list a b c d x)) 1 6 :c 7)
=&gt;  (1 6 7 1 (:c 7))
 ((lambda (a &amp;optional (b 3) &amp;rest x &amp;key c (d a))
    (list a b c d x)) 1 6 :d 8)
=&gt;  (1 6 NIL 8 (:d 8))
 ((lambda (a &amp;optional (b 3) &amp;rest x &amp;key c (d a))
    (list a b c d x)) 1 6 :d 8 :c 9 :d 10)
=&gt;  (1 6 9 8 (:d 8 :c 9 :d 10))
</pre>
<p>As an example of the use of <tt>&amp;allow-other-keys</tt> and
<tt>:allow-other-keys</tt>, consider a <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> that takes two named
arguments of its own and also accepts additional named arguments to
be passed to <a rel="DEFINITION" href=
"f_mk_ar.htm#make-array"><b>make-array</b></a>:</p>
<pre>
 (defun array-of-strings (str dims &amp;rest named-pairs
                          &amp;key (start 0) end &amp;allow-other-keys)
   (apply #'make-array dims
          :initial-element (subseq str start end)
          :allow-other-keys t
          named-pairs))
</pre>
<p>This <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> takes a <a rel=
"DEFINITION" href="26_glo_s.htm#string"><i>string</i></a> and
dimensioning information and returns an <a rel="DEFINITION" href=
"26_glo_a.htm#array"><i>array</i></a> of the specified dimensions,
each of whose elements is the specified <a rel="DEFINITION" href=
"26_glo_s.htm#string"><i>string</i></a>. However, <tt>:start</tt>
and <tt>:end</tt> named arguments may be used to specify that a
substring of the given <a rel="DEFINITION" href=
"26_glo_s.htm#string"><i>string</i></a> should be used. In
addition, the presence of <tt>&amp;allow-other-keys</tt> in the
<a rel="DEFINITION" href="26_glo_l.htm#lambda_list"><i>lambda
list</i></a> indicates that the caller may supply additional named
arguments; the <a rel="DEFINITION" href=
"26_glo_r.htm#rest_parameter"><i>rest parameter</i></a> provides
access to them. These additional named arguments are passed to
<a rel="DEFINITION" href=
"f_mk_ar.htm#make-array"><b>make-array</b></a>. The <a rel=
"DEFINITION" href="26_glo_f.htm#function"><i>function</i></a>
<a rel="DEFINITION" href=
"f_mk_ar.htm#make-array"><b>make-array</b></a> normally does not
allow the named arguments <tt>:start</tt> and <tt>:end</tt> to be
used, and an error should be signaled if such named arguments are
supplied to <a rel="DEFINITION" href=
"f_mk_ar.htm#make-array"><b>make-array</b></a>. However, the
presence in the call to <a rel="DEFINITION" href=
"f_mk_ar.htm#make-array"><b>make-array</b></a> of the named
argument <tt>:allow-other-keys</tt> with a <a rel="DEFINITION"
href="26_glo_t.htm#true"><i>true</i></a> value causes any
extraneous named arguments, including <tt>:start</tt> and
<tt>:end</tt>, to be acceptable and ignored.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.4.2 Generic Function Lambda Lists</h2>
<p>A <a rel="DEFINITION" href=
"26_glo_g.htm#generic_function_lambda_list"><i>generic function
lambda list</i></a> is used to describe the overall shape of the
argument list to be accepted by a <a rel="DEFINITION" href=
"26_glo_g.htm#generic_function"><i>generic function</i></a>.
Individual <a rel="DEFINITION" href=
"26_glo_m.htm#method"><i>method</i></a> <a rel="DEFINITION" href=
"26_glo_s.htm#signature"><i>signatures</i></a> might contribute
additional <a rel="DEFINITION" href=
"26_glo_k.htm#keyword_parameter"><i>keyword parameters</i></a> to
the <a rel="DEFINITION" href="26_glo_l.htm#lambda_list"><i>lambda
list</i></a> of the <a rel="DEFINITION" href=
"26_glo_e.htm#effective_method"><i>effective method</i></a>.</p>
<p>A <a rel="DEFINITION" href=
"26_glo_g.htm#generic_function_lambda_list"><i>generic function
lambda list</i></a> is used by <a rel="DEFINITION" href=
"m_defgen.htm#defgeneric"><b>defgeneric</b></a>.</p>
<p>A <a rel="DEFINITION" href=
"26_glo_g.htm#generic_function_lambda_list"><i>generic function
lambda list</i></a> has the following syntax:</p>
<pre>
lambda-list::= (var* 
                [&amp;optional {var | (var)}*] 
                [&amp;rest var] 
                [&amp;key {var | ({var | (keyword-name var)})}* [&amp;allow-other-keys]]) 
</pre>
<p>A <a rel="DEFINITION" href=
"26_glo_g.htm#generic_function_lambda_list"><i>generic function
lambda list</i></a> can contain the <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list_keyword"><i>lambda list keywords</i></a>
shown in the next figure.</p>
<pre>
&amp;allow-other-keys  &amp;optional    
&amp;key               &amp;rest        
</pre>
<p><b>Figure 3-14. Lambda List Keywords used by Generic Function
Lambda Lists</b></p>
<p>A <a rel="DEFINITION" href=
"26_glo_g.htm#generic_function_lambda_list"><i>generic function
lambda list</i></a> differs from an <a rel="DEFINITION" href=
"26_glo_o.htm#ordinary_lambda_list"><i>ordinary lambda list</i></a>
in the following ways:</p>
<dl>
<dt><b>Required arguments</b><br></dt>
<dd>Zero or more <a rel="DEFINITION" href=
"26_glo_r.htm#required_parameter"><i>required parameters</i></a>
must be specified.</dd>
<dt><b>Optional and keyword arguments</b><br></dt>
<dd><a rel="DEFINITION" href=
"26_glo_o.htm#optional_parameter"><i>Optional parameters</i></a>
and <a rel="DEFINITION" href=
"26_glo_k.htm#keyword_parameter"><i>keyword parameters</i></a> may
not have default initial value forms nor use supplied-p
parameters.</dd>
<dt><b>Use of</b> <tt>&amp;aux</tt><br></dt>
<dd>The use of <tt>&amp;aux</tt> is not allowed.</dd>
</dl>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.4.3 Specialized Lambda Lists</h2>
<p>A <a rel="DEFINITION" href=
"26_glo_s.htm#specialized_lambda_list"><i>specialized lambda
list</i></a> is used to <a rel="DEFINITION" href=
"26_glo_s.htm#specialize"><i>specialize</i></a> a <a rel=
"DEFINITION" href="26_glo_m.htm#method"><i>method</i></a> for a
particular <a rel="DEFINITION" href=
"26_glo_s.htm#signature"><i>signature</i></a> and to describe how
<a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>arguments</i></a> matching that <a rel=
"DEFINITION" href="26_glo_s.htm#signature"><i>signature</i></a> are
received by the <a rel="DEFINITION" href=
"26_glo_m.htm#method"><i>method</i></a>. The <a rel="DEFINITION"
href="26_glo_d.htm#defined_name"><i>defined names</i></a> in the
next figure use <a rel="DEFINITION" href=
"26_glo_s.htm#specialized_lambda_list"><i>specialized lambda
lists</i></a> in some way; see the dictionary entry for each for
information about how.</p>
<pre>
<a rel="DEFINITION" href=
"m_defmet.htm#defmethod">defmethod</a>  <a rel="DEFINITION" href=
"m_defgen.htm#defgeneric">defgeneric</a>    
</pre>
<p><b>Figure 3-15. Standardized Operators that use Specialized
Lambda Lists</b></p>
<p>A <a rel="DEFINITION" href=
"26_glo_s.htm#specialized_lambda_list"><i>specialized lambda
list</i></a> can contain the <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list_keyword"><i>lambda list keywords</i></a>
shown in the next figure.</p>
<pre>
&amp;allow-other-keys  &amp;key       &amp;rest  
&amp;aux               &amp;optional         
</pre>
<p><b>Figure 3-16. Lambda List Keywords used by Specialized Lambda
Lists</b></p>
<p>A <a rel="DEFINITION" href=
"26_glo_s.htm#specialized_lambda_list"><i>specialized lambda
list</i></a> is syntactically the same as an <a rel="DEFINITION"
href="26_glo_o.htm#ordinary_lambda_list"><i>ordinary lambda
list</i></a> except that each <a rel="DEFINITION" href=
"26_glo_r.htm#required_parameter"><i>required parameter</i></a> may
optionally be associated with a <a rel="DEFINITION" href=
"26_glo_c.htm#class"><i>class</i></a> or <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a> for which that <a rel=
"DEFINITION" href="26_glo_p.htm#parameter"><i>parameter</i></a> is
<a rel="DEFINITION" href=
"26_glo_s.htm#specialized"><i>specialized</i></a>.</p>
<pre>
lambda-list::= ({var | (var [specializer])}* 
                [&amp;optional {var | (var [init-form [supplied-p-parameter]])}*] 
                [&amp;rest var] 
                [&amp;key {var | ({var | (keyword-name var)} [init-form [supplied-p-parameter]])}* [&amp;allow-other-keys]] 
                [&amp;aux {var | (var [init-form])}*]) 
</pre>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.4.4 Macro Lambda Lists</h2>
<a name="AMbody" id="AMbody"></a> <a name="AMwhole" id=
"AMwhole"></a> <a name="AMenvironment" id="AMenvironment"></a>
<p>A <a rel="DEFINITION" href=
"26_glo_m.htm#macro_lambda_list"><i>macro lambda list</i></a> is
used in describing <a rel="DEFINITION" href=
"26_glo_m.htm#macro"><i>macros</i></a> defined by the <a rel=
"DEFINITION" href="26_glo_o.htm#operator"><i>operators</i></a> in
the next figure.</p>
<pre>
<a rel="DEFINITION" href=
"m_define.htm#define-compiler-macro">define-compiler-macro</a>  <a rel="DEFINITION"
href="m_defmac.htm#defmacro">defmacro</a>  <a rel="DEFINITION"
href="s_flet_.htm#macrolet">macrolet</a>  
<a rel="DEFINITION" href=
"m_defi_3.htm#define-setf-expander">define-setf-expander</a>                       
</pre>
<p><b>Figure 3-17. Operators that use Macro Lambda Lists</b></p>
<p>With the additional restriction that an <a rel="DEFINITION"
href="26_glo_e.htm#environment_parameter"><i>environment
parameter</i></a> may appear only once (at any of the positions
indicated), a <a rel="DEFINITION" href=
"26_glo_m.htm#macro_lambda_list"><i>macro lambda list</i></a> has
the following syntax:</p>
<pre>
reqvars::= var* 
</pre>
<pre>
optvars::= [&amp;optional {var | (var [init-form [supplied-p-parameter]])}*] 
</pre>
<pre>
restvar::= [{&amp;rest | &amp;body} var] 
</pre>
<pre>
keyvars::= [&amp;key {var | ({var | (keyword-name var)} [init-form [supplied-p-parameter]])}* 
            [&amp;allow-other-keys]] 
</pre>
<pre>
auxvars::= [&amp;aux {var | (var [init-form])}*] 
</pre>
<pre>
envvar::= [&amp;environment var] 
</pre>
<pre>
wholevar::= [&amp;whole var] 
</pre>
<pre>
lambda-list::= (wholevar envvar  reqvars envvar  optvars envvar 
                restvar envvar  keyvars envvar  auxvars envvar) | 
               (wholevar envvar  reqvars envvar  optvars envvar .  var) 
</pre>
<pre>
pattern::= (wholevar reqvars optvars restvar keyvars auxvars) | 
           (wholevar reqvars optvars . var) 
</pre>
<p>A <a rel="DEFINITION" href=
"26_glo_m.htm#macro_lambda_list"><i>macro lambda list</i></a> can
contain the <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list_keyword"><i>lambda list keywords</i></a>
shown in the next figure.</p>
<pre>
&amp;allow-other-keys  &amp;environment  &amp;rest   
&amp;aux               &amp;key          &amp;whole  
&amp;body              &amp;optional             
</pre>
<p><b>Figure 3-18. Lambda List Keywords used by Macro Lambda
Lists</b></p>
<p><a rel="DEFINITION" href=
"26_glo_o.htm#optional_parameter"><i>Optional parameters</i></a>
(introduced by <tt>&amp;optional</tt>) and <a rel="DEFINITION"
href="26_glo_k.htm#keyword_parameter"><i>keyword parameters</i></a>
(introduced by <tt>&amp;key</tt>) can be supplied in a <a rel=
"DEFINITION" href="26_glo_m.htm#macro_lambda_list"><i>macro lambda
list</i></a>, just as in an <a rel="DEFINITION" href=
"26_glo_o.htm#ordinary_lambda_list"><i>ordinary lambda
list</i></a>. Both may contain default initialization forms and
<a rel="DEFINITION" href=
"26_glo_s.htm#supplied-p_parameter"><i>supplied-p
parameters</i></a>.</p>
<p><tt>&amp;body</tt> is identical in function to
<tt>&amp;rest</tt>, but it can be used to inform certain
output-formatting and editing functions that the remainder of the
<a rel="DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> is
treated as a body, and should be indented accordingly. Only one of
<tt>&amp;body</tt> or <tt>&amp;rest</tt> can be used at any
particular level; see <a rel="CHILD" href="03_dda.htm">Section
3.4.4.1 (Destructuring by Lambda Lists)</a>. <tt>&amp;body</tt> can
appear at any level of a <a rel="DEFINITION" href=
"26_glo_m.htm#macro_lambda_list"><i>macro lambda list</i></a>; for
details, see <a rel="CHILD" href="03_dda.htm">Section 3.4.4.1
(Destructuring by Lambda Lists)</a>.</p>
<p><tt>&amp;whole</tt> is followed by a single variable that is
bound to the entire macro-call form; this is the value that the
<a rel="DEFINITION" href="26_glo_m.htm#macro_function"><i>macro
function</i></a> receives as its first argument. If
<tt>&amp;whole</tt> and a following variable appear, they must
appear first in <i>lambda-list</i>, before any other parameter or
<a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list_keyword"><i>lambda list keyword</i></a>.
<tt>&amp;whole</tt> can appear at any level of a <a rel=
"DEFINITION" href="26_glo_m.htm#macro_lambda_list"><i>macro lambda
list</i></a>. At inner levels, the <tt>&amp;whole</tt> variable is
bound to the corresponding part of the argument, as with
<tt>&amp;rest</tt>, but unlike <tt>&amp;rest</tt>, other arguments
are also allowed. The use of <tt>&amp;whole</tt> does not affect
the pattern of arguments specified.</p>
<p><tt>&amp;environment</tt> is followed by a single variable that
is bound to an <a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environment</i></a> representing the
<a rel="DEFINITION" href=
"26_glo_l.htm#lexical_environment"><i>lexical environment</i></a>
in which the macro call is to be interpreted. This <a rel=
"DEFINITION" href="26_glo_e.htm#environment"><i>environment</i></a>
should be used with <a rel="DEFINITION" href=
"f_macro_.htm#macro-function"><b>macro-function</b></a>, <a rel=
"DEFINITION" href=
"f_get_se.htm#get-setf-expansion"><b>get-setf-expansion</b></a>,
<a rel="DEFINITION" href=
"f_cmp_ma.htm#compiler-macro-function"><b>compiler-macro-function</b></a>,
and <a rel="DEFINITION" href=
"f_mexp_.htm#macroexpand"><b>macroexpand</b></a> (for example) in
computing the expansion of the macro, to ensure that any <a rel=
"DEFINITION" href="26_glo_l.htm#lexical_binding"><i>lexical
bindings</i></a> or definitions established in the <a rel=
"DEFINITION" href=
"26_glo_c.htm#compilation_environment"><i>compilation
environment</i></a> are taken into account.
<tt>&amp;environment</tt> can only appear at the top level of a
<a rel="DEFINITION" href="26_glo_m.htm#macro_lambda_list"><i>macro
lambda list</i></a>, and can only appear once, but can appear
anywhere in that list; the <tt>&amp;environment</tt> <a rel=
"DEFINITION" href="26_glo_p.htm#parameter"><i>parameter</i></a> is
<a rel="DEFINITION" href="26_glo_b.htm#bound"><i>bound</i></a>
along with <tt>&amp;whole</tt> before any other <a rel="DEFINITION"
href="26_glo_v.htm#variable"><i>variables</i></a> in the <a rel=
"DEFINITION" href="26_glo_l.htm#lambda_list"><i>lambda
list</i></a>, regardless of where <tt>&amp;environment</tt> appears
in the <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list"><i>lambda list</i></a>. The <a rel=
"DEFINITION" href="26_glo_o.htm#object"><i>object</i></a> that is
bound to the <a rel="DEFINITION" href=
"26_glo_e.htm#environment_parameter"><i>environment
parameter</i></a> has <a rel="DEFINITION" href=
"26_glo_d.htm#dynamic_extent"><i>dynamic extent</i></a>.</p>
<p>Destructuring allows a <a rel="DEFINITION" href=
"26_glo_m.htm#macro_lambda_list"><i>macro lambda list</i></a> to
express the structure of a macro call syntax. If no <a rel=
"DEFINITION" href="26_glo_l.htm#lambda_list_keyword"><i>lambda list
keywords</i></a> appear, then the <a rel="DEFINITION" href=
"26_glo_m.htm#macro_lambda_list"><i>macro lambda list</i></a> is a
<a rel="DEFINITION" href="26_glo_t.htm#tree"><i>tree</i></a>
containing parameter names at the leaves. The pattern and the
<a rel="DEFINITION" href="26_glo_m.htm#macro_form"><i>macro
form</i></a> must have compatible <a rel="DEFINITION" href=
"26_glo_t.htm#tree_structure"><i>tree structure</i></a>; that is,
their <a rel="DEFINITION" href=
"26_glo_t.htm#tree_structure"><i>tree structure</i></a> must be
equivalent, or it must differ only in that some <a rel="DEFINITION"
href="26_glo_l.htm#leaf"><i>leaves</i></a> of the pattern match
<a rel="DEFINITION" href=
"26_glo_n.htm#non-atomic"><i>non-atomic</i></a> <a rel="DEFINITION"
href="26_glo_o.htm#object"><i>objects</i></a> of the <a rel=
"DEFINITION" href="26_glo_m.htm#macro_form"><i>macro form</i></a>.
For information about error detection in this <a rel="DEFINITION"
href="26_glo_s.htm#situation"><i>situation</i></a>, see <a rel=
"CHILD" href="03_eag.htm">Section 3.5.1.7 (Destructuring
Mismatch)</a>.</p>
<p>A destructuring <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list"><i>lambda list</i></a> (whether at top
level or embedded) can be dotted, ending in a parameter name. This
situation is treated exactly as if the parameter name that ends the
<a rel="DEFINITION" href="26_glo_l.htm#list"><i>list</i></a> had
appeared preceded by <tt>&amp;rest</tt>.</p>
<p>It is permissible for a <a rel="DEFINITION" href=
"26_glo_m.htm#macro"><i>macro</i></a> <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a> (or a <a rel="DEFINITION" href=
"26_glo_s.htm#subexpression"><i>subexpression</i></a> of a <a rel=
"DEFINITION" href="26_glo_m.htm#macro"><i>macro</i></a> <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>form</i></a>) to be a
<a rel="DEFINITION" href="26_glo_d.htm#dotted_list"><i>dotted
list</i></a> only when <tt>(... &amp;rest var)</tt> or <tt>(... .
var)</tt> is used to match it. It is the responsibility of the
<a rel="DEFINITION" href="26_glo_m.htm#macro"><i>macro</i></a> to
recognize and deal with such situations.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.4.4.1 Destructuring by Lambda Lists</h2>
<p>Anywhere in a <a rel="DEFINITION" href=
"26_glo_m.htm#macro_lambda_list"><i>macro lambda list</i></a> where
a parameter name can appear, and where <a rel="DEFINITION" href=
"26_glo_o.htm#ordinary_lambda_list"><i>ordinary lambda list</i></a>
syntax (as described in <a rel="CHILD" href="03_da.htm">Section
3.4.1 (Ordinary Lambda Lists)</a>) does not otherwise allow a
<a rel="DEFINITION" href="26_glo_l.htm#list"><i>list</i></a>, a
<a rel="DEFINITION" href=
"26_glo_d.htm#destructuring_lambda_list"><i>destructuring lambda
list</i></a> can appear in place of the parameter name. When this
is done, then the argument that would match the parameter is
treated as a (possibly dotted) <a rel="DEFINITION" href=
"26_glo_l.htm#list"><i>list</i></a>, to be used as an argument list
for satisfying the parameters in the embedded <a rel="DEFINITION"
href="26_glo_l.htm#lambda_list"><i>lambda list</i></a>. This is
known as destructuring.</p>
<p>Destructuring is the process of decomposing a compound <a rel=
"DEFINITION" href="26_glo_o.htm#object"><i>object</i></a> into its
component parts, using an abbreviated, declarative syntax, rather
than writing it out by hand using the primitive component-accessing
functions. Each component part is bound to a variable.</p>
<p>A destructuring operation requires an <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a> to be decomposed, a pattern
that specifies what components are to be extracted, and the names
of the variables whose values are to be the components.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.4.4.1.1 Data-directed Destructuring by Lambda Lists</h2>
<p>In data-directed destructuring, the pattern is a sample <a rel=
"DEFINITION" href="26_glo_o.htm#object"><i>object</i></a> of the
<a rel="DEFINITION" href="26_glo_t.htm#type"><i>type</i></a> to be
decomposed. Wherever a component is to be extracted, a <a rel=
"DEFINITION" href="26_glo_s.htm#symbol"><i>symbol</i></a> appears
in the pattern; this <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbol</i></a> is the name of the variable
whose value will be that component.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.4.4.1.1.1 Examples of Data-directed Destructuring by Lambda
Lists</h2>
<p>An example pattern is</p>
<p><tt>(a b c)</tt></p>
<p>which destructures a list of three elements. The variable
<tt>a</tt> is assigned to the first element, <tt>b</tt> to the
second, etc. A more complex example is</p>
<p><tt>((first . rest) . more)</tt></p>
<p>The important features of data-directed destructuring are its
syntactic simplicity and the ability to extend it to
lambda-list-directed destructuring.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.4.4.1.2 Lambda-list-directed Destructuring by Lambda
Lists</h2>
<p>An extension of data-directed destructuring of <a rel=
"DEFINITION" href="26_glo_t.htm#tree"><i>trees</i></a> is
lambda-list-directed destructuring. This derives from the analogy
between the three-element destructuring pattern</p>
<p><tt>(first second third)</tt></p>
<p>and the three-argument <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list"><i>lambda list</i></a></p>
<p><tt>(first second third)</tt></p>
<p>Lambda-list-directed destructuring is identical to data-directed
destructuring if no <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list_keyword"><i>lambda list keywords</i></a>
appear in the pattern. Any list in the pattern (whether a sub-list
or the whole pattern itself) that contains a <a rel="DEFINITION"
href="26_glo_l.htm#lambda_list_keyword"><i>lambda list
keyword</i></a> is interpreted specially. Elements of the list to
the left of the first <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list_keyword"><i>lambda list keyword</i></a>
are treated as destructuring patterns, as usual, but the remaining
elements of the list are treated like a function's <a rel=
"DEFINITION" href="26_glo_l.htm#lambda_list"><i>lambda list</i></a>
except that where a variable would normally be required, an
arbitrary destructuring pattern is allowed. Note that in case of
ambiguity, <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list"><i>lambda list</i></a> syntax is
preferred over destructuring syntax. Thus, after
<tt>&amp;optional</tt> a list of elements is a list of a
destructuring pattern and a default value form.</p>
<p>The detailed behavior of each <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list_keyword"><i>lambda list keyword</i></a>
in a lambda-list-directed destructuring pattern is as follows:</p>
<dl>
<dt><tt>&amp;optional</tt><br></dt>
<dd>Each following element is a variable or a list of a
destructuring pattern, a default value form, and a supplied-p
variable. The default value and the supplied-p variable can be
omitted. If the list being destructured ends early, so that it does
not have an element to match against this destructuring
(sub)-pattern, the default form is evaluated and destructured
instead. The supplied-p variable receives the value <a rel=
"DEFINITION" href="a_nil.htm#nil"><b>nil</b></a> if the default
form is used, <a rel="DEFINITION" href="a_t.htm#t"><b>t</b></a>
otherwise.</dd>
<dt><tt>&amp;rest</tt>, <tt>&amp;body</tt><br></dt>
<dd>The next element is a destructuring pattern that matches the
rest of the list. <tt>&amp;body</tt> is identical to
<tt>&amp;rest</tt> but declares that what is being matched is a
list of forms that constitutes the body of <a rel="DEFINITION"
href="26_glo_f.htm#form"><i>form</i></a>. This next element must be
the last unless a <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list_keyword"><i>lambda list keyword</i></a>
follows it.</dd>
<dt><tt>&amp;aux</tt><br></dt>
<dd>The remaining elements are not destructuring patterns at all,
but are auxiliary variable bindings.</dd>
<dt><tt>&amp;whole</tt><br></dt>
<dd>The next element is a destructuring pattern that matches the
entire form in a macro, or the entire <a rel="DEFINITION" href=
"26_glo_s.htm#subexpression"><i>subexpression</i></a> at inner
levels.</dd>
<dt><tt>&amp;key</tt><br></dt>
<dd>Each following element is one of
<dl>
<dt>a <a rel="DEFINITION" href=
"26_glo_v.htm#variable"><i>variable</i></a>,<br></dt>
<dt>or a list of a variable, an optional initialization form, and
an optional supplied-p variable.<br></dt>
<dt>or a list of a list of a keyword and a destructuring pattern,
an optional initialization form, and an optional supplied-p
variable.<br></dt>
</dl>
The rest of the list being destructured is taken to be alternating
keywords and values and is taken apart appropriately.</dd>
<dt><tt>&amp;allow-other-keys</tt><br></dt>
<dd>Stands by itself.</dd>
</dl>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.4.5 Destructuring Lambda Lists</h2>
<p>A <a rel="DEFINITION" href=
"26_glo_d.htm#destructuring_lambda_list"><i>destructuring lambda
list</i></a> is used by <a rel="DEFINITION" href=
"m_destru.htm#destructuring-bind"><b>destructuring-bind</b></a>.</p>
<p><a rel="DEFINITION" href=
"26_glo_d.htm#destructuring_lambda_list"><i>Destructuring lambda
lists</i></a> are closely related to <a rel="DEFINITION" href=
"26_glo_m.htm#macro_lambda_list"><i>macro lambda lists</i></a>; see
<a rel="CHILD" href="03_dd.htm">Section 3.4.4 (Macro Lambda
Lists)</a>. A <a rel="DEFINITION" href=
"26_glo_d.htm#destructuring_lambda_list"><i>destructuring lambda
list</i></a> can contain all of the <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list_keyword"><i>lambda list keywords</i></a>
listed for <a rel="DEFINITION" href=
"26_glo_m.htm#macro_lambda_list"><i>macro lambda lists</i></a>
except for <tt>&amp;environment</tt>, and supports destructuring in
the same way. Inner <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list"><i>lambda lists</i></a> nested within a
<a rel="DEFINITION" href="26_glo_m.htm#macro_lambda_list"><i>macro
lambda list</i></a> have the syntax of <a rel="DEFINITION" href=
"26_glo_d.htm#destructuring_lambda_list"><i>destructuring lambda
lists</i></a>.</p>
<p>A <a rel="DEFINITION" href=
"26_glo_d.htm#destructuring_lambda_list"><i>destructuring lambda
list</i></a> has the following syntax:</p>
<pre>
reqvars::= var* 
</pre>
<pre>
optvars::= [&amp;optional {var | (var [init-form [supplied-p-parameter]])}*] 
</pre>
<pre>
restvar::= [{&amp;rest | &amp;body} var] 
</pre>
<pre>
keyvars::= [&amp;key {var | ({var | (keyword-name var)} [init-form [supplied-p-parameter]])}* 
            [&amp;allow-other-keys]] 
</pre>
<pre>
auxvars::= [&amp;aux {var | (var [init-form])}*] 
</pre>
<pre>
envvar::= [&amp;environment var] 
</pre>
<pre>
wholevar::= [&amp;whole var] 
</pre>
<pre>
lambda-list::= (wholevar reqvars optvars restvar keyvars auxvars) | 
               (wholevar reqvars optvars . var) 
</pre>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.4.6 Boa Lambda Lists</h2>
<p>A <a rel="DEFINITION" href="26_glo_b.htm#boa_lambda_list"><i>boa
lambda list</i></a> is a <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list"><i>lambda list</i></a> that is
syntactically like an <a rel="DEFINITION" href=
"26_glo_o.htm#ordinary_lambda_list"><i>ordinary lambda
list</i></a>, but that is processed in "<b>b</b>y <b>o</b>rder of
<b>a</b>rgument" style.</p>
<p>A <a rel="DEFINITION" href="26_glo_b.htm#boa_lambda_list"><i>boa
lambda list</i></a> is used only in a <a rel="DEFINITION" href=
"m_defstr.htm#defstruct"><b>defstruct</b></a> <a rel="DEFINITION"
href="26_glo_f.htm#form"><i>form</i></a>, when explicitly
specifying the <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list"><i>lambda list</i></a> of a constructor
<a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> (sometimes called a
"boa constructor").</p>
<p>The <tt>&amp;optional</tt>, <tt>&amp;rest</tt>,
<tt>&amp;aux</tt>, <tt>&amp;key</tt>, and
<tt>&amp;allow-other-keys</tt> <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list_keyword"><i>lambda list keywords</i></a>
are recognized in a <a rel="DEFINITION" href=
"26_glo_b.htm#boa_lambda_list"><i>boa lambda list</i></a>. The way
these <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list_keyword"><i>lambda list keywords</i></a>
differ from their use in an <a rel="DEFINITION" href=
"26_glo_o.htm#ordinary_lambda_list"><i>ordinary lambda list</i></a>
follows.</p>
<p>Consider this example, which describes how <b>destruct</b>
processes its <tt>:constructor</tt> option.</p>
<pre>
 (:constructor create-foo
         (a &amp;optional b (c 'sea) &amp;rest d &amp;aux e (f 'eff)))
</pre>
<p>This defines <tt>create-foo</tt> to be a constructor of one or
more arguments. The first argument is used to initialize the
<tt>a</tt> slot. The second argument is used to initialize the
<tt>b</tt> slot. If there isn't any second argument, then the
default value given in the body of the <a rel="DEFINITION" href=
"m_defstr.htm#defstruct"><b>defstruct</b></a> (if given) is used
instead. The third argument is used to initialize the <tt>c</tt>
slot. If there isn't any third argument, then the symbol
<tt>sea</tt> is used instead. Any arguments following the third
argument are collected into a <a rel="DEFINITION" href=
"26_glo_l.htm#list"><i>list</i></a> and used to initialize the
<tt>d</tt> slot. If there are three or fewer arguments, then
<a rel="DEFINITION" href="a_nil.htm#nil"><b>nil</b></a> is placed
in the <tt>d</tt> slot. The <tt>e</tt> slot is not initialized; its
initial value is <a rel="DEFINITION" href=
"26_glo_i.htm#implementation-defined"><i>implementation-defined</i></a>.
Finally, the <tt>f</tt> slot is initialized to contain the symbol
<tt>eff</tt>. <tt>&amp;key</tt> and <tt>&amp;allow-other-keys</tt>
arguments default in a manner similar to that of
<tt>&amp;optional</tt> arguments: if no default is supplied in the
<a rel="DEFINITION" href="26_glo_l.htm#lambda_list"><i>lambda
list</i></a> then the default value given in the body of the
<a rel="DEFINITION" href=
"m_defstr.htm#defstruct"><b>defstruct</b></a> (if given) is used
instead. For example:</p>
<pre>
 (defstruct (foo (:constructor CREATE-FOO (a &amp;optional b (c 'sea)
                                             &amp;key (d 2)
                                             &amp;aux e (f 'eff))))
   (a 1) (b 2) (c 3) (d 4) (e 5) (f 6))
 
 (create-foo 10) =&gt;  #S(FOO A 10 B 2 C SEA D 2 E implemention-dependent F EFF)
 (create-foo 10 'bee 'see :d 'dee) 
=&gt;  #S(FOO A 10 B BEE C SEE D DEE E implemention-dependent F EFF)
</pre>
<p>If keyword arguments of the form <tt>((</tt><i>key</i>
<i>var</i><tt>)</tt> [<i>default</i> [<i>svar</i>]]<tt>)</tt> are
specified, the <a rel="DEFINITION" href=
"26_glo_s.htm#slot"><i>slot</i></a> <a rel="DEFINITION" href=
"26_glo_n.htm#name"><i>name</i></a> is matched with <i>var</i> (not
<i>key</i>).</p>
<p>The actions taken in the <tt>b</tt> and <tt>e</tt> cases were
carefully chosen to allow the user to specify all possible
behaviors. The <tt>&amp;aux</tt> variables can be used to
completely override the default initializations given in the
body.</p>
<p>If no default value is supplied for an <a rel="DEFINITION" href=
"26_glo_a.htm#aux_variable"><i>aux variable</i></a> variable, the
consequences are undefined if an attempt is later made to read the
corresponding <a rel="DEFINITION" href=
"26_glo_s.htm#slot"><i>slot</i></a>'s value before a value is
explicitly assigned. If such a <a rel="DEFINITION" href=
"26_glo_s.htm#slot"><i>slot</i></a> has a <tt>:type</tt> option
specified, this suppressed initialization does not imply a type
mismatch situation; the declared type is only required to apply
when the <a rel="DEFINITION" href=
"26_glo_s.htm#slot"><i>slot</i></a> is finally assigned.</p>
<p>With this definition, the following can be written:</p>
<pre>
 (create-foo 1 2)
</pre>
instead of
<pre>
 (make-foo :a 1 :b 2)
</pre>
and <tt>create-foo</tt> provides defaulting different from that of
<tt>make-foo</tt>.
<p>Additional arguments that do not correspond to slot names but
are merely present to supply values used in subsequent
initialization computations are allowed. For example, in the
definition</p>
<pre>
 (defstruct (frob (:constructor create-frob
                  (a &amp;key (b 3 have-b) (c-token 'c) 
                          (c (list c-token (if have-b 7 2))))))
         a b c)
</pre>
<p>the <tt>c-token</tt> argument is used merely to supply a value
used in the initialization of the <tt>c</tt> slot. The <a rel=
"DEFINITION" href="26_glo_s.htm#supplied-p_parameter"><i>supplied-p
parameters</i></a> associated with <a rel="DEFINITION" href=
"26_glo_o.htm#optional_parameter"><i>optional parameters</i></a>
and <a rel="DEFINITION" href=
"26_glo_k.htm#keyword_parameter"><i>keyword parameters</i></a>
might also be used this way.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.4.7 Defsetf Lambda Lists</h2>
<p>A <a rel="DEFINITION" href=
"26_glo_d.htm#defsetf_lambda_list"><i>defsetf lambda list</i></a>
is used by <a rel="DEFINITION" href=
"m_defset.htm#defsetf"><b>defsetf</b></a>.</p>
<p>A <a rel="DEFINITION" href=
"26_glo_d.htm#defsetf_lambda_list"><i>defsetf lambda list</i></a>
has the following syntax:</p>
<pre>
lambda-list::= (var* 
                [&amp;optional {var | (var [init-form [supplied-p-parameter]])}*] 
                [&amp;rest var] 
                [&amp;key {var | ({var | (keyword-name var)} [init-form [supplied-p-parameter]])}* [&amp;allow-other-keys]] 
                [&amp;environment var] 
</pre>
<p>A <a rel="DEFINITION" href=
"26_glo_d.htm#defsetf_lambda_list"><i>defsetf lambda list</i></a>
can contain the <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list_keyword"><i>lambda list keywords</i></a>
shown in the next figure.</p>
<pre>
&amp;allow-other-keys  &amp;key       &amp;rest  
&amp;environment       &amp;optional         
</pre>
<p><b>Figure 3-19. Lambda List Keywords used by Defsetf Lambda
Lists</b></p>
<p>A <a rel="DEFINITION" href=
"26_glo_d.htm#defsetf_lambda_list"><i>defsetf lambda list</i></a>
differs from an <a rel="DEFINITION" href=
"26_glo_o.htm#ordinary_lambda_list"><i>ordinary lambda list</i></a>
only in that it does not permit the use of <tt>&amp;aux</tt>, and
that it permits use of <tt>&amp;environment</tt>, which introduces
an <a rel="DEFINITION" href=
"26_glo_e.htm#environment_parameter"><i>environment
parameter</i></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.4.8 Deftype Lambda Lists</h2>
<p>A <a rel="DEFINITION" href=
"26_glo_d.htm#deftype_lambda_list"><i>deftype lambda list</i></a>
is used by <a rel="DEFINITION" href=
"m_deftp.htm#deftype"><b>deftype</b></a>.</p>
<p>A <a rel="DEFINITION" href=
"26_glo_d.htm#deftype_lambda_list"><i>deftype lambda list</i></a>
has the same syntax as a <a rel="DEFINITION" href=
"26_glo_m.htm#macro_lambda_list"><i>macro lambda list</i></a>, and
can therefore contain the <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list_keyword"><i>lambda list keywords</i></a>
as a <a rel="DEFINITION" href=
"26_glo_m.htm#macro_lambda_list"><i>macro lambda list</i></a>.</p>
<p>A <a rel="DEFINITION" href=
"26_glo_d.htm#deftype_lambda_list"><i>deftype lambda list</i></a>
differs from a <a rel="DEFINITION" href=
"26_glo_m.htm#macro_lambda_list"><i>macro lambda list</i></a> only
in that if no <i>init-form</i> is supplied for an <a rel=
"DEFINITION" href="26_glo_o.htm#optional_parameter"><i>optional
parameter</i></a> or <a rel="DEFINITION" href=
"26_glo_k.htm#keyword_parameter"><i>keyword parameter</i></a> in
the <i>lambda-list</i>, the default <a rel="DEFINITION" href=
"26_glo_v.htm#value"><i>value</i></a> for that <a rel="DEFINITION"
href="26_glo_p.htm#parameter"><i>parameter</i></a> is the <a rel=
"DEFINITION" href="26_glo_s.htm#symbol"><i>symbol</i></a> <a rel=
"DEFINITION" href="a_st.htm#ST"><b>*</b></a> (rather than <a rel=
"DEFINITION" href="a_nil.htm#nil"><b>nil</b></a>).</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.4.9 Define-modify-macro Lambda Lists</h2>
<p>A <a rel="DEFINITION" href=
"26_glo_d.htm#define-modify-macro_lambda_list"><i>define-modify-macro
lambda list</i></a> is used by <a rel="DEFINITION" href=
"m_defi_2.htm#define-modify-macro"><b>define-modify-macro</b></a>.</p>
<p>A <a rel="DEFINITION" href=
"26_glo_d.htm#define-modify-macro_lambda_list"><i>define-modify-macro
lambda list</i></a> can contain the <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_list_keyword"><i>lambda list keywords</i></a>
shown in the next figure.</p>
<pre>
&amp;optional  &amp;rest  
</pre>
<p><b>Figure 3-20. Lambda List Keywords used by Define-modify-macro
Lambda Lists</b></p>
<p><a rel="DEFINITION" href=
"26_glo_d.htm#define-modify-macro_lambda_list"><i>Define-modify-macro
lambda lists</i></a> are similar to <a rel="DEFINITION" href=
"26_glo_o.htm#ordinary_lambda_list"><i>ordinary lambda
lists</i></a>, but do not support keyword arguments. <a rel=
"DEFINITION" href=
"m_defi_2.htm#define-modify-macro"><b>define-modify-macro</b></a>
has no need match keyword arguments, and a <a rel="DEFINITION"
href="26_glo_r.htm#rest_parameter"><i>rest parameter</i></a> is
sufficient. <a rel="DEFINITION" href=
"26_glo_a.htm#aux_variable"><i>Aux variables</i></a> are also not
supported, since <a rel="DEFINITION" href=
"m_defi_2.htm#define-modify-macro"><b>define-modify-macro</b></a>
has no body <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>forms</i></a> which could refer to such
<a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>bindings</i></a>. See the <a rel=
"DEFINITION" href="26_glo_m.htm#macro"><i>macro</i></a> <a rel=
"DEFINITION" href=
"m_defi_2.htm#define-modify-macro"><b>define-modify-macro</b></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.4.10 Define-method-combination Arguments Lambda Lists</h2>
<p>A <a rel="DEFINITION" href=
"26_glo_d.htm#define-method-combination_arguments_lambda_list"><i>define-method-combination
arguments lambda list</i></a> is used by the <tt>:arguments</tt>
option to <a rel="DEFINITION" href=
"m_defi_4.htm#define-method-combination"><b>define-method-combination</b></a>.</p>
<p>A <a rel="DEFINITION" href=
"26_glo_d.htm#define-method-combination_arguments_lambda_list"><i>define-method-combination
arguments lambda list</i></a> can contain the <a rel="DEFINITION"
href="26_glo_l.htm#lambda_list_keyword"><i>lambda list
keywords</i></a> shown in the next figure.</p>
<pre>
&amp;allow-other-keys  &amp;key       &amp;rest   
&amp;aux               &amp;optional  &amp;whole  
</pre>
<p><b>Figure 3-21. Lambda List Keywords used by
Define-method-combination arguments Lambda Lists</b></p>
<p><a rel="DEFINITION" href=
"26_glo_d.htm#define-method-combination_arguments_lambda_list"><i>Define-method-combination
arguments lambda lists</i></a> are similar to <a rel="DEFINITION"
href="26_glo_o.htm#ordinary_lambda_list"><i>ordinary lambda
lists</i></a>, but also permit the use of <tt>&amp;whole</tt>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.4.11 Syntactic Interaction of Documentation Strings and
Declarations</h2>
<p>In a number of situations, a <a rel="DEFINITION" href=
"26_glo_d.htm#documentation_string"><i>documentation string</i></a>
can appear amidst a series of <a rel="DEFINITION" href=
"s_declar.htm#declare"><b>declare</b></a> <a rel="DEFINITION" href=
"26_glo_e.htm#expression"><i>expressions</i></a> prior to a series
of <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>forms</i></a>.</p>
<p>In that case, if a <a rel="DEFINITION" href=
"26_glo_s.htm#string"><i>string</i></a> S appears where a <a rel=
"DEFINITION" href=
"26_glo_d.htm#documentation_string"><i>documentation string</i></a>
is permissible and is not followed by either a <a rel="DEFINITION"
href="s_declar.htm#declare"><b>declare</b></a> <a rel="DEFINITION"
href="26_glo_e.htm#expression"><i>expression</i></a> or a <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> then S is
taken to be a <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a>; otherwise, S is taken as a
<a rel="DEFINITION" href=
"26_glo_d.htm#documentation_string"><i>documentation
string</i></a>. The consequences are unspecified if more than one
such <a rel="DEFINITION" href=
"26_glo_d.htm#documentation_string"><i>documentation string</i></a>
is present.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.5 Error Checking in Function Calls</h2>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.5.1 Argument Mismatch Detection</h2>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.5.1.1 Safe and Unsafe Calls</h2>
<p>A <a rel="DEFINITION" href="26_glo_c.htm#call"><i>call</i></a>
is a <a rel="DEFINITION" href="26_glo_s.htm#safe_call"><i>safe
call</i></a> if each of the following is either <a rel="DEFINITION"
href="26_glo_s.htm#safe"><i>safe</i></a> <a rel="DEFINITION" href=
"26_glo_c.htm#code"><i>code</i></a> or <a rel="DEFINITION" href=
"26_glo_s.htm#system_code"><i>system code</i></a> (other than
<a rel="DEFINITION" href="26_glo_s.htm#system_code"><i>system
code</i></a> that results from <a rel="DEFINITION" href=
"26_glo_m.htm#macro_expansion"><i>macro expansion</i></a> of
<a rel="DEFINITION" href=
"26_glo_p.htm#programmer_code"><i>programmer code</i></a>):</p>
<dl>
<dt>* the <a rel="DEFINITION" href=
"26_glo_c.htm#call"><i>call</i></a>.</dt>
<dt>* the definition of the <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> being
<i>called</i>.</dt>
<dt>* the point of <a rel="DEFINITION" href=
"26_glo_f.htm#functional_evaluation"><i>functional
evaluation</i></a><br></dt>
</dl>
<p>The following special cases require some elaboration:</p>
<dl>
<dt>* If the <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> being called is a
<a rel="DEFINITION" href="26_glo_g.htm#generic_function"><i>generic
function</i></a>, it is considered <a rel="DEFINITION" href=
"26_glo_s.htm#safe"><i>safe</i></a> if all of the following are
<a rel="DEFINITION" href="26_glo_s.htm#safe"><i>safe</i></a>
<a rel="DEFINITION" href="26_glo_c.htm#code"><i>code</i></a> or
<a rel="DEFINITION" href="26_glo_s.htm#system_code"><i>system
code</i></a>:<br></dt>
<dd>
<dl>
<dt>-- its definition (if it was defined explicitly).</dt>
<dt>-- the <a rel="DEFINITION" href=
"26_glo_m.htm#method"><i>method</i></a> definitions for all <a rel=
"DEFINITION" href="26_glo_a.htm#applicable"><i>applicable</i></a>
<a rel="DEFINITION" href=
"26_glo_m.htm#method"><i>methods</i></a>.</dt>
<dt>-- the definition of its <a rel="DEFINITION" href=
"26_glo_m.htm#method_combination"><i>method
combination</i></a>.<br></dt>
</dl>
</dd>
<dt>* For the form <tt>(coerce</tt> <i>x</i> <tt>'function)</tt>,
where <i>x</i> is a <a rel="DEFINITION" href=
"26_glo_l.htm#lambda_expression"><i>lambda expression</i></a>, the
value of the <a rel="DEFINITION" href=
"26_glo_o.htm#optimize_quality"><i>optimize quality</i></a> <a rel=
"DEFINITION" href="d_optimi.htm#safety"><b>safety</b></a> in the
global environment at the time the <a rel="DEFINITION" href=
"f_coerce.htm#coerce"><b>coerce</b></a> is <i>executed</i> applies
to the resulting <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a>.<br></dt>
<dt>* For a call to the <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> <a rel="DEFINITION"
href=
"f_ensure.htm#ensure-generic-function"><b>ensure-generic-function</b></a>,
the value of the <a rel="DEFINITION" href=
"26_glo_o.htm#optimize_quality"><i>optimize quality</i></a> <a rel=
"DEFINITION" href="d_optimi.htm#safety"><b>safety</b></a> in the
<a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environment</i></a> <a rel=
"DEFINITION" href="26_glo_o.htm#object"><i>object</i></a> passed as
the <tt>:environment</tt> <a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>argument</i></a> applies to the
resulting <a rel="DEFINITION" href=
"26_glo_g.htm#generic_function"><i>generic
function</i></a>.<br></dt>
<dt>* For a call to <a rel="DEFINITION" href=
"f_cmp.htm#compile"><b>compile</b></a> with a <a rel="DEFINITION"
href="26_glo_l.htm#lambda_expression"><i>lambda expression</i></a>
as the <a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>argument</i></a>, the value of the
<a rel="DEFINITION" href=
"26_glo_o.htm#optimize_quality"><i>optimize quality</i></a>
<b>safety</b> in the <a rel="DEFINITION" href=
"26_glo_g.htm#global_environment"><i>global environment</i></a> at
the time <a rel="DEFINITION" href=
"f_cmp.htm#compile"><b>compile</b></a> is <i>called</i> applies to
the resulting <a rel="DEFINITION" href=
"26_glo_c.htm#compiled_function"><i>compiled
function</i></a>.<br></dt>
<dt>* For a call to <a rel="DEFINITION" href=
"f_cmp.htm#compile"><b>compile</b></a> with only one argument, if
the original definition of the <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> was <a rel="DEFINITION"
href="26_glo_s.htm#safe"><i>safe</i></a>, then the resulting
<a rel="DEFINITION" href=
"26_glo_c.htm#compiled_function"><i>compiled function</i></a> must
also be <a rel="DEFINITION" href=
"26_glo_s.htm#safe"><i>safe</i></a>.<br></dt>
<dt>* A <a rel="DEFINITION" href=
"26_glo_c.htm#call"><i>call</i></a> to a <a rel="DEFINITION" href=
"26_glo_m.htm#method"><i>method</i></a> by <a rel="DEFINITION"
href="f_call_n.htm#call-next-method"><b>call-next-method</b></a>
must be considered <a rel="DEFINITION" href=
"26_glo_s.htm#safe"><i>safe</i></a> if each of the following is
<a rel="DEFINITION" href="26_glo_s.htm#safe"><i>safe</i></a>
<a rel="DEFINITION" href="26_glo_c.htm#code"><i>code</i></a> or
<a rel="DEFINITION" href="26_glo_s.htm#system_code"><i>system
code</i></a>:<br></dt>
<dd>
<dl>
<dt>-- the definition of the <a rel="DEFINITION" href=
"26_glo_g.htm#generic_function"><i>generic function</i></a> (if it
was defined explicitly).</dt>
<dt>-- the <a rel="DEFINITION" href=
"26_glo_m.htm#method"><i>method</i></a> definitions for all <a rel=
"DEFINITION" href="26_glo_a.htm#applicable"><i>applicable</i></a>
<a rel="DEFINITION" href=
"26_glo_m.htm#method"><i>methods</i></a>.</dt>
<dt>-- the definition of the <a rel="DEFINITION" href=
"26_glo_m.htm#method_combination"><i>method
combination</i></a>.</dt>
<dt>-- the point of entry into the body of the <a rel="DEFINITION"
href="26_glo_m.htm#method"><i>method</i></a> <a rel="DEFINITION"
href="26_glo_d.htm#defining_form"><i>defining form</i></a>, where
the <a rel="DEFINITION" href=
"26_glo_b.htm#binding"><i>binding</i></a> of <a rel="DEFINITION"
href="f_call_n.htm#call-next-method"><b>call-next-method</b></a> is
established.</dt>
<dt>-- the point of <a rel="DEFINITION" href=
"26_glo_f.htm#functional_evaluation"><i>functional
evaluation</i></a> of the name <a rel="DEFINITION" href=
"f_call_n.htm#call-next-method"><b>call-next-method</b></a>.<br></dt>
</dl>
</dd>
</dl>
<p>An <a rel="DEFINITION" href="26_glo_u.htm#unsafe_call"><i>unsafe
call</i></a> is a <a rel="DEFINITION" href=
"26_glo_c.htm#call"><i>call</i></a> that is not a <a rel=
"DEFINITION" href="26_glo_s.htm#safe_call"><i>safe
call</i></a>.</p>
<p>The informal intent is that the <a rel="DEFINITION" href=
"26_glo_p.htm#programmer"><i>programmer</i></a> can rely on a
<a rel="DEFINITION" href="26_glo_c.htm#call"><i>call</i></a> to be
<a rel="DEFINITION" href="26_glo_s.htm#safe"><i>safe</i></a>, even
when <a rel="DEFINITION" href="26_glo_s.htm#system_code"><i>system
code</i></a> is involved, if all reasonable steps have been taken
to ensure that the <a rel="DEFINITION" href=
"26_glo_c.htm#call"><i>call</i></a> is <a rel="DEFINITION" href=
"26_glo_s.htm#safe"><i>safe</i></a>. For example, if a <a rel=
"DEFINITION" href="26_glo_p.htm#programmer"><i>programmer</i></a>
calls <a rel="DEFINITION" href=
"f_mapc_.htm#mapcar"><b>mapcar</b></a> from <a rel="DEFINITION"
href="26_glo_s.htm#safe"><i>safe</i></a> <a rel="DEFINITION" href=
"26_glo_c.htm#code"><i>code</i></a> and supplies a <a rel=
"DEFINITION" href="26_glo_f.htm#function"><i>function</i></a> that
was <i>compiled</i> as <a rel="DEFINITION" href=
"26_glo_s.htm#safe"><i>safe</i></a>, the <a rel="DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementation</i></a> is required
to ensure that <a rel="DEFINITION" href=
"f_mapc_.htm#mapcar"><b>mapcar</b></a> makes a <a rel="DEFINITION"
href="26_glo_s.htm#safe_call"><i>safe call</i></a> as well.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.5.1.1.1 Error Detection Time in Safe Calls</h2>
<p>If an error is signaled in a <a rel="DEFINITION" href=
"26_glo_s.htm#safe_call"><i>safe call</i></a>, the exact point of
the <a rel="DEFINITION" href=
"26_glo_s.htm#signal"><i>signal</i></a> is <a rel="DEFINITION"
href="26_glo_i.htm#implementation-dependent"><i>implementation-dependent</i></a>.
In particular, it might be signaled at compile time or at run time,
and if signaled at run time, it might be prior to, during, or after
<i>executing</i> the <a rel="DEFINITION" href=
"26_glo_c.htm#call"><i>call</i></a>. However, it is always prior to
the execution of the body of the <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> being
<i>called</i>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.5.1.2 Too Few Arguments</h2>
<p>It is not permitted to supply too few <a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>arguments</i></a> to a <a rel=
"DEFINITION" href="26_glo_f.htm#function"><i>function</i></a>. Too
few arguments means fewer <a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>arguments</i></a> than the number of
<a rel="DEFINITION" href=
"26_glo_r.htm#required_parameter"><i>required parameters</i></a>
for the <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a>.</p>
<p>If this <a rel="DEFINITION" href=
"26_glo_s.htm#situation"><i>situation</i></a> occurs in a <a rel=
"DEFINITION" href="26_glo_s.htm#safe_call"><i>safe call</i></a>, an
error of <a rel="DEFINITION" href=
"26_glo_t.htm#type"><i>type</i></a> <a rel="DEFINITION" href=
"e_progra.htm#program-error"><b>program-error</b></a> must be
signaled; and in an <a rel="DEFINITION" href=
"26_glo_u.htm#unsafe_call"><i>unsafe call</i></a> the <a rel=
"DEFINITION" href="26_glo_s.htm#situation"><i>situation</i></a> has
undefined consequences.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.5.1.3 Too Many Arguments</h2>
<p>It is not permitted to supply too many <a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>arguments</i></a> to a <a rel=
"DEFINITION" href="26_glo_f.htm#function"><i>function</i></a>. Too
many arguments means more <a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>arguments</i></a> than the number of
<a rel="DEFINITION" href=
"26_glo_r.htm#required_parameter"><i>required parameters</i></a>
plus the number of <a rel="DEFINITION" href=
"26_glo_o.htm#optional_parameter"><i>optional parameters</i></a>;
however, if the <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> uses <tt>&amp;rest</tt>
or <tt>&amp;key</tt>, it is not possible for it to receive too many
arguments.</p>
<p>If this <a rel="DEFINITION" href=
"26_glo_s.htm#situation"><i>situation</i></a> occurs in a <a rel=
"DEFINITION" href="26_glo_s.htm#safe_call"><i>safe call</i></a>, an
error of <a rel="DEFINITION" href=
"26_glo_t.htm#type"><i>type</i></a> <a rel="DEFINITION" href=
"e_progra.htm#program-error"><b>program-error</b></a> must be
signaled; and in an <a rel="DEFINITION" href=
"26_glo_u.htm#unsafe_call"><i>unsafe call</i></a> the <a rel=
"DEFINITION" href="26_glo_s.htm#situation"><i>situation</i></a> has
undefined consequences.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.5.1.4 Unrecognized Keyword Arguments</h2>
<p>It is not permitted to supply a keyword argument to a <a rel=
"DEFINITION" href="26_glo_f.htm#function"><i>function</i></a> using
a name that is not recognized by that <a rel="DEFINITION" href=
"26_glo_f.htm#function"><i>function</i></a> unless keyword argument
checking is suppressed as described in <a rel="CHILD" href=
"03_dada.htm">Section 3.4.1.4.1 (Suppressing Keyword Argument
Checking)</a>.</p>
<p>If this <a rel="DEFINITION" href=
"26_glo_s.htm#situation"><i>situation</i></a> occurs in a <a rel=
"DEFINITION" href="26_glo_s.htm#safe_call"><i>safe call</i></a>, an
error of <a rel="DEFINITION" href=
"26_glo_t.htm#type"><i>type</i></a> <a rel="DEFINITION" href=
"e_progra.htm#program-error"><b>program-error</b></a> must be
signaled; and in an <a rel="DEFINITION" href=
"26_glo_u.htm#unsafe_call"><i>unsafe call</i></a> the <a rel=
"DEFINITION" href="26_glo_s.htm#situation"><i>situation</i></a> has
undefined consequences.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.5.1.5 Invalid Keyword Arguments</h2>
<p>It is not permitted to supply a keyword argument to a <a rel=
"DEFINITION" href="26_glo_f.htm#function"><i>function</i></a> using
a name that is not a <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbol</i></a>.</p>
<p>If this <a rel="DEFINITION" href=
"26_glo_s.htm#situation"><i>situation</i></a> occurs in a <a rel=
"DEFINITION" href="26_glo_s.htm#safe_call"><i>safe call</i></a>, an
error of <a rel="DEFINITION" href=
"26_glo_t.htm#type"><i>type</i></a> <a rel="DEFINITION" href=
"e_progra.htm#program-error"><b>program-error</b></a> must be
signaled unless keyword argument checking is suppressed as
described in <a rel="CHILD" href="03_dada.htm">Section 3.4.1.4.1
(Suppressing Keyword Argument Checking)</a>; and in an <a rel=
"DEFINITION" href="26_glo_u.htm#unsafe_call"><i>unsafe call</i></a>
the <a rel="DEFINITION" href=
"26_glo_s.htm#situation"><i>situation</i></a> has undefined
consequences.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.5.1.6 Odd Number of Keyword Arguments</h2>
<p>An odd number of <a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>arguments</i></a> must not be supplied
for the <a rel="DEFINITION" href=
"26_glo_k.htm#keyword_parameter"><i>keyword parameters</i></a>.</p>
<p>If this <a rel="DEFINITION" href=
"26_glo_s.htm#situation"><i>situation</i></a> occurs in a <a rel=
"DEFINITION" href="26_glo_s.htm#safe_call"><i>safe call</i></a>, an
error of <a rel="DEFINITION" href=
"26_glo_t.htm#type"><i>type</i></a> <a rel="DEFINITION" href=
"e_progra.htm#program-error"><b>program-error</b></a> must be
signaled unless keyword argument checking is suppressed as
described in <a rel="CHILD" href="03_dada.htm">Section 3.4.1.4.1
(Suppressing Keyword Argument Checking)</a>; and in an <a rel=
"DEFINITION" href="26_glo_u.htm#unsafe_call"><i>unsafe call</i></a>
the <a rel="DEFINITION" href=
"26_glo_s.htm#situation"><i>situation</i></a> has undefined
consequences.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.5.1.7 Destructuring Mismatch</h2>
<p>When matching a <a rel="DEFINITION" href=
"26_glo_d.htm#destructuring_lambda_list"><i>destructuring lambda
list</i></a> against a <a rel="DEFINITION" href=
"26_glo_f.htm#form"><i>form</i></a>, the pattern and the <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>form</i></a> must have
compatible <a rel="DEFINITION" href=
"26_glo_t.htm#tree_structure"><i>tree structure</i></a>, as
described in <a rel="CHILD" href="03_dd.htm">Section 3.4.4 (Macro
Lambda Lists)</a>.</p>
<p>Otherwise, in a <a rel="DEFINITION" href=
"26_glo_s.htm#safe_call"><i>safe call</i></a>, an error of <a rel=
"DEFINITION" href="26_glo_t.htm#type"><i>type</i></a> <a rel=
"DEFINITION" href=
"e_progra.htm#program-error"><b>program-error</b></a> must be
signaled; and in an <a rel="DEFINITION" href=
"26_glo_u.htm#unsafe_call"><i>unsafe call</i></a> the <a rel=
"DEFINITION" href="26_glo_s.htm#situation"><i>situation</i></a> has
undefined consequences.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.5.1.8 Errors When Calling a Next Method</h2>
<p>If <a rel="DEFINITION" href=
"f_call_n.htm#call-next-method"><b>call-next-method</b></a> is
called with <a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>arguments</i></a>, the ordered set of
<a rel="DEFINITION" href=
"26_glo_a.htm#applicable"><i>applicable</i></a> <a rel="DEFINITION"
href="26_glo_m.htm#method"><i>methods</i></a> for the changed set
of <a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>arguments</i></a> for <a rel=
"DEFINITION" href=
"f_call_n.htm#call-next-method"><b>call-next-method</b></a> must be
the same as the ordered set of <a rel="DEFINITION" href=
"26_glo_a.htm#applicable"><i>applicable</i></a> <a rel="DEFINITION"
href="26_glo_m.htm#method"><i>methods</i></a> for the original
<a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>arguments</i></a> to the <a rel=
"DEFINITION" href="26_glo_g.htm#generic_function"><i>generic
function</i></a>, or else an error should be signaled.</p>
<p>The comparison between the set of methods applicable to the new
arguments and the set applicable to the original arguments is
insensitive to order differences among methods with the same
specializers.</p>
<p>If <a rel="DEFINITION" href=
"f_call_n.htm#call-next-method"><b>call-next-method</b></a> is
called with <a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>arguments</i></a> that specify a
different ordered set of <a rel="DEFINITION" href=
"26_glo_a.htm#applicable"><i>applicable</i></a> methods and there
is no <a rel="DEFINITION" href="26_glo_n.htm#next_method"><i>next
method</i></a> available, the test for different methods and the
associated error signaling (when present) takes precedence over
calling <a rel="DEFINITION" href=
"f_no_nex.htm#no-next-method"><b>no-next-method</b></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.6 Traversal Rules and Side Effects</h2>
<p>The consequences are undefined when <a rel="DEFINITION" href=
"26_glo_c.htm#code"><i>code</i></a> executed during an <a rel=
"DEFINITION" href=
"26_glo_o.htm#object-traversing"><i>object-traversing</i></a>
operation destructively modifies the <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a> in a way that might affect
the ongoing traversal operation. In particular, the following rules
apply.</p>
<dl>
<dt><b>List traversal</b><br></dt>
<dd>For <a rel="DEFINITION" href=
"26_glo_l.htm#list"><i>list</i></a> traversal operations, the
<a rel="DEFINITION" href="26_glo_c.htm#cdr"><i>cdr</i></a> chain of
the <a rel="DEFINITION" href="26_glo_l.htm#list"><i>list</i></a> is
not allowed to be destructively modified.</dd>
<dt><b>Array traversal</b><br></dt>
<dd>For <a rel="DEFINITION" href=
"26_glo_a.htm#array"><i>array</i></a> traversal operations, the
<a rel="DEFINITION" href="26_glo_a.htm#array"><i>array</i></a> is
not allowed to be adjusted and its <a rel="DEFINITION" href=
"26_glo_f.htm#fill_pointer"><i>fill pointer</i></a>, if any, is not
allowed to be changed.</dd>
<dt><b>Hash-table traversal</b><br></dt>
<dd>For <a rel="DEFINITION" href="26_glo_h.htm#hash_table"><i>hash
table</i></a> traversal operations, new elements may not be added
or deleted except that the element corresponding to the current
hash key may be changed or removed.</dd>
<dt><b>Package traversal</b><br></dt>
<dd>For <a rel="DEFINITION" href=
"26_glo_p.htm#package"><i>package</i></a> traversal operations
(e.g., <a rel="DEFINITION" href=
"m_do_sym.htm#do-symbols"><b>do-symbols</b></a>), new <a rel=
"DEFINITION" href="26_glo_s.htm#symbol"><i>symbols</i></a> may not
be <a rel="DEFINITION" href=
"26_glo_i.htm#interned"><i>interned</i></a> in or <a rel=
"DEFINITION" href="26_glo_u.htm#uninterned"><i>uninterned</i></a>
from the <a rel="DEFINITION" href=
"26_glo_p.htm#package"><i>package</i></a> being traversed or any
<a rel="DEFINITION" href="26_glo_p.htm#package"><i>package</i></a>
that it uses except that the current <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbol</i></a> may be <a rel="DEFINITION"
href="26_glo_u.htm#uninterned"><i>uninterned</i></a> from the
<a rel="DEFINITION" href="26_glo_p.htm#package"><i>package</i></a>
being traversed.</dd>
</dl>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.7 Destructive Operations</h2>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.7.1 Modification of Literal Objects</h2>
<p>The consequences are undefined if <a rel="DEFINITION" href=
"26_glo_l.htm#literal"><i>literal</i></a> <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>objects</i></a> are destructively
modified. For this purpose, the following operations are considered
<a rel="DEFINITION" href=
"26_glo_d.htm#destructive"><i>destructive</i></a>:</p>
<dl>
<dt><a rel="DEFINITION" href=
"t_rnd_st.htm#random-state"><b>random-state</b></a><br></dt>
<dd>Using it as an <a rel="DEFINITION" href=
"26_glo_a.htm#argument"><i>argument</i></a> to the <a rel=
"DEFINITION" href="26_glo_f.htm#function"><i>function</i></a>
<a rel="DEFINITION" href=
"f_random.htm#random"><b>random</b></a>.</dd>
<dt><a rel="DEFINITION" href=
"t_cons.htm#cons"><b>cons</b></a><br></dt>
<dd>Changing the <a rel="DEFINITION" href=
"26_glo_c.htm#car"><i>car</i></a>[1] or <a rel="DEFINITION" href=
"26_glo_c.htm#cdr"><i>cdr</i></a>[1] of the <a rel="DEFINITION"
href="26_glo_c.htm#cons"><i>cons</i></a>, or performing a <a rel=
"DEFINITION" href="26_glo_d.htm#destructive"><i>destructive</i></a>
operation on an <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a> which is either the <a rel=
"DEFINITION" href="26_glo_c.htm#car"><i>car</i></a>[2] or the
<a rel="DEFINITION" href="26_glo_c.htm#cdr"><i>cdr</i></a>[2] of
the <a rel="DEFINITION" href=
"26_glo_c.htm#cons"><i>cons</i></a>.</dd>
<dt><a rel="DEFINITION" href=
"t_array.htm#array"><b>array</b></a><br></dt>
<dd>Storing a new value into some element of the <a rel=
"DEFINITION" href="26_glo_a.htm#array"><i>array</i></a>, or
performing a <a rel="DEFINITION" href=
"26_glo_d.htm#destructive"><i>destructive</i></a> operation on an
<a rel="DEFINITION" href="26_glo_o.htm#object"><i>object</i></a>
that is already such an <a rel="DEFINITION" href=
"26_glo_e.htm#element"><i>element</i></a>.
<p>Changing the <a rel="DEFINITION" href=
"26_glo_f.htm#fill_pointer"><i>fill pointer</i></a>, <a rel=
"DEFINITION" href="26_glo_d.htm#dimension"><i>dimensions</i></a>,
or displacement of the <a rel="DEFINITION" href=
"26_glo_a.htm#array"><i>array</i></a> (regardless of whether the
<a rel="DEFINITION" href="26_glo_a.htm#array"><i>array</i></a> is
<a rel="DEFINITION" href=
"26_glo_a.htm#actually_adjustable"><i>actually
adjustable</i></a>).</p>
<p>Performing a <a rel="DEFINITION" href=
"26_glo_d.htm#destructive"><i>destructive</i></a> operation on
another <a rel="DEFINITION" href=
"26_glo_a.htm#array"><i>array</i></a> that is displaced to the
<a rel="DEFINITION" href="26_glo_a.htm#array"><i>array</i></a> or
that otherwise shares its contents with the <a rel="DEFINITION"
href="26_glo_a.htm#array"><i>array</i></a>.</p>
</dd>
<dt><a rel="DEFINITION" href=
"t_hash_t.htm#hash-table"><b>hash-table</b></a><br></dt>
<dd>Performing a <a rel="DEFINITION" href=
"26_glo_d.htm#destructive"><i>destructive</i></a> operation on any
<a rel="DEFINITION" href="26_glo_k.htm#key"><i>key</i></a>.
<p>Storing a new <a rel="DEFINITION" href=
"26_glo_v.htm#value"><i>value</i></a>[4] for any <a rel=
"DEFINITION" href="26_glo_k.htm#key"><i>key</i></a>, or performing
a <a rel="DEFINITION" href=
"26_glo_d.htm#destructive"><i>destructive</i></a> operation on any
<a rel="DEFINITION" href="26_glo_o.htm#object"><i>object</i></a>
that is such a <a rel="DEFINITION" href=
"26_glo_v.htm#value"><i>value</i></a>.</p>
<p>Adding or removing entries from the <a rel="DEFINITION" href=
"26_glo_h.htm#hash_table"><i>hash table</i></a>.</p>
</dd>
<dt><a rel="DEFINITION" href=
"t_stu_ob.htm#structure-object"><b>structure-object</b></a><br></dt>
<dd>Storing a new value into any slot, or performing a <a rel=
"DEFINITION" href="26_glo_d.htm#destructive"><i>destructive</i></a>
operation on an <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a> that is the value of some
slot.</dd>
<dt><a rel="DEFINITION" href=
"t_std_ob.htm#standard-object"><b>standard-object</b></a><br></dt>
<dd>Storing a new value into any slot, or performing a <a rel=
"DEFINITION" href="26_glo_d.htm#destructive"><i>destructive</i></a>
operation on an <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a> that is the value of some
slot.
<p>Changing the class of the <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>object</i></a> (e.g., using the <a rel=
"DEFINITION" href="26_glo_f.htm#function"><i>function</i></a>
<a rel="DEFINITION" href=
"f_chg_cl.htm#change-class"><b>change-class</b></a>).</p>
</dd>
<dt><a rel="DEFINITION" href=
"t_rdtabl.htm#readtable"><b>readtable</b></a><br></dt>
<dd>Altering the <a rel="DEFINITION" href=
"26_glo_r.htm#readtable_case"><i>readtable case</i></a>.
<p>Altering the syntax type of any character in this readtable.</p>
<p>Altering the <a rel="DEFINITION" href=
"26_glo_r.htm#reader_macro_function"><i>reader macro
function</i></a> associated with any <a rel="DEFINITION" href=
"26_glo_c.htm#character"><i>character</i></a> in the <a rel=
"DEFINITION" href="26_glo_r.htm#readtable"><i>readtable</i></a>, or
altering the <a rel="DEFINITION" href=
"26_glo_r.htm#reader_macro_function"><i>reader macro
functions</i></a> associated with <a rel="DEFINITION" href=
"26_glo_c.htm#character"><i>characters</i></a> defined as <a rel=
"DEFINITION" href=
"26_glo_d.htm#dispatching_macro_character"><i>dispatching macro
characters</i></a> in the <a rel="DEFINITION" href=
"26_glo_r.htm#readtable"><i>readtable</i></a>.</p>
</dd>
<dt><a rel="DEFINITION" href=
"t_stream.htm#stream"><b>stream</b></a><br></dt>
<dd>Performing I/O operations on the <a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>stream</i></a>, or <i>closing</i> the
<a rel="DEFINITION" href=
"26_glo_s.htm#stream"><i>stream</i></a>.</dd>
<dt>All other standardized types<br></dt>
<dd>[This category includes, for example, <a rel="DEFINITION" href=
"t_ch.htm#character"><b>character</b></a>, <a rel="DEFINITION"
href="e_cnd.htm#condition"><b>condition</b></a>, <a rel=
"DEFINITION" href="t_fn.htm#function"><b>function</b></a>, <a rel=
"DEFINITION" href=
"t_meth_1.htm#method-combination"><b>method-combination</b></a>,
<a rel="DEFINITION" href="t_method.htm#method"><b>method</b></a>,
<a rel="DEFINITION" href="t_number.htm#number"><b>number</b></a>,
<a rel="DEFINITION" href="t_pkg.htm#package"><b>package</b></a>,
<a rel="DEFINITION" href="t_pn.htm#pathname"><b>pathname</b></a>,
<a rel="DEFINITION" href="t_rst.htm#restart"><b>restart</b></a>,
and <a rel="DEFINITION" href=
"t_symbol.htm#symbol"><b>symbol</b></a>.]
<p>There are no <a rel="DEFINITION" href=
"26_glo_s.htm#standardized"><i>standardized</i></a> <a rel=
"DEFINITION" href="26_glo_d.htm#destructive"><i>destructive</i></a>
operations defined on <a rel="DEFINITION" href=
"26_glo_o.htm#object"><i>objects</i></a> of these <a rel=
"DEFINITION" href="26_glo_t.htm#type"><i>types</i></a>.</p>
</dd>
</dl>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.7.2 Transfer of Control during a Destructive Operation</h2>
<p>Should a transfer of control out of a <a rel="DEFINITION" href=
"26_glo_d.htm#destructive"><i>destructive</i></a> operation occur
(e.g., due to an error) the state of the <i>object</i> being
modified is <a rel="DEFINITION" href=
"26_glo_i.htm#implementation-dependent"><i>implementation-dependent</i></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>3.7.2.1 Examples of Transfer of Control during a Destructive
Operation</h2>
<p>The following examples illustrate some of the many ways in which
the <a rel="DEFINITION" href=
"26_glo_i.htm#implementation-dependent"><i>implementation-dependent</i></a>
nature of the modification can manifest itself.</p>
<pre>
 (let ((a (list 2 1 4 3 7 6 'five)))
   (ignore-errors (sort a #'&lt;))
   a)
=&gt;  (1 2 3 4 6 7 FIVE)
OR=&gt;  (2 1 4 3 7 6 FIVE)
OR=&gt;  (2)

 (prog foo ((a (list 1 2 3 4 5 6 7 8 9 10)))
   (sort a #'(lambda (x y) (if (zerop (random 5)) (return-from foo a) (&gt; x y)))))
=&gt;  (1 2 3 4 5 6 7 8 9 10)
OR=&gt;  (3 4 5 6 2 7 8 9 10 1)
OR=&gt;  (1 2 4 3)
</pre>
</body>
</html>
