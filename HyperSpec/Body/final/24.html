<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content=
"HTML Tidy for Linux/x86 (vers 12 April 2005), see www.w3.org">
<title>CLHS: Chapter 24</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="e_rder_e.htm">
<link rel="UP" href="../Front/Contents.htm">
<link rel="NEXT" href="24_a.htm">
<title>CLHS: Section 24.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="24_.htm">
<link rel="UP" href="24_.htm">
<link rel="NEXT" href="24_aa.htm">
<title>CLHS: Section 24.1.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="24_a.htm">
<link rel="UP" href="24_a.htm">
<link rel="NEXT" href="24_ab.htm">
<title>CLHS: Section 24.1.2</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="24_aa.htm">
<link rel="UP" href="24_a.htm">
<link rel="NEXT" href="24_aba.htm">
<title>CLHS: Section 24.1.2.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="24_ab.htm">
<link rel="UP" href="24_ab.htm">
<link rel="NEXT" href="24_abaa.htm">
<title>CLHS: Section 24.1.2.1.1</title>
<link href="../Data/clhs.css" rel="stylesheet" type="text/css">
<meta http-equiv="Author" content="Kent M. Pitman">
<meta http-equiv="Organization" content="LispWorks Ltd.">
<link rel="TOP" href="../Front/index.htm">
<link rel="COPYRIGHT" href="../Front/Help.htm#Legal">
<link rel="DISCLAIMER" href="../Front/Help.htm#Disclaimer">
<link rel="PREV" href="24_aba.htm">
<link rel="UP" href="24_aba.htm">
<link rel="NEXT" href="c_system.htm">
</head>
<body>
<p><a name="chaptwentyfour" id="chaptwentyfour"></a><a name=
"systemconstruction" id="systemconstruction"></a></p>
<h2>24. System Construction</h2>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>24.1 System Construction Concepts</h2>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>24.1.1 Loading</h2>
<p>To <a rel="DEFINITION" href="f_load.htm#load"><b>load</b></a> a
<a rel="DEFINITION" href="26_glo_f.htm#file"><i>file</i></a> is to
treat its contents as <a rel="DEFINITION" href=
"26_glo_c.htm#code"><i>code</i></a> and <a rel="DEFINITION" href=
"26_glo_e.htm#execute"><i>execute</i></a> that <a rel="DEFINITION"
href="26_glo_c.htm#code"><i>code</i></a>. The <a rel="DEFINITION"
href="26_glo_f.htm#file"><i>file</i></a> may contain <a rel=
"DEFINITION" href="26_glo_s.htm#source_code"><i>source code</i></a>
or <a rel="DEFINITION" href=
"26_glo_c.htm#compiled_code"><i>compiled code</i></a>.</p>
<p>A <a rel="DEFINITION" href="26_glo_f.htm#file"><i>file</i></a>
containing <a rel="DEFINITION" href=
"26_glo_s.htm#source_code"><i>source code</i></a> is called a
<a rel="DEFINITION" href="26_glo_s.htm#source_file"><i>source
file</i></a>. <i>Loading</i> a <a rel="DEFINITION" href=
"26_glo_s.htm#source_file"><i>source file</i></a> is accomplished
essentially by sequentially <i>reading</i>[2] the <a rel=
"DEFINITION" href="26_glo_f.htm#form"><i>forms</i></a> in the file,
<i>evaluating</i> each immediately after it is <a rel="DEFINITION"
href="26_glo_r.htm#read"><i>read</i></a>.</p>
<p>A <a rel="DEFINITION" href="26_glo_f.htm#file"><i>file</i></a>
containing <a rel="DEFINITION" href=
"26_glo_c.htm#compiled_code"><i>compiled code</i></a> is called a
<a rel="DEFINITION" href="26_glo_c.htm#compiled_file"><i>compiled
file</i></a>. <i>Loading</i> a <a rel="DEFINITION" href=
"26_glo_c.htm#compiled_file"><i>compiled file</i></a> is similar to
<i>loading</i> a <a rel="DEFINITION" href=
"26_glo_s.htm#source_file"><i>source file</i></a>, except that the
<a rel="DEFINITION" href="26_glo_f.htm#file"><i>file</i></a> does
not contain text but rather an <a rel="DEFINITION" href=
"26_glo_i.htm#implementation-dependent"><i>implementation-dependent</i></a>
representation of pre-digested <a rel="DEFINITION" href=
"26_glo_e.htm#expression"><i>expressions</i></a> created by the
<a rel="DEFINITION" href=
"26_glo_c.htm#compiler"><i>compiler</i></a>. Often, a <a rel=
"DEFINITION" href="26_glo_c.htm#compiled_file"><i>compiled
file</i></a> can be <i>loaded</i> more quickly than a <a rel=
"DEFINITION" href="26_glo_s.htm#source_file"><i>source
file</i></a>. See <a rel="CHILD" href="03_b.htm">Section 3.2
(Compilation)</a>.</p>
<p>The way in which a <a rel="DEFINITION" href=
"26_glo_s.htm#source_file"><i>source file</i></a> is distinguished
from a <a rel="DEFINITION" href=
"26_glo_c.htm#compiled_file"><i>compiled file</i></a> is <a rel=
"DEFINITION" href=
"26_glo_i.htm#implementation-dependent"><i>implementation-dependent</i></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>24.1.2 Features</h2>
<p>A <a rel="DEFINITION" href=
"26_glo_f.htm#feature"><i>feature</i></a> is an aspect or attribute
of Common Lisp, of the <a rel="DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementation</i></a>, or of the
<a rel="DEFINITION" href=
"26_glo_e.htm#environment"><i>environment</i></a>. A <a rel=
"DEFINITION" href="26_glo_f.htm#feature"><i>feature</i></a> is
identified by a <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbol</i></a>.</p>
<p>A <a rel="DEFINITION" href=
"26_glo_f.htm#feature"><i>feature</i></a> is said to be <a rel=
"DEFINITION" href="26_glo_p.htm#present"><i>present</i></a> in a
<a rel="DEFINITION" href="26_glo_l.htm#lisp_image"><i>Lisp
image</i></a> if and only if the <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbol</i></a> naming it is an <a rel=
"DEFINITION" href="26_glo_e.htm#element"><i>element</i></a> of the
<a rel="DEFINITION" href="26_glo_l.htm#list"><i>list</i></a> held
by the <a rel="DEFINITION" href=
"26_glo_v.htm#variable"><i>variable</i></a> <a rel="DEFINITION"
href="v_featur.htm#STfeaturesST"><b>*features*</b></a>, which is
called the <a rel="DEFINITION" href=
"26_glo_f.htm#features_list"><i>features list</i></a>.</p>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>24.1.2.1 Feature Expressions</h2>
<p>Boolean combinations of <a rel="DEFINITION" href=
"26_glo_f.htm#feature"><i>features</i></a>, called <a rel=
"DEFINITION" href="26_glo_f.htm#feature_expression"><i>feature
expressions</i></a>, are used by the <tt>#+</tt> and <tt>#-</tt>
<a rel="DEFINITION" href="26_glo_r.htm#reader_macro"><i>reader
macros</i></a> in order to direct conditional <i>reading</i> of
<a rel="DEFINITION" href=
"26_glo_e.htm#expression"><i>expressions</i></a> by the <a rel=
"DEFINITION" href="26_glo_l.htm#lisp_reader"><i>Lisp
reader</i></a>.</p>
<p>The rules for interpreting a <a rel="DEFINITION" href=
"26_glo_f.htm#feature_expression"><i>feature expression</i></a> are
as follows:</p>
<dl>
<dt><a rel="DEFINITION" href=
"26_glo_f.htm#feature"><i>feature</i></a><br></dt>
<dd>If a <a rel="DEFINITION" href=
"26_glo_s.htm#symbol"><i>symbol</i></a> naming a <a rel=
"DEFINITION" href="26_glo_f.htm#feature"><i>feature</i></a> is used
as a <a rel="DEFINITION" href=
"26_glo_f.htm#feature_expression"><i>feature expression</i></a>,
the <a rel="DEFINITION" href=
"26_glo_f.htm#feature_expression"><i>feature expression</i></a>
succeeds if that <a rel="DEFINITION" href=
"26_glo_f.htm#feature"><i>feature</i></a> is <a rel="DEFINITION"
href="26_glo_p.htm#present"><i>present</i></a>; otherwise it
fails.</dd>
<dt><tt>(not</tt> <i>feature-conditional</i><tt>)</tt><br></dt>
<dd>A <a rel="DEFINITION" href="a_not.htm#not"><b>not</b></a>
<a rel="DEFINITION" href=
"26_glo_f.htm#feature_expression"><i>feature expression</i></a>
succeeds if its argument <i>feature-conditional</i> fails;
otherwise, it succeeds.</dd>
<dt><tt>(and</tt>
<i>feature-conditional</i><b>*</b><tt>)</tt><br></dt>
<dd>An <a rel="DEFINITION" href="a_and.htm#and"><b>and</b></a>
<a rel="DEFINITION" href=
"26_glo_f.htm#feature_expression"><i>feature expression</i></a>
succeeds if all of its argument <i>feature-conditionals</i>
succeed; otherwise, it fails.</dd>
<dt><tt>(or</tt>
<i>feature-conditional</i><b>*</b><tt>)</tt><br></dt>
<dd>An <a rel="DEFINITION" href="a_or.htm#or"><b>or</b></a> <a rel=
"DEFINITION" href="26_glo_f.htm#feature_expression"><i>feature
expression</i></a> succeeds if any of its argument
<i>feature-conditionals</i> succeed; otherwise, it fails.</dd>
</dl>
<!-- Common Lisp HyperSpec (TM), version 7.0 generated by Kent M. Pitman on Mon, 11-Apr-2005 2:31am EDT -->
<h2>24.1.2.1.1 Examples of Feature Expressions</h2>
For example, suppose that in <a rel="DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementation</i></a> A, the
<a rel="DEFINITION" href="26_glo_f.htm#feature"><i>features</i></a>
<tt>spice</tt> and <tt>perq</tt> are <a rel="DEFINITION" href=
"26_glo_p.htm#present"><i>present</i></a>, but the <a rel=
"DEFINITION" href="26_glo_f.htm#feature"><i>feature</i></a>
<tt>lispm</tt> is not <a rel="DEFINITION" href=
"26_glo_p.htm#present"><i>present</i></a>; in <a rel="DEFINITION"
href="26_glo_i.htm#implementation"><i>implementation</i></a> B, the
feature <tt>lispm</tt> is <a rel="DEFINITION" href=
"26_glo_p.htm#present"><i>present</i></a>, but the <a rel=
"DEFINITION" href="26_glo_f.htm#feature"><i>features</i></a>
<tt>spice</tt> and <tt>perq</tt> are not <a rel="DEFINITION" href=
"26_glo_p.htm#present"><i>present</i></a>; and in <a rel=
"DEFINITION" href=
"26_glo_i.htm#implementation"><i>implementation</i></a> C, none of
the features <tt>spice</tt>, <i>lispm</i>, or <tt>perq</tt> are
<a rel="DEFINITION" href="26_glo_p.htm#present"><i>present</i></a>.
The next figure shows some sample <a rel="DEFINITION" href=
"26_glo_e.htm#expression"><i>expressions</i></a>, and how they
would be <a rel="DEFINITION" href=
"26_glo_r.htm#read"><i>read</i></a>[2] in these <a rel="DEFINITION"
href="26_glo_i.htm#implementation"><i>implementations</i></a>.
<pre>
(cons #+spice "Spice" #-spice "Lispm" x)                             
                                                      
in <a rel="DEFINITION" href=
"26_glo_i.htm#implementation">implementation</a> A ...  (CONS "Spice" X)             
in <a rel="DEFINITION" href=
"26_glo_i.htm#implementation">implementation</a> B ...  (CONS "Lispm" X)             
in <a rel="DEFINITION" href=
"26_glo_i.htm#implementation">implementation</a> C ...  (CONS "Lispm" X)             
                                                      
(cons #+spice "Spice" #+LispM "Lispm" x)                             
                                                      
in <a rel="DEFINITION" href=
"26_glo_i.htm#implementation">implementation</a> A ...  (CONS "Spice" X)             
in <a rel="DEFINITION" href=
"26_glo_i.htm#implementation">implementation</a> B ...  (CONS "Lispm" X)             
in <a rel="DEFINITION" href=
"26_glo_i.htm#implementation">implementation</a> C ...  (CONS X)                     
                                                      
(setq a '(1 2 #+perq 43 #+(not perq) 27))                             
                                                      
in <a rel="DEFINITION" href=
"26_glo_i.htm#implementation">implementation</a> A ...  (SETQ A '(1 2 43))           
in <a rel="DEFINITION" href=
"26_glo_i.htm#implementation">implementation</a> B ...  (SETQ A '(1 2 27))           
in <a rel="DEFINITION" href=
"26_glo_i.htm#implementation">implementation</a> C ...  (SETQ A '(1 2 27))           
                                                      
(let ((a 3) #+(or spice lispm) (b 3)) (foo a))                             
                                                      
in <a rel="DEFINITION" href=
"26_glo_i.htm#implementation">implementation</a> A ...  (LET ((A 3) (B 3)) (FOO A))  
in <a rel="DEFINITION" href=
"26_glo_i.htm#implementation">implementation</a> B ...  (LET ((A 3) (B 3)) (FOO A))  
in <a rel="DEFINITION" href=
"26_glo_i.htm#implementation">implementation</a> C ...  (LET ((A 3)) (FOO A))        
                                                      
(cons #+Lispm "#+Spice" #+Spice "foo" #-(or Lispm Spice) 7 x)                             
                                                      
in <a rel="DEFINITION" href=
"26_glo_i.htm#implementation">implementation</a> A ...  (CONS "foo" X)               
in <a rel="DEFINITION" href=
"26_glo_i.htm#implementation">implementation</a> B ...  (CONS "#+Spice" X)           
in <a rel="DEFINITION" href=
"26_glo_i.htm#implementation">implementation</a> C ...  (CONS 7 X)                   
</pre>
</body>
</html>
