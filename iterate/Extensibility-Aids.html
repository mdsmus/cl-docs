<html lang="en">
<head>
<title>Extensibility Aids - The Iterate Manual</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The Iterate Manual">
<meta name="generator" content="makeinfo 4.8">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Rolling-Your-Own.html#Rolling-Your-Own" title="Rolling Your Own">
<link rel="prev" href="Writing-Drivers.html#Writing-Drivers" title="Writing Drivers">
<link rel="next" href="Subtleties.html#Subtleties" title="Subtleties">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1989 Jonathan Amsterdam <jba at ai.mit.edu>

Copyright (C) 2006 Lui's Oliveira
  <loliveira at common-lisp.net>


     The present manual is an adaptation of Jonathan Amsterdam's ``The
     Iterate Manual'', MIT AI Memo No. 1236. Said memo mentioned the
     following contract information:

     _This report describes research done at the Artificial
     Intelligence Laboratory of the Massachusetts Institute of
     Technology.  Support for the laboratory's artificial intelligence
     research is provided in part by the Advanced Research Projects
     Agency of the Department of Defense under Office of Naval Research
     contract N00014-85-K-0124._
-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
body {font-family: century schoolbook, serif;
      line-height: 1.3;
      padding-left: 5em; padding-right: 1em;
      padding-bottom: 1em; max-width: 60em;}
table {border-collapse: collapse}
span.roman { font-family: century schoolbook, serif; font-weight: normal; }
h1, h2, h3, h4, h5, h6 {font-family:  Helvetica, sans-serif}
/*h4 {padding-top: 0.75em;}*/
dfn {font-family: inherit; font-variant: italic; font-weight: bolder }
kbd {font-family: monospace; text-decoration: underline}
/*var {font-family: Helvetica, sans-serif; font-variant: slanted}*/
var {font-variant: slanted;}
td  {padding-right: 1em; padding-left: 1em}
sub {font-size: smaller}
.node {padding: 0; margin: 0}

.lisp { font-family: monospace;
        background-color: #F4F4F4; border: 1px solid #AAA;
        padding-top: 0.5em; padding-bottom: 0.5em; }

/* coloring */

.lisp-bg { background-color: #F4F4F4 ; color: black; }
.lisp-bg:hover { background-color: #F4F4F4 ; color: black; }

.symbol { font-weight: bold; color: #770055; background-color : transparent; border: 0px; margin: 0px;}
a.symbol:link { font-weight: bold; color : #229955; background-color : transparent; text-decoration: none; border: 0px; margin: 0px; }
a.symbol:active { font-weight: bold; color : #229955; background-color : transparent; text-decoration: none; border: 0px; margin: 0px; }
a.symbol:visited { font-weight: bold; color : #229955; background-color : transparent; text-decoration: none; border: 0px; margin: 0px; }
a.symbol:hover { font-weight: bold; color : #229955; background-color : transparent; text-decoration: none; border: 0px; margin: 0px; }
.special { font-weight: bold; color: #FF5000; background-color: inherit; }
.keyword { font-weight: bold; color: #770000; background-color: inherit; }
.comment { font-weight: normal; color: #007777; background-color: inherit; }
.string  { font-weight: bold; color: #777777; background-color: inherit; }
.character   { font-weight: bold; color: #0055AA; background-color: inherit; }
.syntaxerror { font-weight: bold; color: #FF0000; background-color: inherit; }
span.paren1 { font-weight: bold; color: #777777; }
span.paren1:hover { color: #777777; background-color: #BAFFFF; }
span.paren2 { color: #777777; }
span.paren2:hover { color: #777777; background-color: #FFCACA; }
span.paren3 { color: #777777; }
span.paren3:hover { color: #777777; background-color: #FFFFBA; }
span.paren4 { color: #777777; }
span.paren4:hover { color: #777777; background-color: #CACAFF; }
span.paren5 { color: #777777; }
span.paren5:hover { color: #777777; background-color: #CAFFCA; }
span.paren6 { color: #777777; }
span.paren6:hover { color: #777777; background-color: #FFBAFF; }
--></style>
</head>
<body>
<div class="node">
<p>
<a name="Extensibility-Aids"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="Subtleties.html#Subtleties">Subtleties</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Writing-Drivers.html#Writing-Drivers">Writing Drivers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Rolling-Your-Own.html#Rolling-Your-Own">Rolling Your Own</a>
<hr>
</div>

<h3 class="section">7.3 Extensibility Aids</h3>

<p>This section documents assorted features that may be of use in
extending <code>iterate</code>.

   <p><a name="index-g_t_002aresult_002dvar_002a-124"></a>

<div class="defun">
&mdash; Unexported Variable: <b>*result-var*</b><var><a name="index-g_t_002aresult_002dvar_002a-125"></a></var><br>
<blockquote>
<p>Holds the variable that is used to return a value as a result of the
<code>iterate</code> form.  You may examine this and use it in a <code>with</code>
clause, but you should not change it. 
</p></blockquote></div>

   <p><a name="index-defsynonym-126"></a>

<div class="defun">
&mdash; Macro: <b>defsynonym</b><var> syn word<a name="index-defsynonym-127"></a></var><br>
<blockquote>
<p>Makes <var>syn</var> a synonym for the existing <code>iterate</code> keyword <var>word</var>. 
Only the first word in each clause can have synonyms. 
</p></blockquote></div>

   <p><a name="index-defclause_002dsequence-128"></a>

<div class="defun">
&mdash; Macro: <b>defclause-sequence</b><var> element-name index-name </var><code>&amp;key</code><var> access-fn size-fn sequence-type element-type element-doc-string index-doc-string<a name="index-defclause_002dsequence-129"></a></var><br>
<blockquote>
<p>Provides a simple way to define sequence clauses.  Generates two
clauses, one for iterating over the sequence's elements, the other for
iterating over its indices.  The first symbol of both clauses will
have print-name <code>for</code>.  <var>element-name</var> and <var>index-name</var>
should be symbols.  <var>element-name</var> is the second keyword of the
element iterator (typically of the form
<code>in-</code><var>sequence-type</var>), and <var>index-name</var> is the second
keyword of the index-iterator (typically of the form
<code>index-of-</code><var>sequence-type</var>).  Either name may be <code>nil</code>,
in which case the corresponding clause is not defined.  If both
symbols are supplied, they should be in the same package.  The
<code>for</code> that begins the clauses will be in this package.

        <p><var>access-fn</var> is the function to be used to access elements of the
sequence in the element iterator.  The function should take two
arguments, a sequence and an index, and return the appropriate
element.  <var>size-fn</var> should denote a function of one argument, a
sequence, that returns its size.  Both <var>access-fn</var> and
<var>size-fn</var> are required for the element iterator, but only
<var>size-fn</var> is needed for the index iterator.

        <p>The <var>sequence-type</var> and <var>element-type</var> keywords are used to
suggest types for the variables used to hold the sequence and the
sequence elements, respectively.  The usual rules about <code>iterate</code>'s
treatment of variable type declarations apply (see <a href="Types-and-Declarations.html#Types-and-Declarations">Types and Declarations</a>).

        <p><var>element-doc-string</var> and <var>index-doc-string</var> are the
documentation strings, for use with <code>display-iterate-clauses</code>.

        <p>The generated element-iterator performs destructuring on the element
variable.

        <p>As an example, the above <code>for... in-whole-vector</code> example
could have been written:

     <pre class="lisp">       (defclause-sequence IN-WHOLE-VECTOR INDEX-OF-WHOLE-VECTOR
         :access-fn 'aref
         :size-fn (lambda (v) (array-dimension v 0))
         :sequence-type 'vector
         :element-type t
         :element-doc-string "Elements of a vector, disregarding fill-pointer"
         :index-doc-string  "Indices of vector, disregarding fill-pointer")
  </pre>
        </blockquote></div>

<!-- =================================================================== -->
</body></html>

