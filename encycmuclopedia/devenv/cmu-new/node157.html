<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.2//EN">
<!--Converted with LaTeX2HTML 96.1-h (September 30, 1996) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds -->
<HTML>
<HEAD>
<TITLE>Semi-Inline Expansion</TITLE>
<META NAME="description" CONTENT="Semi-Inline Expansion">
<META NAME="keywords" CONTENT="cmu-new">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<LINK REL=STYLESHEET HREF="cmu-new.css">
</HEAD>
<BODY LANG="EN" >
 <A NAME="tex2html2674" HREF="node158.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="next_motif.gif"></A> <A NAME="tex2html2672" HREF="node155.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="up_motif.gif"></A> <A NAME="tex2html2666" HREF="node156.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="previous_motif.gif"></A> <A NAME="tex2html2676" HREF="node1.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="contents_motif.gif"></A> <A NAME="tex2html2677" HREF="node267.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="index_motif.gif"></A> <BR>
<B> Next:</B> <A NAME="tex2html2675" HREF="node158.html">The Maybe-Inline Declaration</A>
<B>Up:</B> <A NAME="tex2html2673" HREF="node155.html">5.8 Inline Expansion</A>
<B> Previous:</B> <A NAME="tex2html2667" HREF="node156.html">5.8.1 Inline Expansion Recording</A>
<BR> <P>
<H2><A NAME="SECTION00682000000000000000">Semi-Inline Expansion</A></H2>
<P>
<A NAME="semiinline">&#160;</A>
<P>
Python supports <i>semi-inline</i> functions.  Semi-inline expansion
shares a single copy of a function across all the calls in a component
by converting the inline expansion into a local function
(see section&nbsp;<A HREF="node142.html#localcall">5.6</A>.)  This takes up less space when there are
multiple calls, but also provides less opportunity for context
dependent optimization.  When there is only one call, the result is
identical to normal inline expansion.  Semi-inline expansion is done
when the <tt>space</tt> optimization quality is <tt>0</tt>, and the
function has been declared <tt>extensions:maybe-inline</tt>.
<P>
This mechanism of inline expansion combined with local call also
allows recursive functions to be inline expanded.  If a recursive
function is declared <tt>inline</tt>, calls will actually be compiled
semi-inline.  Although recursive functions are often so complex that
there is little advantage to semi-inline expansion, it can still be
useful in the same sort of cases where normal inline expansion is
especially advantageous, i.e. functions where the calling context can
help a lot.
<P>
<BR> <HR>
<P><ADDRESS>
<I>Raymond Toy <BR>
Mon Sep 22 16:34:07 EDT 1997</I>
</ADDRESS>
</BODY>
</HTML>
