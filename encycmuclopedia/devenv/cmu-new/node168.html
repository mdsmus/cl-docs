<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.2//EN">
<!--Converted with LaTeX2HTML 96.1-h (September 30, 1996) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds -->
<HTML>
<HEAD>
<TITLE>5.11.1 Descriptors</TITLE>
<META NAME="description" CONTENT="5.11.1 Descriptors">
<META NAME="keywords" CONTENT="cmu-new">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<LINK REL=STYLESHEET HREF="cmu-new.css">
</HEAD>
<BODY LANG="EN" >
 <A NAME="tex2html2819" HREF="node169.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="next_motif.gif"></A> <A NAME="tex2html2817" HREF="node167.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="up_motif.gif"></A> <A NAME="tex2html2811" HREF="node167.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="previous_motif.gif"></A> <A NAME="tex2html2821" HREF="node1.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="contents_motif.gif"></A> <A NAME="tex2html2822" HREF="node267.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="index_motif.gif"></A> <BR>
<B> Next:</B> <A NAME="tex2html2820" HREF="node169.html">Non-Descriptor Representations</A>
<B>Up:</B> <A NAME="tex2html2818" HREF="node167.html">5.11 Numbers</A>
<B> Previous:</B> <A NAME="tex2html2812" HREF="node167.html">5.11 Numbers</A>
<BR> <P>
<H2><A NAME="SECTION006111000000000000000">5.11.1 Descriptors</A></H2>
<P>
<A NAME="10510">&#160;</A>
<A NAME="10511">&#160;</A>
<A NAME="10512">&#160;</A>
<A NAME="10513">&#160;</A>
<P>
Common Lisp's dynamic typing requires that it be possible to represent
any value with a fixed length object, known as a <i>descriptor</i>.
This fixed-length requirement is implicit in features such as:
<UL>
<LI> Data types (like <tt>simple-vector</tt>) that can contain any type
  of object, and that can be destructively modified to contain
  different objects (of possibly different types.)
<LI> Functions that can be called with any type of argument, and that
  can be redefined at run time.
</UL>
<P>
In order to save space, a descriptor is invariably represented as a
single word.  Objects that can be directly represented in the
descriptor itself are said to be <i>immediate</i>.  Descriptors for
objects larger than one word are in reality pointers to the memory
actually containing the object.
<P>
Representing objects using pointers has two major disadvantages:
<UL>
<LI> The memory pointed to must be allocated on the heap, so it must
  eventually be freed by the garbage collector.  Excessive heap
  allocation of objects (or ``consing'') is inefficient in several
  ways.  See section&nbsp;<A HREF="node181.html#consing">5.12.2</A>.
<LI> Representing an object in memory requires the compiler to emit
  additional instructions to read the actual value in from memory, and
  then to write the value back after operating on it.
</UL>
<P>
The introduction of garbage collection makes things even worse, since
the garbage collector must be able to determine whether a descriptor
is an immediate object or a pointer.  This requires that a few bits in
each descriptor be dedicated to the garbage collector.  The loss of a
few bits doesn't seem like much, but it has a major efficiency
implication--objects whose natural machine representation is a
full word (integers and single-floats) cannot have an immediate
representation.  So the compiler is forced to use an unnatural
immediate representation (such as <tt>fixnum</tt>) or a natural pointer
representation (with the attendant consing overhead.)
<P>
<HR><A NAME="tex2html2819" HREF="node169.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="next_motif.gif"></A> <A NAME="tex2html2817" HREF="node167.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="up_motif.gif"></A> <A NAME="tex2html2811" HREF="node167.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="previous_motif.gif"></A> <A NAME="tex2html2821" HREF="node1.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="contents_motif.gif"></A> <A NAME="tex2html2822" HREF="node267.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="index_motif.gif"></A> <BR>
<B> Next:</B> <A NAME="tex2html2820" HREF="node169.html">Non-Descriptor Representations</A>
<B>Up:</B> <A NAME="tex2html2818" HREF="node167.html">5.11 Numbers</A>
<B> Previous:</B> <A NAME="tex2html2812" HREF="node167.html">5.11 Numbers</A>
<P><ADDRESS>
<I>Raymond Toy <BR>
Mon Sep 22 16:34:07 EDT 1997</I>
</ADDRESS>
</BODY>
</HTML>
