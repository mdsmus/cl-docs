%!PS-Adobe-2.0
%%Creator: dvips(k) 5.86 Copyright 1999 Radical Eye Software
%%Title: design.dvi
%%Pages: 160
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips -o design.ps design.dvi
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 2001.03.29:1626
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/id 0 N/rw 0 N/rc 0 N/gp 0 N/cp 0 N/G 0 N/CharBuilder{save 3
1 roll S A/base get 2 index get S/BitMaps get S get/Cd X pop/ctr 0 N Cdx
0 Cx Cy Ch sub Cx Cw add Cy setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx
sub Cy .1 sub]/id Ci N/rw Cw 7 add 8 idiv string N/rc 0 N/gp 0 N/cp 0 N{
rc 0 ne{rc 1 sub/rc X rw}{G}ifelse}imagemask restore}B/G{{id gp get/gp
gp 1 add N A 18 mod S 18 idiv pl S get exec}loop}B/adv{cp add/cp X}B
/chg{rw cp id gp 4 index getinterval putinterval A gp add/gp X adv}B/nd{
/cp 0 N rw exit}B/lsh{rw cp 2 copy get A 0 eq{pop 1}{A 255 eq{pop 254}{
A A add 255 and S 1 and or}ifelse}ifelse put 1 adv}B/rsh{rw cp 2 copy
get A 0 eq{pop 128}{A 255 eq{pop 127}{A 2 idiv S 128 and or}ifelse}
ifelse put 1 adv}B/clr{rw cp 2 index string putinterval adv}B/set{rw cp
fillstr 0 4 index getinterval putinterval adv}B/fillstr 18 string 0 1 17
{2 copy 255 put pop}for N/pl[{adv 1 chg}{adv 1 chg nd}{1 add chg}{1 add
chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add adv}{/rc X nd}{
1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]A{bind pop}
forall N/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
TeXDict begin 39158280 55380996 1000 600 600 (design.dvi)
@start
%DVIPSBitmapFont: Fa cmr7 7 2
/Fa 2 52 df<13381378EA01F8121F12FE12E01200B3AB487EB512F8A215267BA521>49
D<13FF000313E0380F01F8381C007C0030137E003C133E007E133FA4123CC7123E147E14
7C5C495AEB07E03801FF8091C7FC380001E06D7E147C80143F801580A21238127C12FEA2
1500485B0078133E00705B6C5B381F01F03807FFC0C690C7FC19277DA521>51
D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fb cmmi10 10 9
/Fb 9 118 df<150C151E153EA2153C157CA2157815F8A215F01401A215E01403A215C0
1407A21580140FA215005CA2141E143EA2143C147CA2147814F8A25C1301A25C1303A249
5AA25C130FA291C7FC5BA2131E133EA2133C137CA2137813F8A25B1201A25B1203A25B12
07A25B120FA290C8FC5AA2121E123EA2123C127CA2127812F8A25A12601F537BBD2A>61
D<126012FCB4FCEA7FC0EA1FF0EA07FCEA01FF38007FC0EB1FF0EB07FCEB01FF9038007F
C0EC1FF0EC07FCEC01FF9138007FC0ED1FF0ED07FCED01FF9238007FC0EE1FF0EE07FCEE
01FF9338007F80EF1FC0A2EF7F80933801FF00EE07FCEE1FF0EE7FC04B48C7FCED07FCED
1FF0ED7FC04A48C8FCEC07FCEC1FF0EC7FC04948C9FCEB07FCEB1FF0EB7FC04848CAFCEA
07FCEA3FF0EA7FC048CBFC12FC1270323279AD41>I<EC3FC0903801FFF0903807E03C90
380F800E90383F0007017E131F49137F484813FF485A485A120F4913FE001F1438484813
00A2127F90C8FCA35A5AA45AA315031507007E1406150E003E143C003F14706C14E0390F
8007C03907C03F003801FFF838003FC020267DA424>99 D<EC3FC0903801FFF0903807E0
7890381F801C90387E001E49130E485A485A1207485A49131E001F141C153C484813F8EC
03E0007FEB3FC09038FFFE0014E090C8FC5A5AA7007E140315071506003E140E153C6C14
706C6C13E0EC07C03903E03F003801FFF838003FC020267DA427>101
D<EB0FC0EA03FF5AA2EA001F1480A2133FA21400A25BA2137EA213FEA25BA21201A25BA2
1203A25BA21207A25BA2120FA25BA2121FA25BA2123FA290C7FCA25AA2EA7E03A2EAFE07
130612FCA2130E130C131C1318EA7C38EA3C70EA1FE0EA0780123B7DB919>108
D<D803E0137F3A07F801FFE03A0E3C0781F03A1C3E1E00F826383F387F00305B4A137C00
705B00605BA200E090C712FC485A137EA20000140101FE5C5BA2150300015D5B15075E12
0349010F133016C0031F13700007ED80605B17E0EE00C0000F15014915801603EE070000
1FEC0F0E49EB07FC0007C7EA01F02C267EA432>110 D<EC1FC0ECFFF8903807E07E9038
0F801F90393F000F80017E14C0491307484814E0485A4848EB03F0120F5B121F48481307
A2127F90C7FCA2150F5A4815E0A2151F16C0A248EC3F8016005D157E007E5C4A5A003E49
5A003F495A6C495A6C6C48C7FC3807E07E3801FFF038003F8024267DA428>I<EB01C049
7E1307A4130F5CA3131F5CA3133F91C7FC007FB51280A2B6FCD8007EC7FCA313FE5BA312
015BA312035BA312075BA3120FEBC006A2140E001F130CEB801C141814385C146014E038
0F81C038078780D803FEC7FCEA00F819357EB31E>116 D<13F8D803FE1438D8070F147C
000E6D13FC121C1218003814011230D8701F5C12601503EAE03F00C001005B5BD8007E13
07A201FE5C5B150F1201495CA2151F120349EC80C0A2153F1681EE0180A2ED7F0303FF13
0012014A5B3A00F8079F0E90397C0E0F1C90393FFC07F8903907F001F02A267EA430>I
E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fc cmti10 10 42
/Fc 42 123 df<04FFEB03F003039038E00FFC923A0FC0F01F1E923A3F00783E0F923A7E
01F87C3FDB7C03EBFC7F03FC14F8DA01F813F905F1137EDC01E1133C913B03F00003F000
A314074B130760A3140F4B130F60A3010FB812C0A3903C001F80001F8000A3023F143F92
C790C7FCA44A5C027E147EA402FE14FE4A5CA413014A13015FA313034A13035FA313074A
495AA44948495AA44948495AA3001CD9038090C8FC007E90380FC03F013E143E00FE011F
5B133C017C5C3AF8780F01E0D878F0EB07C0273FE003FFC9FC390F8000FC404C82BA33>
11 D<EE3FFC4BB51280923907E007C092391F8001E0DB3F0013F0037E13034B1307A24A
5A18E04A48EB038094C7FCA314075DA4140F5DA3010FB7FCA25F903A001F80007EA217FE
023F5C92C7FCA216015F5C147E16035FA214FE4A13075FA30101140F5F4AECC1C0A2161F
1783010316805CA2EF870013074A5CEE0F8EEE079EEE03FC010FEC00F04A91C7FCA35C13
1FA2001C90CAFC127E5BEAFE3E133C137CEAF878EA78F0EA3FE0EA0F80344C82BA2F>I<
EE7FE0923903FFFC7E92380FC03E92381F000F033EEB3FFE4B137F03FC14FC5D1401173D
4A48EB01F8A21703A24A4814F0A21707A2020F15E05D170FA218C0010FB7FCA3903B001F
80001F80A2173F143F92C71300A25FA24A147E147E17FEA25F14FE4A1301A25FA2010114
035CEFF070A21607010316F04AECE0E0A3EFE1C013074A14C3933803E380EE01E7933800
FF004948143C94C7FCA3495AA3001C90CAFC127E133E12FE133C137CEAF878EA78F0EA3F
E0EA0F80374C82BA31>I<387FFFF8A2B5FCA214F0150579941E>45
D<120EEA3F80127F12FFA31300127E123C0909778819>I<EE01C01603A21607160FA216
1F83163FA2167F16FF16EF150116CFED038FA2ED070FA2150E151E151C1538A203707FA2
EDE007A2EC01C014031580EC0700A2140EA25CA25C027FB5FCA291B6FC9139E00007F849
481303A2495A130791C7FC5B130E5BA25B1378137013F0EA03F8486C4A7EB56C48B512F0
A3343C7BBB3E>65 D<DB03FE130E92393FFF801E92B5EAE03C913903FE01F0913A0FF000
787CDA3FC0EB3CFC4AC7EA1FF802FE140FEB03FC49481407494815F049481403495A5C49
C813E05B485A5B000317C0485AA2485A1880485A94C7FCA2485AA3127F5BA312FF90CBFC
A41738A217784816707E17F06C5E16015F16036C6C4A5A94C7FC001F150E6D141E000F5D
6D5C6C6C495A6C6CEB03C0D801FEEB0F8027007F807EC8FC6DB45A010F13E0010090C9FC
373D74BA3B>67 D<0103B612FEEFFFC018F0903B0007F8000FF84BEB03FCEF00FE020F15
7FF03F804B141F19C0021F150F19E05D1807143F19F05DA2147FA292C8FCA25C180F5CA2
130119E04A151FA2130319C04A153FA201071780187F4A1600A2010F16FEA24A4A5A6001
1F15034D5A4A5D4D5A013F4B5A173F4A4AC7FC17FC017FEC03F84C5A91C7EA1FC04949B4
5A007F90B548C8FCB712F016803C397CB83F>I<0107B712FEA3903A000FF000074B1300
187C021F153CA25DA2143FA25D1838147FA292C8FCEE03804A130718004A91C7FCA20101
5CA24A131E163E010314FE91B5FC5EA2903807F800167C4A1378A2130FA24A1370A2011F
14F0A24A90C8FCA2133FA25CA2137FA291CAFCA25BA25B487EB6FCA337397BB836>70
D<0103B512F8A390390007F8005DA2140FA25DA2141FA25DA2143FA25DA2147FA292C7FC
A25CA25CA21301A25CA21303A25CA21307A25CA2130FA25CA2131FA25CA2133FA25CA213
7FA291C8FC497EB6FCA25C25397CB820>73 D<902607FFF8923807FFF0614F13E0D9000F
EFF0004F5AA2021F167FF1EFC0141DDA1CFCEC01CF023C16DF9538039F800238ED071FA2
0278ED0E3F97C7FC0270151CA202F04B5AF0707E14E0037E14E0010117FE4D485A02C0EC
0380A20103ED0701610280140EA20107ED1C0305385B14006F137049160705E05B010EEC
01C0A2011E913803800F61011CEC0700A2013C020E131F4C5C1338ED1FB80178163F04F0
91C8FC01705CA201F04A5B187E00015DD807F816FEB500C09039007FFFFC151E150E4C39
7AB84A>77 D<902603FFF891B512E0A281D90007923807F8006F6E5A61020F5E81DA0E7F
5DA2021E6D1307033F92C7FC141C82DA3C1F5C70130EEC380FA202786D131E0307141C14
7082DAF003143C70133814E0150101016E1378030014705C8201036E13F0604A1480163F
010715C1041F5B91C7FC17E149EC0FE360010E15F31607011E15FF95C8FC011C80A2013C
805F1338160013785F01F8157CEA03FC267FFFE0143CB51538A243397CB83E>I<ED03FE
92383FFFC09238FC07F0913903E001F891390F80007C023FC77E027E8002F815804948EC
0FC0EB07E04948EC07E0131F4A15F049C81203137E01FE16F8485AA2485AA2485AA2120F
5B001F16075B123FA34848ED0FF0A448C9EA1FE0A3EF3FC0A21880177F18005F5F16015F
6C4B5A4C5AA24C5A6C4B5A6D4A5A001F93C7FC6D147E000F5D6C6CEB03F06C6C495A6C6C
EB0F806C6C013FC8FC90383F01FC90381FFFE0010190C9FC353D74BA40>I<0107B612F8
17FF1880903B000FF0003FE04BEB0FF0EF03F8141FEF01FC5DA2023F15FEA25DA2147FEF
03FC92C7FCA24A15F817074A15F0EF0FE01301EF1FC04AEC3F80EFFE0001034A5AEE0FF0
91B612C04CC7FCD907F8C9FCA25CA2130FA25CA2131FA25CA2133FA25CA2137FA291CAFC
A25BA25B1201B512FCA337397BB838>I<0103B612F017FEEFFF80903B0007F8003FC04B
EB0FF01707020FEC03F8EF01FC5DA2021F15FEA25DA2143FEF03FC5DA2027FEC07F818F0
92C7120F18E04AEC1FC0EF3F004A14FEEE01F80101EC0FE091B6128004FCC7FC9138FC00
3F0103EC0F80834A6D7E8301071403A25C83010F14075F5CA2011F140FA25CA2133F161F
4AECE007A2017F160F180E91C7FC49020F131C007F01FE153CB5913807F078040313F0CA
EAFFE0EF3F80383B7CB83D>82 D<003FB539800FFFFEA326007F80C7EA7F8091C8EA3F00
173E49153CA2491538A20001167817705BA2000316F05F5BA2000715015F5BA2000F1503
5F5BA2001F150794C7FC5BA2003F5D160E5BA2007F151E161C90C8FCA2163C4815385A16
781670A216F04B5A5E1503007E4A5A4BC8FC150E6C143E6C6C5B15F0390FC003E03907F0
1FC00001B5C9FC38007FFCEB1FE0373B70B83E>85 D<B500F8903803FFFEA218FCD803FE
C8EA7FC049ED3F000001163E173C17385FA25F16015F6D4A5AA200004BC7FC5E160E5EA2
5EA25E5EA26D495A7F4B5A150793C8FC150EA25D153C15385D1480013F5B14815DEC8380
A20287C9FCA2148E149E149C14F8A26D5AA25C5CA25CA291CAFC131EA2373B6FB83E>I<
14F8EB07FE90381F871C90383E03FE137CEBF801120148486C5A485A120FEBC001001F5C
A2EA3F801403007F5C1300A21407485C5AA2140F5D48ECC1C0A2141F15831680143F1587
007C017F1300ECFF076C485B9038038F8E391F0F079E3907FE03FC3901F000F0222677A4
2A>97 D<133FEA1FFFA3C67E137EA313FE5BA312015BA312035BA31207EBE0F8EBE7FE90
38EF0F80390FFC07C013F89038F003E013E0D81FC013F0A21380A2123F1300A214075A12
7EA2140F12FE4814E0A2141F15C05AEC3F80A215005C147E5C387801F8007C5B383C03E0
383E07C0381E1F80D80FFEC7FCEA01F01C3B77B926>I<147F903803FFC090380FC1E090
381F0070017E13784913383901F801F83803F003120713E0120FD81FC013F091C7FC485A
A2127F90C8FCA35A5AA45AA3153015381578007C14F0007EEB01E0003EEB03C0EC0F806C
EB3E00380F81F83803FFE0C690C7FC1D2677A426>I<ED01F815FFA3150316F0A21507A2
16E0A2150FA216C0A2151FA21680A2153FA202F81300EB07FE90381F877F90383E03FF01
7C5BEBF80112013803F00048485B120FEBC001121F5DEA3F801403127F01005BA214075A
485CA2140FA248ECC1C0A2141F15C3ED8380143F1587007C017F1300ECFF076C485B9038
038F8E391F0F079E3907FE03FC3901F000F0253B77B92A>I<147F903803FFC090380FC1
E090383F00F0017E13785B485A485A485A120F4913F8001F14F0383F8001EC07E0EC1F80
397F81FF00EBFFF891C7FC90C8FC5A5AA55AA21530007C14381578007E14F0003EEB01E0
EC03C06CEB0F806CEB3E00380781F83803FFE0C690C7FC1D2677A426>I<ED07C0ED1FF0
ED3E38ED7C3CEDF8FC15F9140115F1020313F8EDF0F0160014075DA4140F5DA4141F5D01
0FB512C05B16809039003F800092C7FCA45C147EA414FE5CA413015CA413035CA413075C
A4130F5CA3131F5CA391C8FC5B121CEA7E3EA2EAFE3C137C1378EAF8F01278EA3FC0EA0F
80264C82BA19>I<EC07C0EC3FF09138FC38E0903901F01FF0EB03E0903807C00FEB0F80
011F1307D93F0013E05B017E130F13FE4914C01201151F1203491480A2153F1207491400
A25DA249137EA215FEA25D00031301140314076C6C485A0000131FEB787BEB3FF390380F
C3F0EB00031407A25DA2140F5D121C007E131F5D00FE49C7FC147E5C387801F8387C07E0
381FFF80D803FEC8FC24367CA426>I<EB03F0EA01FFA3EA00075CA3130F5CA3131F5CA3
133F91C8FCA35B90387E07F0EC1FFCEC783E9038FFE01F02C01380EC800F1400485A16C0
5B49EB1F8012035BA2153F000715005BA25D000F147E5B15FE5D121FD98001131C15F816
3C003F01031338010013F0A216704814E0007E15F016E0EDE1C000FE903801E380489038
00FF000038143C263B7BB92A>I<EB01C0EB07E014F0130F14E01307EB038090C7FCAB13
F0EA03FCEA071EEA0E1F121CA212385B1270A25BEAF07E12E013FEC65AA212015B1203A2
5B12075BA2000F13E013C013C1001F13C01381A2EB83801303EB0700A2130E6C5AEA07F8
EA01E0143879B619>I<150E153F157FA3157E151C1500ABEC1F80EC7FC0ECF1F0EB01C0
90380380F813071401130F130E131EEB1C03133C013813F0A2EB0007A215E0A2140FA215
C0A2141FA21580A2143FA21500A25CA2147EA214FEA25CA21301A25CA213035C121C387E
07E0A238FE0FC05C49C7FCEAF83EEA787CEA3FF0EA0FC0204883B619>I<EB03F0EA01FF
A3EA00075CA3130F5CA3131F5CA3133F91C8FCA35B017EEB0F80ED3FE015F09039FE01C1
F09038FC0387EC0707140E0001011C13E0EBF83891383003800270C7FC00035BEBF1C0EB
F38001FFC8FCEA07FC7FEBFFC0EBE7F8380FE1FCEBC07E147F80001F809039801F81C0A2
1583003F013F138001001303A21507481500007E133EEC1E0E151E00FE6D5A48EB07F800
38EB01E0243B7BB926>I<EB0FC0EA07FFA3EA001F1480A2133FA21400A25BA2137EA213
FEA25BA21201A25BA21203A25BA21207A25BA2120FA25BA2121FA25BA2123FA290C7FCA2
5AA2EA7E0EA212FE131EEAFC1CA2133C133812F81378EA7870EA7CE0121FEA0F80123B79
B915>I<D801E001FEEB07F03C07F803FF801FFC3C0E3C0F07C0783E3C1E3E3C03E1E01F
261C1F78D9F3C013803C383FF001F7800F02E01400007801C013FE007018C002805B4A48
48EB1F80EAF07FD8E07E5CA200000207143F01FE1700495CA2030F5C0001177E495C18FE
031F5C120349DA8001131C18F8033F153C00070403133849020013F0A24B1570000F17E0
49017E15F019E003FEECE1C0001FEE01E34949903800FF000007C70038143C3E2679A444
>I<D801E013FE3A07F803FF803A0E3C0F07C03A1E3E3C03E0261C1F787F39383FF00114
E0007813C000708114804A485AEAF07FEAE07EA20000140701FE5C5BA2150F00015D5B15
1F5E12034990383F8380160316070007027F130049137EA2160E000F147C49141E161C5E
001FEC3C7849EB1FE00007C7EA0780292679A42F>I<147F903803FFC090380FC1F09038
1F00F8017E137C5B4848137E4848133E0007143F5B120F485AA2485A157F127F90C7FCA2
15FF5A4814FEA2140115FC5AEC03F8A2EC07F015E0140F007C14C0007EEB1F80003EEB3F
00147E6C13F8380F83F03803FFC0C648C7FC202677A42A>I<9039078007C090391FE03F
F090393CF0787C903938F8E03E9038787FC00170497EECFF00D9F0FE148013E05CEA01E1
13C15CA2D80003143FA25CA20107147FA24A1400A2010F5C5E5C4B5A131F5EEC80035E01
3F495A6E485A5E6E48C7FC017F133EEC70FC90387E3FF0EC0F8001FEC9FCA25BA21201A2
5BA21203A25B1207B512C0A3293580A42A>I<3903C003F0390FF01FFC391E783C0F381C
7C703A3C3EE03F8038383FC0EB7F800078150000701300151CD8F07E90C7FCEAE0FE5BA2
120012015BA312035BA312075BA3120F5BA3121F5BA3123F90C9FC120E212679A423>
114 D<14FE903807FF8090380F83C090383E00E04913F00178137001F813F00001130313
F0A215E00003EB01C06DC7FC7FEBFFC06C13F814FE6C7F6D13807F010F13C01300143F14
1F140F123E127E00FE1480A348EB1F0012E06C133E00705B6C5B381E03E06CB45AD801FE
C7FC1C267AA422>I<EB0380EB07C0130FA4131F1480A3133F1400A35B137E007FB5FCA2
B6FC3800FC00A312015BA312035BA312075BA3120F5BA3121FEB801CA2143C003F1338EB
0078147014F014E0EB01C0EA3E03381F0780380F0F00EA07FCEA01F0183579B31C>I<13
F8D803FEEB01C0D8078FEB03E0390E0F8007121E121C0038140F131F007815C01270013F
131F00F0130000E015805BD8007E133FA201FE14005B5D120149137EA215FE120349EBFC
0EA20201131E161C15F813E0163CD9F003133814070001ECF07091381EF8F03A00F83C78
E090393FF03FC090390FC00F00272679A42D>I<01F0130ED803FC133FD8071EEB7F80EA
0E1F121C123C0038143F49131F0070140FA25BD8F07E140000E08013FEC6485B150E1201
5B151E0003141C5BA2153C000714385B5DA35DA24A5A140300035C6D48C7FC0001130E38
00F83CEB7FF8EB0FC0212679A426>I<01F01507D803FC903903801F80D8071E903907C0
3FC0D80E1F130F121C123C0038021F131F49EC800F00701607A249133FD8F07E168000E0
ED000313FEC64849130718000001147E5B03FE5B0003160E495BA2171E00070101141C01
E05B173C1738A217781770020314F05F0003010713016D486C485A000190391E7C078028
00FC3C3E0FC7FC90393FF81FFE90390FE003F0322679A437>I<903907E007C090391FF8
1FF89039787C383C9038F03E703A01E01EE0FE3803C01F018013C0D8070014FC48148000
0E1570023F1300001E91C7FC121CA2C75AA2147EA214FEA25CA21301A24A1370A2010314
F016E0001C5B007E1401010714C000FEEC0380010F1307010EEB0F0039781CF81E903838
7C3C393FF03FF03907C00FC027267CA427>I<13F0D803FCEB01C0D8071EEB03E0D80E1F
1307121C123C0038140F4914C01270A249131FD8F07E148012E013FEC648133F16001201
5B5D0003147E5BA215FE00075C5BA214015DA314035D14070003130FEBF01F3901F87FE0
38007FF7EB1FC7EB000F5DA2141F003F5C48133F92C7FC147E147C007E13FC387001F8EB
03E06C485A383C1F80D80FFEC8FCEA03F0233679A428>I<903903C0038090380FF007D9
1FF81300496C5A017F130E9038FFFE1E9038F83FFC3901F007F849C65A495B1401C7485A
4A5A4AC7FC141E5C5C5C495A495A495A49C8FC131E5B49131C5B4848133C484813384913
78000714F8390FF801F0391FFF07E0383E1FFFD83C0F5B00785CD8700790C7FC38F003FC
38E000F021267BA422>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fd cmtt10 10 83
/Fd 83 126 df<003C131E007F137F481480A66C1400A6007E7FA6003E133EA3003C131E
001C131C191977B32C>34 D<010F133C90381F807EA8013F13FE4A5AA4007FB612F0B712
F8A4003F15F03A007E01F800A5EBFE0301FC5BA6003FB612F0B712F8A46C15F03A01F807
E000A30003130F01F05BA86C486C5A25337DB22C>I<D807801307D81FE0EB0F80151F48
7E486C133F1600007C5CD8FCFC137EEAF87C15FE5D14015DA21403D8FCFC5BEA7CF8007F
13075D383FF00FD81FE05BA23807801FC75B143F92C7FCA25C147E14FE5CA213015CA213
035C13075CA2130F5C131FEC800FED3FC0013FEB7FE0140049EBFFF0017E13F9A2D9FE01
13F801FC13F0A2120113F8120313F015F90007010013F05B000F14FF49EB7FE0A20007EC
3FC06C48EB0F0025417DB92C>37 D<EB0FC0EB3FE0497E497E80EA01F8EBF07C147E0003
133E13E0A5147E147C9138FC3FF89039F0F87FFCEA01F1EBF3F001F7EB3FF89138E01F00
9038FFC03F6CEB803EA2EC007E49137C485A486C13FC00075CEBFF01D80FDF5B381F9F81
383F8F8390380FC3E0387E07E75D38FC03F7EB01FF5D6D1410ED007C80A26CEBFF80D87E
0113C0D87F03EBE0FC3A3F87F7F1F89038FFE3FF6C01C113F06C13806C9038007FC0D801
FCEB1F8026357EB32C>I<EA0F80EA1FC0EA3FE013F0A213F8A2121F120F1200A4120113
F0A2120313E01207EA0FC0121FEA3F80EA7F0012FE5A5A12700D1B71B22C>I<143814FC
13011303EB07F8EB0FF0EB1FC0EB3F80EB7F0013FE485A485A5B12075B120F5B485AA212
3F90C7FCA25A127EA312FE5AAC7E127EA3127F7EA27F121FA26C7E7F12077F12037F6C7E
6C7E137FEB3F80EB1FC0EB0FF0EB07F8EB03FC130113001438164272B92C>I<127012FC
7E7E6C7E6C7EEA0FE06C7E6C7E6C7E6C7E137F7F1480131F14C0130FEB07E0A214F01303
A214F81301A314FC1300AC130114F8A3130314F0A2130714E0A2EB0FC0131F1480133F14
005B13FE485A485A485A485AEA3FC0485A48C7FC5A5A1270164279B92C>I<EB0380497E
A60020140800F8143E00FE14FE00FF13C1EBC7C7EBE7CF003FB512F8000F14E000031480
6C140038007FFCA248B5FC481480000F14E0003F14F839FFE7CFFEEBC7C7EB07C100FE13
C000F8143E0020140800001400A66D5A1F247AAA2C>I<147814FCAF007FB612F0B712F8
A46C15F0C700FCC7FCAF147825267DAB2C>I<EA0F80EA1FE0EA3FF0EA7FF8A213FCA312
3F121F120F120013F8A21201EA03F01207EA1FE0EA7FC0EAFF80130012FC12700E17718A
2C>I<007FB6FCB71280A46C150021067B9B2C>I<121FEA3F80EA7FC0EAFFE0A5EA7FC0EA
3F80EA1F000B0B708A2C>I<1507ED0F80151FA2153F16005D157E15FE5D14015D14035D
A214075D140F5D141F5D143F92C7FC5C147E14FE5CA213015C13035C13075C130F5C131F
5CA2133F91C8FC5B137E13FE5B12015B12035B12075BA2120F5B121F5B123F90C9FC5A12
7E12FE5AA25A127821417BB92C>I<EB03F8EB0FFE90383FFF80497F90B57E3901FE0FF0
3903F803F848486C7EEBE0004848137EA248487FA248C7EA1F80A2003E140F007E15C0A3
007C140700FC15E0AC6C140F007E15C0A46CEC1F80A36C6CEB3F00A26C6C137E6D13FE00
075CEBF0016C6C485A3901FE0FF06CB55A6D5B6D5BD90FFEC7FCEB03F823357CB32C>I<
1307497EA2131FA2133F137F13FF5A1207127FB5FC13DF139FEA7C1F1200B3AE007FB512
E0B612F0A36C14E01C3477B32C>I<EB0FF890387FFF8048B512E00007804814FC391FF8
0FFE393FE001FF903880007F48C7EA3F80007E141F00FE15C0150F6C15E01507A3127E12
3CC8FCA2150F16C0151F1680153F16005D15FE4A5A14034A5A4A5A4A5A4A5AECFF804948
C7FC495A495A495AEB3FE0EB7F8049C8FC485A4848EB03C04848EB07E0EA1FE0485A48B6
FCB7FCA36C15C023347CB32C>I<EB0FFC90387FFF8048B512E0000714F84880391FF807
FEEBC0004848137F6D7F1680151FA26C5A6CC7FCC8FC153F16005D15FE14014A5AEC1FF8
90381FFFF0495BA215F86D7F90380007FEEC00FF81ED3F80ED1FC0150FA216E01507A212
3C127EB4FC150F16C0A248141F007FEC3F806DEB7F006C6C5B391FF807FE6CB55A6C5C6C
14E0C66C1380D90FFCC7FC23357CB32C>I<EC07F04A7E141F143FA2147EA214FCEB01F8
A2EB03F0EB07E0A2EB0FC0EB1F80A2EB3F00137EA25B485AA2485A5B1207485AA2485A48
C7FCA2127E5AB712FC16FEA36C15FCC8EAF800AA91387FFFF091B512F8A36E13F027347E
B32C>I<000FB512FE4880A35D0180C8FCADEB83FE90389FFF8090B512E015F8819038FE
03FE9038F000FF01C07F49EB3F8090C7121F6C15C0C8120FA2ED07E0A4123C127EB4FC15
0F16C0A248141F007EEC3F80007FEC7F006C6C5B6D485A391FF80FFC6CB55A6C5C000114
C06C6C90C7FCEB0FF823347CB22C>I<EC3FC0903801FFF801077F011F7F497F90387FE0
7F9039FF003F804848137FEA03F8485A5B000FEC3F004848131E4990C7FC123F90C9FCA2
5A127EEB03FE90381FFF80D8FC7F13E000FDB57EB67E9038FE07FC9038F001FE9038C000
7F49EB3F8090C7121F16C048140F16E01507A3127EA47E150F6D14C0001F141F6D148000
0F143F6DEB7F003907F801FE3903FE07FC6CB55A6C5C6D5B011F1380D907FCC7FC23357C
B32C>I<1278B712C016E0A316C000FCC7EA3F80ED7F0015FE00785CC712014A5A4A5A5D
140F5D4A5A143F92C7FC5C147E14FE5C13015CA2495AA213075CA3495AA4495AA5133F91
C8FCAA131E23357CB32C>I<EB07FC90383FFF8090B512E0000314F84880390FFC07FE39
1FF001FF9038C0007F4848EB3F8090C7121F4815C0007E140FA56CEC1F80A26C6CEB3F00
6D5B390FF001FE3903FC07F86CB55A6C6C13C0D907FCC7FC90387FFFC048B512F03903FC
07F8390FF001FE391FC0007F497F48C7EA1F80007EEC0FC0A248EC07E0A7007EEC0FC0A2
007F141F6C6CEB3F806C6CEB7F009038F001FF390FFC07FE6CB55A6C5CC614E0013F1380
D907FCC7FC23357CB32C>I<EB07FCEB3FFF90B512C0488048803907FC07F8390FF001FC
48486C7ED83F80137E157F48C77E007EEC1F8012FE5AED0FC0A416E0A37E127E007F141F
7E6D133F6C6C137F390FF001FF3807FC0F6CB6FC6C14F76C14C7013F130FD90FF813C090
C7FCA2151F1680153F1600000F5C486C137E486C13FE4A5A4A5A14079038801FF0391FE0
7FE090B55A6C91C7FC6C5B000113F838007FC023357CB32C>I<121FEA3F80EA7FC0EAFF
E0A5EA7FC0EA3F80EA1F00C7FCAE121FEA3F80EA7FC0EAFFE0A5EA7FC0EA3F80EA1F000B
2470A32C>I<EA0F80EA1FC0EA3FE0EA7FF0A5EA3FE0EA1FC0EA0F80C7FCAEEA0F80EA1F
C0EA3FE0127F13F0A4123F121F120F1201120313E01207EA0FC0A2EA3F80EA7F005A5A12
F812700C3071A32C>I<1507ED1F80153F15FF14034A1300EC1FFC4A5AECFFE049138001
0790C7FCEB0FFCEB3FF8EB7FE048485A4890C8FCEA0FFEEA1FF8EA7FF0EAFFC05BA27FEA
7FF0EA1FF8EA0FFEEA03FF6C13C06C6C7EEB3FF8EB0FFC6DB4FC01017F6D13E0EC3FF86E
7EEC07FF6E13801400153F151FED0700212A7BAD2C>I<007FB612F0B712F8A4003F15F0
CAFCA8003FB612F0B712F8A46C15F025147DA22C>I<127012FC7E6C7E13E06C7EEA1FFC
6C7E3803FF80C67FEB7FF0EB1FF8EB0FFEEB03FF6D13C06D6C7EEC3FF8EC0FFC6EB4FC02
01138080A25C02071300EC0FFCEC3FF8EC7FE049485A4990C7FCEB0FFEEB1FF8EB7FF0EB
FFC000035BD80FFEC8FC485AEA7FF0485A138048C9FC5A1270212A7BAD2C>I<14FE497E
A4497FA214EFA2130781A214C7A2010F7FA314C390381F83F0A590383F01F8A490387E00
FCA549137E90B512FEA34880A29038F8003FA34848EB1F80A4000715C049130FD87FFEEB
FFFC6D5AB514FE6C15FC497E27347EB32C>65 D<007FB512E015F8B612FE6C8016C03903
F0003FED0FE0ED07F01503A2ED01F8A6ED03F0A21507ED0FE0ED1FC0EDFF8090B612005D
5D15FF16C09039F0001FE0ED07F0ED03F81501ED00FCA216FE167EA616FE16FC1501ED03
F8150FED3FF0007FB612E016C0B712806CECFE0015F027337FB22C>I<02FF13700107EB
E0F84913F9013F13FD4913FFEBFF813901FE007F4848131FD807F0130F1507485A491303
485A150148C7FCA25A007EEC00F01600A212FE5AAB7E127EA3007F15F06CEC01F8A26C7E
A26C6C13036D14F06C6C130716E0D803FC131F6C6CEB3FC03A00FF81FF806DB512006D5B
010F5B6D13F00100138025357DB32C>I<007FB5FCB612C015F0816C803907E003FEEC00
FFED7F80153FED1FC0ED0FE0A2150716F0150316F81501A4ED00FCACED01F8A3150316F0
A2150716E0150FED1FC0153FED7F80EDFF00EC03FE007FB55AB65A5D15C06C91C7FC2633
7EB22C>I<007FB612F0B712F8A37E3903F00001A7ED00F01600A4EC01E04A7EA490B5FC
A5EBF003A46E5A91C8FCA5163C167EA8007FB612FEB7FCA36C15FC27337EB22C>I<007F
B612F8B712FCA37ED803F0C7FCA716781600A515F04A7EA490B5FCA5EBF001A46E5A92C7
FCAD387FFFE0B5FC805C7E26337EB22C>I<903901FC038090390FFF87C04913EF017F13
FF90B6FC4813073803FC01497E4848137F4848133F49131F121F5B003F140F90C7FCA212
7EED078092C7FCA212FE5AA8913803FFF84A13FCA27E007E6D13F89138000FC0A36C141F
A27F121F6D133F120F6D137F6C7E6C6C13FF6D5A3801FF076C90B5FC6D13EF011F13CF6D
EB0780D901FCC7FC26357DB32C>I<D87FFEEBFFFCB54813FEA36C486C13FCD807E0EB0F
C0B190B6FCA59038E0000FB3D87FFEEBFFFCB54813FEA36C486C13FC27337EB22C>I<00
7FB512F8B612FCA36C14F839000FC000B3B3A5007FB512F8B612FCA36C14F81E3379B22C
>I<D87FFCEB7FF8486CEBFFFCA36C48EB7FF8D807C0EB1F80153FED7F00157E5D4A5A14
034A5A5D4A5A4A5A143F4AC7FC147E5CEBC1F813C3EBC7FCA2EBCFFEEBDFBEEBFFBF141F
01FE7F496C7E13F86E7EEBF00301E07FEBC001816E7EA2157E153E153F811680ED0FC0A2
ED07E0D87FFCEB1FFC486CEB3FFEA36C48EB1FFC27337EB22C>75
D<387FFFE0B57EA36C5BD803F0C8FCB3AE16F0ED01F8A8007FB6FCB7FCA36C15F025337D
B22C>I<D87FE0EB0FFC486CEB1FFEA26D133F007F15FC000F15E001BC137BA4019E13F3
A3EB9F01A2018F13E3A21483A2018713C314C7A201831383A214EFA201811303A214FFEB
80FEA3147C14381400ACD87FF0EB1FFC486CEB3FFEA36C48EB1FFC27337EB22C>I<D87F
F0EB7FFC486CEBFFFEA27F007FEC7FFCD807FEEB07C013DEA213DF13CFA2148013C714C0
A213C314E0A213C114F0A213C014F8A2147CA3143EA2141E141FA2140F1587A2140715C7
A2140315E71401A215F71400A215FFD87FFC137F487E153FA26C48EB1F8027337EB22C>
I<EB7FFF0003B512E0000F14F848804880EBE003EB800048C7127FA2007E80A300FE1580
48141FB3A86C143FA2007E1500A3007F5CA26C6C13FEEBF00790B5FC6C5C6C5C000314E0
C66C90C7FC21357BB32C>I<007FB512C0B612F88115FF6C15802603F00013C0153FED0F
E0ED07F0A2150316F81501A6150316F01507A2ED0FE0ED3FC015FF90B61280160015FC5D
15C001F0C8FCB0387FFF80B57EA36C5B25337EB22C>I<387FFFFCB67E15E015F86C8039
07E007FE1401EC007F6F7E151FA26F7EA64B5AA2153F4BC7FCEC01FE140790B55A5D15E0
81819038E007FCEC01FE1400157F81A8160FEE1F80A5D87FFEEB1FBFB5ECFF00815E6C48
6D5AC8EA01F029347EB22C>82 D<90381FF80790B5EA0F804814CF000714FF5A381FF01F
383FC003497E48C7FC007E147F00FE143F5A151FA46CEC0F00007E91C7FC127F7FEA3FE0
EA1FFCEBFFC06C13FC0003EBFFC06C14F06C6C7F01077F9038007FFEEC07FF0200138015
3FED1FC0A2ED0FE0A20078140712FCA56CEC0FC0A26CEC1F806D133F01E0EB7F009038FE
01FF90B55A5D00F914F0D8F83F13C0D8700790C7FC23357CB32C>I<007FB612FCB712FE
A43AFC007E007EA70078153CC71400B3AF90383FFFFCA2497F6D5BA227337EB22C>I<3B
7FFF803FFFC0B56C4813E0A36C496C13C03B03F00001F800B3AF6D130300015DA26D1307
00005D6D130F017F495A6D6C485AECE0FF6DB5C7FC6D5B010313F86D5B9038003F802B34
80B22C>I<D87FFCEB7FFC486CEBFFFEA36C48EB7FFCD80FC0EB07E06D130F000715C0A3
6D131F00031580A36D133F00011500A36D5B0000147EA4017E5BA46D485AA490381F83F0
A4010F5B14C7A301075BA214EFA201035BA214FFA26D90C7FCA46D5A27347EB22C>I<D8
7FF0EB07FF486C491380A36C486D1300001FC8127CA46C6C5CA76C6C495AA4143E147FA3
3A03E0FF83E0A214F7A201E113C3A3000101E35BA201F113C701F313E7A314C1A200005D
A201F713F71480A301FF13FF017F91C7FC4A7EA4013E133E29347FB22C>I<3A3FFF03FF
E0484913F0148714076C6D13E03A01F800FE007F0000495A13FE017E5BEB7F03013F5B14
87011F5B14CF010F5B14FF6D5BA26D90C7FCA26D5AA26D5AA2497EA2497EA2497F81EB0F
CF81EB1FC7EC87F0EB3F83EC03F8EB7F01017E7FEBFE00497F0001147E49137F00038049
1480151FD87FFEEBFFFC6D5AB514FE6C15FC497E27337EB22C>I<D87FFCEB7FFC486CEB
FFFEA36C48EB7FFCD807F0EB0FC0151F000315806D133F12016DEB7F0012006D137E017E
13FE017F5BEB3F01EC81F8131FEC83F0EB0FC314C7903807E7E0A201035B14EF6DB45AA2
92C7FC7F5C147EB0903807FFE0497FA36D5B27337EB22C>I<003FB612C04815E0A4007E
C7EA1FC0ED3F80A2ED7F00157E15FE4A5A003C5CC712034A5AA24A5A4A5AA24A5A4AC7FC
A214FE495AA2495A495AA2495A495AA2495A49C8FCA213FE485AA24848EB03C049EB07E0
1207485A5B121F485AA248C7FCB7FCA46C15C023337CB22C>I<127812F87EA27E127E12
7F7E7F121F7F120F7F1207A27F12037F12017F12007F137E137F7F80131FA280130F8013
07801303801301801300A280147E147F8081141F81140F811407811403A2811401811400
81157E157F811680151FA2150FED070021417BB92C>92 D<007FB6FCB71280A46C150021
067B7D2C>95 D<3801FFF0000713FE001F6D7E15E048809038C01FF81407EC01FC381F80
000006C77EC8127EA3ECFFFE131F90B5FC1203120F48EB807E383FF800EA7FC090C7FC12
FE5AA47E007F14FEEB8003383FE01F6CB612FC6C15FE6C14BF0001EBFE1F3A003FF007FC
27247CA32C>97 D<EA7FF0487EA3127F1201AAEC1FE0ECFFF801FB13FE90B6FC16809138
F07FC09138801FE091380007F049EB03F85BED01FC491300A216FE167EA816FE6D14FCA2
ED01F86D13036DEB07F0150F9138801FE09138E07FC091B51280160001FB5B01F813F839
00F03FC027337FB22C>I<903803FFE0011F13F8017F13FE48B5FC48804848C6FCEA0FF0
485A49137E4848131890C9FC5A127EA25AA8127EA2127F6C140F6DEB1F806C7E6D133F6C
6CEB7F003907FE03FF6CB55A6C5C6C6C5B011F13E0010390C7FC21247AA32C>I<EC0FFE
4A7EA380EC003FAAEB07F8EB3FFE90B512BF4814FF5A3807FC0F380FF00348487E497E48
487F90C7FC007E80A212FE5AA87E007E5CA2007F5C6C7E5C6C6C5A380FF0073807FC1F6C
B612FC6CECBFFE6C143FEB3FFC90390FF01FFC27337DB22C>I<EB03FE90381FFFC0017F
13F048B57E48803907FE03FE390FF800FFD81FE0EB3F805B4848EB1FC090C7120F5A007E
15E015075AB7FCA416C000FCC9FC7E127EA2127F6CEC03C06DEB07E06C7ED80FF0130F6C
6CEB3FC001FF13FF000190B512806C1500013F13FC010F13F00101138023247CA32C>I<
EC0FF8EC3FFE91B5FC4914805B903807FC7F14F090390FE03F0014C092C7FCA6007FB512
FEB7FCA36C5C26000FC0C7FCB3A8003FB512F04880A36C5C21337DB22C>I<ED03F89039
07F80FFC90391FFE3FFE017FB6FC48B7FC48ECFE7F9038FC0FF82607F003133E3A0FE001
FC1CD9C0001300001F8049137EA66D13FE000F5CEBE0016C6C485A3903FC0FF048B5FC5D
481480D99FFEC7FCEB87F80180C8FCA37F6C7E90B512F06C14FE48ECFF804815E04815F0
3A3FC0001FF848C7EA03FC007E1400007C157C00FC157E48153EA46C157E007E15FCD87F
801303D83FE0EB0FF8D81FFCEB7FF06CB612E0000315806C1500D8003F13F8010713C028
387EA42C>I<EA7FF0487EA3127F1201AAEC1FE0EC7FFC9038F9FFFE01FB7F90B6FC9138
F03F80ECC01F02807FEC000F5B5BA25BB3267FFFE0B5FCB500F11480A36C01E014002933
7FB22C>I<1307EB1FC0A2497EA36D5AA20107C7FC90C8FCA7387FFFC080B5FC7EA2EA00
07B3A8007FB512FCB612FEA36C14FC1F3479B32C>I<140EEC3F80A2EC7FC0A3EC3F80A2
EC0E0091C7FCA748B512804814C0A37EC7120FB3B3A2141F003C1480007E133FB414005C
EB01FEEBFFFC6C5B5C001F5B000790C7FC1A467CB32C>I<EA7FE0487EA3127F1201AA91
381FFFF04A13F8A36E13F0913800FE004A5A4A5A4A5A4A5A4A5A4A5A4AC7FC14FEEBF1FC
13F3EBF7FE90B5FCA2EC9F80EC0FC001FE7FEBFC07496C7E496C7E811400157E81168015
1F3A7FFFC0FFFCB500E113FEA36C01C013FC27337EB22C>I<387FFFE0B57EA37EEA0003
B3B3A5007FB61280B712C0A36C158022337BB22C>I<3A7F83F007E09039CFFC1FF83AFF
DFFE3FFCD87FFF13FF91B57E3A07FE1FFC3E01FCEBF83F496C487E01F013E001E013C0A3
01C01380B33B7FFC3FF87FF0027F13FFD8FFFE6D13F8D87FFC4913F0023F137F2D2481A3
2C>I<397FF01FE039FFF87FFC9038F9FFFE01FB7F6CB6FC00019038F03F80ECC01F0280
7FEC000F5B5BA25BB3267FFFE0B5FCB500F11480A36C01E0140029247FA32C>I<EB07FC
EB1FFF017F13C048B512F048803907FC07FC390FF001FE48486C7E0180133F003F158090
C7121F007EEC0FC0A348EC07E0A76C140F007E15C0A2007F141F6C15806D133F6C6CEB7F
006D5B6C6C485A3907FC07FC6CB55A6C5C6C6C13C0011F90C7FCEB07FC23247CA32C>I<
397FF01FE039FFF8FFF801FB13FE90B6FC6C158000019038F07FC09138801FE091380007
F049EB03F85BED01FC491300A216FE167EA816FE6D14FCA2ED01F86D13036DEB07F0150F
9138801FE09138E07FC091B51280160001FB5B01F813F8EC3FC091C8FCAD387FFFE0B57E
A36C5B27367FA32C>I<903903FC078090391FFF0FC0017F13CF48B512EF4814FF3807FE
07380FF00148487E49137F4848133F90C7FC48141F127E150F5AA87E007E141FA26C143F
7F6C6C137F6D13FF380FF0033807FC0F6CB6FC6C14EF6C6C138F6D130FEB07F890C7FCAD
0203B5FC4A1480A36E140029367DA32C>I<D87FFEEB3FC0B53801FFF0020713F8021F13
FC6C5B39003F7FE1ECFF019138FC00F84A13704A13005CA25C5CA391C8FCAF007FB512E0
B67EA36C5C26247EA32C>I<90387FF8700003B512F8120F5A5A387FC00F387E00034813
015AA36CEB00F0007F140013F0383FFFC06C13FE6CEBFF80000314E0C66C13F8010113FC
EB0007EC00FE0078147F00FC143F151F7EA26C143F6D133E6D13FE9038F007FC90B5FC15
F815E000F8148039701FFC0020247AA32C>I<131E133FA9007FB6FCB71280A36C1500D8
003FC8FCB1ED03C0ED07E0A5EC800F011FEB1FC0ECE07F6DB51280160001035B6D13F890
38003FE0232E7EAD2C>I<3A7FF003FF80486C487FA3007F7F0001EB000FB3A3151FA215
3F6D137F3900FE03FF90B7FC6D15807F6D13CF902603FE07130029247FA32C>I<3A7FFF
01FFFCB514FE148314016C15FC3A03E0000F80A26D131F00011500A26D5B0000143EA26D
137E017C137CA2017E13FC013E5BA2EB3F01011F5BA21483010F5BA214C701075BA214EF
01035BA214FF6D90C7FCA26D5A147C27247EA32C>I<D87FFFEB7FFF6EB5FCB515806C16
004A7ED807C0EB01F0A66C6C495AA3143E147FA2D801F0495AECFF87A214F7A201F113C7
00005D9038F9E3CFA201FB13EFA3D97BC190C7FC017F13FFA21480A2013F5B90381F007C
29247FA32C>I<3A3FFF03FFF048018713F8A36C010313F03A00FC007E005D90387E01F8
013F5BEB1F83EC87E090380FCFC0903807EF80EB03FF6D90C7FC5C6D5A147C14FE130180
903803EF80903807CFC0EB0FC7EC83E090381F01F0013F7FEB7E00017C137C49137E0001
803A7FFF01FFFC1483B514FE6C15FC140127247EA32C>I<3A7FFF01FFFCB5008113FE14
8314816C010113FC3A03E0000F806C7E151F6D140012005D6D133E137C017E137E013E13
7CA2013F13FC6D5BA2EB0F815DA2EB07C1ECC3E0A2EB03E3ECE7C0130114F75DEB00FFA2
92C7FC80A2143EA2147E147CA214FC5CA2EA0C01003F5BEA7F83EB87E0EA7E0F495A387F
FF806C90C8FC6C5A6C5AEA07E027367EA32C>I<003FB612E04815F0A4007EC7EA1FE0ED
3FC0ED7F80EDFF004A5A003C495AC7485A4A5A4A5A4A5A4A5A4AC7FCEB01FC495AEB0FF0
495A495A495A49C8FC4848EB01E04848EB03F0485A485A485A485A485AB7FCA46C15E024
247DA32C>I<15FF02071380141F147F91B512004913C04AC7FCEB03F85CB31307EB1FE0
13FF007F5BB55A49C8FC6D7E6C7FC67F131FEB07F01303B380EB01FEECFFC06D13FF6E13
80141F14070200130021417BB92C>I<127812FCB3B3B3A9127806416DB92C>I<EA7FC0EA
FFF813FE6D7E6C7FC67F131FEB07F01303B380EB01FEECFFC06D13FF6E1380141F147F91
B512004913C04AC7FCEB03F85CB31307EB1FE013FF007F5BB55A49C8FC13F8EA7FC02141
7BB92C>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fe cmsy10 10 6
/Fe 6 102 df<007FB81280B912C0A26C17803204799641>0 D<EB0380497EA739780380
3C00FC147E00FE14FE397F8383FC393FC387F8390FE38FE03903FBBF803900FFFE00EB3F
F8EB0FE0A2EB3FF8EBFFFE3903FBBF80390FE38FE0393FC387F8397F8383FC39FE0380FE
00FC147E0078143C390007C000A76D5A1F247BA62A>3 D<EB1FF0EBFFFE487F000714C0
4814E04814F04814F8A24814FCA3B612FEA96C14FCA36C14F8A26C14F06C14E06C14C000
0114006C5BEB1FF01F1F7BA42A>15 D<173CA2173E171E171F8384717E170384717E717E
187C007FB812FEBAFC856C84CBEA03F0727EF000FEF13F80F11FE0F107F8F101FFA2F107
F8F11FE0F13F80F1FE00F001F84E5A007FB912C0BA5A96C7FC6C5FCB127C604D5A4D5A60
17074D5A95C8FC5F171E173E173CA248307BAC53>41 D<387FFFF0B512F8A214F000F0C7
FCB3B3B3B3A51260155272BD25>100 D<387FFFF0B512F8A27EC71278B3B3B3B3A51430
15527FBD25>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Ff cmbx12 14.4 58
/Ff 58 123 df<EEFFFC031FEBFF804AB612E0020781021F9038C00FF8913A7FFE0003FC
DAFFF0EB00FE4949EB03FF4901805B4990C7487F49485CA2495A4D7F013F6F5B5CA37190
C7FC715AEF01F894C9FCA90403B512C0BAFCA526003FFCC7120783B3B3A6003FB5D8FC03
B612C0A542547DD34B>12 D<EEFFFE031F9038FFCFC04AB7FC1407021FEBC00791387FFC
00DAFFF05B4901C05B495B4990C7FC495AA2495A83133F4A8083AFBAFCA526003FFCC712
03B3B3A7003FB5D8FC03B612C0A542547DD34B>I<DCFFFC913807FFE0031FD9FF8090B5
12FC92B6D8E00F14FF0207DBF83F81021F903DE00FFCFFFE007FC091273FFE0001B500F0
EB1FE0DAFFF06D0280EB07F04949010391C7EA1FF84901804901FC143F4990C748494A7E
49484A4914FFA249485E517F013F735B4A5EA28371705A71705A71EE0FC099C8FCA99838
1FFFFEBEFCA526003FFCC7000101E0C7123F1C1FB3B3A6003FB5D8FC01B6D8E01FB512FE
A567547DD370>I<B712F0AB240B7F9F2D>45 D<EA07F0487E487E487E487EB51280A76C
13006C5A6C5A6C5A6C5A1111769025>I<913803FFC0023F13FC91B6FC010315C0010F01
8113F0903A1FFC003FF849486D7E49486D7E49486D7E48496D138048496D13C0A24817E0
4890C813F0A34817F8A24817FC49157FA3007F17FEA600FF17FFB3A5007F17FEA6003F17
FCA26D15FFA26C17F8A36C17F0A26C6D4913E0A26C6D4913C06C17806E5B6C6D4913006D
6C495AD91FFCEB3FF8903A0FFF81FFF06D90B55A01011580D9003F01FCC7FC020313C038
4F7BCD43>48 D<157815FC14031407141F14FF130F0007B5FCB6FCA2147F13F0EAF800C7
FCB3B3B3A6007FB712FEA52F4E76CD43>I<EC3FFE0103B512E0010F14FC013F14FF90B7
12C048D9C07F7F2703FE000F13F8D807F801037FD80FE06D7F48486D7F48488001F01680
486C6E13C07F486C6E13E07FA27013F0A56C5AA26C5AEA0FF0EA03C0C914E05EA218C05E
1880A24C13005F4C5A4B5B5F4B5B5F4B5B4B90C7FC4B5A5E4B5AED7FE04B5A4A5B4A48C8
FC4A5A5D4A48EB01F04A5AEC3F804AC7FC02FEEC03E0495A495A495A495AD91F80140749
C8FC013E150F017FB7FC90B812C05A5A5A5A5A5A5AB9FC1880A4344E79CD43>I<91380F
FFC091B512FC0107ECFF80011F15E090263FF8077F9026FF800113FC4848C76C7ED803F8
6E7E491680D807FC8048B416C080486D15E0A4805CA36C17C06C5B6C90C75AD801FC1680
C9FC4C13005FA24C5A4B5B4B5B4B13C04B5BDBFFFEC7FC91B512F816E016FCEEFF80DA00
0713E0030113F89238007FFE707E7013807013C018E07013F0A218F8A27013FCA218FEA2
EA03E0EA0FF8487E487E487EB57EA318FCA25E18F891C7FC6C17F0495C6C4816E001F04A
13C06C484A1380D80FF84A13006CB44A5A6CD9F0075BC690B612F06D5D011F1580010302
FCC7FCD9001F1380374F7ACD43>I<177C17FEA2160116031607160FA2161F163F167FA2
16FF5D5DA25D5DED1FBFED3F3F153E157C15FCEC01F815F0EC03E01407EC0FC01580EC1F
005C147E147C5C1301495A495A5C495A131F49C7FC133E5B13FC485A5B485A1207485A48
5A90C8FC123E127E5ABA12C0A5C96C48C7FCAF020FB712C0A53A4F7CCE43>I<D8038015
0ED807E0157E01FEEC03FED9FFF0137F91B65A5F5F5F5F5F94C7FC5E5E16F016C093C8FC
15F801E190C9FC01E0CAFCABEC0FFF027F13F001E3B512FE01E76E7E9026FFF8077FDAC0
017F49C713F8496E7E49143F4981496E7E6C481680C9FC18C08218E0A418F0A3EA0FE048
7E487E487E487EA418E0A35B6C484A13C05B491680003EC85A003F17006C6C4A5A6D5D6C
6C4A5AD807F8495BD803FE01075B2701FFC03F5B6C90B65A013F4AC7FC6D14F8010314C0
9026007FF8C8FC344F79CD43>I<ED0FFF92B512E0020780021F14FC91397FFE03FE903A
01FFF0007F4901C0EB3F804990C7121F4948EC7FC0494814FF49484913E049485B01FF5C
485BA2485B5AA2486F13C04A6D1380486F1300177E94C7FC5AA291CAFC5AA21508913801
FFF8020713FFB54814C04A14F04AC66C7E023C6D7E4A6D7E4A6D7E7013804A15C0A24A15
E07013F05C18F8A491C714FCA37EA67EA46C17F880A27E18F06C5D18E06C6D15C07E6E49
13806C6D15006D6C495A6D6CEB7FFC6DB448485A6D90B55A010315C0010092C7FC023F13
FC020713C0364F7ACD43>I<121F7F7FEBFF8091B81280A45A1900606060A2606060485F
0180C86CC7FC007EC95A4C5A007C4B5A5F4C5A160F4C5A484B5A4C5A94C8FC16FEC81201
4B5A5E4B5A150F4B5AA24B5AA24B5A15FFA24A90C9FCA25C5D1407A2140FA25D141FA214
3FA4147F5DA314FFA55BAC6D5BA2EC3FC06E5A395279D043>I<913807FFC0027F13FC01
03B67E010F15E090261FFC0113F8903A3FE0003FFCD97F80EB0FFE49C76C7E4848804848
6E1380000717C04980120F18E0177FA2121F7FA27F7F6E14FF02E015C014F802FE491380
6C7FDBC00313009238F007FE6C02F85B9238FE1FF86C9138FFBFF06CEDFFE017806C4BC7
FC6D806D81010F15E06D81010115FC010781011F81491680EBFFE748018115C048D9007F
14E04848011F14F048487F48481303030014F8484880161F4848020713FC160182484815
7F173FA2171FA2170FA218F8A27F007F17F06D151FA26C6CED3FE0001F17C06D157F6C6C
EDFF806C6C6C010313006C01E0EB0FFE6C01FCEBFFFC6C6CB612F06D5D010F1580010102
FCC7FCD9000F13C0364F7ACD43>I<91380FFF8091B512F8010314FE010F6E7E4901037F
90267FF8007F4948EB3FF048496D7E484980486F7E484980824817805A91C714C05A7013
E0A218F0B5FCA318F8A618FCA46C5DA37EA25E6C7F6C5DA26C5D6C7F6C6D137B6C6D13F3
90387FF803011FB512E36D14C30103028313F89039007FFE03EC00401500A218F05EA3D8
01F816E0487E486C16C0487E486D491380A218005E5F4C5A91C7FC6C484A5A494A5A4949
5B6C48495BD803FC010F5B9027FF807FFEC7FC6C90B55A6C6C14F06D14C0010F49C8FC01
0013F0364F7ACD43>I<BA12C019FEF1FFC01AF01AFCD8000701F0C7000313FFDE007F7F
737F070F7F737F878587858785A287A84F5BA263616361634F5B4F5B077F90C7FC4E485A
060713F892B812E097C8FC861AF003F0C7000313FE9539003FFF80070F13E0737F07017F
87737F747E1C807413C0A27413E0A31CF0A386A362A31CE0A2621CC0A250138097B5FC1C
004F5B19074F5B073F13F04EB55ABC128098C7FC1AF81AC007F8C8FC54527CD160>66
D<932601FFFCEC01C0047FD9FFC013030307B600F81307033F03FE131F92B8EA803F0203
DAE003EBC07F020F01FCC7383FF0FF023F01E0EC0FF94A01800203B5FC494848C9FC4901
F8824949824949824949824949824990CA7E494883A2484983485B1B7F485B481A3FA248
49181FA3485B1B0FA25AA298C7FC5CA2B5FCAE7EA280A2F307C07EA36C7FA21B0F6C6D19
80A26C1A1F6C7F1C006C6D606C6D187EA26D6C606D6D4C5A6D6D16036D6D4C5A6D6D4C5A
6D01FC4C5A6D6DEE7F806D6C6C6C4BC7FC6E01E0EC07FE020F01FEEC1FF80203903AFFE0
01FFF0020091B612C0033F93C8FC030715FCDB007F14E0040101FCC9FC525479D261>I<
BA7E19FCF1FF801AF01AFCD8000701F0C7000F13FF060014C0071F7F070713F807017F73
7F747E747F747F86747F747F8886888688A2757EA31D8087A21DC0A51DE0A387A963A31D
C0A51D80A2631D00A3515AA2646264505B6264505B505B5090C7FCF2FFFE4F5B07075B07
1F5B96B512C0060F91C8FCBB5A1AF01AC007FCC9FC19805B527CD167>I<BC1280A5D800
0701F8C7000114C0F0001F19071901851A7F1A3F1A1FA2F20FE0A21A07A31A03A318F81B
F01A01A497C7FC1701A317031707170F177F92B6FCA59238F8007F170F170717031701A3
17001B3EA31B7CA395C8FCA21BFCA21BF8A21A01A31A031BF01A071A0FA21A1F1A3FF27F
E0F101FF1907191F0603B5FCBCFCA21BC0A34F517CD058>I<BB12FEA5D8000701F8C700
077FF0007F191F190785858586861B80A21A1FA31A0FA41BC006F81307A497C7FCA31701
A317031707170F177F92B6FCA59238F8007F170F170717031701A31700A795C9FCB3B812
F8A54A517CD055>I<932601FFFCEC01C0047FD9FFC013030307B600F81307033F03FE13
1F92B8EA803F0203DAE003EBC07F020F01FCC7383FF0FF023F01E0EC0FF94A01800203B5
FC494848C9FC4901F8824949824949824949824949824990CA7E494883A2484983485B1B
7F485B481A3FA24849181FA3485B1B0FA25AA298C8FC5CA2B5FCAE6C057FB712E0A280A3
6C94C7003FEBC000A36C7FA36C7FA27E6C7FA26C7F6C7FA26D7E6D7F6D7F6D6D5E6D7F6D
01FC93B5FC6D13FF6D6C6D5C6E01F0EC07FB020F01FEEC1FF10203903AFFF001FFE00200
91B6EAC07F033FEE001F030703FC1307DB007F02E01301040149CAFC5B5479D26A>I<B8
D8C003B8FCA5D8000701F8C9001FEBE000B3AE92BAFCA503F8C9121FB3B1B8D8C003B8FC
A560527CD169>I<B812C0A5D8000701F8C7FCB3B3B3B2B812C0A52A527CD132>I<B812F8
A5D8000701F8CAFCB3B3A91A7CA41AFC1AF8A51901A31903A219071AF0190FA2191F193F
197F19FF180360183F4DB5FCBB12E0A546527CD151>76 D<B600FC073FB512FE6F61A26F
96B6FCA2D80007F5C00070EF01EFA202EF6DEF03CFA202E76DEF078FA202E36DEF0F0FA2
02E16D171EA302E06D173CA26F6C1778A26F6C17F0A26F6DED01E0A26F6DED03C0A36F6D
ED0780A26F6DED0F00A26F6D151EA26F6D5DA3706C5DA2706C5DA2706D495AA2706D495A
A2706D495AA3706D49C7FCA2706D131EA2706D5BA2716C5BA3716C5BA271EB81E0A271EB
C3C0A271EBE780A27101FFC8FCA3715BA2715BA2725AA2725AA2D93FFC6F5AB74DB712FE
A2725AA2725A77527CD180>I<B600FC93B7FC8181A282D800076E9239003FFC0070EE07
E08282A28202EF7F02E77F02E380A202E18002E0806F7F6F7F6F7FA26F7F6F7F6F806F80
A26F80707F707F707F707FA2707F7080708070808583717F717F717F717FA27114807114
C07114E07213F07213F8A27213FC7213FE7213FF721487A27214C77214E77313F77313FF
85A285858585A28586868686A286868686A2D93FFC187FB7173F1B1F1B0F1B07755A6052
7CD169>I<93380FFFC00303B6FC031F15E092B712FC0203D9FC0013FF020F01C0010F13
C0023F90C7000313F0DA7FFC02007F494848ED7FFE4901E0ED1FFF49496F7F49496F7F49
90C96C7F49854948707F4948707FA24849717E48864A83481B804A83481BC0A2481BE04A
83A2481BF0A348497113F8A5B51AFCAF6C1BF86E5FA46C1BF0A26E5F6C1BE0A36C6D4D13
C0A26C6D4D1380A26C1B006C6D4D5A6E5E6C626D6C4C5B6D6D4B5B6D6D4B5B6D6D4B5B6D
6D4B5B6D6D4B90C7FC6D6D4B5A6D01FF02035B023F01E0011F13F0020F01FC90B512C002
0390B7C8FC020016FC031F15E0030392C9FCDB001F13E0565479D265>I<BAFC19F819FF
1AE086D8000701F0C7001F13FC060113FF726C13807313C0070F13E01BF0857313F81BFC
A27313FEA41BFFA81BFEA31BFC61A21BF84F13F04F13E0614F13C04F13004E485A061F5B
92B812F01AC04FC7FC19E003F8CBFCB3AEB812C0A550527CD15C>I<B912F0F0FF8019F8
19FF1AC0D8000701F0C714F0060F7F060113FE727F737F737F85737F87A2737FA387A863
A2616363A24F5B4F5B4F90C8FC4F5A06035B060F13F095B512C092B8C9FC19F819E019F8
9226F0000313FE9439007FFF80727F727F727F727F727F8684A28684A787A71D1C75133E
A38575137E73157C7513FC731401B86C6D9038F803F807039038FE07F07390B512E0736C
14C0080F1400CEEA7FFC5F537CD164>82 D<91260FFF80130791B500F85B010702FF5B01
1FEDC03F49EDF07F9026FFFC006D5A4801E0EB0FFD4801800101B5FC4848C87E48488149
150F001F824981123F4981007F82A28412FF84A27FA26D82A27F7F6D93C7FC14C06C13F0
14FF15F86CECFF8016FC6CEDFFC017F06C16FC6C16FF6C17C06C836C836D826D82010F82
1303010082021F16801400030F15C0ED007F040714E01600173F050F13F08383A2007882
00F882A3187FA27EA219E07EA26CEFFFC0A27F6D4B13806D17006D5D01FC4B5A01FF4B5A
02C04A5A02F8EC7FF0903B1FFFC003FFE0486C90B65AD8FC0393C7FC48C66C14FC48010F
14F048D9007F90C8FC3C5479D24B>I<003FBC1280A59126C0003F9038C0007F49C71607
D87FF8060113C001E08449197F49193F90C8171FA2007E1A0FA3007C1A07A500FC1BE048
1A03A6C994C7FCB3B3AC91B912F0A553517BD05E>I<B800C00103B612FCA5D8000701F8
CAEBF000F31F80B3B3B11B3FA26D97C7FC81637F1B7E6D6D17FE505A6E7E505A6E6D1507
6E4D5A6E6D4B5A6E6D4B5A6E01F84B5A6E6DDA03FFC8FC6E6CB46CEB0FFE6F9039F001FF
F8030F90B65A030316C0DB007F92C9FC040F14F8DC007F13805E537CD167>I<B700FE03
1FB512FEA5D8001F01F0CA383FFE00F307F06D626F170F6D62811B1F6D6D601B3F6D97C7
FC6F5F6D197E821BFE6E6D5E1A016E6D5E1A036E60701507A26E6D5E1A0F6E6D5E1A1F6E
6070153FA26E6D93C8FC626E6E147E1AFE6F5E711301A26F6D5C19036F6D5C19076F5E71
130FA26F6D5C191F6F6D5C193F6F93C9FC715BA26FEC807E19FE706D5A18C1705C18E370
5C18F318F770EBFFE0A2705CA2705CA37091CAFCA2705BA2715AA3715AA2715AA2715A71
5A5F537DD166>I<B700FC017FB600FE91B612F0A5D8003F01C0C8001F01E0C9EBF8006F
71EE0FC06D7161876F1C1F6D7196C7FC6F8373606D1E3E6F836D7160876F1CFC6D666F4B
801F016D66704A806E525A88704A17076E059F5F70021F80080F160F6E6570023F806EDC
3E074CC8FC8870027E5F6EDC7C03163E7002FC804F6C167E6E1C7C700101814F6C16FC6E
745B70010317016E4C6D5D060716C00580496D14036F63DDC00F16E04F6D14076F07F05B
DDE01F170F6F92C76C5D1DF8DDF03E6E141F6F98C9FCDDF87E16FC067C6E5C6FF1FE3EDD
FCFC177E6F4A6E147C1DFFDDFFF06E14FC6F62A24E816F62A270496F5BA24E817061A295
C97E7061A270487090CAFCA37048705AA24D1601040360A27048705A84537DD18B>I<EC
7FFF0107B512F0013F14FE90B77E48D9E00F7F2703FE000113F0486C6D7F6EEB3FFC4882
6E131F83707FA36C496D7FA26C90C7FC6C5AC9FCA6037FB5FC020FB6FC91B7FC01071487
013FEBF0074913803901FFFC004813F0485B485B485B4890C7FC5A5BA2485AA45EA26D5C
007F151D163D6C6C02797F6C6D01F113F86C9026C003E1EBFFE06C9026F81FC014F06C90
B5487EC6ED001F011F01FC010713E0010101E090C8FC3C387CB641>97
D<EB3FF0B5FCA51203C6FCB3A4923801FFE0030F13FE033FEBFFC092B612F002F301017F
913AF7F8003FFEDAFFE0EB0FFF03806D7F92C76C7F4A6E7F4A824A6E7FA2727EA285A285
84A31A80AC1A00A44E5AA36118FF616E4A5BA26E4A5B6E4A5B6F495BDACFC04990C7FCDA
87F0EB7FFC913A03FE03FFF849C6B612E0496D148049011F01FCC8FC90C7000313C04154
7BD24B>I<913801FFF8021FEBFF8091B612F0010315FC010F9038C00FFE903A1FFE0001
FFD97FFC491380D9FFF05B4817C048495B5C5A485BA2486F138091C7FC486F1300705A48
92C8FC5BA312FFAD127F7FA27EA2EF03E06C7F17076C6D15C07E6E140F6CEE1F806C6DEC
3F006C6D147ED97FFE5C6D6CEB03F8010F9038E01FF0010390B55A01001580023F49C7FC
020113E033387CB63C>I<4DB47E0407B5FCA5EE001F1707B3A4913801FFE0021F13FC91
B6FC010315C7010F9038E03FE74990380007F7D97FFC0101B5FC49487F4849143F484980
485B83485B5A91C8FC5AA3485AA412FFAC127FA36C7EA37EA26C7F5F6C6D5C7E6C6D5C6C
6D49B5FC6D6C4914E0D93FFED90FEFEBFF80903A0FFFC07FCF6D90B5128F0101ECFE0FD9
003F13F8020301C049C7FC41547CD24B>I<913803FFC0023F13FC49B6FC010715C04901
817F903A3FFC007FF849486D7E49486D7E4849130F48496D7E48178048497F18C0488191
C7FC4817E0A248815B18F0A212FFA490B8FCA318E049CAFCA6127FA27F7EA218E06CEE01
F06E14037E6C6DEC07E0A26C6DEC0FC06C6D141F6C6DEC3F806D6CECFF00D91FFEEB03FE
903A0FFFC03FF8010390B55A010015C0021F49C7FC020113F034387CB63D>I<ED3FFC02
03B5FC020F14C0023F14E09139FFF81FF0499038C03FF849EB807F49903800FFFC495A49
5AA2495AA2EE7FF8495AEE3FF0EE0FC093C7FCAEB712E0A526007FF8C8FCB3B3A7007FB5
12FEA52E547CD329>I<DA3FFF14FF0103B5D8F00713C0010FDAFC1F13E0013FECFF7F90
267FFC0F9038FF9FF09026FFE001EBF83F48496C13E0484990387FF01F4890C7D83FF813
E0489338FC0FC0F0078048486E6CC7FCA2003F82A9001F5EA26C6C4A5AA26C5E6C6D495A
6C6D495A6C6D485BDAFC0F5B4890B6C8FCD803EF14FC01C314F02607C03F90C9FC91CBFC
A2120FA37FA213F813FE90B7FC6C16F817FF18C06C836C836C836D828448B9FC12074848
C700031480D81FF8EC003F4848150748486F13C083485A83A56D5D007F18806D5D003F18
006C6C4B5AD80FFEED1FFC6C6C6CEC7FF86C01E049485A6C01FE011F5B6C6CB71280010F
03FCC7FC010115E0D9000F01FCC8FC3C4F7CB543>I<EB3FF0B5FCA51203C6FCB3A4EE1F
FC93B512C0030314F0030F8092391FE07FFC92393F001FFE037C8003F07FDAF1E081ECF3
C0DAF7807F8502FFC7FC5CA25CA45CB3ACB6D8F807B612C0A542537BD24B>I<137F497E
000313E0487FA2487FA76C5BA26C5BC613806DC7FC90C8FCADEB3FF0B5FCA512017EB3B3
A6B612E0A51B547BD325>I<EB3FF0B5FCA51203C6FCB3A54CB512F8A59339003FFE00EF
1FF0EF3FC04D5A4DC7FCEE03FEEE07F84C5A4C5AEE7FC04CC8FC4B5A4B5AED0FF8ED1FE0
4B7E4B7EECF1FF02F37F02F77F91B6FC83159F030F7F02FE80DAF8077F4A7E6F7F6F7F83
707E82707F84707F707F82707F84707F177F717E4D13C0B6D8F003B6FCA540537CD247>
107 D<EB3FF0B5FCA512017EB3B3B3B1B612F0A51C537BD225>I<D93FF0D91FFCEDFFE0
B591B500C0010713FE030302F0011F6D7E030F6E017F8092271FE07FFCD9FF037F922A3F
001FFE01F8007F0003027C9126FF03E080C602F06DD90780137FDAF1E0038FC77FDAF3C0
159EDAF7806D01BC143F07FC8102FFC75C4A5EA24A5EA44A5EB3ACB6D8F807B6D8C03FB5
12FEA567367BB570>I<D93FF0EB1FFCB591B512C0030314F0030F8092391FE07FFC9239
3F001FFE0003027C80C602F07FDAF1E081ECF3C0DAF7807F8502FFC7FC5CA25CA45CB3AC
B6D8F807B612C0A542367BB54B>I<913801FFE0021F13FE91B612C0010315F0010F9038
807FFC903A1FFC000FFED97FF86D6C7E49486D7F48496D7F48496D7F4A147F48834890C8
6C7EA24883A248486F7EA3007F1880A400FF18C0AC007F1880A3003F18006D5DA26C5FA2
6C5F6E147F6C5F6C6D4A5A6C6D495B6C6D495B6D6C495BD93FFE011F90C7FC903A0FFF80
7FFC6D90B55A010015C0023F91C8FC020113E03A387CB643>I<903A3FF001FFE0B5010F
13FE033FEBFFC092B612F002F301017F913AF7F8007FFE0003D9FFE0EB1FFFC602806D7F
92C76C7F4A824A6E7F4A6E7FA2717FA285187F85A4721380AC1A0060A36118FFA2615F61
6E4A5BA26E4A5B6E4A5B6F495B6F4990C7FC03F0EBFFFC9126FBFE075B02F8B612E06F14
80031F01FCC8FC030313C092CBFCB1B612F8A5414D7BB54B>I<90397FE003FEB590380F
FF80033F13E04B13F09238FE1FF89139E1F83FFC0003D9E3E013FEC6ECC07FECE78014EF
150014EE02FEEB3FFC5CEE1FF8EE0FF04A90C7FCA55CB3AAB612FCA52F367CB537>114
D<903903FFF00F013FEBFE1F90B7FC120348EB003FD80FF81307D81FE0130148487F4980
127F90C87EA24881A27FA27F01F091C7FC13FCEBFFC06C13FF15F86C14FF16C06C15F06C
816C816C81C681013F1580010F15C01300020714E0EC003F030713F015010078EC007F00
F8153F161F7E160FA27E17E07E6D141F17C07F6DEC3F8001F8EC7F0001FEEB01FE9039FF
C00FFC6DB55AD8FC1F14E0D8F807148048C601F8C7FC2C387CB635>I<143EA6147EA414
FEA21301A313031307A2130F131F133F13FF5A000F90B6FCB8FCA426003FFEC8FCB3A9EE
07C0AB011FEC0F8080A26DEC1F0015806DEBC03E6DEBF0FC6DEBFFF86D6C5B021F5B0203
13802A4D7ECB34>I<D93FF8913801FFC0B50207B5FCA50003ED001FC61607B3AE5FA35F
A2017F5D173B177B6D6C14F3DC01E313F06D6CD907C3EBFFC0903A0FFFC03F836D90B512
03010114FE6D6C13F8020701E091C7FC42377BB54B>I<B600F00107B5FCA5000101F8C8
EA7FE06C6DED3F00A2017F163E6E157E013F167C6E15FC6D5E6F13016D5E8117036D5E6F
13076D5E6F130F6D5E6F131F6D93C7FC815F6E6C133E177E023F147C6F13FC6E5C16816E
5C16C3A26EEBE3E016E76E5C16FF6E5CA26E91C8FCA26F5AA36F5AA26F5AA26F5AA26F5A
6F5A40367DB447>I<B6D8E07FB5D8C003B512C0A5000101F0C701F0C7381FF8006E027F
ED07E06C715DA26E023F150F017F705DA26E181F013F4B6C92C7FC6E606D70143E94B5FC
6F177E6D4A6E137C03C001F315FC6D715B160303E001E114016D020702E05B03F013C06D
71485A160F03F8D9807F13076D05F85B93381F003F03FC160F027F4902FC5BDBFE3E011F
131F023F04FE90C8FC167EDBFF7C010F5B6E01FCECFF3E4C6D137E6E5FA24C7F6E5F4C7F
6E5FA24C7F6E5F4C147FA26E5F93C8123F6F5EA2033E6FC9FC5A367DB461>I<007FB500
F090387FFFFEA5C66C48C7000F90C7FC6D6CEC07F86D6D5C6D6D495A6D4B5A6F495A6D6D
91C8FC6D6D137E6D6D5B91387FFE014C5A6E6C485A6EEB8FE06EEBCFC06EEBFF806E91C9
FCA26E5B6E5B6F7E6F7EA26F7F834B7F4B7F92B5FCDA01FD7F03F87F4A486C7E4A486C7E
020F7FDA1FC0804A486C7F4A486C7F02FE6D7F4A6D7F495A49486D7F01076F7E49486E7E
49486E7FEBFFF0B500FE49B612C0A542357EB447>I<B600F00107B5FCA5C601F8C8EA7F
E06EED3F00A26D6C153E187E013F167C6E15FC6D5E6F13016D5E6F13036D5E8117076D6D
5C170F6D6D5C171F6D93C7FC6F5B027F143E6F137E023F147C6F13FCA26E6D5A16816EEB
C1F016C36E5C16E76E5C16FF6E5CA26E91C8FCA36F5AA26F5AA26F5AA26F5AA26F5AA35E
150F5E151F93C9FC5DD81FC0133E486C137E486C137C486C13FC5D14015D14034A5A6C48
485A49485A263FC07FCAFCEB81FE6CB45A6C13F000035BC690CBFC404D7DB447>I<001F
B8FC1880A3912680007F130001FCC7B5FC01F0495B495D49495B495B4B5B48C75C5D4B5B
5F003E4A90C7FC92B5FC4A5B5E4A5B5CC7485B5E4A5B5C4A5B93C8FC91B5FC495B5D4949
EB0F805B495B5D495B49151F4949140092C7FC495A485E485B5C485E485B4A5C48495B48
15074849495A91C712FFB8FCA37E31357CB43C>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fg cmbx12 20.74 25
/Fg 25 121 df<EE3FFF0307B512F8033F14FF4AB712E0020716F8021F16FE4AD9F8077F
91B5D8C00014C04991C7003F7F4901FC020F7F49496E7F49496E7F49496E7F49496E7F4B
81498590B5C96C7FA24849707FA24886A248864A824886A34886A448864A82A4481B80A8
B51AC0B3AA6C1B80A86C1B006E5EA46C62A36C62A36C6D4C5BA36C62A26C6D4C5BA26C6E
4B5B6D616F92B5FC6D96C7FC6D6D4A5B6D6D4A5B6D6D4A5B6D6D4A5B6D01FF023F5B6D02
C090B55A6ED9F8075C021F90B648C8FC020716F8020116E06E6C1580030702F8C9FCDB00
3F90CAFC527379F061>48 D<EE01F0EE07F8160F163F167FED01FF150F153F4AB5FC143F
010FB6FCB8FCA54A7E14C0EBF000C8FCB3B3B3B3AE007FBA12F0A8447171F061>I<9238
0FFFE04AB67E020F15F0027F15FE49B87E4917E0010F17F8013F8349D9C01F14FF9027FF
FC0001814801E06D6C80480180021F804890C86C8048486F8048486F8001FF6F804801C0
6E8002F081486D18806E816E18C0B5821BE06E81A37214F0A56C5BA36C5B6C5B6C5B0003
13C0C690C9FC90CA15E060A34E14C0A21B80601B0060626295B55A5F624D5C624D5C4D91
C7FC614D5B4D13F04D5B6194B55A4C49C8FC4C5B4C5B4C13E04C5B604C90C9FCEE7FFC4C
5A4B5B4B5B4B0180EC0FF04B90C8FC4B5A4B5A4B48ED1FE0EDFFE04A5B4A5B4A90C9FC4A
48163F4A5ADA3FF017C05D4A48167F4A5A4990CA12FFD903FC160749BAFC5B4919805B5B
90BBFC5A5A5A5A481A005A5ABCFCA462A44C7176F061>I<923801FFFE033FEBFFF84AB7
FC020F16E0023F16F84A16FE49B97E49DA003F80010F01F0010714F04901800101804948
C880D97FF86F7F02E081496C834801FC6F148014FF486E6E14C08181481AE081A96C5C1B
C06C4A5C6C5C6D90C815806D5AD90FF85D90CA150062606295B55A4D5C624D5C4D5C4D91
C7FC4D13FC4D5B4CB512E0047F1480037FB548C8FC92B612F818C018F8F0FF806F15F092
C7003F13FC050713FF050114C071807213F8727F727F867214801BC07214E01BF0A27214
F81BFCA37214FEA31BFFEBFF80000313E0487F001F13FC487FA2487FA2B67EA31BFEA360
1BFCA292C8FC6C1AF84A5D4A18F06C494B14E05C6C01C04B14C06C90C915804E14006C6D
4B5B6C01F092B55A6C01FC4A5C27007FFFC001075C6D01FE013F14C0010F90B85A6D4DC7
FC010117F8D9003F16E0020F93C8FC020015F0030749C9FC507378F061>I<F10FF04F7E
193FA2197F19FF60A260606060A2606095B5FCA25F5F5FA25F5F5F5F18BFEFFF3F5EEE03
FE17FCEE07F8160FEE1FF0EE3FE017C0167FEEFF804B13005E4B5A15074B5A4B5A5E153F
4B5A4B5A93C7FC4A5A14034A5A5D4A5A141F4A5A4A5A5D4AC8FC5B495A5C495A130F495A
495A5C137F495A4890C9FC5B485A1207485A485A5B123F485A485A90BC12FCA8CB02F8C7
FCB3A20307B912FCA856727BF161>I<0170187001FEEF01F86D6C160F02F8167FDAFF80
EC07FF03FE49B5FC92B85A6262A26297C7FC61616119E061614EC8FC18F86018C095C9FC
17F817C0020701F8CAFC91CDFCB0923801FFFC031FEBFFE092B612FC020315FF020F16C0
4A16F0027FD9003F7FDAFFF0010F13FE038001037F4AC76C8002F86E804A6F7F4A6F7F4A
834A6F7F91C980137E017C707F90CAFC1B80A21BC0A2841BE0A51BF0A313FE3803FF8000
0F7F4813F0487F5A80B5FCA41BE0A44E14C05C7E4A18805C4A5D6C90C9150001E0606C6C
5E6D606C6C4C5B7F000794B55A6C6C6C4A5C6C6D4A5C6E4A5C26007FF8021F49C7FC6DB4
027F5B6DD9F007B55A6D90B712E0010317806D4CC8FC6D6C15F8021F15C002034AC9FCDA
003F13804C7376F061>I<94381FFF800403B512F8043F14FE4BB77E030782031F16F003
7F8292B5D8FC017F02039139C0001FFE4A49C7EA07FF021F01F8804A496E13804A01C014
0F91B548023F13C04991C85A494992B5FC49494A14E0495B495E5D5B495BA290B55A5A5D
487114C0A24891C91480731300735A48F00FF896C8FC485BA45AA44849903803FFE0041F
13FE047FEBFFC04BB612F84B81030F15FFB590261FF8038092273FE0007F13E00480011F
7F4BC76C7F03FE6E7F4B6E7FDAFDF86E7FDAFFF017804B6E14C01BE05D7313F05D1BF8A2
92C914FC85A21BFE5CA31BFFA26C5BA87EA4807EA21BFE7EA37E1BFC6E5E6C1AF8A27E6F
17F06C95B512E06D7F1BC06D6D4A14806D4C1400816D6D4A5B6D6D4A5B6D01FF4A13F001
006E017F5B6ED9F007B55A6E90B7C7FC020F5E020316F86E16E0DA003F1580030702FCC8
FCDB007F1380507378F061>I<EA03FCA2487E7F14C0ECFFF092BA12C0A45AA31C801C00
63A2486263636363A26398C7FC48616249CAEA0FF801F0171F494D5A4F5A49604F5A007F
4D90C8FC60494C5A4E5A614E5A4E5A48CA127F4E5A4D5B96C9FCCA485A4D5A170F4D5A60
173F4D5A6017FF4C5BA25E4C90CAFCA24C5A161FA24C5AA2167FA24C5AA25DA24B5BA25D
A25DA25F5DA25DA35DA392B5FCA25FA25CA45CA75CAD6E5CA26E91CBFCA26E5BED3FF8ED
0FE0527775F461>I<93B57E031F14FC92B77E020316F0020F16FC023F16FF4A8349B5D8
800314E04901F8C7003F7F4901C0020F7F4990C800037FD91FFC6F7F49486F6C7E137F4A
7013804948827313C05A4A821BE05AA285487FA38080806E5E8003C017C08103F85D03FE
17806F6C5C6C6F160004F05C04FC4A5A6C6F5D706C13FFDDE0015B6CDCF8035BDDFC0F13
C06DDBFF1F5B6D93B5C7FC19FC6D17F06D5F6D17806D17E06D836D6C16FC6E16FF020F83
6E17E06E83020F83023F8391B97E4984010701F0178049D9C07F16C0013FD9801F16E049
EB00074948010116F048497F4849023F15F84849140F4A6E15FC48160148496E6C14FE4A
151F488391C9120348050014FF193F49838500FF84854983A28586A3861BFEA27FA2007F
1AFC7F1A7F1BF86C7FF2FFF06C7F6E4C13E06C6D4C13C06C6D5E6E4C13806C6D4C13006C
6D6CED7FFE6C02E04A485A013F01FC020F13F06D9026FFC001B55A010791B712806D95C7
FC010017FC021F16F002071680DA007F02FCC8FC030191C9FC507378F061>I<93B5FC03
1F14F092B612FE02076F7E021F16E04A16F891B87E49DAF00713FF0107DA0001804901FC
6D6C7F49496E7F49496E7F49496E7F90B5486E7F484A8048854891C86C7FA2487114805C
481AC0A2487213E0A2484918F0A31BF8A2B5FCA27313FCA51BFEA71BFF61A27EA396B6FC
7EA2806C5FA27E606C7F607E6C6E5C6CEF1FBF6D6DEC3F3F6D6D147F6D6D14FE6D6DEB01
FC6D01FE130701019039FFC01FF86D91B500F014FE023F15C06E15800203ECFE00DA007F
13F8030713C092C9FC4F13FCA41BF8A31BF0D91FF093B5FCEB7FFC496C18E0487F486E17
C06048801B804E1400A26260624E5B4B5C626C91C8485B4A4B5B4A92B55A6C01F04A91C7
FC02804A5B6C01E0020F5B6D6C023F13F002FE91B55A90273FFFE00F5C6D90B7C8FC0107
16FC6D16F0010016C0023F92C9FC020714F09126007FFECAFC507378F061>I<F103F84F
7E4F7EA24F7EA34F7FA24F7FA396B57EA24E80A34E80A24E80A34E80A24E80A34E81A24E
81A219BFDEFF9F80191F4D6D80A218FE05036D8018FC05076D80A218F8050F6D8018F005
1F6D80A260053F6E8060057F6E80A26005FF6E8095C7FC4C6F80A25F04036F805F04076F
80A25F040F6F805F041F6F80A25F043F70805F047F7080A25F04FF708094C9FC4B7180A2
5E030371805E4BBB7EA34B86A24B86A3DB3FE0CA6C805E037F7280A25E03FF7280A24A90
CB6C80A25D02037380A24A487280A25D020F7380A24B84021F885D023F7480A24B85027F
895D902607FFFC7380B86C031FB912E0A8837979F892>65 D<96267FFFE01670063FB6ED
01F80503B700F01403053F04FC14074CB96C130F040706E0131F043F72133F93BA00FC13
7F0303DC00076D13FF030F03C09039003FFF814B02FCC8000713C3037F02E0030113F792
B600806F6CB5FC02034ACA121F4A02F8834A02E0834A4A1701027F4A8391B548CC7E494A
85495C4C854988494A85494A85495C8A4991CDFC90B54886A2484A1B7FA2481E3F5D481E
1F5D5A1F0FA2485CA3481E075DA2F703F0489BC7FCA45DA2B6FCB27EA281A47EA2F703F0
6FF307F87EA36C80A21F0F7E6F1CF07E6F1B1F7E20E06C6E1B3F816DF57FC06D80F7FF80
6D806D6E4F13006D6E616D525A826D6E4F5A6D6E4F5A6E6D6C4E5A021F6EF0FFE06E6E4D
5B6E02F84D5B6E02FE050F90C7FC02006E6CEE3FFE6F02F0EEFFFC031F02FE03035B6FDA
FFC0021F13E0030303FF0103B55A030093B7C8FC043F18FC040718F0040118C0DC003F94
C9FC050316F8DD003F1580DE007F01F0CAFC757A75F78C>67 D<BA12F8A8C7001F02C0C7
FCB3B3B3B3B3ACBA12F8A83D767BF548>73 D<BC12FCF3FFF01CFF1DE01DFC1DFF1EC08A
C7003F91C8000115F8E0000F80090180756C6D7E76801C0F76808B7680888B7680A28BA2
892080A420C0AB2080A49AB61200A267A2676467525C64670A1F5C525C5291C7FC51B55A
090F14F850B65A94BA12C09BC8FC1DFC1DF09AC9FC1CF809FCCAFC0580CEFCB3B3A8BA12
E0A872767AF584>80 D<BA057FB71280A8C792CD000F01F0C7FC71070013806E5290C8FC
A26E6E621F036E6E621F07836E525A836E651F1F6E6E621F3F836E525A836E651FFF6F6E
96C9FC666F6E601E03846F505AA26F6E601E0F6F6E601E1F846F505AA26F6E601E7F6F6E
601EFF85704E90CAFCA2706E5E1D03706E5E1D0785704E5AA2706E5E1D1F706E5E1D3F85
704E5A8570611DFF716E92CBFC6486714C5A86715F1C07716E5C1C0F86714C5A86714C5A
A2716E5C1C7F716E5C1CFF8772028190CCFCA272ECC1FE1BC372ECE3FC1BE71BF772ECFF
F8A2725DA2725DA3725DA2725DA27391CDFCA3735BA2735BA2735BA3735BA2735BA2735B
A2735B74CEFC89787CF592>86 D<92383FFFF80207B612E0027F15FC49B87E010717E001
1F83499026F0007F13FC4948C7000F7F90B502036D7E486E6D806F6D80727F486E6E7F84
86727FA28684A26C5C72806C5C6D90C8FC6D5AEB0FF8EB03E090CAFCA70507B6FC041FB7
FC0303B8FC157F0203B9FC021FECFE0391B612800103ECF800010F14C04991C7FC017F13
FC90B512F04814C0485C4891C8FC485B5A485B5C5A5CA2B5FC5CA360A36E5DA26C5F6E5D
187E6C6D846E4A48806C6D4A4814FC6C6ED90FF0ECFFFC6C02E090263FE07F14FE000191
39FC03FFC06C91B6487E013F4B487E010F4B1307010303F01301D9003F0280D9003F13FC
020101F8CBFC57507ACE5E>97 D<97380FFFE00607B6FCA8F00003190086B3AD93383FFF
800307B512F8033F14FF4AB712C0020716F0021F16FC027F9039FE007FFE91B500F0EB0F
FF01030280010190B5FC4949C87E49498149498149498149498190B548814884484A8192
CAFC5AA2485BA25A5C5AA35A5CA4B5FCAF7EA4807EA37EA2807EA26C7F616C6E5D6C606C
80616D6D5D6D6D5D6D6D92B67E6D6D4A15FC010301FF0207EDFFFE6D02C0EB3FFE6D6C90
39FC01FFF86E90B65A020F16C002031600DA007F14FC030F14E09226007FFEC749C7FC5F
797AF76C>100 D<93387FFF80030FB512FC037FECFF804AB712E0020716F8021F16FE02
7FD9F8077F49B5D8C000804991C7003F13E04901FC020F7F49496E7F49498049496E7F49
496E7F90B55A48727E92C914804884485B1BC048841BE0485BA27313F05AA25C5AA21BF8
85A2B5FCA391BAFCA41BF002F8CCFCA67EA3807EA47E806CF103F0F207F86C7F1A0F6C6E
17F06C191F6F17E06C6E163F6D6DEE7FC06D6D16FF6D6D4B13806D6D4B13006D6D6CEC0F
FE6D02E0EC3FFC6D02F8ECFFF86D9126FFC00F5B023F91B65A020F178002034CC7FC0200
16F8031F15E0030392C8FCDB000F13E04D507BCE58>I<903801FFFCB6FCA8C67E131F7F
B3AD95380FFFE095B512FE05036E7E050F15E0053F15F84D81932701FFF01F7F4CD90007
7FDC07FC6D80DC0FF06D80DC1FC07F4C48824CC8FC047E6F7F5EEDFDF85E03FF707F5EA2
5EA25EA293C9FCA45DB3B3A6B8D8E003B81280A8617879F76C>104
D<EB01FCEB07FF011F13C0497F497F90B57EA24880A24880A76C5CA26C5CA26D5B6D5B6D
5B010790C8FCEB01FC90CAFCB2903801FFFC007FB5FCA8C67E131F7FB3B3B3A5B81280A8
297979F835>I<902601FFF891380FFFE0B692B512FE05036E7E050F15E0053F15F84D81
932701FFF01F7F4CD900077FDC07FC6D80C66CDA0FF06D80011FDA1FC07F6D4A48824CC8
FC047E6F7F5EEDF9F85E03FB707F5E15FF5EA25EA293C9FCA45DB3B3A6B8D8E003B81280
A8614E79CD6C>110 D<902601FFFCEC7FFEB6020FB512F0057F14FE4CB712C0040716F0
041F82047F16FE93B5C66C7F92B500F0010F14C0C66C0380010380011F4AC76C806D4A6E
8004F06F7F4C6F7F4C6F7F4C8193C915804B7014C0861DE0A27414F0A27414F8A47513FC
A57513FEAF5113FCA598B512F8A31DF0621DE0621DC0621D806F5E701800704B5B505B70
4B5B7092B55A04FC4A5C704A5C706C010F5C05E0013F49C7FC9227FE7FFC01B55A70B712
F0040F16C0040393C8FC040015F8053F14C0050301F0C9FC94CCFCB3A6B812E0A85F6F7A
CD6C>112 D<902601FFF8EB07FEB691383FFFC094B512F00403804C14FE4C8093261FFC
3F138093263FE07F13C0DC7F80B5FCC66C5D011FDAFE0114E06DEBF9FC16F815FB16F016
E015FF16C07114C05E72138095381FFE0093C76C5AF001E095C8FCA25DA65DB3B3A2B812
F8A8434E7ACD4F>114 D<15FFA75CA55CA45CA25CA25CA25CA25C91B5FCA25B5B5B131F
5B90B9FC120FBAFCA6D8000791C9FCB3B3A3F01FE0AE183F7014C07F187F7014806D16FF
826D4B13006E6D485AEEFE0F6E90B55A020F5D6E5D020115C06E6C5C031F49C7FC030113
F03B6E7CEC4B>116 D<007FB7023FB612F0A8D8000302C0020191C7FC6D6E9138007FF0
705E6D4E5A6E6D4A5B6E6D4A90C8FC6E6D5C704A5A6E4C5A6E6E5C6E6E495A6E6E495A71
13FF6E6E485B6F4A5B6F6D4890C9FC6F01FE5B71485A6FEC9FF86F14BF6FECFFF06F5D61
6F5D7091CAFC705B828470808270807080854C805E4C80854C804C81EE7FE7DCFFE3804B
01C1804B0180804D804B487F4B486D7F031F6E7F4B486D7F4B48824B487F4C6D804A496D
804A90C8804A844A48814A486F7F4A486F7F4B6F7F4A48844A486F80010F01F881B76C91
B712FEA85F4D7DCC66>120 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fh cmbx12 12 47
/Fh 47 123 df<ED0FFF4AB512C0020F14F0027F80903A01FFF803FC499038C000FE010F
EB00034948497E49485B5C495A4C138001FF6E13005CA3705AEE01F893C8FCA74BB51280
B9FCA5C69038E00003B3B0007FD9FFC1B6FCA538467EC53E>12 D<B612F8A91D097F9A25
>45 D<EA07C0EA1FF0EA3FF8EA7FFCEAFFFEA7EA7FFCEA3FF8EA1FF0EA07C00F0F788E1F
>I<EC3FF849B5FC010F14E0013F14F890397FF01FFC9039FFC007FE4890380001FF4848
6D1380000716C049147F000F16E049143F001F16F0A2003F16F8A249141F007F16FCA600
FF16FEB3A3007F16FCA56C6CEC3FF8A3001F16F0A2000F16E06D147F000716C06D14FF6C
6C4913806C6D4813006C6D485A90397FF01FFC6DB55A010F14E0010314809026003FF8C7
FC2F427CC038>48 D<EC03C01407141F147FEB03FF133FB6FCA413C3EA0003B3B3ADB712
FCA5264177C038>I<ECFFE0010F13FE013F6D7E90B612E0000315F82607FC0313FE3A0F
E0007FFFD81F806D138048C7000F13C0488001C015E001F07F00FF6E13F07F17F881A46C
5A6C5A6C5AC9FC17F05DA217E05D17C04B13804B1300A2ED1FFC4B5A5E4B5A4B5A4A90C7
FC4A5A4A5AEC0FF04A5AEC3F804AC7127814FE495A494814F8D907E014F0495A495A49C8
FC017C140149140348B7FC4816E05A5A5A5A5AB8FC17C0A42D417BC038>I<ECFFF00107
13FF011F14C0017F14F049C66C7ED803F8EB3FFED807E06D7E81D80FF86D138013FE001F
16C07FA66C5A6C4815806C485BC814005D5E4B5A4B5A4B5A4A5B020F1380902607FFFEC7
FC15F815FF16C090C713F0ED3FFCED0FFEEEFF80816F13C017E0A26F13F0A217F8A3EA0F
C0EA3FF0487EA2487EA217F0A25D17E06C5A494913C05BD83F80491380D81FF0491300D8
0FFEEBFFFE6CB612F800015D6C6C14C0011F49C7FC010113E02D427BC038>I<163FA25E
5E5D5DA25D5D5D5DA25D92B5FCEC01F7EC03E7140715C7EC0F87EC1F07143E147E147C14
F8EB01F0EB03E0130714C0EB0F80EB1F00133E5BA25B485A485A485A120F5B48C7FC123E
5A12FCB91280A5C8000F90C7FCAC027FB61280A531417DC038>I<121E121F13FC90B712
FEA45A17FC17F817F017E017C0A2481680007EC8EA3F00007C157E5E00785D15014B5A00
F84A5A484A5A5E151FC848C7FC157E5DA24A5A14035D14074A5AA2141F5D143FA2147F5D
14FFA25BA35B92C8FCA35BA55BAA6D5A6D5A6D5A2F447AC238>55
D<EC7FF00103B5FC010F14C0013F14F090397F801FFC3A01FC0003FE48486D7E497F4848
EC7F80163F484815C0A2001F151FA27FA27F7F01FE143F6D158002C0137F02F014006C01
FC5B6E485A6C9038FF83FCEDE7F86CECFFE06C5D6C92C7FC6D14C06D80010F14F882013F
8090B7FC48013F14802607FC0F14C0260FF80314E04848C6FC496D13F0003F141F484813
07496D13F8150000FF157F90C8123F161F160FA21607A36D15F0127F160F6D15E06C6C14
1F6DEC3FC06C6CEC7F80D80FFE903801FF003A07FFC00FFE6C90B55AC615F0013F14C001
0F91C7FC010013F02D427BC038>I<EE1F80A24C7EA24C7EA34C7EA24B7FA34B7FA24B7F
A34B7F169F031F80161F82033F80ED3E07037E80157C8203FC804B7E02018115F0820203
814B137F0207815D173F020F814B7F021F8292C77EA24A82023E80027E82027FB7FCA291
B87EA2498302F0C8FCA20103834A157F0107834A153FA249488284011F8491C97E498413
3E017E82B6020FB612F0A54C457CC455>65 D<B9FC18F018FE727E19E026003FFCC70007
7F05017F716C7E727E727EA2721380A37213C0A74E1380A24E1300A24E5A4E5A4E5A4D5B
05075B94B5128091B700FCC7FC18F018FF19E002FCC7000113F8716C7EF01FFE727E7213
801AC07213E0A27213F0A31AF8A71AF0A2601AE0604E13C0604E138095B5120005075BBA
12F86119C04EC7FC18E045447CC350>I<DCFFF01470031F01FF14F04AB6EAE0010207ED
F803023FEDFE0791B539E001FF0F4949C7EA3F9F010701F0EC0FFF4901C0804990C87E49
48814948814948167F4849163F4849161F5A4A160F485B19074890CAFC19035A5BA2007F
1801A34994C7FC12FFAE127F7F1AF0A2123FA27F6C18011AE06C7F19036C6D17C06E1607
7E6C6DEE0F806C6DEE1F006D6C5E6D6C167E6D6C6C5D6D6D4A5A6D01F0EC07F0010101FE
EC1FE06D903AFFF001FF80023F90B6C7FC020715FC020115F0DA001F1480030001F8C8FC
44467AC451>I<BA12F8A485D8001F90C71201EF003F180F180318011800A2197E193EA3
191EA21778A285A405F890C7FCA316011603161F92B5FCA5ED001F160316011600A2F101
E01778A2F103C0A494C7FC1907A21A80A2190FA2191FA2193FF17F0061601807181F4DB5
FCBBFC61A443447DC34A>69 D<BA1280A419C026003FFEC7121F1701EF007F183F181F18
0F180719E01803A31801A3EE01E0F000F0A419001603A31607160F167F91B6FCA59138FE
007F160F16071603A31601A693C9FCAFB712F0A53C447CC346>I<B712E0A5D8001F90C7
FCB3B3B3A4B712E0A523447DC32A>73 D<B500FE067FB512806E95B6FCA26F5EA2D8003F
50C7FC013D6DEE03DFA2013C6DEE079FA26E6CEE0F1FA26E6C161EA26E6C163CA36E6C16
78A26E6C16F0A26E6DEC01E0A26E6DEC03C0A36E6DEC0780A26F6CEC0F00A26F6C141EA2
6F6C5CA36F6C5CA26F6C5CA26F6D485AA26F6D485AA26F6D485AA3706C48C7FCA293383F
F81EA2706C5AA2706C5AA3706C5AA2705BA2705BA2705BA2B6057FB6128071C7FCA2173E
171C61447CC36A>77 D<923807FFC092B512FE0207ECFFC0021F15F091267FFE0013FC90
2601FFF0EB1FFF01070180010313C04990C76C7FD91FFC6E6C7E49486F7E49486F7E01FF
8348496F7E48496F1380A248496F13C0A24890C96C13E0A24819F04982003F19F8A3007F
19FC49177FA400FF19FEAD007F19FC6D17FFA3003F19F8A26D5E6C19F0A26E5D6C19E0A2
6C6D4B13C06C19806E5D6C6D4B13006C6D4B5A6D6C4B5A6D6C4B5A6D6C4A5B6D01C00107
5B6D01F0011F5B010101FE90B5C7FC6D90B65A023F15F8020715C002004AC8FC030713C0
47467AC454>79 D<B9FC18F018FE727E19E0D8001F90C7000F7F05017F716C7E727E727E
721380A21AC084A21AE0A91AC0A24E1380A21A00604E5A4E5A4D485A050F5B92B712C096
C7FC18FC18C092CBFCB3A7B712E0A543447DC34D>I<B812F8EFFFC018F818FE727ED800
1F90C7003F13E005037F05007F727E727E727EA28684A286A762A24E90C7FCA24E5A6118
7F943801FFF005075B053F138092B7C8FC18F818E018F892C77FEF3FFF050F7F717F717F
A2717FA2717FA785A61B0F85A2187F73131F72141EB700E06DEB803E72EBE0FC72EBFFF8
060114F0726C13E0CC0007138050457DC354>82 D<DAFFE0131C010701FE133C013F9038
FF807C90B6EAE0FC4815F9489038801FFF3907FC00014848EB007F4848143F4848140F49
1407007F15035B1601160012FF177CA27FA26D153C7F7F6D92C7FC6C7EEBFFE014FE6CEB
FFF015FF6C15E016FC6C816C6F7E6C826C826C6C81011F810107811300020F8014000307
7FED007F82040F1380828212F082A282A27EA218007EA26C5D6C5E6D14036D5D6D140701
F84A5A01FFEC3FF002F8EBFFE0486CB65AD8FC1F92C7FCD8F80714FC48C614F048010713
8031467AC43E>I<003FBA12E0A59026FE000FEB8003D87FE09338003FF049171F90C716
07A2007E1803007C1801A300781800A400F819F8481978A5C81700B3B3A20107B8FCA545
437CC24E>I<B76C010FB512F8A526003FFEC93803E000B3B3A9011F17076280190F6D60
6F151F6D95C7FC6D6D5D197E6D6D5D6D6D1403DA7FFC4A5A6EB4EC3FF0020F9039F003FF
E06E90B61280020193C8FC6E6C14FC030F14E09226007FFEC9FC4D457CC356>I<B792B6
FCA526003FFECAEAFC00806D606F15016D608119036D606F15076D606F150F6D6081191F
6D6D93C7FC61027F163E6F157E023F167C8119FC6E6D5C18016E5E7013036E5E8218076E
6D5C180F6E5E70131F6E93C8FC705B037F143E82187E033F147C7013FC6F5C17816F5C17
C117C36F5C17E76F5C17FF6F5CA36F91C9FCA2705AA2705AA3705AA2705AA2705AA25045
7EC355>I<903801FFE0011F13FE017F6D7E48B612E03A03FE007FF84848EB1FFC6D6D7E
486C6D7EA26F7FA36F7F6C5A6C5AEA00F090C7FCA40203B5FC91B6FC1307013F13F19038
FFFC01000313E0000F1380381FFE00485A5B127F5B12FF5BA35DA26D5B6C6C5B4B13F0D8
3FFE013EEBFFC03A1FFF80FC7F0007EBFFF86CECE01FC66CEB8007D90FFCC9FC322F7DAD
36>97 D<EC3FFC49B512C0010F14F0013F14FC90397FF003FE9039FFC001FF0003495A48
494813805B120F485AA2485A6F1300007F6E5AED00784991C7FCA212FFAC6C7EA3123F6D
EC03C0A26C6C1407000F16806D140F6C6DEB1F006C6D133E6C01F05B3A007FFC03F86DB5
5A010F14C0010391C7FC9038003FF82A2F7CAD32>99 D<EE03FEED07FFA5ED001F160FB1
EC3FE0903803FFFC010FEBFF8F013F14CF9039FFF807FF48EBC00148903880007F4890C7
123F4848141F49140F121F485AA3127F5BA212FFAC127FA37F123FA26C6C141FA26C6C14
3F0007157F6C6C91B5FC6CD9C00314FC6C9038F01FEF6DB5128F011FEBFE0F010713F890
26007FC0EBF80036467CC43E>I<EC3FF80103B57E010F14E0013F8090397FF83FF89039
FFC007FC48496C7E48496C7E48486D1380485A001FED7FC05B003FED3FE0A2127F5B17F0
161F12FFA290B7FCA401F0C9FCA5127FA27FA2123F17F06C7E16016C6C15E06C6C14036C
6DEB07C06C6DEB0F806C01F0EB3F0090397FFE01FE011FB55A010714F0010114C0902600
1FFEC7FC2C2F7DAD33>I<EDFF80020F13E0027F13F049B512F849EB8FFC90390FFE0FFE
90381FFC1F14F8133FEB7FF0A2ED0FFCEBFFE0ED03F0ED00C01600ABB612F8A5C601E0C7
FCB3B0007FEBFFE0A527467DC522>I<DAFFE0137E010F9039FE03FF80013FEBFF8F90B8
12C048D9C07F133F489038001FF84848EB0FFC4848903907FE1F80001F9238FF0F00496D
90C7FCA2003F82A8001F93C7FCA26D5B000F5D6C6C495A6C6C495A6C9038C07FF04890B5
5A1680D8078F49C8FC018013E0000F90CAFCA47F7F7F90B612C016FC6CEDFF8017E06C82
6C16FC7E000382000F82D81FF0C77ED83FC014074848020113808248C9FC177FA46D15FF
007F17006D5C6C6C4A5A6C6C4A5AD80FFEEC3FF83B07FFC001FFF0000190B612C06C6C92
C7FC010F14F8D9007F90C8FC32427DAC38>I<EB7FC0B5FCA512037EB1ED07FE92383FFF
8092B512E002C114F89139C7F03FFC9138CF801F9139DF000FFE14DE14FC4A6D7E5CA25C
A35CB3A7B60083B512FEA537457CC43E>I<137C48B4FC4813804813C0A24813E0A56C13
C0A26C13806C1300EA007C90C7FCAAEB7FC0EA7FFFA512037EB3AFB6FCA518467CC520>
I<EB7FC0B5FCA512037EB293387FFFE0A593380FE0004C5A4CC7FC167E5EED03F8ED07E0
4B5A4B5A037FC8FC15FEECC1FCECC3FE14C7ECDFFF91B57E82A202F97F02E17F02C07FEC
807F6F7E826F7E816F7F836F7F816F7F83707E163FB60003B512F8A535457DC43B>107
D<EB7FC0B5FCA512037EB3B3B3A3B61280A519457CC420>I<90277F8007FEEC0FFCB590
263FFFC090387FFF8092B5D8F001B512E002816E4880913D87F01FFC0FE03FF8913D8FC0
0FFE1F801FFC0003D99F009026FF3E007F6C019E6D013C130F02BC5D02F86D496D7EA24A
5D4A5DA34A5DB3A7B60081B60003B512FEA5572D7CAC5E>I<90397F8007FEB590383FFF
8092B512E0028114F8913987F03FFC91388F801F000390399F000FFE6C139E14BC02F86D
7E5CA25CA35CB3A7B60083B512FEA5372D7CAC3E>I<EC1FFC49B512C0010714F0011F14
FC90397FF80FFF9026FFC0017F48496C7F4848C7EA3FE000078248486E7E49140F001F82
A2003F82491407007F82A400FF1780AA007F1700A46C6C4A5AA2001F5E6D141F000F5E6C
6C4A5AA26C6C6CEBFFE06C6D485B27007FF80F90C7FC6DB55A010F14F8010114C0902600
1FFCC8FC312F7DAD38>I<90397FC00FF8B590B57E02C314E002CF14F89139DFC03FFC91
39FF001FFE000301FCEB07FF6C496D13804A15C04A6D13E05C7013F0A2EF7FF8A4EF3FFC
ACEF7FF8A318F017FFA24C13E06E15C06E5B6E4913806E4913006E495A9139DFC07FFC02
CFB512F002C314C002C091C7FCED1FF092C9FCADB67EA536407DAC3E>I<90387F807FB5
3881FFE0028313F0028F13F8ED8FFC91389F1FFE000313BE6C13BC14F8A214F0ED0FFC91
38E007F8ED01E092C7FCA35CB3A5B612E0A5272D7DAC2E>114 D<90391FFC038090B512
87000314FF120F381FF003383FC00049133F48C7121F127E00FE140FA215077EA27F01E0
90C7FC13FE387FFFF014FF6C14C015F06C14FC6C800003806C15806C7E010F14C0EB003F
020313E0140000F0143FA26C141F150FA27EA26C15C06C141FA26DEB3F8001E0EB7F0090
38F803FE90B55A00FC5CD8F03F13E026E007FEC7FC232F7CAD2C>I<EB01E0A51303A413
07A2130FA2131FA2133F137F13FF1203000F90B51280B7FCA4C601E0C7FCB3A3ED01E0A9
150302F013C0137F150790393FF80F8090391FFC1F006DB5FC6D13FC01015B9038003FE0
23407EBE2C>I<D97FC049B4FCB50103B5FCA50003EC000F6C81B3A85EA25EA25E7E6E49
1380017FD901F713FE9138F807E76DB512C7010F1407010313FE9026007FF0EBFC00372E
7CAC3E>I<B6903803FFFCA5000101E09038003E006C163C80017F5D8017F8013F5D6E13
01011F5D6E1303010F5D6E13076D5DED800F6D92C7FC15C05E6DEBE01E163E6D143CEDF0
7C027F1378EDF8F8023F5B15FD021F5B15FF6E5BA36E5BA26E90C8FCA26E5AA26E5AA215
78362C7EAB3B>I<B5D8FE1FB539801FFFF0A500019027C0003FE0C7EA7C007114786E17
F86C6F6C5C6E1601017F6E6C5CA26E011F1403013F6F5C6E013F1407011F6F5CA26E0179
140F010F048090C7FC6E01F95C6D02F0EBC01E15806D902681E07F5B18E003C3157C6D91
39C03FF07815E76DDA801F5B18F803FF14F96E9039000FFDE018FF6E486D5BA36E486D5B
A26E486D90C8FCA24B7F02075DA26E48147C4B143C4C2C7EAB51>I<B500FE90383FFFF0
A5C601F0903803E0006D6C495A013F4A5A6D6C49C7FC6E5B6D6C137E6DEB807C6D6D5A6D
EBC1F0EDE3E06DEBF7C06EB45A806E90C8FC5D6E7E6E7F6E7FA24A7F4A7F8291381F3FFC
EC3E1F027C7F4A6C7E49486C7F01036D7F49487E02C08049486C7F49C76C7E013E6E7E01
7E141FB500E090B512FCA5362C7EAB3B>I<B6903803FFFCA5000101E09038003E006C16
3C80017F5D8017F8013F5D6E1301011F5D6E1303010F5D6E13076D5DED800F6D92C7FC15
C05E6DEBE01E163E6D143CEDF07C027F1378EDF8F8023F5B15FD021F5B15FF6E5BA36E5B
A26E90C8FCA26E5AA26E5AA21578A215F85D14015D001F1303D83F805B387FC007D8FFE0
5B140F92C9FC5C143E495A387FC1F8EB07F06CB45A6C5B000790CAFCEA01FC36407EAB3B
>I<001FB71280A49026FC001F130001E0495A5B49495A90C7485A48495B123E4A5B4A5B
003C495BA24A90C7FC4A5A4A5AC7FC4A5A495B495BA2495B499038800780491300A2495A
4948130F49481400A2485B48495B485BA248495B4890C75A48485C15034848EB1FFEB7FC
A4292C7DAB32>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fi cmbx12 24.88 46
/Fi 46 123 df[<96380FFFFE060FB612E04DB712FC051F16FF94B912C0040784041F18
F8047F9126FC001F7F4BB6008001017F030702F8C8EA3FFF4B02E0030F7F033F02804B7F
4B49C9127F92B54893B57E4A02F05D4A4A4B804A4A5D4A4A84634A91C9FC4A5BA24A5B51
80755C91B5FC5EA3755CA2755C755C755CE23FFEC8FCF40FF899CAFCAF083FB612FCBFFC
A9C702FCC912038787B3B3B3B2003FB800F0013FB812F0A9>116
144 123 271 129 12 D<BA12F0B33C137DB74D>45 D[<F31FE0F37FF8A2517EA2507FA3
507FA25080A35080A25080A35080A25080A397B67EA24F81A34F81A24F82A34F82A24F82
A21AFBDF3FF981A2DF7FF1811AF06207FF6D80A24E01C081871A804E6E80A24E01008287
61060F6E81A24E48838761063F6E81A24E4883876106FF6F80A24D498388614D7080A24D
90C8FC768160050F7081A260051F708160053F7081A260057F70816005FF7180A2604C72
80604C7280A295CAFC4C72815F040F7281A294BDFC4C88A24C88A34C88A293BE7E05E0CB
7E5F4B7480A24B497280A294CCFC4B7481A24B487381A25E031F7481A24B487381A25E03
7F7481A24B487480A25E4A7680A24A497480A293CEFC4A7681A24A4875814A7E0107B512
FCB96C043FBA12FCA9>158 145 120 272 175 65 D[<BFFC1EFEF6FFE01FFCF7FF8020
F020FC20FF8DC7000392CA001F15E00B0181776C800C1F807814FF0C03818A78818E7980
8B8E8B8E8B8EA27980A4791580AB551500A4555CA26A676A676A555C9CB65AA2545D5492
C7FC545C5414F80C3F5C545C53B612800B0F4AC8FC0B7F14F80A1FB612E095BBC9FC1FF8
1F801FF8F7FF8020F820FE95CBECFFC00C1F14F00C07807814FE0C006E7E798079807980
7980798079808E79158023C08B23E08C23F0A223F88CA223FCA38C23FEAB5614FCA55614
F8A39DB612F0A25515E06723C055158067551500555C555C9CB6FC545D0C075D0C1F15C0
9BB75A0B0F93C7FCC212FC6921E021800EFCC8FC20F020800DF0C9FC0CFCCAFC>143
142 120 269 165 I[<0803B500C0EE01F00703B600FEEE03F8077FDBFFE015070607B8
00FC150F063F05FF151F4DBA00E0143F050F07F8147F053F07FE14FF94BC5B04039326F8
000FECC003040F4BC86CEBF007043F03C0030F6D5A93B648C900036D5A4B03F09339007F
FF3F030703C0051F90B5FC4B92CB7E033F02FC18034B02F08492B648844A0380193F4A92
CD7E4A4A864A4A864A02F0864A4A864A8991B65A494B874992CF7E4C885B494A885E498B
494A88A2495C8D90B65A8D5A5E48217FA24892D1FC223FA25A5DA248211FA3485CFA0FF0
9FC7FCA25AA45DA3B6FCB27EA381A47EA46C80FA07F0FA0FF87EA2817EA36C6F1D1F23F0
7E827E223F6D6E1EE0A26D6E1D7F23C06D6E1DFF7F705213806D806D55130070646D6F64
6D6F515A6E6E1B1F6E6E515A6E6E515A6E6E1BFF6E6E505B6E6E505B6E6F4F5B6E03E04F
90C7FC6F6EF13FFE6F02FC4F5A030F02FF4E485A6F03C005075B030103F0051F5B6F03FE
057F1380043FDAFFE00303B5C8FC040F03FE033F13FC0403DBFFF80107B55A040093B812
E0053F1A80050F4FC9FC050119F8DD003F18C0060795CAFCDE007F16F0070393CBFCDF00
0314C0>141 146 115 271 168 I[<BE12FEF5FFFCF6FFC01FFCF7FF8020E020FC20FF21
C0C700030380C8000116F0E2000F810B0015FE0C1F800C0315C00C00810D3F8079800D07
14FE79807981796C808C7A807A808F7A807A808C8F7A818DA17E8DA17E8DA17EA27B80A2
A17E8DA17EA28DA17EA3A113808DA3A113C0A57B15E0A6A113F0B3A2A113E0A569A113C0
A5A11380A269A2A11300A3575CA2A15AA269A15A69A15AA2575CA15A69A15A9EB6FC5692
C7FC6B565C68565C565C565C565C9DB65A5592C8FC0D075C555C0D3F5C9CB65A0C0315C0
0C0F5D0C7F92C9FC0B07B612FC52B712F0C212C09ECAFC20FC20F020800DFCCBFC1FE00C
FCCCFC53CDFC>156 142 120 269 178 I[<C212F8A48DA5C7000303C0C9123FF5007F1E
0F0C0180787E1F1F8B8B1F018BA27A7E8C8CA28CA28CA28C8EA28CA38CA38EA2E21FF015
7FA67B7EA40A3F93C8FCA41C7FA21CFFA26363631B1F1B7F0807B5FC95B8FCA99538C000
07F2007F1B1F1B07878787A21C7FA21C3FA3FA7FC01C1FA2FAFF80A6571300A299CAFCA3
69A26AA22107A3210F6AA2211FA2213FA2575AA221FFA26868565BA26868207F9DB5FC55
5C1F071F1F1F7F0C03B6FC1E3F0B1FB7FCC35AA66AA3>138 141
120 268 153 I[<C21280A421C0A5C7000303C0C81201F40007F5007F0C1F14E01E071E
01787E8B8B8B8B7913F0A28B8BA2207FA3203F21F8201FA4200FA321FC2007A4F47FC0A3
F803FEA49DC7FCA31CFFA463A263A26363631B7F50B5FC1A1F95B8FCA99538C0001F1A01
747E1B1F878787A287A287A41C7FAA99CBFCB3AFBC12F8A9>127
141 120 268 146 I[<0803B500C0EE01F00703B600FE4C7E077FDBFFE015070607B800
FC150F063F05FF151F4DBA00E0143F050F07F8147F053F07FE14FF94BC5B04039326F800
0FECC003040F4BC86CEBF007043F03C0030F6D5A93B648C900036D5A4B03F09339007FFF
3F030703C0051F90B5FC4B92CB7E033F02FC18034B02F08492B648844A0380193F4A92CD
7E4A4A864A4A864A02F0864A4A864A8991B65A494B874992CF7E4C885B494A885E498B49
4A88A2495C8D90B65A8D5A5E48217FA24892D1FC223FA25A5DA248211FA3485C7C5A9FC9
FCA25AA45DA3B6FCB27EA381A20A0FBB12F8A27EA46C80A36C98C96C02F8C7FCA2817EA3
6C81A27E827E827FA26D80A26D806D80A26D806D80A26D816D816E806E806E806E6E97B6
FC6E806E806E03C0606E816F02F8606F02FE60030F6E606F03E0173F030103F85F6F03FF
933801FFFC043F03E00307497E040F03FF033F497E040304FC0107B5EAE00F040093B848
7E053FF20001050F07FCEB007F050107F0141FDD003F06C01407060795C81201DE007F04
F8ED00700703048093C8FCDF000302E0CDFC>157 146 115 271
183 I[<BC12C0A9C7000103E0C8FCB3B3B3B3B3B3B0BC12C0A9>74
142 122 269 87 73 D[<BC12F8A9C7000303C0CEFCB3B3B3B3A5F8FF80A4672100A667
A368A21F07A41F0FA3555AA21F3FA21F7FA21FFFA2666668666666666653B5FC65650B1F
5C1D7F0A03B6FC1C1F0903B7FCC1FCA468A5>121 142 120 269
140 76 D[<B900C00C7FB812E0729BB9FC72657265A37265A27265C70003A101F8C8FC72
F51FEFA2706EF43FCFA3706EF47F8FA2706EF4FF0FA2706EF301FEA3706EF303FCA2706E
F307F8A2706EF30FF0A2706EF31FE0A3716EF23FC0A2716EF27F80A2716EF2FF00A2716E
4F5AA3716E4F5AA2716E4F5AA2716E4F5AA3716E4F5AA2726E4E5AA2726E4E5AA2726E4E
C7FCA3726E4D5AA2726E4D5AA2726E4D5AA2726E4D5AA3726E4D5AA2736E4C5AA2736E4C
5AA3736E4CC8FCA2736E4B5AA2736E4B5AA2736E4B5AA3736E4B5AA2736E4B5AA2746E4A
5AA2746E4A5AA3746E4AC9FCA2746E495AA2746E495AA3746E495AA2746E495AA2746E49
5AA2756E485AA3756E485AA2756E48CAFCA275ECF1FEA275ECFBFCA375ECFFF8A2755DA2
755DA3765CA2765CA27691CBFCA2765BA34A6D715B49B512FEB900FC6F490303BB12E0A2
765BA2765BA3775A0B1FC9FC>203 142 120 269 220 I[<B900E04EB912F884848484A2
848585C700037094C7000302FCC7FC73DF000F90C8FC7C5A85858585A270817081708170
81868270817081708187837181718171817181A271817181718172818884728172817281
7281A272817281738173818985738173817381898573817481748174818A867481748174
818A8675817581758175818B877581758175818C887681768176817681A2768176817681
77158021C0897715E07715F07715F87715FCA27715FE7715FF7815877815C722E78A7815
F77815FF8AA28A8A8B8B8BA28B8B8B8BA28B8C8C8C8CA28C8C8C8CA28D8D8D8D8DA24A6D
8849B500FE88B900FC86227FA2223F221F220F2207A27C5A>165
142 120 269 182 I[<97B512F0077FECFFE00607B712FE067FEEFFE00503B912FC051F
F0FF80057F19E00403BB12FC040F9226E0007F14FF043F02FCC7000315C04C02E0DA007F
804BB60080031F14F8030702FCC9000314FE4B4A70804B02E0706C80037F0280051F14E0
92B6CB6C804A4A72804A4A72804A02F00600804A4A737F4A4A73804A8B4A4A738091B6CD
6C80494A7480A2494A7480494A7480498C4C86498D4C87498D494A7580A290B68B4C8748
8EA24892CF6C80A3488E4B88A2488EA3484A761580A34823C0A5484A7615E0A7B621F0B3
6C23E0A26F64A56C23C0A46F646C2380A36C23006F64A26C6AA270636C6AA26C6A70636C
6A70636D69A26D6E98B65AA26D6E505DA26D6E5092C7FC6D6870626D6E505C6D686D6F4F
5C6E6E4F5C6E6E4F5CA26E6E96B65A6E6E4E92C8FC6E6E4E5C020102FF060F14F86E6F4D
5C6F6E4D5C6F02F094B65A030F6E4C92C9FC6F02FE04075C03016E6C031F14F86F03F092
B65A043F02FE020715C0040FDAFFF090B7CAFC040392B812FC04001AF0051F198005074E
CBFCDD007F17E0060F94CCFCDE007F15E0070002F0CDFC>148 146
115 271 175 I[<BE12F8F5FFF01EFF1FE01FFCF7FF8020E020F820FEC700030380C800
0781E2003F15C00B03810B00810C3F8078800C07807880788178818E8B8E8B8E8B8EA28E
A28B8EA42380AC2300A46A67A26AA26A676A676A9CB65A6A665492C7FC545C0C1F5C545C
9BB612E00B075D0B3F5D0A07B648C8FC95BB12F820E0208055C9FC1FF09CCAFC1EF00BF8
CBFC06C0D0FCB3B3B2BCFCA9>137 142 120 269 159 I[<BD12FCF4FFFCF5FFE01EFCF6
FFC01FF01FFE797E20E0C700030380C86C15F80A0181E2003F14FF0B07810B0115E0776C
8078807880788078808A78818E7881A28E8B8EA37980A48EAA6AA3676AA26AA29CB65AA2
6A545D9FCAFC66545C545C545C545C9BB612C0535D0B074ACBFC0B3F5C52B612F00A7F15
C095BBCCFC1FF81FC054CDFC66F6FF801FE00680C7000315F8E1003F14FE0A0F800A0315
C07681766C807780778077808C7781898D898D898DA38A8DAD8DACA1EB1FC0A1EB3FE08D
8AA37880A1137FA114C078817818FF7C1580785F786F1500BB00FE6F6F5B796E495A7902
FEEB1FFC799139FFC07FF80D0792B55A0D015F796C5E0E1F5E0E034BC7FCD4001F14F8E7
003F13C0>163 144 120 269 173 82 D[<93260FFFF8163E4BB600E0153F031F03FE5D
037FDBFFC05C0203B800F05B020F05FC5B4A05FF5B027FF0C00F91B526FE000FECF01F01
0302C0D9007F6D5A4991C800076D5A4901FC030090B6FC4901F0163F4949160F49018082
90B5170192CBFC4849844849181F87484984A2484984874886A248498588A24887A388A2
B58680A36E85A280A26E8580A2818103F0725A6C6E96C7FC15FE8116E06C15FEEEFFE017
FF6C17F0F0FF806C18F8F1FFC06C19FCF2FF806C1AE01BF86C1AFE6C747E6D1AE0886D86
6D866D1AFF6D876D87010087806E86020F86020386020086153F030F851501DB001F1980
1601DC000F18C0EF007F060717E0F0003F070316F0F1003F1A0F080315F81A00871B1F87
7514FCA287007F86486C85A288A388A36D86A31EF87FA37F1EF0A26D626D1CE0A27F6D50
13C0A26E1B806E96B5FC6E1B0002F8606E4E5B6E626E6C5F03E04D5B03F84D5B03FE057F
5BDBFFC093B55A04F803035C496CD9FF80021F91C7FCD9FC1F02FF49B55AD9F80792B75A
496C19F049C66149011F18804901074DC8FC90C817F848031F16C048030003FCC9FC007C
04011480>102 146 115 271 129 I[<000FC312F8A6488EA304C0C7001F4AC7120103F8
C8F0000F03C01C0192C9737E02FC1E1F4A1E0702E08A4A8A4A8A4890CA757EA249203F49
201FA349200FA2492007A4492003007F8EA4498CA848487A1380A6CC99C7FCB3B3B3B3AA
030FBD12FCA9>145 140 120 267 162 I[<BC040FB912C0A9C7000303C0CD001F02E0C7
FC9E26007FF8C8FC7C5AB3B3B3B3B36E555AA3848022FF6BA26F65726481696F9CC9FC72
626F66210F6F6E505AA26F6E505A6F535A6F6E1AFF734E5B706E4E5B70637002F04E5B70
6E063F90CAFC706E4E5A7002FF4D485A04006F04075B7102E0043F5B7102FC4BB55A050F
DAFF80020F14807103FC0103B6CBFC050192B812FC716C61061F19E006031980060006FC
CCFC071F17F007011780DF001F03F8CDFCE0001F49CEFC>162 144
120 269 179 I[<BB00E0050FB812F0A9C7001F92CE00014AC7FCE7000F13C07209035B
6E5590C8FC846E555A846E555AA2846E555A846E555A846F545A84A26F535B846F535B85
6F5390C9FC856F66210F856F535A856F535A856F66217F8570525A8570515B8570656886
705190CAFC8670515A867064201F8670515A8670515A86716320FF86714F5B86714F5B87
7198CBFC6787714F5A87714F5A8771621F3F87714F5A87724E5A87724D5B87A2724D5B88
724D90CCFC88724D5A8872601E1F88724D5A88724D5A88735F1EFF88734B5B1CFF734B5B
1D837394CDFC1D871DC773EDCFFE1DEF73EDFFFCA2735EA3735EA2745DA2745DA3745DA2
7492CEFCA2745CA3745CA2745CA2745CA3755BA2755BA2755BA27590CFFCA2F303FC>
164 144 123 269 175 I[<BB6C010FBA00FC0307B812F8A9C76C02FCCB000703C0CC6C
EC8000786F070001F0C7FC6E6EA1EB3FE0781E7F6E796371A113FF78816E6FA15BA16079
806E6FA190C8FC79646E796272230779806E6FA15AA1180F79816E6FA15A791C1F6F7961
72233F79816F6E4E65A1187F8F6F6E4E65A118FF6F516F6173698F6F6F4D9AC9FCA15F8F
6F6F4D640EDF1A076F09FF6F6073210F0E8F816F6F4C65A1171F0E0781706E4C65556C1A
3F700707715F73217F556C81706E040F65A117FF556C81706F031F65556D6070073F7194
CAFC7467556D80706F037F64A11607556D80706F03FF64556D180F704E735D741F1F9CC7
6C81716E4A65A1163F546E81716E020765546E187F71050F735D741FFF546E81716F011F
65A15D546F80716F013F9ACBFC546F5E71057F735C751D07546F80716F01FF64A1150F54
6F1580716F48659BC96C161F724B09C05B09FC1D3F537015E072DAFE0765A1157F537015
F072DAFF0F65537016FF72031F755B0A9F1BF9537114FD7203FF9ACCFCA191B5FC538372
6853837268A253837268A29ACB7E736752847367A252847367A2528473675285739CCDFC
A252857366A25285736652857366A299CD7E7465A25186083F655186081F655186E007F0
75CEFC>229 144 123 269 240 I<93B512FC037FECFFF00207B8FC023F17E091B912F8
4918FE0107727E499126C0007F14E04901E0C7000F80496D020380496D020014FE6F6F7F
90B570806F6F8085486E6F807380A27380A28885886C5CA26D4982886D5B6D5B010713C0
010190CAFC90CCFCA90603B7FC050FB8FC0403B9FC167F0307BAFC153F4AB7EA807F020F
EDE000023F02FCC7FC91B612E0010392C8FC4914FC011F14F04914C0495C90B548C9FC48
5C485C485C485C5A5D485CA24891CAFCA3B6FC5CA397B6FCA461806C60F107EF6C6E150F
6F16CF6C183F6FDB7F8F806C6EDBFF0F14E06C02FCDA03FE15FE6C6E91260FFC0791B5FC
6C6E6CD93FF817806C923AF803FFF003013F91B6487E010FEF8000010394C77E010004FC
141F021F03F0140702010380DA007F1400DA000701F8CDFC695F79DD71>97
D[<ED1FF0017FB5FCB7FCA9EA003F1307A27FB3B296383FFFC00607B512FE063FECFFE0
4DB712F8050716FF051F17C0057F17F094B5D8C00F8004F301FCC714FE04F701E0023F7F
93B50080020F804DC86C14E005F80301804D6F804D707F05808294CA804C717F4C7180A2
4C71808BA27680A28B88A28BA28BA3888BA52080B02000A56764A267A3676467A2525CA2
67647062704D91C7FC704D5BA2714C5B7193B55A05F04B5CDCBFF84B5CDC1FFC030F5C4B
6CB44B91C8FC7001C0027F5B4B6C01F00103B55A4BC601FF013F14F04B6D90B712C04B01
1F94C9FC4B6D16FC4B010316F092C86C15804A030F02F8CAFC90CB49CBFC>113
144 121 270 129 I<94387FFFF0041FB612E093B712FE0307707E031F17F092B97E4A18
FE020784021F9126F8000F14804A0280010014C04A49C74814E049B500F85C494A17F049
4A5C495C494A4A14F84991C8FC5D495B90B5FC5D5A485C7314F05A4B6F14E05A7314C048
7214804B93383FFE00F20FF84896C8FCA4485CA5B6FCB07EA281A37EA36C80A37E6F18FE
6CF201FFA26C6E5F1CFE6C801B076C6EEF0FFC6D7F70EE1FF86DF13FF06D6E167F6D6EEE
FFE06D02F84B13C06D6E5D6D02FF030F13806D03C0023F1300023F02F0903801FFFC6E91
26FF801F5B020792B65A6E18C0020060033F4CC7FC030716F8030016C0041F4AC8FCDC00
7F13C0585F78DD67>I[<F53FE098B6FC4FB7FCA996C77E1B0FA287B3B294383FFF80040F
B512FC93B71280030716E0031F16F8037F16FE4AB9128702074AC66C13C7021F02E00107
13F74A91C890B6FC4A01FC153F49B548150F4902E081494A81494A814991CA7E495B8749
498390B548835A5D5AA2485CA25A5D5AA35AA25D5AA5B6FCB07EA57E81A37EA27EA2817E
A26C80A26C626C6E5F636D7F6D6D94B6FC6D606D6D1607705D6D6E4B81010102F0157F6D
6E92B712FE6E01FE020301EF91B512806E6D6C011F13CF020FDAF801B5120F020391B612
FE6E17F86E6C16E0030F16800301EDFC00DB003F14E0040049C74AC8FC>113
144 120 270 129 I<94387FFFC0040FB6FC93B712E0030716FC031F16FF037F17C04AB9
12F00207DAF80380021F912680003F13FE4A49C7000F7F4A01F802038049B5486E804902
C06E6C7F494A6F7F4991C9FC49727F4949707F4B84498490B548707F5A4B198048855D48
1CC086481CE05D5A871DF05AA25D5AA21DF887A2B6FCA392BBFCA51DF00380CDFCA77EA4
817EA37EA2817EA26CF307F06FF00FF87E816C1B1F6F19F06C1B3F6D6DF07FE06D7FF4FF
C06D6E4C13806D6E5E6D02F04C13006D6EEE1FFE6D6E4C5A6D6C01FFEEFFF86E02E00203
5B6E02FC021F5B02079126FFC003B55A6E92B7C7FC020060033F17F8030F17E003011780
DB003F03FCC8FC040315C0DC000F01F8C9FC5D5F7ADD6A>I[<95383FFF80050FB512F094
B612FE040781041F16C0047F824BB87E0307DAF8077F031FDAC00F7F4B49C6487F4B495B
92B500F0814A4A5B4A5C4A93B612805F4A91C7FC5C5E5C5E5C731400A24C6E5B91B56F5B
A2735B070313E00700138097C8FCB3A4BA12F8A9C702FCCBFCB3B3B3B3A2003FB9FCA9>
81 144 121 271 71 I<F5FFC093260FFFFC030F13F04BB600E0027F7F031F03FE49B512
FE037F9226FF8007800203B8EAF01F020FDDFC3F15804A7148133F027FDA003F90B500F0
14C091B500F80107ED807F4902E00101ECFC00010702806D6C5B93C87E49496F7F49496F
7F49496F6D6D1380491A8077130090B5486F6E6C5AF503F84875C8FCA2484A6F80A44887
AB6C63A46C6E4B5CA26C63A26D6D4B5CA26D97C9FC6D6D4B5B6D6D4B5B6D6D4B5B705C01
0102E049B512E06D02F801075C4902FF013F5C4992B648CAFC496002F317F090260FE07F
1680031F4BCBFC90261FC00115E0DB000F01FCCCFC013F91CFFCA3137FA280A380A28080
806E7E15F092B812F06DF0FFE01BFEF3FFC06D1AF81CFE767E6D1BE06D87896D1BFE6D87
7F6E878A0103BD7E130F013F8890BEFC4802E0C9003F814891CBFC4801FC180F48490601
804849727E484985884849737F88A2B55A88A66E616C65A26E616C6D4F5B6C656E616C6D
4F5B6C6D96B55A6C6D6C05035C6F5FC602F0051F49C7FC6D01FC057F5B6DD9FF800303B5
5A010F02F8033F14E06DDAFFE0010FB65A010192B9C8FCD9003F19F8020F19E0020196C9
FCDA001F17F0030194CAFCDB000192CBFC6A887ADD74>I[<ED1FF0017FB5FCB7FCA9EA00
3F1307A27FB3B2963803FFFC073FEBFFE096B612F8060715FE061F6F7E4E16E095B87E4D
D9FC03804DD9C000804D48C76C7FDD0FF880DD1FE0824D486E804D5A05FEC881DCF1FC81
5F04F385EEF7F04D81EEFFC0A24D84A294C9FCA25EA35EA45EB3B3AFB9D8E001B912C0A9
>114 143 119 270 129 I[<EC3FC0ECFFF0010313FC497F497F498049804980A290B67E
A24881A86C5DA26D5CA26D5C6D5C6D91C8FC6D5B6D5B010013F0EC3FC091CAFCB3A3ED1F
F0017FB5FCB7FCA9EA003F1307A27FB3B3B3B0B91280A9>49 144
119 271 65 I[<EF03FCEF0FFF053F13C04D7F94B57E4C804C804C80A24C80A24C1580A8
701500A2705CA2705C705C705C715B715B050F90C7FCEF03FC94C9FCB3A3F1FF800407B6
FC031FB7FCA9ED0001707E8383B3B3B3B3B1137F3801FFC0000713F0487F487F487F1A00
486D5CA2B66C5DA25F616194B5FC61A26C4A485C4C5C6C495E4A4991C7FC6C49495B6C49
013F5B6C01FE90B512F06C90B75A6C17806C6C4BC8FC011F15F8010715E0010092C9FC02
0F13E0>65 185 140 271 71 I[<ED1FF0017FB5FCB7FCA9EA003F1307A27FB3B3083FB7
12C0A908014AC7FCE0003F13C09AC8FC515A515A505B5013E0080F5B505B5090C9FCF27F
FC4F485A4F5B4F5B4F5B4F90CAFCF17FFE4F5A4E5B4E5B4E13C0061F5B4E90CBFC4E5AF0
FFF805037F5F4D7F4D7F4D8094B67E16F104F38104F78193B77EA2868605F18017E04D81
4D6C804D6C8004FC6D805E4C6D804C6D807280A27280728173808588738073807380A273
8073807381A27480748074808689748074807480A274818A5015F0B96C017F92B5FCA9>
112 143 121 270 123 I[<ED1FF0017FB5FCB7FCA9EA003F1307A27FB3B3B3B3B3B3AC
B912C0A9>50 143 119 270 65 I<DB3FE0912601FFFC943801FFFC017FB5031FD9FFE0
041FEBFFE0B792B600FC93B612FC060303FF030315FF060F04C0020F16C0063F04F0023F
16F095B86C91B87E4DD9FC036E49D9FC03804DD9C0006E49D9C000804D48C7003F6D4948
C7003F7FDD0FF86EDB0FF880D8003F4B48714848830107DB3FC06E9126C03FC06E804D48
4E5A6D4BC86F48C881DCE1FE6FDAE1FE814D61DCE3F8DEF3F884DCE7F0F0F7F04D6F4B81
DCEFC0F0FFC0A2DCFF804F84A294C993C9FCA24C61A34C61A44C61B3B3AFB900E090B900
E090B912E0A9B35D77DCC2>I<DB3FE0913803FFFC017FB5033FEBFFE0B792B612F80607
15FE061F6F7E4E16E095B87E4DD9FC03804DD9C000804D48C76C7FDD0FF880D8003FDB1F
E08201074B486E804D5A6D03FEC881DCE1FC815F04E385EEE7F04D81EEEFC0A2DCFF8084
A294C9FCA25EA35EA45EB3B3AFB9D8E001B912C0A9725D77DC81>I<94381FFFF00407B6
12C0047F15FC0303B87E030F17E0037F17FC4ABAFC4A9126FC007F80020F02C0010714E0
4A49C880027F01F8033F13FC91B5486F7F4902C003077F494A6F804991C96C8049497080
4949717F49874949717FA290B548717F48884B83481D80A2481DC04B83481DE0A2481DF0
A3484A7114F8A4481DFCA5B61BFEAF6C1DFCA56C6E4D14F8A36C1DF0A36C1DE06F5F6C1D
C0A26C6E4D1480A26C1D006F5F6C646D6D4D5B6F94B5FC6D636D6D4C5C6D6E4B5C6D6E4B
5C6D02F0031F5C6D6E4B91C7FC6D6C01FE92B512FC6ED9FFC001075C6E02FC017F5C0207
91B812C0020196C8FC6E6C17FC031F17F003031780DB007F03FCC9FC040715C0DC001F01
F0CAFC675F7ADD74>I<DB1FF091381FFFC0017FB50203B6FCB7021F15E095B712FC0503
16FF050F17C0053F17F094B912FC04F1DAC01F8004F79026FC00018093B500E06D6C14C0
D8003F93C86C8001074B030F8005F86F806D03E06F804D6F804D8194CA6C7F4C864C7180
5E7680A27680A27680A28B88A28BA288A28BA4882080B0200064A467A26467A3525CA267
64676467647062704D91C7FC7094B55AA2714B5C714B5C714B5C05F84B5C71033F5C05FF
4B91C8FC06C049B55A04FB01F001075C04F801FF017F14F07190B712C0051F94C9FC7116
FC050316F0DD007F1580060F02F8CAFC060049CBFC96CDFCB3ACB912E0A9718579DC81>
I<DD7FFFEE1FE0040FB500F0153F93B600FE157F03076F7E031F04E014FF92B800F85B02
03834A715B021F923A007FFF80074A02F0010F13C091B600C001036D5A4992C86D5A4902
FCED3FF8494A031F5B494A6F6C5A494AED07FE494A6FB6FC494A8193C9FC90B682484A83
A2484A83A2484A83A2484A83A25A4B83A25AA25D5AA5B65AB07E81A47EA3817EA26C80A3
6C62816C62816C626C6E5F98B6FC6D7F6D6E5D6D606D6E5D6D6E151F6D6E5D6D6E5D6D02
FE913801FFEF6E6D020713CF6E02C0011F138F020F913AFC01FFFE0F020391B612FC0200
17F0033F16C0030F1600030115FCDB003F14E0040049C7FC94C9FCB3AC0703B91280A971
8578DC7B>I<DB7FC049B47E90B6021F13F8B7027F13FE4DB67E4D15E04D814D814D0107
7F94263FF00F7F94387FC01F4D48487FD8003F16000107DAC1FE491480EEC3FC6D5DEEC7
F05F16CF5F16DF4D6D1400A204FFC76C5BA2735B4C6E5B735B070013C04C92C8FCA45EA6
5EB3B3AAB912FCA9515D79DC5F>I<92261FFFF814F80203B638C001FC023FEDFC0791B8
121F010317FF130F013F9038F8001F4990C8FCD9FFF8153F4801E0150F48491503484981
4890CAFC197F4848173F191F485AA2007F180FA31907487EA27FA28002E0705A6E93C8FC
14FC14FF15F06CECFF8016FCEEFFF06CEEFF8018F06C17FE727E6C18E0856C18FC6C846C
727E6C856D84011F846D841303010084023F83140F020183EC001FDB007F16801603DC00
0F15C01700183F060F14E0007F1703486C82727E857F85857FA2857F1BC07FA27F1B806D
5F7F1B006E5E6E5F6E163F6E4C5A02FC4C5A6E03035B6E6C4A5B03F0023F5B03FF0107B5
5A01F991B7C7FCD9F07F16FCD9E01F16F0D9800716C0D9000193C8FC48D9003F14F8007C
020349C9FC4B5F78DD5C>I[<ED03FEA81507A5150FA4151FA3153FA2157FA215FFA25CA2
5C5CA25C5C5C5C91B5FC13035B131F017F91B712F00007BAFCBBFCA7C74AC9FCB3B3AAF1
01FFB1616E17FE82A219076E17FC836EEE0FF871131F6E6EEB3FF071137F6E6EEBFFE06E
DAFF0313C06E92B512806E1700033F5D6F5D03075D030015E0041F1480040001FCC7FC>
72 132 124 258 90 I<DB0FF8F01FF0017FB594B6FCB74BB7FCA9D8003F94C77E010719
0FA26D85B3B3B063A463A263A27F6398B6FCA26DF001FB7015036EEF07F3E00FE3806E6D
151FE07FC314FF6E6D6CDAFF83EDFFC06E6E010313036E02FCEB3FFE6E91B612FC020017
F86F16E0031F16800303EDFE00DB007F14F8040102C093C8FC725E77DC81>I<B90303B7
FCA9D8000702F8CA000FEBFE006D6E050013E0666D6E6164826D5090C7FC836E4F5AA26E
6E4C5AA26E6E4C5AA26E6E5F1C3F836E4F5A836E4F5AA26E6E4B5BA26E6E4B90C8FCA26F
6E5D1B07846F4D5A846F4D5AA26F6E4A5AA26F6E4A5AA26F6E5D1BFF846F4C5B846F4C90
C9FCA2706E485AA27002C05B1A0F7002E05B1A1F19F0704B5A19F8704B5AA2706E485AA2
706E5B96B5FC7093CAFCA3715CA2715CA2715CA2715CA3715CA2715CA2715CA27191CBFC
A2725AA3725A725A725A705D7BDB7B>I<B800FE017FB700F8023FB612F8A9D8000F02F0
C8000702C0C9003FEBF800100313806D6E6F7390C7FC775E6D69706F6E1607A26D6E6F62
77160F6D6970706D161FA26E6E6F61516D163F6E687192B6167FA26E68714A6F15FF6E68
714A608A6E9DC8FC714A6F5C6E6771DA0FFD17078A6E06F86071021F6F140F6E67714A48
6C161F8A6F4D6C5F72017F6F143F6F667249486C167F8A6F4D6C5F72487113FFA26F02F0
4A6C4B5B4F17C06F4C6D94C9FCDEF807715AA26F02FC496D4B5A070F17F06F4C6D5EDEFE
1FEFF80FA26F02FF496E4A5A073F17FC704B6E5D07FFEFFE3FA2704B6E4A5A1FFF704B6E
5D20FFA27092C86C5DA2704A6F92CAFCA3704A6F5CA2704A6F5CA3704A705BA27149705B
A37149705BA27149705BA37190CA6C5BA271487190CBFC7148715A9D5D7BDBA8>I<007F
B800C04AB71280A9D800034ACA000791C7FC6D080013F0775A6D6E4E5AA26E6E6064836E
4F90C8FC836E4F5A836E4F5AA26E6E4C5AA26E6E5F1C3F6E6E5F1C7F836E4F5A846F4D5B
846F4D90C9FCA26F6E4A5AA26F6E5D1B0F846F4D5A846F4D5A846F4D5AA26F6E4A5AA270
6E5C627002C091CAFC6219E0704B5A19F0704B5AA2706E485AA2706E485AA27002FE5B1A
7F19FF704B5AA2715DA27192CBFCA2715CA2715CA3715CA2715CA2715CA2715CA2725BA2
7290CCFCA3725AA2725AA24E5AA24E5AA261187FA24E5AA24D5B13FE2603FF804A90CDFC
000F13E0486D4A5A487F486D4A5AA260B56C141F4D5AA24D5A17FF604C5B4A4990CEFC6C
5D4C5A6C49EB3FFC4A495A6C4948485A9026FE80075B270FFFC03F5B6C90B6CFFC6C5D6C
15F86C6C5C011F14C0010749D0FC9038007FE071857CDB7B>121
D<0003BC12F81CFCA51CF80480C7123F03F0C84814F048028018E04AC9B612C04A5D02F0
4B15804A19004E5C4A5D4A4B5C6391C9485C604993B65A634D5D495D98C7FC4D5C4D5C00
0F5E62494B5C4D5C94B6FC624C5D4C92C8FC5EC95D4C5C5E4C5C614C5C93B6FC4B5D614B
92C9FC5D4B5C604B5C5D4B4AEC07FC6092B65A5C604A92C8EA0FF84A5C5C5F4A5C4A5C4A
181F5F91B65A495D491AF094C9123F495C5B494A167F5E494A16FF496090B65A4C5D484B
5D484F13E04892C95A4B5E484A93B5FC481803484A151F4B0203B6FC4891BAFCBDFCA21C
C0A47E565C7ADB67>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fj cmbx10 10 66
/Fj 66 123 df<913803FFC0027F13F00103B512FC010FEB00FED93FF8133FD97FE0EBFF
8049485A5A1480484A13C04A6C1380A36F1300167E93C7FCA592383FFFC0B8FCA4000390
C7FCB3ABB5D8FC3F13FFA4303A7EB935>12 D<913903FFC7C0027F13FF0103B6FC010F13
0090383FF80190387FE003EBFFC05A14805A4A7EA281A9B8FCA4000390C7FCB3ABB5D8FC
3F13FFA4303A7EB935>I<141C143C14F8EB01F0EB03E01307EB0FC0EB1F8014005B137E
13FE5B12015B1203A2485AA2120F5B121FA25B123FA4485AA512FFB1127FA56C7EA4121F
7FA2120F7F1207A26C7EA212017F12007F137E7F7F1480EB0FC0EB07E01303EB01F0EB00
F8143C141C165377BD25>40 D<12E07E127C7E7E7F6C7E6C7E12037F6C7E7F12007F137E
137FA2EB3F80A214C0131F14E0A2130F14F0A4EB07F8A514FCB114F8A5EB0FF0A414E013
1FA214C0133F1480A2EB7F00A2137E13FE5B12015B485A5B1207485A485A90C7FC123E5A
12F05A16537BBD25>I<EB01F0497EA2497E6D5AA3003CEC0780007EEC0FC000FFEC1FE0
9038C1F07F01E113FFEBF1F1267FF9F313C06CB61280000FECFE00000114F0D8003F1380
D907FCC7FC90383FFF8048B512F0000F14FE003FECFF80267FF9F313C026FFF1F113E0EB
E1F001C1137F903803F81F007EEC0FC0003CEC0780000091C7FCA3497E6D5AA26D5A2325
7ABD30>I<EA0F80EA3FE0EA7FF0A2EAFFF8A213FCA3127FA2123FEA0F9CEA001C133C13
38A31378137013F0EA01E0A2EA03C0EA0780EA0F005A121C12180E1D798C1B>44
D<B61280A819087F9620>I<EA0F80EA3FE0EA7FF0A2EAFFF8A5EA7FF0A2EA3FE0EA0F80
0D0D798C1B>I<49B4FC010F13E0017F13FC9038FF83FE4848C67E4848EB7F804848EB3F
C04848EB1FE0A2001F15F0A24848EB0FF8A3007F15FCA500FF15FEB3007F15FCA4003F15
F8A26D131F001F15F0A2000F15E06D133F000715C06C6CEB7F806C6CEBFF003900FF83FE
6DB45A011F13F0010190C7FC27387CB630>48 D<141E143E14FE1307133FB5FCA313CFEA
000FB3B3A6007FB61280A4213779B630>I<EB0FFC90387FFFC048B512F0000714FC390F
F03FFF261F800F1380263F000313C05AD9C00113E0486C6C13F07FA2ED7FF8A46C5A6C5A
000FC7FCC8FCEDFFF0A216E05C16C04A138016004A5A5D4A5A4A5A4A5AEC7F8092C7FC14
FEEB01F849481378495A495A495A013EC712F84914F05B4848130148B6FCA25A5A5A5A48
15E0B7FCA425377BB630>I<EB03FF011F13F0017F13FC3901FC07FF2603F00313804848
6C13C0496C13E0EA0FF001FC14F0121F7FA56C4814E0A23803F001C714C04A138016004A
5A4A5AEC3FF090380FFFC092C7FC15F090380007FE913801FF806E13C016E0ED7FF016F8
16FC153FA216FEEA1FC0487E487E487EA416FCA249EB7FF8127F01C0EBFFF06C4814E06C
6C4813C0260FFC0713806CB61200000114FC6C6C13F0010790C7FC27387CB630>I<ED07
C0150FA2151F153F157F15FFA25C5C5C5CA2141E5C147C5C5C495A495A1307495A5C131E
5B137C5B5B485A485A1207485A90C7FC121E5A127C5AB81280A4C70001EBC000AA0103B6
1280A429377DB630>I<001C15C0D81F80130701F8137F90B61280A216005D5D15F05D15
804AC7FC14F090C9FCA8EB07FE90383FFFE090B512F89038FC07FC9038E003FFD9800113
8090C713C0120EC813E0157F16F0A216F8A21206EA3F80EA7FE012FF7FA44914F0A26C48
13FF90C713E0007C15C06C5B6C491380D9C0071300390FF01FFE6CB512F8000114E06C6C
1380D90FF8C7FC25387BB630>I<EC0FF8ECFFFE0103EBFF8090390FF80FC090393FE003
E090397FC001F09038FF000F48EC1FF84848133F485A120F5B121FA2003FEC1FF0ED0FE0
4990C7FC127FA21408EC7FF039FFF1FFFC01F313FFD9F78013809039FF007FC049EB3FE0
4914F0ED1FF85B16FCA34914FEA5127FA5123F16FCA26C7E16F8000F143F6C6C14F0ED7F
E06C6C14C03A01FF81FF806C90B51200013F13FC010F13F00101138027387CB630>I<12
3C123EEA3FE090B71280A41700485D5E5E5EA25E007CC7EA0FC000784A5A4BC7FC00F814
7E48147C15FC4A5A4A5AC7485A5D140F4A5A143F92C8FC5C147E14FE1301A2495AA31307
A2130F5CA2131FA5133FA96D5A6D5A6D5A293A7BB830>I<49B47E010F13F0013F13FC90
38FE01FF3A01F8007F804848EB3FC04848EB1FE0150F485AED07F0121FA27FA27F7F01FE
EB0FE0EBFF809138E01FC06CEBF03F02FC13809138FF7F006C14FC6C5C7E6C14FE6D7F6D
14C04914E048B612F0EA07F848486C13F8261FE01F13FC383FC007EB8001007F6D13FE90
C7123F48140F48140715031501A21500A216FC7E6C14016D14F86C6CEB03F06D13076C6C
EB0FE0D80FFEEB7FC00003B61200C614FC013F13F00103138027387CB630>I<EB03FF01
1F13E0017F13F83901FF03FE4848C67E4848EB7F80484814C0001FEC3FE0123F49EB1FF0
127F16F8A212FF16FCA516FEA5007F143FA3123F157F6C7E000F14FF6C6C5A3903FE03DF
6CB5129F6C6C131FD91FFC13FCEB00201400A216F8D80FE0133F487E486C14F0A216E015
7F16C0EDFF80495A6C4848130090388007FE390FE01FF86CB55A6C14C0C691C7FCEB1FF0
27387CB630>I<EA0F80EA3FE0EA7FF0A2EAFFF8A5EA7FF0A2EA3FE0EA0F80C7FCABEA0F
80EA3FE0EA7FF0A2EAFFF8A5EA7FF0A2EA3FE0EA0F800D2579A41B>I<EB1FFE48B512E0
000714F8390FE00FFE393F0003FF4815806D7ED8FFC014C013E0A5EA7FC06C48481380EA
1F00C7481300EC0FFC4A5AEC3FE04A5A92C7FC14FE5C495AA25C495AA25CA990C9FCA7EB
07C0EB1FF0497EA2497EA56D5AA26D5AEB07C0223A7BB92D>63 D<ED03E04B7EA24B7EA3
4B7EA24B7EA34B7EA292B57EA34A8015F302038015E1A202078015C0020F80ED807FA202
1F80ED003F4A80023E131FA2027E80027C7F02FC814A7FA20101824A7F49B77EA3498202
C0C7FC010F824A147FA2011F8291C8123F4982013E151FA2017E82017C8101FE83B500F8
0107B61280A4413A7DB948>65 D<B812C017FC17FF18C028007FF000037F04007F717E71
7E171F84A2717EA74D5AA260173F4D5A4D5A4C13C0040F5B91B600FCC7FCA2EFFF8002F0
C713F0EF3FF8717E717E717E19807113C0A319E0A719C0A25F4D138019005FEF7FFE4C48
5AB912F018C095C7FC17F03B397DB844>I<DB3FFCEB01C00203B5EAC003021FECF00791
B6EAFC0F01039039FC00FF3F4901C0EB1FFFD91FFEC77E49481403D97FF080494880485B
48177F4849153F4890C9FC181F485A180F123F5B1807127FA24993C7FC12FFAD127F7FF0
03C0123FA27F001F1707A26C6C1780180F6C6D16006C6D5D6C173E6C6D157ED97FF85D6D
6C4A5A6DB44A5A010701C0EB0FE06D01FCEBFF80010090B548C7FC021F14F8020314E091
26003FFEC8FC3A3B7BB945>I<B87E17F817FF18C028007FF8000713F09338007FF8EF1F
FE717E050313807113C0A27113E0F07FF0A2F03FF8A219FC181FA219FEA419FFAC19FEA4
19FC183FA219F8187F19F0F0FFE0A24D13C04D13804D1300EF1FFEEF7FFC933807FFF0B9
12C095C7FC17FC178040397DB849>I<B912F0A426007FF8C7FCEF1FF8170717031701A2
1700A21878A3043C137C183CA41800167CA216FC150391B5FCA4ECF8031500167CA2163C
180FA3181EA293C7FCA2183EA2183C187CA218FCA2EF01F81703170F173FEE01FFB9FC18
F0A338397DB83F>I<B912C0A43A007FF800039338007FE0171F170F1707A21703A21701
A318F0EE7800A41800A216F8A21501150791B5FCA4ECF80715011500A21678A693C8FCAD
B7FCA434397DB83C>I<DB3FFCEB01C00203B5EAC003021FECF00791B6EAFC0F01039039
FC00FF3F4901C0EB1FFFD91FFEC77E49481403D97FF080494880485B48177F4849153F48
90C9FC181F485A180F123F5B1807127FA24993C8FC12FFAB043FB61280A2127F7FDC0003
EBC000123FA27F121FA26C7EA26C7F6C7F6C7F7ED97FF85C6D7E6DB45C010701C05B6D01
FCEBFF3F010090B5EAFE0F021FECF8030203ECE0009126003FFEC9FC413B7BB94B>I<B6
12FCA439007FF800B3B3ADB612FCA41E397DB824>73 D<B7FCA426007FF8C9FCB3ACEF07
80A5170F1800A35FA25FA25F5F5E5EEE0FFE167FB8FCA431397DB839>76
D<B500F80403B512F06E5EA26E5ED8007FF1E000A2D97BFF161EA201796D5DA201786D5D
A26E6C5DA36E6C4A5AA26E6C4A5AA26E6C4A5AA26E6C4A5AA26E6C141EA36E6D5BA26E6D
5BA26F6C5BA26F6C485AA36F6C485AA26F6C485AA26F6C48C7FCA2923803FF1EA36F13BC
A26F13F8A2705AA2705AA213FCB500FC6D4848B612F0A2EE0F80EE070054397DB85B>I<
B500FC0203B512F0A28080C66C6D90390003F0006F6E5A81017B7F13798101787F6E7E6E
7E6E7F6E7FA26E7F6E7F6E7F6E7F6F7E153F826F13806F13C06F13E06F13F06F13F88117
FCEE7FFEEE3FFF7013817013C17013E18218F17013F97013FDEF7FFF8383A28383838383
187FA2183F181F01FC160FB500FC150718031801A244397DB84B>I<EDFFF8020FEBFF80
027F14F0903A01FFC01FFC010790380007FFD91FFC010113C0D93FF06D6C7E49486E7E49
486E7E48496E7E48834890C86C7EA248486F1380A248486F13C0A2003F18E0A348486F13
F0A400FF18F8AC007F18F06D5DA3003F18E0A26D5D001F18C0A26C6C4B13806C18006E5C
6C6D4A5A6C5F6C6D4A5A6D6C4A5AD93FFC49485A6DB401075B0107D9C01F90C7FC010190
B512FC6D6C14F0020F1480020001F8C8FC3D3B7BB948>I<B8FC17F017FEEFFF8028007F
F8000F13C0040113E07013F0EF7FF8EF3FFCA2EF1FFEA218FFA818FEA2EF3FFCA2EF7FF8
EFFFF04C13E0040F13C091B7120017FC17E002F8C9FCB3A4B612FCA438397DB841>I<B7
12FCEEFFE017FC17FF28007FF8000F13C004017F707F717E717EA2717EA284A760A24D5A
604D5A4D5A04035B041F90C8FC91B612FC17E0839139F8003FFCEE0FFF707F707F8284A2
707FA584A51A601AF084177F1901DD3FFE13E0B600FC011F130394390FFF87C071EBFF80
05011400CBEA1FFC443A7DB848>82 D<D907FF130E013FEBE01E90B5EAF83E0003ECFE7E
3A07FC01FFFE390FF0001F4848130F48481303491301007F140090C8FC167E5A163EA27F
161E7F7F6D91C7FC13FC387FFFE014FEECFFF06C14FE6F7E6C816C15F06C816C81C68113
3F010F801301D9000F1480EC007F030F13C01503818100F0157FA3163FA27E17807E167F
6C16007E6D14FE01E0495A01F813039039FF801FF800FC90B512E0D8F83F5CD8F00749C7
FC39E0007FF02A3B7BB935>I<003FB91280A4D9F800EBF003D87FC09238007FC049161F
007EC7150FA2007C1707A200781703A400F818E0481701A4C892C7FCB3AE010FB7FCA43B
387DB742>I<B600FC011FB512C0A426007FF8C8381FC000725AB3B3181F013F94C7FC80
60011F163E6D6C157E187C6D6C15FC6D6D495A6D6DEB07F06D01F0EB1FE0DA7FFEEBFFC0
021FB6C8FC02075C020014F0030F1380423A7DB849>I<B600F00103B512E0A4C601F0C8
3807F0006E5E017F5F6E150FA2013F5F6E151F011F94C7FC6E5D6D163E6F147E6D167CA2
6F14FC6D5E6F13016D5E6F13036D5E811707027F5D6F130F023F5D6F131F021F92C8FC81
5F6E143EEE807E6E147CEEC0FC6E5C16E016E16E5C16F36E5C16FF6F5BA36F5BA26F90C9
FCA26F5AA36F5AA26F5AA26F5A433A7EB848>I<B6D8E01FB500FC90383FFFFCA4000101
F0C7D83FFCC8EA7E006C71153C171F6E197C017F701578836E7014F8013F6F5E6E180101
1F4B6D5CA26E18036D4B6D5CA26D6D496D495A173C6F170F6D037C6D91C7FCEF787F6F5F
6D4B6C6C131E816D02016E5BEFE01F03F8177C027F01036E13784D7E03FCEE80F8023F49
486C5C15FE021F010FEDC1E04D7E03FF16C36E49EDE3C0041E7F049E15F76E01BC6D5C04
FC15FF6E95C8FC4C80A26E5F4C143F6E5F4C141FA2037F5E4C140FA26F486E5AA2031F5E
93C812036F5E5E3A7EB863>I<007FB5D8F803B512F8A4C66C48C7D80FF0C7FC6D6C5D6D
5E6F495A6D6D49C8FC7F6D6D137E6F5B6DEBF8016D5D6F485A6E6C485A023F130FDA1FFF
5BEE9F806E01FFC9FC805E6E5B6E5B80826F7E153F826F7F5D4B7F92B57EA2DA01F97FDA
03F17F03F07F913807E07FDA0FC07F021F6D7E4B7E4A486C7F027E8102FE6D7F4A7F4948
8149486D7F0107804A6E7E49488149486E7E013F81017F83B60107B61280A441397DB848
>I<EB3FFE0003B512E0000F14F8391FF00FFE003FEB03FF6D6C7F6E7FA26F7EA26C5A6C
5AEA0380C8FCA2EC3FFF010FB5FC137F3901FFF87F00071380380FFE00EA3FF85B485A12
FF5BA415FF6D5A127F263FF00713F83B1FFC1FBFFFC0390FFFFE1F0003EBF80F39003FE0
032A257DA42E>97 D<13FFB5FCA412077EAF4AB47E020F13F0023F13FC9138FE03FFDAF0
0013804AEB7FC00280EB3FE091C713F0EE1FF8A217FC160FA217FEAA17FCA3EE1FF8A217
F06E133F6EEB7FE06E14C0903AFDF001FF80903AF8FC07FE009039F03FFFF8D9E00F13E0
D9C00390C7FC2F3A7EB935>I<903801FFC0010F13FC017F13FFD9FF8013802603FE0013
C048485AEA0FF8121F13F0123F6E13804848EB7F00151C92C7FC12FFA9127FA27F123FED
01E06C7E15036C6CEB07C06C6C14806C6C131FC69038C07E006DB45A010F13F001011380
23257DA42A>I<EE7F80ED7FFFA4150381AF903801FF81010F13F1013F13FD9038FFC07F
0003EB001FD807FC1307000F8048487F5B123FA2485AA312FFAA127FA27F123FA26C6C5B
000F5C6C6C5B6C6C4913C02701FF80FD13FE39007FFFF9011F13E1010313012F3A7DB935
>I<903803FF80011F13F0017F13FC3901FF83FE3A03FE007F804848133F484814C0001F
EC1FE05B003FEC0FF0A2485A16F8150712FFA290B6FCA301E0C8FCA4127FA36C7E167812
1F6C6C14F86D14F000071403D801FFEB0FE06C9038C07FC06DB51200010F13FC010113E0
25257DA42C>I<EC1FF0903801FFFC010713FF90391FF87F8090383FE0FFD9FFC113C0A2
481381A24813016E1380A2ED3E0092C7FCA8B6FCA4000390C8FCB3ABB512FEA4223A7DB9
1D>I<161FD907FEEBFFC090387FFFE348B6EAEFE02607FE07138F260FF801131F48486C
138F003F15CF4990387FC7C0EEC000007F81A6003F5DA26D13FF001F5D6C6C4890C7FC39
07FE07FE48B512F86D13E0261E07FEC8FC90CAFCA2123E123F7F6C7E90B512F8EDFF8016
E06C15F86C816C815A001F81393FC0000F48C8138048157F5A163FA36C157F6C16006D5C
6C6C495AD81FF0EB07FCD807FEEB3FF00001B612C06C6C91C7FC010713F02B377DA530>
I<13FFB5FCA412077EAFED7FC0913803FFF8020F13FE91381F03FFDA3C01138014784A7E
4A14C05CA25CA291C7FCB3A3B5D8FC3F13FFA4303A7DB935>I<EA01F0EA07FC487EA248
7EA56C5AA26C5AEA01F0C8FCA913FF127FA412077EB3A9B512F8A4153B7DBA1B>I<141F
EC7FC0ECFFE0A24913F0A56D13E0A2EC7FC0EC1F0091C7FCA9EC0FF0EB0FFFA4EB007F14
3FB3B0121FEA3F80EA7FC0EAFFE0EC7FE0A215C014FF6C481380903883FE006CB45A000F
13F0000113801C4B86BA1D>I<13FFB5FCA412077EAF92380FFFE0A4923803FC0016F0ED
0FE0ED1F804BC7FC157E5DEC03F8EC07E04A5A141FEC7FE04A7E8181A2ECCFFEEC0FFF49
6C7F806E7F6E7F82157F6F7E6F7E82150F82B5D8F83F13F8A42D3A7EB932>I<13FFB5FC
A412077EB3B3ACB512FCA4163A7DB91B>I<01FED97FE0EB0FFC00FF902601FFFC90383F
FF80020701FF90B512E0DA1F81903983F03FF0DA3C00903887801F000749DACF007F0003
4914DE6D48D97FFC6D7E4A5CA24A5CA291C75BB3A3B5D8FC1FB50083B512F0A44C257DA4
51>I<01FEEB7FC000FF903803FFF8020F13FE91381F03FFDA3C01138000071378000349
7E6D4814C05CA25CA291C7FCB3A3B5D8FC3F13FFA430257DA435>I<903801FFC0010F13
F8017F13FFD9FF807F3A03FE003FE048486D7E48486D7E48486D7EA2003F81491303007F
81A300FF1680A9007F1600A3003F5D6D1307001F5DA26C6C495A6C6C495A6C6C495A6C6C
6CB45A6C6CB5C7FC011F13FC010113C029257DA430>I<9039FF01FF80B5000F13F0023F
13FC9138FE07FFDAF00113800007496C13C06C0180EB7FE091C713F0EE3FF8A2EE1FFCA3
EE0FFEAA17FC161FA217F8163F17F06E137F6E14E06EEBFFC0DAF00313809139FC07FE00
91383FFFF8020F13E0020390C7FC91C9FCACB512FCA42F357EA435>I<49B4EB0780010F
EBE00F013FEBF81F9039FFC07C3F0003EB803E3A07FE000F7F4848EB07FF121F497F123F
497F127FA25B12FFAA6C7EA36C7E5D6C7E000F5C6C6C5B6C6C133F6CEBC0FD39007FFFF1
011F13C10101130190C7FCAC037F13FEA42F357DA432>I<9038FE03F000FFEB0FFEEC3F
FF91387C7F809138F8FFC000075B6C6C5A5CA29138807F80ED3F00150C92C7FC91C8FCB3
A2B512FEA422257EA427>I<90383FF0383903FFFEF8000F13FF381FC00F383F0003007E
1301007C130012FC15787E7E6D130013FCEBFFE06C13FCECFF806C14C06C14F06C14F812
03C614FC131F9038007FFE140700F0130114007E157E7E157C6C14FC6C14F8EB80019038
F007F090B512C000F8140038E01FF81F257DA426>I<130FA55BA45BA25B5BA25A120700
1FEBFFE0B6FCA3000390C7FCB21578A815F86CEB80F014816CEBC3E090383FFFC06D1380
903803FE001D357EB425>I<01FFEC3FC0B5EB3FFFA4000714016C80B3A35DA25DA26C5C
6E4813E06CD9C03E13FF90387FFFFC011F13F00103138030257DA435>I<B539F001FFF8
A4000390C7EA3F00161E6E133E6C153C6E137C6C15786E13F8017F5CECF001013F5C14F8
011F495AA2ECFC07010F5CECFE0F010791C7FC6E5A6D131E15BE6D13BC15FC6D5BA36E5A
A26E5AA26E5AA26E5AA22D257EA432>I<B500F1B538803FFFA43D07FE000FF80003E06C
6C010715C082028015076C6E6C148015076C01C0ED0F00826E485C017FED801E5D90273F
F01E7F5B17C0DAF83E147C011F90393C3FE078037C14F8903B0FFC781FF0F0A29139FEF0
0FF10107EDF9E002FF14FB6D496CB45AA24B7E6D5EA26D496C90C7FCA292C7FC6E5CA202
3E147C023C143C40257EA445>I<B539F01FFFF0A4000390398003F8006C01C013E06C14
07D97FE05B6D6C485A6E48C7FC90381FFC3E010F5B903807FEFC6D6C5A5D6D5B6D5B6E7E
6E7E814A7EA24A7E903801F3FFD903E37FD907C17FEB0FC049486C7E4A6C7E013E80496D
7E49130F00016E7EB590383FFFF8A42D257EA432>I<B539F001FFF8A4000390C7EA3F00
161E6E133E6C153C6E137C6C15786E13F8017F5CECF001013F5C14F8011F495AA2ECFC07
010F5CECFE0F010791C7FC6E5A6D131E15BE6D13BC15FC6D5BA36E5AA26E5AA26E5AA26E
5AA292C8FCA25C141E003F133E387F803C38FFC07C147814F8EBC1F0EBC3E06C485A387D
1F80D83FFFC9FCEA1FFCEA07F02D357EA432>I<003FB612C0A3D9F0031380EB80074948
1300003E5C003C495A007C133F5D0078495A14FF5D495B5BC6485B92C7FC495A131F5C49
5A017FEB03C0EBFFF014E04813C05AEC80074813005A49EB0F80485A003F141F4848133F
9038F001FFB7FCA322257DA42A>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fk cmr10 10 90
/Fk 90 125 df<DA0FF813FC91397FFF07FF903B01F807DF83C0903A07E001FF0F903B1F
8007FE1FE090393F000FFC137E16F85B9338F007804848010790C7FC1503ACB812F8A328
01F80003F0C7FCB3AB486C497E267FFFE0B512F0A3333B7FBA30>11
D<EC0FF8EC7FFE903901F80780903907E001C090391F8000E090383F0007017E497EA25B
A2485A6F5AED018092C8FCA9ED03F0B7FCA33901F8000F1503B3AA486C497E267FFFE0B5
12C0A32A3B7FBA2E>I<EC0FFC91387FFF70903901F803F0903807E00790381F800FEB3F
00137EA25B150748481303ADB7FCA33901F80003B3AB486C497E267FFFE0B512C0A32A3B
7FBA2E>I<DA0FF0EB1FF0DA7FFEEBFFFC903B01F80F83F00F903C07E001CFC00380903C
1F8000FF0001C090273F0007FE130F017E4948497EA2495CA248485C03076E5A03030203
C7FC95C8FCA9F007E0BAFCA33C01F80003F0001F1807B3AA486C496C497E267FFFE0B500
C1B51280A3413B7FBA45>I<001C131C007F137F39FF80FF80A26D13C0A3007F137F001C
131C00001300A40001130101801380A20003130301001300485B00061306000E130E485B
485B485B006013601A197DB92A>34 D<030C1303031E497EA2033E130FA2033C91C7FCA2
037C5BA20378131EA303F8133EA24B133CA20201147CA24B1378A2020314F8A24B5BA302
071301007FB91280BA12C0A26C1880C7271F0007C0C7FC021E5CA3023E130FA2023C91C8
FCA2027C5BA20278131EA302F8133E007FB91280BA12C0A26C1880280003E000F8C8FC4A
5BA301071301A202805BA2010F1303A202005BA2491307A2011E5CA3013E130FA2013C91
C9FCA2017C5BA20178131EA20130130C3A4A7BB945>I<141FEC7FC0903801F0E0903803
C0600107137090380F803090381F00381518A25BA2133E133F15381530A215705D5D1401
90381F838092CAFC1487148E02DC49B51280EB0FF85C4A9039003FF8000107ED0FC06E5D
71C7FC6E140E010F150CD91DFC141C01391518D970FE143801E015302601C07F1470D803
805D00076D6C5BD80F00EBC00148011F5C4890380FE003003E6E48C8FC007E903807F806
0203130E00FE6E5A6E6C5A1400ED7F706C4B13036F5A6F7E6C6C6D6C5B7013066C6C496C
130E6DD979FE5B281FF001F07F133C3C07F80FE03FC0F86CB539800FFFF0C69026FE0003
13C0D91FF0D9007FC7FC393E7DBB41>38 D<121C127FEAFF80A213C0A3127F121C1200A4
12011380A2120313005A1206120E5A5A5A12600A1979B917>I<146014E0EB01C0EB0380
EB0700130E131E5B5BA25B485AA2485AA212075B120F90C7FCA25A121EA2123EA35AA65A
B2127CA67EA3121EA2121F7EA27F12077F1203A26C7EA26C7E1378A27F7F130E7FEB0380
EB01C0EB00E01460135278BD20>I<12C07E12707E7E7E120F6C7E6C7EA26C7E6C7EA213
78A2137C133C133E131EA2131F7FA21480A3EB07C0A6EB03E0B2EB07C0A6EB0F80A31400
A25B131EA2133E133C137C1378A25BA2485A485AA2485A48C7FC120E5A5A5A5A5A13527C
BD20>I<EB0380497EA7397803803C00FC147E00FE14FE397F8383FC393FC387F8390FE3
8FE03903FBBF803900FFFE00EB3FF8EB0FE0A2EB3FF8EBFFFE3903FBBF80390FE38FE039
3FC387F8397F8383FC39FE0380FE00FC147E0078143C390007C000A76D5A1F247BBD2A>
I<15301578B3A6007FB812F8B912FCA26C17F8C80078C8FCB3A6153036367BAF41>I<12
1C127FEAFF80A213C0A3127F121C1200A412011380A2120313005A1206120E5A5A5A1260
0A19798817>I<B512FCA516057F941C>I<121C127FEAFF80A5EA7F00121C0909798817>
I<150C151E153EA2153C157CA2157815F8A215F01401A215E01403A215C01407A2158014
0FA215005CA2141E143EA2143C147CA2147814F8A25C1301A25C1303A2495AA25C130FA2
91C7FC5BA2131E133EA2133C137CA2137813F8A25B1201A25B1203A25B1207A25B120FA2
90C8FC5AA2121E123EA2123C127CA2127812F8A25A12601F537BBD2A>I<EB03F8EB1FFF
90387E0FC09038F803E03901E000F0484813780007147C48487FA248C77EA2481580A300
7EEC0FC0A600FE15E0B3007E15C0A4007F141F6C1580A36C15006D5B000F143EA26C6C5B
6C6C5B6C6C485A6C6C485A90387E0FC0D91FFFC7FCEB03F8233A7DB72A>I<EB01C01303
1307131F13FFB5FCA2131F1200B3B3A8497E007FB512F0A31C3879B72A>I<EB0FF0EB7F
FE48B57E3903E03FE0390F000FF0000E6D7E486D7E486D7E123000706D7E126012FCB4EC
7F807FA56CC7FC121CC8FCEDFF00A34A5A5D14035D4A5A5D140F4A5A4A5A92C7FC147C5C
495A495A495A495A91C8FC011EEB01805B5B49130348481400485A485A000EC75A000FB6
FC5A5A485CB6FCA321387CB72A>I<EB07F8EB3FFF4913C03901F80FF03903C007F84848
6C7E380E0001000F80381FE0006D7FA56C5A6C5AC85A1401A25D4A5AA24A5A5DEC0F8002
7EC7FCEB1FFCECFF809038000FE06E7EEC01FC816E7EED7F80A216C0A2153F16E0A2121E
EA7F80487EA416C049137F007F1580007EC7FC0070ECFF006C495A121E390F8003F83907
F00FF00001B512C06C6C90C7FCEB0FF8233A7DB72A>I<1538A2157815F8A21401140314
07A2140F141F141B14331473146314C313011483EB030313071306130C131C1318133013
70136013C01201EA038013005A120E120C5A123812305A12E0B712F8A3C73803F800AB4A
7E0103B512F8A325397EB82A>I<0006140CD80780133C9038F003F890B5FC5D5D158092
C7FC14FC38067FE090C9FCABEB07F8EB3FFE9038780F803907E007E090388003F0496C7E
12066E7EC87EA28181A21680A4123E127F487EA490C71300485C12E000605C1270003049
5A00385C6C1303001E495A6C6C485A3907E03F800001B5C7FC38007FFCEB1FE0213A7CB7
2A>I<EC3FC0903801FFF0010713FC90380FE03E90383F800790387E001F49EB3F804848
137F485AA2485A000FEC3F0049131E001F91C7FCA2485AA3127F90C9FCEB01FC903807FF
8039FF1E07E090383801F0496C7E01607F01E0137E497FA249148016C0151FA290C713E0
A57EA56C7E16C0A2121FED3F807F000F15006C6C5B15FE6C6C5B6C6C485A3900FE07F090
383FFFC06D90C7FCEB03FC233A7DB72A>I<12301238123E003FB612E0A316C05A168016
000070C712060060140E5D151800E01438485C5D5DC712014A5A92C7FC5C140E140C141C
5CA25CA214F0495AA21303A25C1307A2130FA3495AA3133FA5137FA96DC8FC131E233B7B
B82A>I<EB03F8EB1FFF017F13C09038FC07F03901E001F848486C7E4848137C90C77E48
141E000E141F001E80A3121FA27F5D01E0131E6C6C133E01FC133C6D5B6C6C6C5AECC1E0
6CEBF3C06C01FFC7FC6C5BEB3FFF6D13C081017F13F801F07F3903E07FFE3907801FFF48
486C1380481303003E6D13C0003CEB007F007C143F0078EC0FE000F814075A1503A21501
A36C15C012781503007C15806CEC07006C5C6C6C131ED807E0137C3903F803F0C6B55A01
3F1380D907FCC7FC233A7DB72A>I<EB03F8EB1FFF017F13C09038FC07E03903F803F048
486C7E48486C7E49137E121F48487FA2007F158090C7FCA248EC1FC0A616E0A56C143FA2
7F123F001F147FA26C6C13FF3907E001DF0003149F3801F0033900FC0F1FD93FFC13C0EB
07F090C7FC153F1680A316005D000F147E487E486C5BA24A5A4A5A49485A6C48485A001C
495A260F807FC7FC3807FFFC000113F038003FC0233A7DB72A>I<121C127FEAFF80A5EA
7F00121CC7FCB2121C127FEAFF80A5EA7F00121C092479A317>I<121C127FEAFF80A5EA
7F00121CC7FCB2121C127F5A1380A4127F121D1201A412031300A25A1206A2120E5A1218
12385A1260093479A317>I<121C127FEAFF80A5EA7F00121CC7FCA8121CAB123EAB127F
ABEAFF80A8EA7F00121C093C79A917>I<007FB812F8B912FCA26C17F8CCFCAE007FB812
F8B912FCA26C17F836167B9F41>I<130EEB3F80497EA56D5A010EC7FC90C8FCA81306A4
130E130CA6131CA35BA213785BA21201485A1207485A485A123F48C8FCA200FE14F0EC01
F8EC03FCA41401EC00F8007E1438007F14706C14E0391F8003C0390FC01F003803FFFC38
007FE01E3B7CA927>I<EB3FE03801FFFE3907C03F80390E000FC0003CEB07F000301303
007014F8007C130100FE14FC7EA4127E003CEB03F8C7FCEC07F0A2EC0FE0EC1F80EC3F00
147E147C5C495A5C495A5CA249C7FCA31306AA90C8FCA8130EEB3F80497EA56D5A010EC7
FC1E3B7CBA27>I<EC03FF021F13E09138FC00FCD901E0131ED90780EB0780011EC7EA01
E00138EC00704981498148488148488190C97E48D901FC1480000ED907FFEB01C0000C90
391F03C000001C90267E00E013E000184901701360263801F86D13700030496D13300103
EC0FE0267007E00107133800601718495AA200E0171C484848150CAA6C6C7E1260A26D6C
151C00701718263003F0130F0101141F00386D013F1338261800FC01771330001C017E90
38E3F070000C90261F03C113E0000E903A07FF00FFC06CD901FCEB3F006C90CAFC7F6C7E
6C7E13706D167C011EED03FCD90780EC1FF0D901E0ECFF80D900FC90383FFC00021FB512
80020301E0C7FC363C7BBA41>I<1538A3157CA315FEA34A7EA34A6C7EA202077FEC063F
A2020E7FEC0C1FA2021C7FEC180FA202387FEC3007A202707FEC6003A202C07F1501A2D9
01807F81A249C77F167FA20106810107B6FCA24981010CC7121FA2496E7EA3496E7EA349
6E7EA213E0707E1201486C81D80FFC02071380B56C90B512FEA3373C7DBB3E>I<B712E0
16FC16FF0001903980007FC06C90C7EA1FE0707E707E707EA2707EA283A75F16035F4C5A
4C5A4C5A4C5AEEFF8091B500FCC7FCA291C7EA7F80EE1FE0EE07F0707E707E83707EA218
80177F18C0A7188017FFA24C13005F16034C5AEE1FF8486DEB7FF0B812C094C7FC16F832
397DB83B>I<913A01FF800180020FEBE003027F13F8903A01FF807E07903A03FC000F0F
D90FF0EB039F4948EB01DFD93F80EB00FF49C8127F01FE153F12014848151F4848150FA2
48481507A2485A1703123F5B007F1601A35B00FF93C7FCAD127F6DED0180A3123F7F001F
160318006C7E5F6C7E17066C6C150E6C6C5D00001618017F15386D6C5CD91FE05C6D6CEB
03C0D903FCEB0F80902701FF803FC7FC9039007FFFFC020F13F002011380313D7BBA3C>
I<B712C016F816FE000190398001FF806C90C7EA3FE0EE0FF0EE03F8707E707E177FA2EF
3F8018C0171F18E0170F18F0A3EF07F8A418FCAC18F8A4EF0FF0A218E0A2171F18C0EF3F
80A2EF7F0017FE4C5A4C5AEE0FF0EE3FE0486DEBFF80B8C7FC16F816C036397DB83F>I<
B812FCA30001903880000F6C90C71201EE007E173E171E170EA31706A317078316C0A394
C7FCA31501A21503150F91B5FCA3EC000F15031501A21500A21860A318E093C712C0A417
01A3EF0380A21707A2170F173F177F486D903807FF00B9FCA333397DB839>I<B812F8A3
0001903880001F6C90C71201EE00FC177C173C171CA2170CA4170E1706A2ED0180A21700
A41503A21507151F91B5FCA3EC001F15071503A21501A692C8FCAD4813C0B612C0A32F39
7DB836>I<DBFF8013C0020FEBF001023F13FC9139FF803F03903A03FC000787D90FF0EB
03CF4948EB00EF4948147F4948143F49C8121F485A4848150F48481507A248481503A248
5A1701123F5B007F1600A448481600AB93B6FCA26C7E9338007FE0EF3FC0A2123F7F121F
A26C7EA26C7EA26C7E6C7E6C6C157F6D7E6D6C14FF6D6C14EFD90FF8EB03C7D903FEEB07
83903A00FFC03F0191393FFFFC00020F01F0130002001380383D7CBA41>I<B648B512FE
A30001902680000313006C90C76C5AB3A491B6FCA391C71201B3A6486D497EB648B512FE
A337397DB83E>I<B612C0A3C6EBC0006D5AB3B3AD497EB612C0A31A397EB81E>I<013FB5
12E0A39039001FFC00EC07F8B3B3A3123FEA7F80EAFFC0A44A5A1380D87F005B0070131F
6C5C6C495A6C49C7FC380781FC3801FFF038007F80233B7DB82B>I<B649B5FCA3000101
809038007FF06C90C8EA3F80053EC7FC173C17385F5F4C5A4C5A4CC8FC160E5E5E5E5E4B
5AED0780030EC9FC5D153E157E15FF5C4A7F4A6C7E140E4A6C7E4A6C7E14704A6C7E4A6C
7E14804A6C7E6F7EA26F7F707EA2707E707EA2707EA2707E707EA2707E707F8484486D49
7FB6011FEBFF80A339397DB841>I<B612E0A3000101C0C8FC6C90C9FCB3AD1718A51738
1730A31770A317F0A216011603160FEE1FE0486D13FFB8FCA32D397DB834>I<B5933807
FFF86E5DA20001F0FC002600DFC0ED1BF8A2D9CFE01533A3D9C7F01563A3D9C3F815C3A2
D9C1FCEC0183A3D9C0FEEC0303A2027F1406A36E6C130CA36E6C1318A26E6C1330A36E6C
1360A26E6C13C0A3913901FC0180A3913900FE0300A2ED7F06A3ED3F8CA2ED1FD8A3ED0F
F0A3486C6D5A487ED80FFC6D48497EB500C00203B512F8A2ED018045397DB84C>I<B591
3807FFFE8080C69238007FE06EEC1F80D9DFF0EC0F001706EBCFF8EBC7FCA2EBC3FEEBC1
FFA201C07F6E7EA26E7E6E7E81140F6E7E8114036E7E168080ED7FC016E0153FED1FF0ED
0FF8A2ED07FCED03FEA2ED01FF6F1386A2EE7FC6EE3FE6A2EE1FF6EE0FFEA216071603A2
16011600A2177E486C153E487ED80FFC151EB500C0140EA2170637397DB83E>I<EC03FF
021F13E09138FE01FC903901F8007ED907E0EB1F8049486D7ED93F80EB07F049C76C7E01
FE6E7E48486E7E49157E0003167F4848ED3F80A24848ED1FC0A2001F17E049150F003F17
F0A3007F17F8491507A300FF17FCAC007F17F86D150FA3003F17F0A26C6CED1FE0A36C6C
ED3FC0000717806D157F000317006C6C15FEA26C6C4A5A017F4A5A6D6C495A6D6C495AD9
07E0EB1F80D903F8017FC7FC903900FE01FC91381FFFE0020390C8FC363D7BBA41>I<B7
12C016F816FE000190398001FF806C90C7EA3FC0EE0FE0EE07F0EE03F817FC17FE1601A2
17FFA717FEA2EE03FCA2EE07F817F0EE0FE0EE3FC0923801FF0091B512FC16F091C9FCB3
A5487FB6FCA330397DB839>I<EC03FF021F13E09138FE01FC903901F8007ED907E0EB1F
8049486D7ED93F80EB07F049C76C7E01FE6E7E48486E7EA24848157F0007178049153F00
0F17C049151F001F17E0A24848ED0FF0A3007F17F8A2491507A200FF17FCAC007F17F8A2
6D150FA2003F17F0A26C6CED1FE0A36C6CED3FC00007027C14804AB4FC3C03F80383807F
003B01FC0701C0FEEC0E002600FE0CEBE1FC017FEC63F8D93F8CEB77F0D91FCCEB3FE0D9
07EE14806DB449C7FC0100D981FC130CEC1FFF0203131C91C7001E131C161F183CEF807C
EFC0F8EE0FFFA318F08218E07013C07013809338007E00364B7BBA41>I<B612FEEDFFE0
16F8000190388007FE6C90C76C7EEE3FC0707E707E707EA2707EA283A65FA24C5AA24C5A
4C5AEE3F8004FFC8FCED07FC91B512E05E9138000FF0ED03F8ED00FE82707E707EA2161F
83A583A6F00180A217F8160F1803486D01071400B66D6C5A04011306933800FE0ECAEA3F
FCEF07F0393B7DB83D>I<D90FF813C090383FFE0190B512813903F807E33907E000F748
48137F4848133F48C7121F003E140F007E1407A2007C140312FC1501A36C1400A37E6D14
006C7E7F13F86CB47E6C13F8ECFF806C14E06C14F86C14FEC680013F1480010714C0EB00
7F020713E0EC007FED3FF0151F150FED07F8A200C01403A21501A37EA216F07E15036C15
E06C14076C15C06C140F6DEB1F80D8FBF0EB3F00D8F0FE13FE39E03FFFF8010F13E0D8C0
0190C7FC253D7CBA2E>I<003FB812E0A3D9C003EB001F273E0001FE130348EE01F00078
160000701770A300601730A400E01738481718A4C71600B3B0913807FF80011FB612E0A3
35397DB83C>I<B6903807FFFEA3000101809038007FE06C90C8EA1F80EF0F001706B3B2
170E6D150C80171C133F17186D6C14385F6D6C14F06D6C5C6D6C495A6D6CEB07806D6C49
C7FC91387F807E91381FFFF8020713E09138007F80373B7DB83E>I<B500FC91387FFF80
A30003018091380FFC006C90C8EA07E0715A6C705A6E1403017F93C7FCA280013F1506A2
6E140E011F150C80010F5DA28001075DA26E147001031560A26D6C5CA2806D4A5AA2ED80
03027F91C8FCA291383FC006A215E0021F5BA2EDF01C020F1318A26E6C5AA215FC02035B
A2EDFEE002015BA26E6C5AA36FC9FCA3153EA2151CA3393B7EB83E>I<B5D8FC07B5D8F0
01B5FCA30007902780001FFEC7EA1FF86C48C7D80FF8EC07E000010307ED03C01B807F6C
6F6C1500A26E5F017F6E6C1406A280013F4A6C5CA280011F4A6D5BEE067FA26D6C010E6D
5BEE0C3FA26D6C011C6D5BEE181FA26D6C6F5BEE300FA26D6C6F485AEE6007A26D6C4CC7
FC9338C003FCA203805D913B7F818001FE06A203C1150EDA3FC3C7EAFF0CA203E3151CDA
1FE6EC7F98A215F6DA0FFCEC3FF0A302075E4B141FA202035E4B140FA202015E4B1407A2
020093C8FC4B80503B7EB855>I<007FB590383FFFFCA3C601F801071380D97FE0D903FC
C7FC013FEC01F06D6C5C5F6D6C5C6D6C13034CC8FC6D6C1306160E6D6C5B6DEB80181638
91387FC0306E6C5A16E06E6C5A91380FF18015FB6EB4C9FC5D14036E7EA26E7F6F7EA24B
7E15DF9138019FF09138038FF8150F91380607FC91380E03FE140C4A6C7EEC3800023080
4A6D7E14E04A6D7E49486D7E130391C76C7E01066E7E130E010C6E7E011C1401013C8101
FE822607FF80010713E0B500E0013FEBFF80A339397EB83E>I<B500FE91383FFFE0A300
0301E0913807FE00C649EC03F0017F6F5A606D6C5D6D6C140395C7FC6D6C1406A26D6C5C
6D6C141C17186D6C143817306D6D5B6E6C13E05F91383FE0015F91381FF003DA0FF890C8
FC1606913807FC0E160C913803FE1C913801FF185E6E13B016E0157F6F5AB3A24B7E023F
B512C0A33B397FB83E>I<003FB7FCA39039FC0001FE01C0130349495A003EC7FC003C4A
5A5E0038141F00784A5A12704B5A5E006014FF4A90C7FCA24A5A5DC712074A5AA24A5A5D
143F4A5AA24A5A92C8FC5B495AA2495A5C130F4948EB0180A2495A5C137F495A16034890
C7FC5B1203485AEE0700485A495C001F5D48485C5E4848495A49130FB8FCA329397BB833
>I<EAFFF8A4EAF000B3B3B3B3A3EAFFF8A40D5378BD17>I<390180018000031303390700
0700000E130E485B0018131800381338003013300070137000601360A200E013E0485BA4
00CE13CE39FF80FF806D13C0A3007F137FA2393F803F80390E000E001A1974B92A>I<EA
FFF8A4EA0078B3B3B3B3A3EAFFF8A40D537FBD17>I<EB1FE0EBFFFC3803E03F3907000F
80390F8007E0486C6C7E13E06E7EA26E7E6C5A6C5AC8FCA4147FEB07FFEB3FE0EBFE00EA
03F8EA0FF0EA1FC0123F485A90C7FC160C12FEA31401A26C13036CEB077C903980063E18
383FC01E3A0FE0781FF03A03FFF00FE03A007F8007C026277DA52A>97
D<EA03F012FFA3120F1203B0EC1FE0EC7FF89038F1E03E9039F3801F809039F7000FC001
FEEB07E049EB03F049EB01F85BED00FCA216FEA2167E167FAA167E16FEA216FC15016D14
F8ED03F07F01EEEB07E001C6EB0FC09039C7801F00903881E07E903800FFF8C7EA1FC028
3B7EB92E>I<EB03FC90381FFF8090387E03E03901F80070484813F83907E001FC380FC0
03A2EA1F80123F90380001F848EB00F01500A2127E12FEAA127E127FA26C14067F001F14
0E6D130C000F141C6C6C13386C6C13706C6C13E039007C07C090381FFF00EB07F81F277D
A525>I<ED0FC0EC03FFA3EC003F150FB0EB03F8EB1FFF90387E078F9038F801EF3903F0
007F4848133F4848131FA24848130F123F90C7FC5AA2127E12FEAA127E127FA27EA26C6C
131FA26C6C133F6C6C137F6C6CEBEFF03A01F801CFFF39007C078F90381FFE0FD907F813
C0283B7DB92E>I<EB07F8EB1FFF90387C0FC03901F803E03903F001F0D807E013F8380F
C0004848137CA248C7127E153E5A153F127E12FEA3B7FCA248C8FCA5127EA2127FA26C14
037F001F14076C6C13060007140E6D131CD801F013386C6C137090387E03E090381FFF80
903803FC0020277EA525>I<147E903803FF8090380FC1E0EB1F8790383F0FF0137EA213
FCA23901F803C091C7FCADB512FCA3D801F8C7FCB3AB487E387FFFF8A31C3B7FBA19>I<
ED03F090390FF00FF890393FFC3C3C9039F81F707C3901F00FE03903E007C03A07C003E0
10000FECF000A248486C7EA86C6C485AA200075C6C6C485A6D485A6D48C7FC38073FFC38
060FF0000EC9FCA4120FA213C06CB512C015F86C14FE6CECFF804815C03A0F80007FE048
C7EA0FF0003E140348140116F8481400A56C1401007C15F06CEC03E0003F1407D80F80EB
0F80D807E0EB3F003901FC01FC39007FFFF0010790C7FC26387EA52A>I<EA03F012FFA3
120F1203B0EC0FF0EC3FFCECF03F9039F1C01F809039F3800FC0EBF70013FE496D7EA25B
A35BB3A3486C497EB500C1B51280A3293A7EB92E>I<EA0380EA0FE0487EA56C5AEA0380
C8FCAAEA03F012FFA312071203B3AA487EB512C0A312387EB717>I<EB01C0EB07F0EB0F
F8A5EB07F0EB01C090C7FCAAEB01F813FFA313071301B3B3A2123C127E00FF13F01303A2
14E038FE07C0127C383C0F00EA0FFEEA03F8154984B719>I<EA03F012FFA3120F1203B1
913801FFFCA39138007FC01600157C15705D4A5A4A5A4AC7FC141E1438147814FC13F1EB
F3FEEBF73F01FE7FEBF81F496C7E8114076E7E6E7E811400157E157F811680ED1FC0486C
EB3FF0B500C0B5FCA3283A7EB92C>I<EA03F012FFA3120F1203B3B3AD487EB512C0A312
3A7EB917>I<2703F00FF0EB1FE000FFD93FFCEB7FF8913AF03F01E07E903BF1C01F8380
3F3D0FF3800FC7001F802603F70013CE01FE14DC49D907F8EB0FC0A2495CA3495CB3A348
6C496CEB1FE0B500C1B50083B5FCA340257EA445>I<3903F00FF000FFEB3FFCECF03F90
39F1C01F803A0FF3800FC03803F70013FE496D7EA25BA35BB3A3486C497EB500C1B51280
A329257EA42E>I<EB03FE90380FFF8090383E03E09038F800F84848137C48487F48487F
4848EB0F80001F15C090C712074815E0A2007EEC03F0A400FE15F8A9007E15F0A2007F14
076C15E0A26C6CEB0FC0000F15806D131F6C6CEB3F006C6C137EC66C13F890387E03F090
381FFFC0D903FEC7FC25277EA52A>I<3903F01FE000FFEB7FF89038F1E07E9039F3801F
803A0FF7000FC0D803FEEB07E049EB03F04914F849130116FC150016FEA3167FAA16FEA3
ED01FCA26DEB03F816F06D13076DEB0FE001F614C09039F7803F009038F1E07E9038F0FF
F8EC1FC091C8FCAB487EB512C0A328357EA42E>I<D903F813C090381FFE0190387E0781
9038FC01C33903F000E3000714774848133749133F001F141F485A150F48C7FCA312FEAA
127FA37E6D131F121F6D133F120F6C6C137F6C6C13EF3901F801CF39007E078F90381FFE
0FEB07F890C7FCABED1FE00203B5FCA328357DA42C>I<3807E01F00FFEB7FC09038E1E3
E09038E387F0380FE707EA03E613EE9038EC03E09038FC0080491300A45BB3A2487EB512
F0A31C257EA421>I<EBFF03000313E7380F80FF381E003F487F487F00707F12F0A2807E
A27EB490C7FCEA7FE013FF6C13E06C13F86C7F00037FC67F01071380EB007F141F00C0EB
0FC01407A26C1303A37E15806C13077EEC0F00B4131E38F3C07C38E1FFF038C03F801A27
7DA521>I<1318A51338A31378A313F8120112031207001FB5FCB6FCA2D801F8C7FCB215
C0A93800FC011580EB7C03017E13006D5AEB0FFEEB01F81A347FB220>I<D803F0EB07E0
00FFEB01FFA3000FEB001F00031407B3A4150FA3151F12016D133F0000EC77F86D9038E7
FF8090383F03C790381FFF87903A03FC07E00029267EA42E>I<B538803FFEA33A0FF800
0FF06C48EB07E00003EC03C06D148000011500A26C6C1306A26D130E017E130CA26D5BA2
EC8038011F1330A26D6C5AA214E001075BA2903803F180A3D901FBC7FCA214FF6D5AA214
7CA31438A227257EA32C>I<B53A1FFFE03FFEA3260FF8009038000FF86C48017EEB03E0
18C00003023EEB0180A26C6C013FEB0300A36C6CEC8006156FA2017E9038EFC00C15C7A2
D93F016D5A15830281EBF038D91F831430150102C3EBF87090260FC6001360A2D907E66D
5A02EC137CA2D903FCEB7F804A133FA2010192C7FC4A7FA20100141E4A130E0260130C37
257EA33C>I<B538807FFFA33A03FE003FF00001EC1F80000092C7FC017E131C6D13186D
6C5AECC070010F5B6D6C5AECF180EB03FB6DB4C8FC6D5AA2147F804A7E8114CF903801C7
E090380383F090380703F8EB0601496C7E011C137E49137F01787F496D7E486C80000FEC
3FF0D8FFFE90B51280A329247FA32C>I<B538803FFEA33A0FF8000FF06C48EB07C00003
EC03806C7E16007F00001406A2017E5BA2137F6D5BA26D6C5AA2ECC070010F1360A26D6C
5AA214F101035BA2D901FBC7FCA214FF6D5AA2147CA31438A21430A214701460A25CA2EA
7C0100FE5B130391C8FC1306EAFC0EEA701C6C5AEA1FF0EA0FC027357EA32C>I<003FB5
12FCA2EB8003D83E0013F8003CEB07F00038EB0FE012300070EB1FC0EC3F800060137F15
0014FE495AA2C6485A495AA2495A495A495AA290387F000613FEA2485A485A0007140E5B
4848130C4848131CA24848133C48C7127C48EB03FC90B5FCA21F247EA325>I<B81280A2
290280962A>I<BD12C0A25202809653>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fl cmcsc10 10 8
/Fl 8 86 df<B512FCA516057E941F>45 D<EB01C013031307131F13FFB5FCA2131F1200
B3B3A8EB7FF0B612F8A31D3877B72E>49 D<EB03F8EB1FFF017F13C09038FC07E03903F8
03F048486C7E48486C7E49137E121F48487FA2007F158090C7FCA248EC1FC0A616E0A56C
143FA27F123F001F147FA26C6C13FF3907E001DF0003149F3801F0033900FC0F1FD93FFC
13C0EB07F090C7FC153F1680A316005D000F147E487E486C5BA24A5A4A5A49485A6C4848
5A001C495A260F807FC7FC3807FFFC000113F038007FC0233A7BB72E>57
D<EB3FE03801FFFE3907C03F80390E000FC0003CEB07F000301303007014F8007C130100
FE14FC7EA4127E003CEB03F8C7FCEC07F0A2EC0FE0EC1F80EC3F00147E147C5C495A5C49
5A5CA249C7FCA31306AA90C8FCA8130EEB3F80497EA56D5A010EC7FC1E3B7ABA2B>63
D<DB7FC01330912607FFF81370023F13FE913AFFC01F80F0903A03FE0003E1D907F8EB00
F3D91FE0147B4948143F4948141F49C8120F4848150748481503A24848150148481500A2
485A1870123F5B1830127FA349160012FFAB127F7F1830A2123FA27F001F177018606C7E
18E06C6C16C06C6C150118806C6C15036C6CED07006D6C5C6D6C141E6D6C5CD907F85CD9
03FEEB01E0903A00FFC00FC0023FB5C7FC020713FC9138007FE0343D7ABA41>67
D<B5933801FFFE6E5DA2000119002600DFC0ED06FEA2D9CFE0150CA3D9C7F01518A2D9C3
F81530A3D9C1FC1560A2D9C0FE15C0A3027FEC0180A26E6CEB0300A36E6C1306A26E6C5B
A26E6C5BA36E6C5BA26E6C5BA36E6C5BA292387F0180A3DB3F83C7FCA2ED1FC6A3ED0FEC
A2ED07F8A3486C6D5A487ED80FFC6D48497EB500C092B512FEA26F5A47397BB852>77
D<D907F81330D93FFF137090B512E03A03F807F0F03907E000794848133F4848130F90C7
1207003E1403007E1401A2007C140012FC1670A36C1530A37E6D14006C7E7F13F86CB47E
6C13FCECFFC06C14F06C14FC000114FF6C1580013F14C0010714E0EB003F020313F0EC00
7FED1FF8150F1507ED03FCA200C01401A21500A37EA216F87E15016C15F06C14036C15E0
6CEC07C001C0130FD8F9F0EB1F80D8F0FFEB7E0039E03FFFFC010F13F048C61380263D7A
BA33>83 D<B6D8C001B512E0A3C601C0C7380FFC006D48EC03F0715A715AB3B21701013F
5E801703131F6E4AC7FC130F6E140E01075D6D6C143C6D6C5C6D6C5C91397F8003E09139
1FE01F800207B5C8FC020113FC9138003FE03B3B7CB844>85 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fm cmr12 12 23
/Fm 23 117 df<140C141C1438147014E0EB01C01303EB0780EB0F00A2131E5BA25B13F8
5B12015B1203A2485AA3485AA348C7FCA35AA2123EA2127EA4127CA312FCB3A2127CA312
7EA4123EA2123FA27EA36C7EA36C7EA36C7EA212017F12007F13787FA27F7FA2EB0780EB
03C01301EB00E014701438141C140C166476CA26>40 D<12C07E12707E7E7E120F6C7E6C
7EA26C7E6C7EA21378137C133C133E131E131FA2EB0F80A3EB07C0A3EB03E0A314F0A213
01A214F8A41300A314FCB3A214F8A31301A414F0A21303A214E0A3EB07C0A3EB0F80A3EB
1F00A2131E133E133C137C13785BA2485A485AA2485A48C7FC120E5A5A5A5A5A16647BCA
26>I<121EEA7F8012FF13C0A213E0A3127FEA1E601200A413E013C0A312011380120313
005A1206120E5A5A5A12600B1D78891B>44 D<121EEA7F80A2EAFFC0A4EA7F80A2EA1E00
0A0A78891B>46 D<14FF010713E090381F81F890383E007C01FC133F4848EB1F8049130F
4848EB07C04848EB03E0A2000F15F0491301001F15F8A2003F15FCA390C8FC4815FEA548
15FFB3A46C15FEA56D1301003F15FCA3001F15F8A26C6CEB03F0A36C6CEB07E0000315C0
6D130F6C6CEB1F806C6CEB3F00013E137C90381F81F8903807FFE0010090C7FC28447CC1
31>48 D<143014F013011303131F13FFB5FC13E713071200B3B3B0497E497E007FB6FCA3
204278C131>I<EB03FE90381FFFC0017F13F03901F80FFC3903C001FE48486C7E000EC7
EA7F8048EC3FC0ED1FE04815F00030140F007015F800601407126CB415FC7F7F1503A46C
4813076CC7FCC8FC16F8A2150F16F0151F16E0A2ED3FC0ED7F8016005D5D4A5A4A5A4A5A
5D4A5A4A5A4AC7FC147C5C5C495A495A495A49C7120C131E5B013814185B5B485A484814
3848C81230000E1570001FB612F0A25A5AB712E0A326427BC131>I<14FF010713E0011F
13F890387F80FC9038FC007E48487F4848EB1F804848EB0FC0000FEC07E0485AED03F048
5A16F8007F140190C713FCA25AA216FE1500A516FFA46C5CA36C7E5D121F7F000F5C6C6C
130E150C6C6C131C6C6C5BD8007C5B90383F01E090390FFF80FE903801FE0090C8FC1501
16FCA4ED03F8A216F0D80F801307486C14E0486C130F16C0ED1F80A249EB3F0049137E00
1EC75A001C495A000F495A3907E01FE06CB51280C649C7FCEB1FF028447CC131>57
D<16C04B7EA34B7EA34B7EA34B7EA3ED19FEA3ED30FFA203707FED607FA203E07FEDC03F
A2020180ED801FA2DA03007F160FA20206801607A24A6D7EA34A6D7EA34A6D7EA2027081
0260147FA202E08191B7FCA249820280C7121FA249C87F170FA20106821707A2496F7EA3
496F7EA3496F7EA201788313F8486C83D80FFF03037FB500E0027FEBFFC0A342477DC649
>65 D<B612F8A3000101E0C9FC6C6C5A5CB3B31830A418701860A518E0A3EF01C0A21703
1707A2170F173F177FEE01FF48486C011F1380B9FCA334447CC33D>76
D<B56C933807FFFC6E5EA20001F1FE0026006FE0EE1BF8A3D967F01633A2D963F81663A3
D961FC16C3A3D960FEED0183A2027FED0303A36E6C1406A36E6C140CA26E6C1418A36E6C
1430A36E6C1460A26E6C14C0A36E6CEB0180A3037FEB0300A292383F8006A36F6C5AA36F
6C5AA26F6C5AA36F6C5AA36F6C5AA26FB45AA370C7FC13F0A2486C143ED80FFFEF0FFEB5
00F0011C0107B512FCA34E447BC359>I<B712E016FF17C000019039C0003FF86C6C48EB
03FCEE00FF717E717E717E717E717EA284170384A760A21707604D5AA24D5A4D5A4DC8FC
EE01FEEE07F8EE3FE091B6C9FC16FC913980007F80EE0FE0707EEE03FC707E160083717E
A2717EA784A71A6084171FA21AE0716C13C02601FFE002071301B600C01680943801FC03
943900FE0700CBEA3FFEF007F843467CC348>82 D<EB07FC90383FFF809038F80FE03903
C003F048C66C7E000E6D7ED80FC0137E486C137F6D6D7EA36F7EA26C5AEA0380C8FCA4EC
0FFF49B5FC90380FFE1FEB3FC0EBFF00EA03FC485A485A485A485A127F5B176048C7FCA3
153FA36D137F007F14EF6D9038C7E0C0003F13013A1FE00783F13B07F81E03FF802701FF
FC0113003A001FE0007C2B2E7CAC31>97 D<EA01FC12FFA3120712031201B3EC03FC9138
0FFF8091383C07E091387001F89039FDE0007E02807F01FFEC1F8091C713C049EC0FE049
140717F0A2EE03F8A217FCA2160117FEAB17FC1603A217F8A2EE07F0A26DEC0FE017C06D
141F01FBEC3F80D9F380EB7E00D9E1C05B9039E0F001F89039C03C07E09039801FFF80C7
D803FCC7FC2F467DC436>I<EC7F80903803FFF090380FC07C90383F000F01FCEB038048
48EB01C00003140F4848EB1FE049133F120F485AA2485AED1FC0007FEC070092C7FCA290
C9FC5AAB7E7FA2123F16307F001F15706C6C146016E06C6C14C06C6C13010001EC03806C
6CEB0700013F131E90381FC078903807FFF001001380242E7DAC2B>I<167FED3FFFA315
018182B3EC7F80903803FFF090380FC07C90383F000E017E1307496D5AD803F87F48487F
5B000F81485AA2485AA2127FA290C8FC5AAB7E7FA2123FA26C7EA2000F5D7F6C6C5B0003
5C6C6C9038077F806C6C010E13C0013F011C13FE90380FC0F8903803FFE09026007F0013
002F467DC436>I<EB01FE903807FFC090381F03F090387E00FC49137E48487F485A4848
EB1F80000F15C049130F121F484814E01507A2007F15F090C7FCA25AA390B6FCA290C9FC
A67EA27FA2123F16306C7E1670000F15606D14E06C6C14C0000314016C6CEB03806C6CEB
0700013E131E90381F80F8903803FFE0010090C7FC242E7DAC2B>I<EA01FC12FFA31207
12031201B3EC01FE913807FFC091381E07F091383801F802707FECE000D9FDC07F5C01FF
147F91C7FCA25BA35BB3A8486CECFF80B5D8F83F13FEA32F457DC436>104
D<EA01FC12FFA3120712031201B3B3B3A5487EB512F8A315457DC41C>108
D<3901FC01FE00FF903807FFC091381E07F091383801F8000701707F0003EBE0002601FD
C07F5C01FF147F91C7FCA25BA35BB3A8486CECFF80B5D8F83F13FEA32F2C7DAB36>110
D<EC7F80903803FFF090380FC0FC90383E001F496D7E496D7E48486D7E48486D7E48486D
7E000F81A24848147E003F157FA290C87E481680A44816C0AA6C1680A26D147F003F1600
A2001F157E6D14FE000F5D6D130100075D6C6C495A6C6C495A6C6C495A013E49C7FC9038
1FC0FE903807FFF89038007F802A2E7DAC31>I<3903F803F000FFEB1FFCEC3C3EEC707F
0007EBE0FF3803F9C000015B13FBEC007E153C01FF13005BA45BB3A748B4FCB512FEA320
2C7DAB26>114 D<1306A5130EA4131EA3133E137EA213FE12011207001FB512F0B6FCA2
C648C7FCB3A4150CAA017E131C017F1318A26D133890381F8030ECC070903807E0E09038
01FFC09038007F001E3E7EBC26>116 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fn cmr12 14.4 14
/Fn 14 116 df<DC1FFC14034BB500C01307030F02F0130F037F14FC912801FFF800FF13
1F02070180EB1FC04A48C73807E03FDA3FF8913801F07FDA7FE0EC00F8902601FF80ED3C
FF4990C97E494882494882495A4948824948825C01FF834849177F91CBFC48193F485AA2
4848181FA2121F49180FA2123FA2491807127FA31A005B12FFAE127F7FA31A07123F7FA2
121FA26D180F000F190EA26C7E1A1E6C6C181C6C193C806C6D1778137F6E17F06D6CEE01
E06D7E6D6CEE03C06D6CEE07806D6CEE0F006D6D151E9026007FE0157CDA3FF85DDA0FFE
EC03F06E6C6CEB0FE0020101F8EBFF806E6CB548C7FC030F14F8030114E09226001FFEC8
FC48567AD355>67 D<B812FEEFFFE018FC18FF26007FFCC7000F13C06D4802017F011F92
38003FF8F00FFC727EF001FF727F737E737E737E190F86737EA2737E737EA21B8085A21B
C01A7F1BE0A4F23FF0A51BF8AE1BF0A4F27FE0A41BC01AFF1B80A24F1300A24F5AA24F5A
A24F5A4F5A4F5A4F5A4F5A4E90C7FC4E5AF00FFCF03FF8013FEEFFE0496C020F5BBAC8FC
18FC18E04DC9FC4D527BD159>I<B712E0A4C66C90CAFCEB3FFC6D5AB3B3A9191CA51938
A61978A319F819F0A218011803A21807180F181F183F18FF013F1503496C023F13E0BAFC
A43E527BD149>76 D<B500FC95B512FCA36E5FD8007FF2F800D93DFF943803BFF0011D62
A2011C6DEE073FA36E6C160EA36E6C161CA26E6C1638A36E6C1670A36E6C16E0A36E6CED
01C0A26E6CED0380A36E6DEC0700A36F6C140EA36F6C5CA26F6C5CA36F6C5CA36F6C5CA2
6F6C495AA36F6C495AA36F6D48C7FCA393387FC00EA2706C5AA3706C5AA3706C5AA3706C
5AA270B45AA3705BA3013E6E90C8FC137F496C4E7E000701F0027E4B7EB66C4BB612FC17
3CA35E527AD16B>I<B7020FB512F8A4C66C48C96C13006D48EE0FF86D48705A735A735A
B3B3B0010F17036280A20107170797C7FC6E5E1303191E6D7E616D6D5D6E7E023F5E6E6C
4A5A6E6C4A5A6E6C140FDA03FE4AC8FC6E6C6C13FE913A007FF007FC031FB512F0030714
C0030191C9FC9238001FF84D547BD158>85 D<EC0FF891B5FC010314C090390FF80FF090
391FC003FC90397F8001FE49C77E4848EC7F804848143F49EC1FC0485A000FED0FE05B00
1F16F01607485AA2007F16F8A25B160312FF90B7FCA30180C9FCA8127F7FA2123FA26D15
38121F17786C6C1570000716F06D15E06C6C14016C6CEC03C06C6C15806D6C130F6D6CEB
1F00D90FF0133C903907FE01F80101B512E06D6C1380DA07FCC7FC2D367DB434>101
D<157F913803FFE0020F13F091383FC0F891387F01FC903901FE03FE903803FC0714F813
07EB0FF0A290391FE003FCED01F892C7FC495AB3B612FEA426003FC0C7FCB3B3A580EBFF
F0007FEBFFF8A427547DD324>I<EF1FC0DA3FE0EBFFE0902701FFFC0313F001079039FF
07E1F8903A1FE03FCF01903A3F800FFC03903A7F0007F80101FE010314F04848903901FC
004000036F1300491300000781A24980000F82A8000793C7FC6D5CA200035D6D13010001
5D6C6C495A017F495A6E485A9039FFE03FC0D801C7B5C8FC01C113FC3903803FE091CAFC
A57FA27F7F7F6CB612E016FF6C16C017F0013F15FC8390B8FCD803F8C7001F1380D80FE0
020113C04848EC007F4848ED1FE090C9120F127EEF07F012FE481603A56C1607007E17E0
007F160F6C6CED1FC06C6CED3F806C6CED7F006C6C15FED803FCEC03FCC6B4EC0FF0D93F
F0EBFFC0010FB6C7FC010114F8D9001F1380354E7DB43B>I<1378EA01FE487E487FA66C
90C7FC6C5AEA007890C8FCB0EB7F80B5FCA41203C6FC137FB3B3A43801FFE0B61280A419
507CCF21>105 D<01FFD907FEEC03FFB590261FFFC0010F13E0037F01F0013F13F89127
01F80FFC9038FC07FE913D03C003FE01E001FF000390260700019038038000C6010E6D6C
48C76C7E6D48DA7F8E6E7E4A159CA24ADA3FF86E7E02605D14E04A5DA34A5DB3AD2601FF
E0DAFFF0EC7FF8B6D8C07F9026FFE03FB512F0A45C347CB363>109
D<01FFEB07FCB590383FFF8092B512E0913901F00FF8913903C007FC000349C66C7EC601
0E13016D486D7E5C143002706E7E146014E05CA35CB3AD2601FFE0903801FFE0B600C0B6
12C0A43A347CB341>I<EC0FFC91387FFF8049B512E0903907F807F890391FE001FE9039
3F80007F017EC7EA1F80496E7E48486E7E00038248486E7EA248486E7EA248486E7EA200
3F82A24848ED7F80A400FF17C0AB007F1780A26D15FFA2003F1700A2001F5E6D1401000F
5E6D140300075E6C6C4A5A6C6C4A5AA2D8007FEC3F806D6C49C7FC90391FE001FE903907
F807F86DB55AD9007F1380DA0FFCC8FC32367CB43B>I<90397F8007FCB590387FFF8002
81B512E0913987F00FF891398F8003FC000390399E0001FFC601BC6D7FD97FF86E7E4A6E
7E4A6E7E4A140F844A6E7EA2717EA3717EA4711380AB4D1300A44D5AA24D5AA2606E140F
4D5A6E5D6E4A5A6E4A5A02BC4AC7FC029E495A028FEB07FC913987E01FF00281B512C0DA
807F90C8FCED0FF892CAFCB13801FFE0B612C0A4394B7DB341>I<D907FE13C090387FFF
8148B512E33907F803FF390FC0007F4848133F48C7121F003E140F007E1407127C00FC14
03A315017EA27E7F6C6C90C7FC13F013FF6C13F86CEBFF806C14E06C14F86C14FEC68001
3F1480010714C0D9003F13E014039138007FF0151F00E0140FED07F8A26C1403A215017E
A36C15F0A26C14036C15E015076DEB0FC06DEB1F80D8FDF0EB3F0039F8FC01FE39F07FFF
F8D8E01F13E0D8C00390C7FC25367CB42E>115 D E
%EndDVIPSBitmapFont
end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%PaperSize: A4

%%EndSetup
%%Page: 0 1
0 0 bop 1179 1112 a Fn(Design)39 b(of)f(CMU)h(Common)34
b(Lisp)1363 1451 y Fm(Rob)s(ert)e(A.)h(MacLac)m(hlan)g(\(ed\))1627
1592 y(Marc)m(h)h(29,)e(2001)1632 1717 y Fl(CMU-CS-91-???)1449
2436 y Fk(Sc)n(ho)r(ol)27 b(of)g(Computer)h(Science)1459
2535 y(Carnegie)e(Mellon)h(Univ)n(ersit)n(y)1562 2635
y(Pittsburgh,)g(P)-7 b(A)27 b(15213)1773 3450 y Fj(Abstract)523
3632 y Fk(This)e(rep)r(ort)e(do)r(cumen)n(ts)i(in)n(ternal)f(details)g
(of)g(the)h(CMU)g(Common)f(Lisp)h(compiler)f(and)523
3732 y(run-time)36 b(system.)60 b(CMU)36 b(Common)f(Lisp)h(is)f(a)g
(public)i(domain)e(implemen)n(tation)g(of)523 3832 y(Common)27
b(Lisp)h(that)g(runs)f(on)g(v)-5 b(arious)26 b(Unix)i(w)n(orkstations.)
p eop
%%Page: 1 2
1 1 bop 523 1279 a Fi(Con)-6 b(ten)g(ts)523 1710 y Fh(I)112
b(System)37 b(Arc)m(hitecture)1643 b(2)523 1893 y Fj(1)77
b(P)m(ac)m(k)-5 b(age)33 b(and)g(File)d(Structure)1559
b(3)648 1993 y Fk(1.1)84 b(R)n(CS)27 b(and)h(build)g(areas)50
b(.)41 b(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)
f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)132 b(3)839 2092 y(1.1.1)93
b(Con\014guration)26 b(Managemen)n(t)61 b(.)42 b(.)f(.)h(.)f(.)h(.)g(.)
f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)132 b(4)839 2192
y(1.1.2)93 b(R)n(CS)28 b(Branc)n(hes)78 b(.)42 b(.)f(.)h(.)f(.)h(.)g(.)
f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)132
b(4)648 2291 y(1.2)84 b(Releases)48 b(.)41 b(.)h(.)f(.)h(.)f(.)h(.)g(.)
f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h
(.)f(.)h(.)g(.)f(.)h(.)f(.)132 b(5)648 2391 y(1.3)84
b(Source)26 b(T)-7 b(ree)27 b(Structure)71 b(.)42 b(.)f(.)h(.)f(.)h(.)g
(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)
132 b(5)648 2491 y(1.4)84 b(P)n(ac)n(k)-5 b(age)25 b(structure)i(.)42
b(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h
(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)132 b(5)523 2673 y
Fj(2)77 b(System)30 b(Building)2003 b(8)648 2773 y Fk(2.1)84
b(Compiling)27 b(the)h(C)f(Startup)h(Co)r(de)67 b(.)42
b(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f
(.)132 b(8)648 2873 y(2.2)84 b(Compiling)27 b(the)h(Lisp)f(Co)r(de)84
b(.)42 b(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)
h(.)g(.)f(.)h(.)f(.)132 b(9)648 2972 y(2.3)84 b(Building)27
b(Core)g(Images)80 b(.)42 b(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h
(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)132 b(9)523
3259 y Fh(I)s(I)112 b(Compiler)35 b(Organization)1432
b(11)523 3441 y Fj(3)77 b(Compiler)29 b(Ov)m(erview)1835
b(12)523 3624 y(4)77 b(The)32 b(Implicit)d(Con)m(tin)m(uation)j
(Represen)m(tation)881 b(15)648 3724 y Fk(4.1)84 b(T)-7
b(ail)27 b(sets)48 b(.)41 b(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f
(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)
h(.)f(.)90 b(17)648 3823 y(4.2)84 b(Hairy)26 b(function)j(represen)n
(tation)52 b(.)42 b(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f
(.)h(.)g(.)f(.)h(.)f(.)90 b(18)648 3923 y(4.3)84 b(ICR)27
b(represen)n(tation)f(of)i(non-lo)r(cal)e(exits)42 b(.)f(.)h(.)f(.)h(.)
g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)90 b(19)648
4022 y(4.4)84 b(Blo)r(c)n(k)26 b(compilation)82 b(.)42
b(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f
(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)90 b(20)648 4122 y(4.5)84
b(En)n(try)26 b(p)r(oin)n(ts)c(.)41 b(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h
(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)
f(.)h(.)f(.)90 b(21)523 4305 y Fj(5)77 b(ICR)31 b(con)m(v)m(ersion)2000
b(23)648 4404 y Fk(5.1)84 b(Canonical)26 b(forms)84 b(.)42
b(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h
(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)90 b(23)648 4504 y(5.2)84
b(Inline)27 b(functions)47 b(.)41 b(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g
(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)
90 b(25)648 4604 y(5.3)84 b(Compilation)27 b(p)r(olicy)46
b(.)c(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h
(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)90 b(26)648 4703 y(5.4)84
b(Notes)c(.)42 b(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)
g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f
(.)90 b(26)523 4886 y Fj(6)77 b(Lo)s(cal)32 b(call)f(analysis)1891
b(28)1934 5147 y Fk(1)p eop
%%Page: 2 3
2 2 bop 523 614 a Fj(7)77 b(Find)31 b(comp)s(onen)m(ts)1923
b(30)523 797 y(8)77 b(ICR)31 b(optimize)2077 b(31)648
897 y Fk(8.1)84 b(Goals)26 b(for)h(ICR)h(optimizations)34
b(.)41 b(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)
g(.)f(.)h(.)f(.)90 b(33)648 996 y(8.2)84 b(Flo)n(w)27
b(graph)f(simpli\014cation)72 b(.)42 b(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f
(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)90
b(34)648 1096 y(8.3)84 b(F)-7 b(orw)n(ard)25 b(ICR)j(optimizations)66
b(.)41 b(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)
g(.)f(.)h(.)f(.)90 b(34)648 1196 y(8.4)84 b(Bac)n(kw)n(ard)25
b(ICR)i(optimizations)73 b(.)42 b(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f
(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)90 b(36)523 1378
y Fj(9)77 b(T)m(yp)s(e)32 b(c)m(hec)m(king)2046 b(37)523
1561 y(10)29 b(Constrain)m(t)j(propagation)1670 b(39)523
1743 y(11)29 b(ICR)i(\014nalize)2144 b(42)523 1926 y(12)29
b(En)m(vironmen)m(t)h(analysis)1747 b(43)523 2109 y(13)29
b(Virtual)j(Mac)m(hine)g(Represen)m(tation)f(In)m(tro)s(duction)737
b(45)523 2291 y(14)29 b(Global)i(TN)h(assignmen)m(t)1702
b(46)523 2474 y(15)29 b(Lo)s(cal)j(TN)g(assignmen)m(t)1754
b(48)523 2657 y(16)29 b(Con)m(trol)i(optimization)1769
b(51)523 2839 y(17)29 b(VMR)i(con)m(v)m(ersion)1942 b(53)648
2939 y Fk(17.1)42 b(Stac)n(k)27 b(analysis)32 b(.)42
b(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g
(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)90 b(55)648
3039 y(17.2)42 b(Non-lo)r(cal)26 b(exit)35 b(.)42 b(.)f(.)h(.)g(.)f(.)h
(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)
h(.)g(.)f(.)h(.)f(.)90 b(58)523 3221 y Fj(18)29 b(Cop)m(y)j
(propagation)1897 b(59)523 3404 y(19)29 b(Represen)m(tation)i
(selection)1621 b(61)523 3587 y(20)29 b(Lifetime)g(analysis)1944
b(63)648 3686 y Fk(20.1)42 b(Flo)n(w)27 b(analysis)54
b(.)42 b(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)
h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)90 b(63)648
3786 y(20.2)42 b(Con\015ict)27 b(detection)h(.)42 b(.)g(.)f(.)h(.)f(.)h
(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)
f(.)h(.)f(.)90 b(64)523 3968 y Fj(21)29 b(P)m(ac)m(king)2319
b(67)523 4151 y(22)29 b(Co)s(de)i(generation)1957 b(72)523
4334 y(23)29 b(Assem)m(bly)2244 b(73)523 4516 y(24)29
b(Dumping)2256 b(74)1934 5147 y Fk(2)p eop
%%Page: 3 4
3 3 bop 523 614 a Fj(25)29 b(User)j(In)m(terface)2051
b(77)648 714 y Fk(25.1)42 b(Error)25 b(Message)h(Utilities)k(.)42
b(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f
(.)h(.)g(.)f(.)h(.)f(.)90 b(77)648 814 y(25.2)42 b(Source)26
b(P)n(aths)69 b(.)42 b(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h
(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)90
b(77)523 1100 y Fh(I)s(I)s(I)112 b(Compiler)35 b(Retargeting)1439
b(78)523 1283 y Fj(26)29 b(Storage)j(bases)f(and)h(classes)1590
b(81)523 1465 y(27)29 b(T)m(yp)s(e)j(system)e(parameterization)1372
b(84)523 1648 y(28)29 b(V)m(OP)j(De\014nition)1991 b(86)648
1748 y Fk(28.1)42 b(Lifetime)28 b(mo)r(del)64 b(.)41
b(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f
(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)90 b(86)648 1847
y(28.2)42 b(V)n(OP)26 b(Cost)h(mo)r(del)52 b(.)42 b(.)g(.)f(.)h(.)f(.)h
(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)
f(.)h(.)f(.)90 b(87)648 1947 y(28.3)42 b(E\016ciency)27
b(notes)42 b(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)
f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)90
b(88)523 2130 y Fj(29)29 b(Assem)m(bler)g(Retargeting)1687
b(89)523 2312 y(30)29 b(W)-8 b(riting)30 b(Assem)m(bly)g(Co)s(de)1645
b(90)523 2495 y(31)29 b(Required)i(V)m(OPS)1972 b(91)648
2594 y Fk(31.1)42 b(F)-7 b(unction)28 b(Call)49 b(.)42
b(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g
(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)90 b(92)839
2694 y(31.1.1)51 b(Registers)27 b(and)g(frame)g(format)59
b(.)42 b(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)
90 b(92)839 2794 y(31.1.2)51 b(F)-7 b(ull)28 b(call)52
b(.)41 b(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)
g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)90 b(92)839
2893 y(31.1.3)51 b(Unkno)n(wn)27 b(v)-5 b(alues)28 b(return)79
b(.)42 b(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)
h(.)f(.)90 b(93)839 2993 y(31.1.4)51 b(External)27 b(En)n(try)f(P)n
(oin)n(ts)54 b(.)42 b(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h
(.)f(.)h(.)g(.)f(.)h(.)f(.)90 b(93)648 3093 y(31.2)42
b(Calls)e(.)i(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h
(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)
f(.)90 b(94)523 3275 y Fj(32)29 b(Standard)k(Primitiv)m(es)1799
b(99)523 3458 y(33)29 b(Customizing)g(VMR)i(Con)m(v)m(ersion)1315
b(100)648 3557 y Fk(33.1)42 b(Constan)n(t)26 b(Op)r(erands)31
b(.)42 b(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)
h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)49 b(100)648 3657
y(33.2)42 b(Supp)r(orting)27 b(Multiple)h(Hardw)n(are)e
(Con\014gurations)k(.)41 b(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)49
b(101)648 3757 y(33.3)42 b(Sp)r(ecial-case)26 b(VMR)i(con)n(v)n(ert)e
(metho)r(ds)33 b(.)42 b(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g
(.)f(.)h(.)f(.)49 b(102)523 4043 y Fh(IV)111 b(Run-Time)37
b(system)1585 b(103)523 4226 y Fj(34)29 b(The)j(T)m(yp)s(e)g(System)
1853 b(104)523 4408 y(35)29 b(The)j(Info)g(Database)1820
b(105)523 4591 y(36)29 b(Debugger)i(Information)1666
b(109)648 4691 y Fk(36.1)42 b(The)27 b(Debug-Info)h(Structure)51
b(.)42 b(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)
h(.)g(.)f(.)h(.)f(.)49 b(109)1934 5147 y(3)p eop
%%Page: 4 5
4 4 bop 523 614 a Fj(37)29 b(Ob)5 b(ject)32 b(F)-8 b(ormat)1979
b(118)648 714 y Fk(37.1)42 b(T)-7 b(agging)61 b(.)41
b(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h
(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)49
b(118)648 814 y(37.2)42 b(GC)27 b(Commen)n(ts)71 b(.)41
b(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f
(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)49 b(119)648 913
y(37.3)42 b(Structures)e(.)i(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)
h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h
(.)f(.)49 b(119)648 1013 y(37.4)42 b(Fixn)n(ums)c(.)j(.)h(.)f(.)h(.)f
(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)
h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)49 b(120)648 1112
y(37.5)42 b(Other-immediates)21 b(.)42 b(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)
g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f
(.)49 b(120)648 1212 y(37.6)42 b(Data-Blo)r(c)n(ks)25
b(and)j(Header-W)-7 b(ord)26 b(F)-7 b(ormat)41 b(.)h(.)f(.)h(.)g(.)f(.)
h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)49 b(121)648 1312
y(37.7)42 b(Data-Blo)r(c)n(ks)25 b(and)j(Other-immediates)f(T)n(yping)
72 b(.)42 b(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)49
b(122)648 1411 y(37.8)42 b(Strings)31 b(.)42 b(.)f(.)h(.)f(.)h(.)f(.)h
(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)
f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)49 b(123)648 1511 y(37.9)42
b(Sym)n(b)r(ols)27 b(and)g(NIL)38 b(.)k(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g
(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)
49 b(124)648 1611 y(37.10Bign)n(ums)35 b(.)41 b(.)h(.)f(.)h(.)f(.)h(.)g
(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)
h(.)f(.)h(.)g(.)f(.)h(.)f(.)49 b(127)648 1710 y(37.11Co)r(de)27
b(Data-Blo)r(c)n(ks)79 b(.)42 b(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f
(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)49
b(127)648 1810 y(37.12Closure)26 b(F)-7 b(ormat)44 b(.)d(.)h(.)g(.)f(.)
h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f
(.)h(.)g(.)f(.)h(.)f(.)49 b(131)648 1910 y(37.13F)-7
b(unction)28 b(call)72 b(.)42 b(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g
(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)
49 b(131)648 2009 y(37.14Memory)26 b(La)n(y)n(out)i(.)41
b(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f
(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)49 b(132)648 2109
y(37.15System)27 b(P)n(oin)n(ters)22 b(.)41 b(.)h(.)g(.)f(.)h(.)f(.)h
(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)
f(.)h(.)f(.)49 b(132)523 2291 y Fj(38)29 b(Memory)h(Managemen)m(t)1673
b(134)648 2391 y Fk(38.1)42 b(Stac)n(ks)26 b(and)i(Globals)44
b(.)e(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h
(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)49 b(134)648 2491
y(38.2)42 b(Heap)27 b(La)n(y)n(out)76 b(.)42 b(.)f(.)h(.)g(.)f(.)h(.)f
(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)
g(.)f(.)h(.)f(.)49 b(134)648 2590 y(38.3)42 b(Garbage)25
b(Collection)41 b(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f
(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)49
b(134)523 2773 y Fj(39)29 b(In)m(terface)k(to)f(C)f(and)i(Assem)m(bler)
1361 b(135)523 2956 y(40)29 b(Lo)m(w-lev)m(el)i(debugging)1746
b(136)523 3138 y(41)29 b(Core)i(File)g(F)-8 b(ormat)1873
b(137)523 3321 y(42)29 b(F)-8 b(asload)31 b(File)g(F)-8
b(ormat)1763 b(138)648 3421 y Fk(42.1)42 b(General)68
b(.)41 b(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)
f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)49
b(138)648 3520 y(42.2)42 b(Strategy)h(.)e(.)h(.)f(.)h(.)f(.)h(.)g(.)f
(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)
f(.)h(.)g(.)f(.)h(.)f(.)49 b(139)648 3620 y(42.3)42 b(F)-7
b(asload)26 b(Language)d(.)42 b(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h
(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)49
b(140)523 3802 y Fj(A)k(Glossary)2235 b(150)1934 5147
y Fk(4)p eop
%%Page: 5 6
5 5 bop 1699 2029 a Fg(P)-5 b(art)65 b(I)909 2444 y Fi(System)77
b(Arc)-6 b(hitecture)1934 5147 y Fk(5)p eop
%%Page: 6 7
6 6 bop 523 1237 a Fg(Chapter)65 b(1)523 1652 y Fi(P)-6
b(ac)g(k)-13 b(age)76 b(and)i(File)f(Structure)523 2134
y Ff(1.1)135 b(R)l(CS)46 b(and)e(build)h(areas)523 2316
y Fk(The)39 b(CMU)g(CL)g(sources)e(are)h(main)n(tained)h(using)f(R)n
(CS)h(in)g(a)g(hierarc)n(hical)e(directory)523 2415 y(structure)27
b(whic)n(h)h(supp)r(orts:)648 2581 y Fe(\017)41 b Fk(shared)26
b(R)n(CS)i(con\014g)f(\014le)g(across)f(a)h(build)h(area,)648
2747 y Fe(\017)41 b Fk(frozen)27 b(sources)f(for)h(m)n(ultiple)h
(releases,)e(and)648 2913 y Fe(\017)41 b Fk(separate)26
b(system)h(build)h(areas)e(for)h(di\013eren)n(t)h(arc)n(hitectures.)648
3079 y(Since)j(this)h(organization)e(main)n(tains)h(m)n(ultiple)h
(copies)f(of)g(the)h(source,)g(it)g(is)f(some-)523 3179
y(what)j(space)e(in)n(tensiv)n(e.)55 b(But)34 b(it)g(is)f(easy)g(to)g
(delete)h(and)g(later)e(restore)h(a)g(cop)n(y)f(of)i(the)523
3279 y(source)26 b(using)i(R)n(CS)f(snapshots.)648 3378
y(There)g(are)f(three)i(ma)5 b(jor)26 b(subtrees)h(of)h(the)g(ro)r(ot)e
Fd(/afs/cs/project/c)o(lis)o(p)p Fk(:)523 3544 y Fj(rcs)42
b Fk(holds)27 b(the)h(R)n(CS)g(source)e(\(su\016x)i Fd(,v)p
Fk(\))f(\014les.)523 3710 y Fj(src)42 b Fk(holds)37 b(\\c)n(hec)n(k)n
(ed)f(out")h(\(but)h(not)f(lo)r(c)n(k)n(ed\))g(v)n(ersions)e(of)j(the)f
(source)g(\014les,)i(and)e(is)731 3810 y(sub)r(divided)i(b)n(y)f
(release.)68 b(Eac)n(h)38 b(release)f(directory)g(in)i(the)g(source)e
(tree)i(has)f(a)731 3910 y(sym)n(b)r(olic)29 b(link)h(named)g(\\)p
Fd(RCS)p Fk(")e(whic)n(h)h(p)r(oin)n(ts)h(to)g(the)g(R)n(CS)g(sub)r
(directory)f(of)h(the)731 4009 y(corresp)r(onding)e(directory)g(in)i
(the)h(\\)p Fd(rcs)d Fk(tree.)43 b(A)n(t)31 b(top-lev)n(el)e(in)h(a)f
(source)g(tree)g(is)731 4109 y(the)23 b(\\)p Fd(RCSconfig)p
Fk(")18 b(\014le)k(for)g(that)h(area.)34 b(All)23 b(sub)r(directories)f
(also)f(ha)n(v)n(e)h(a)g(sym)n(b)r(olic)731 4208 y(link)34
b(to)h(this)g(R)n(CScon\014g)f(\014le,)j(allo)n(wing)c(the)i
(con\014guration)e(for)i(an)f(area)f(to)i(b)r(e)731 4308
y(easily)26 b(c)n(hanged.)523 4474 y Fj(build)41 b Fk(compiled)27
b(ob)5 b(ject)28 b(\014les)g(are)e(placed)i(in)g(this)g(tree,)g(whic)n
(h)f(is)h(sub)r(divided)g(b)n(y)g(ma-)731 4574 y(c)n(hine)33
b(t)n(yp)r(e)h(and)f(v)n(ersion.)54 b(The)34 b(CMU)g(CL)f(searc)n
(h-list)f(mec)n(hanism)h(is)h(used)g(to)731 4673 y(allo)n(w)24
b(the)h(source)f(\014les)h(to)g(b)r(e)h(lo)r(cated)e(in)i(a)f
(di\013eren)n(t)g(tree)g(than)g(the)g(ob)5 b(ject)25
b(\014les.)731 4773 y(C)g(programs)e(are)h(compiled)h(b)n(y)g(using)g
(the)g Fd(tools/dupsrcs)20 b Fk(command)25 b(to)g(mak)n(e)731
4873 y(sym)n(b)r(olic)i(links)g(to)h(the)g(corresp)r(onding)d(source)i
(tree.)1934 5147 y(6)p eop
%%Page: 7 8
7 7 bop 648 614 a Fk(On)32 b(order)g(to)g(mo)r(dify)i(an)e(\014le)h(in)
g(R)n(CS,)g(it)g(m)n(ust)g(b)r(e)g(c)n(hec)n(k)n(ed)f(out)h(with)g(a)f
(lo)r(c)n(k)h(to)523 714 y(pro)r(duce)d(a)h(writable)f(w)n(orking)f
(\014le.)47 b(Eac)n(h)29 b(programmer)g(c)n(hec)n(ks)g(out)i(\014les)g
(in)n(to)f(a)h(p)r(er-)523 814 y(sonal)22 b(\\pla)n(y)g(area")f
(subtree)i(of)g Fd(clisp/hackers)p Fk(.)30 b(These)23
b(tree)g(duplicate)g(the)h(structure)523 913 y(of)32
b(source)g(trees,)h(but)g(are)e(normally)h(empt)n(y)g(except)h(for)f
(\014les)g(activ)n(ely)g(b)r(eing)g(w)n(ork)n(ed)523
1013 y(on.)648 1112 y(See)43 b Fd(/afs/cs/project)o(/cl)o(is)o(p/p)o
(ma)o(x_)o(mac)o(h/)o(alp)o(ha)o(/t)o(ool)o(s/)37 b Fk(for)42
b(v)-5 b(arious)42 b(to)r(ols)523 1212 y(w)n(e)27 b(use)h(for)f(R)n(CS)
g(hac)n(king:)523 1348 y Fj(rcs.lisp)40 b Fk(Hemlo)r(c)n(k)28
b(\(editor\))f(commands)g(for)g(R)n(CS)h(\014le)g(manipulation)523
1499 y Fj(rcsup)s(date.c)42 b Fk(Program)28 b(to)j(c)n(hec)n(k)e(out)i
(all)f(\014les)h(in)g(a)f(tree)g(that)h(ha)n(v)n(e)f(b)r(een)h(mo)r
(di\014ed)731 1598 y(since)c(last)g(c)n(hec)n(k)n(out.)523
1749 y Fj(up)s(dates)41 b Fk(Shell)27 b(script)g(to)f(pro)r(duce)h(a)f
(single)g(listing)h(of)f(all)h(R)n(CS)g(log)e(en)n(tries)h(in)h(a)g
(tree)731 1849 y(since)g(a)g(date.)523 2000 y Fj(snapshot-up)s
(date.lisp)39 b Fk(Lisp)22 b(program)e(to)h(generate)g(a)g(shell)h
(script)f(whic)n(h)h(generates)731 2099 y(a)33 b(listing)i(of)f(up)r
(dates)g(since)g(a)g(particular)f(R)n(CS)h(snapshot)g(\()p
Fd(RCSSNAP)p Fk(\))e(\014le)i(w)n(as)731 2199 y(created.)648
2335 y(Y)-7 b(ou)27 b(can)g(easily)g(op)r(erate)g(on)g(all)h(R)n(CS)f
(\014les)h(in)f(a)h(subtree)f(using:)523 2470 y Fd(find)42
b(.)h(-follow)e(-name)g('*,v')h(-exec)f(<some)h(command>)e({})j(\\;)523
2696 y Fh(1.1.1)113 b(Con\014guration)37 b(Managemen)m(t)523
2849 y Fk(con\014g)h(\014les)h(are)f(useful,)k(esp)r(ecially)c(in)i
(com)n(binarion)d(with)i(\\)p Fd(snapshot)p Fk(".)67
b(Y)-7 b(ou)39 b(can)523 2949 y(shapshot)26 b(an)n(y)h(particular)f(v)n
(ersion,)f(giving)i(an)g(R)n(CScon\014g)f(that)h(designates)g(that)g
(con-)523 3049 y(\014guration.)36 b(Y)-7 b(ou)27 b(can)g(also)g(use)g
(con\014g)g(\014les)g(to)h(sp)r(ecify)f(the)h(system)f(as)g(of)h(a)f
(particular)523 3148 y(date.)37 b(F)-7 b(or)27 b(example:)523
3284 y Fd(<3-jan-91)523 3420 y Fk(in)d(the)h(the)g(con\014g)e(\014le)h
(will)h(cause)e(the)i(v)n(ersion)d(as)i(of)g(that)h(3-jan-91)d(to)i(b)r
(e)g(c)n(hec)n(k)n(ed)f(out,)523 3519 y(instead)k(of)h(the)g(latest)f
(v)n(ersion.)523 3745 y Fh(1.1.2)113 b(R)m(CS)37 b(Branc)m(hes)523
3898 y Fk(Branc)n(hes)i(and)i(named)g(revisions)f(are)g(used)h
(together)f(to)h(allo)n(w)f(m)n(ultiple)i(paths)e(of)523
3998 y(dev)n(elopmen)n(t)34 b(to)g(b)r(e)g(supp)r(orted.)56
b(Eac)n(h)33 b(separate)g(dev)n(elopmen)n(t)g(has)h(a)g(branc)n(h,)h
(and)523 4098 y(eac)n(h)27 b(branc)n(h)f(has)h(a)f(name.)37
b(This)27 b(pro)5 b(ject)27 b(uses)g(branc)n(hes)f(in)h(t)n(w)n(o)g
(somewhat)f(di\013eren)n(t)523 4197 y(cases)h(of)g(div)n(ergen)n(t)f
(dev)n(elopmen)n(t:)648 4333 y Fe(\017)41 b Fk(F)-7 b(or)27
b(systems)h(that)g(w)n(e)g(ha)n(v)n(e)f(imp)r(orted)h(from)g(the)h
(outside,)f(w)n(e)g(generally)f(assign)731 4432 y(a)34
b(\\)p Fd(cmu)p Fk(")e(branc)n(h)i(for)g(our)g(lo)r(cal)g(mo)r
(di\014cations.)57 b(When)35 b(a)f(new)h(release)e(comes)731
4532 y(along,)26 b(w)n(e)h(c)n(hec)n(k)g(it)h(in)g(on)f(the)h(trunk,)g
(and)f(then)h(merge)f(our)g(branc)n(h)f(bac)n(k)h(in.)648
4683 y Fe(\017)41 b Fk(F)-7 b(or)23 b(the)h(early)f(dev)n(elopmen)n(t)g
(and)h(debugging)f(of)h(ma)5 b(jor)23 b(system)h(c)n(hanges,)f(where)
731 4783 y(the)30 b(dev)n(elopmen)n(t)f(and)g(debugging)g(is)g(exp)r
(ected)h(to)g(tak)n(e)f(long)g(enough)g(that)h(w)n(e)731
4882 y(w)n(ouldn't)d(w)n(an)n(t)g(the)h(trunk)g(to)f(b)r(e)h(in)g(an)f
(inconsisten)n(t)h(state)f(for)g(that)h(long.)1934 5147
y(7)p eop
%%Page: 8 9
8 8 bop 523 614 a Ff(1.2)135 b(Releases)523 796 y Fk(W)-7
b(e)28 b(name)g(releases)e(according)f(to)j(the)g(normal)f(alpha,)g(b)r
(eta,)h(default)g(con)n(v)n(en)n(tion.)35 b(Al-)523 896
y(pha)28 b(releases)f(are)g(frequen)n(t,)i(in)n(tended)g(primarily)e
(for)h(in)n(ternal)g(use,)g(and)h(are)e(th)n(us)h(not)523
995 y(sub)5 b(ject)39 b(to)g(as)g(high)g(high)g(do)r(cumen)n(tation)g
(and)g(con\014guration)f(managemen)n(t)g(stan-)523 1095
y(dards.)71 b(Alpha)39 b(releases)f(are)g(designated)g(b)n(y)h(the)h
(date)f(on)g(whic)n(h)g(the)g(system)g(w)n(as)523 1195
y(built;)f(the)c(alpha)f(releases)f(for)h(di\013eren)n(t)h(systems)f
(ma)n(y)g(not)h(b)r(e)g(in)g(exact)f(corresp)r(on-)523
1294 y(dence,)28 b(since)f(they)h(are)f(built)h(at)f(di\013eren)n(t)h
(times.)648 1394 y(Beta)g(and)g(default)h(releases)e(are)g(alw)n(a)n
(ys)g(based)h(on)g(a)g(snapshot,)g(ensuring)g(that)h(all)523
1494 y(systems)36 b(are)g(based)g(on)g(the)h(same)f(sources.)63
b(A)37 b(release)e(name)i(is)f(an)h(in)n(teger)e(and)i(a)523
1593 y(letter,)29 b(lik)n(e)f(\\15d".)38 b(The)29 b(in)n(teger)e(is)i
(the)g(name)f(of)h(the)g(source)e(tree)h(whic)n(h)h(the)g(system)523
1693 y(w)n(as)g(built)h(from,)g(and)g(the)g(letter)g(represen)n(ts)e
(the)i(release)f(from)g(that)h(tree:)41 b(\\a")28 b(is)i(the)523
1792 y(\014rst)k(release,)h(etc.)57 b(Generally)34 b(the)h(n)n(umeric)f
(part)g(increases)e(when)j(there)f(are)g(ma)5 b(jor)523
1892 y(system)37 b(c)n(hanges,)g(whereas)f(c)n(hanges)f(in)j(the)f
(letter)g(represen)n(t)e(bug-\014xes)h(and)h(minor)523
1992 y(enhancemen)n(ts.)523 2266 y Ff(1.3)135 b(Source)45
b(T)-11 b(ree)45 b(Structure)523 2448 y Fk(A)36 b(source)f(tree)g
(\(and)h(the)g(master)f(\\)p Fd(rcs)p Fk(")f(tree\))h(has)h(sub)r
(directories)e(for)i(eac)n(h)f(ma)5 b(jor)523 2548 y(subsystem:)523
2714 y Fd(assembly/)38 b Fk(Holds)28 b(the)g(CMU)h(CL)f(source-\014le)e
(assem)n(bler,)h(and)h(has)g(mac)n(hine)f(sp)r(eci\014c)731
2813 y(sub)r(directories)f(holding)h(assem)n(bly)g(co)r(de)g(for)g
(that)h(arc)n(hitecture.)523 2979 y Fd(clx/)40 b Fk(The)28
b(CLX)f(in)n(terface)g(to)h(the)g(X11)f(windo)n(w)g(system.)523
3145 y Fd(code/)39 b Fk(The)28 b(Lisp)g(co)r(de)f(for)g(the)h(run)n
(time)g(system)f(and)g(standard)g(CL)h(utilities.)523
3312 y Fd(compiler/)38 b Fk(The)18 b(Python)g(compiler.)33
b(Has)18 b(arc)n(hitecture-sp)r(eci\014c)f(sub)r(directories)g(whic)n
(h)731 3411 y(hold)37 b(bac)n(k)n(ends)f(for)i(di\013eren)n(t)f(mac)n
(hines.)67 b(The)37 b Fd(generic)e Fk(sub)r(directory)i(holds)731
3511 y(co)r(de)27 b(that)h(is)f(shared)g(across)f(most)h(bac)n(k)n
(ends.)523 3677 y Fd(hemlock/)38 b Fk(The)28 b(Hemlo)r(c)n(k)f(editor.)
523 3843 y Fd(lisp/)39 b Fk(The)28 b(C)g(run)n(time)f(system)h(co)r(de)
f(and)h(lo)n(w-lev)n(el)e(Lisp)h(debugger.)523 4009 y
Fd(pcl/)40 b Fk(CMU)28 b(v)n(ersion)e(of)h(the)h(PCL)g(implemen)n
(tation)f(of)h(CLOS.)523 4175 y Fd(tools/)39 b Fk(System)28
b(building)g(command)f(\014les)g(and)h(source)e(managemen)n(t)h(to)r
(ols.)523 4450 y Ff(1.4)135 b(P)l(ac)l(k)-7 b(age)46
b(structure)523 4631 y Fk(Goals:)34 b(with)25 b(the)g(single)f
(exception)g(of)g(LISP)-7 b(,)24 b(w)n(e)g(w)n(an)n(t)f(to)h(b)r(e)h
(able)f(to)g(exp)r(ort)g(from)g(the)523 4731 y(pac)n(k)-5
b(age)26 b(that)i(the)g(co)r(de)f(liv)n(es)g(in.)1934
5147 y(8)p eop
%%Page: 9 10
9 9 bop 523 614 a Fj(Mac)m(h,)32 b(CLX...)41 b Fk(|)22
b(These)g(Implemen)n(tation-dep)r(enden)n(t)g(system-in)n(terface)f
(pac)n(k)-5 b(ages)731 714 y(pro)n(vide)24 b(direct)h(access)f(to)h(sp)
r(eci\014c)h(features)f(a)n(v)-5 b(ailable)24 b(in)i(the)f(op)r
(erating)g(system)731 814 y(en)n(vironmen)n(t,)h(but)i(hide)g(details)g
(of)f(ho)n(w)g(OS)h(comm)n(unication)e(is)i(done.)523
968 y Fj(system)40 b Fk(con)n(tains)d(co)r(de)h(that)g(m)n(ust)g(kno)n
(w)g(ab)r(out)g(the)g(op)r(erating)f(system)h(en)n(viron-)731
1067 y(men)n(t:)49 b(I/O,)33 b(etc.)55 b(Hides)33 b(the)h(op)r(erating)
f(system)g(en)n(vironmen)n(t.)54 b(Pro)n(vides)32 b(OS)731
1167 y(in)n(terface)27 b(extensions)f(suc)n(h)i(as)f
Fd(print-directory)o Fk(,)22 b(etc.)523 1321 y Fj(k)m(ernel)42
b Fk(hides)21 b(state)g(and)g(t)n(yp)r(es)h(used)f(for)g(system)g(in)n
(tegration:)32 b(pac)n(k)-5 b(age)20 b(system,)i(error)731
1420 y(system,)j(streams)f(\(?\),)i(reader,)e(prin)n(ter.)35
b(Also,)25 b(hides)g(the)g(VM,)h(in)f(that)g(w)n(e)f(don't)731
1520 y(exp)r(ort)j(an)n(ything)f(that)i(rev)n(eals)d(the)j(VM)g(in)n
(terface.)36 b(Con)n(tains)27 b(co)r(de)g(that)h(needs)731
1620 y(to)d(use)f(the)i(VM)f(and)g(SYSTEM)h(in)n(terface,)f(but)g(is)g
(indep)r(enden)n(t)h(of)f(OS)g(and)g(VM)731 1719 y(details.)36
b(This)27 b(co)r(de)g(shouldn't)h(need)f(to)g(b)r(e)h(c)n(hanged)e(in)h
(an)n(y)g(p)r(ort)g(of)g(CMU)g(CL,)731 1819 y(but)g(w)n(on't)f(w)n(ork)
f(when)i(plopp)r(ed)g(in)n(to)f(an)h(arbitrary)d(CL.)j(Uses)f(SYSTEM,)h
(VM,)731 1919 y(EXTENSIONS.)32 b(W)-7 b(e)34 b(exp)r(ort)e("hidden")h
(sym)n(b)r(ols)f(related)g(to)h(implemen)n(tation)731
2018 y(of)27 b(CL:)h(setf-in)n(v)n(erses,)e(p)r(ossibly)h(some)g
(global)f(v)-5 b(ariables.)731 2145 y(The)41 b(b)r(oundary)f(b)r(et)n
(w)n(een)h(KERNEL)e(and)i(VM)g(is)g(fuzzy)-7 b(,)45 b(but)c(this)g
(fuzziness)731 2245 y(re\015ects)31 b(the)i(fuzziness)f(in)g(the)g
(de\014nition)h(of)f(the)g(VM.)h(W)-7 b(e)32 b(can)g(mak)n(e)f(the)i
(VM)731 2344 y(large,)27 b(and)i(bring)f(ev)n(erything)g(inside,)h(or)f
(w)n(e)g(mak)n(e)g(mak)n(e)g(it)i(small.)40 b(Ob)n(viously)-7
b(,)731 2444 y(w)n(e)18 b(w)n(an)n(t)g(the)h(VM)g(to)f(b)r(e)i(as)e
(small)g(as)g(p)r(ossible,)i(sub)5 b(ject)19 b(to)f(e\016ciency)h
(constrain)n(ts.)731 2543 y(Prett)n(y)29 b(m)n(uc)n(h)h(all)g(of)h(the)
g(co)r(de)f(in)g(KERNEL)g(could)g(b)r(e)h(put)g(in)f(VM.)h(The)g(issue)
731 2643 y(is)c(more)g(what)g(VM)h(hides)g(from)f(KERNEL:)g(VM)h(kno)n
(ws)e(ab)r(out)i(ev)n(erything.)523 2797 y Fj(lisp)40
b Fk(Originally)-7 b(,)33 b(this)g(pac)n(k)-5 b(age)31
b(had)i(all)f(the)h(system)g(co)r(de)f(in)h(it.)53 b(The)33
b(curren)n(t)f(ideal)731 2897 y(is)h(that)g(this)h(pac)n(k)-5
b(age)31 b(should)i(ha)n(v)n(e)f Fc(no)h Fk(co)r(de)g(in)h(it,)h(and)e
(only)g(exist)g(to)g(exp)r(ort)731 2996 y(the)26 b(standard)e(in)n
(terface.)36 b(Note)26 b(that)f(the)h(name)g(has)f(b)r(een)h(c)n
(hanged)f(b)n(y)g(x3j13)f(to)731 3096 y(common-lisp.)523
3250 y Fj(extensions)40 b Fk(con)n(tains)33 b(co)r(de)h(that)g(an)n(y)f
(random)f(user)i(could)f(ha)n(v)n(e)g(written:)49 b(list)34
b(op-)731 3350 y(erations,)k(syn)n(tactic)e(sugar)f(macros.)63
b(Uses)37 b(only)f(LISP)-7 b(,)37 b(so)f(co)r(de)h(in)g(EXTEN-)731
3449 y(SIONS)29 b(is)g(pure)g(CL.)g(Exp)r(orts)f(ev)n(erything)g
(de\014ned)i(within)g(that)f(is)g(useful)h(else-)731
3549 y(where.)35 b(This)25 b(pac)n(k)-5 b(age)23 b(do)r(esn't)j(hide)f
(m)n(uc)n(h,)g(so)f(it)i(is)f(relativ)n(ely)e(safe)i(for)f(users)g(to)
731 3648 y(use)h(EXTENSIONS,)h(since)g(they)g(aren't)f(getting)h(an)n
(ything)f(they)h(couldn't)h(ha)n(v)n(e)731 3748 y(written)h(themselv)n
(es.)39 b(Con)n(trast)27 b(this)i(to)f(KERNEL,)g(whic)n(h)g(exp)r(orts)
g(additional)731 3848 y(op)r(erations)34 b(on)i(CL's)g(primitiv)n(e)g
(data)f(structures:)53 b(P)-7 b(A)n(CKA)n(GE-INTERNAL-)731
3947 y(SYMBOL-COUNT,)41 b(etc.)79 b(Although)42 b(some)f(of)g(the)h
(functionalit)n(y)g(exp)r(orted)731 4047 y(from)24 b(KERNEL)g(could)h
(ha)n(v)n(e)e(b)r(een)j(de\014ned)f(in)g(CL,)g(the)g(k)n(ernel)f
(implemen)n(tation)731 4147 y(is)31 b(m)n(uc)n(h)g(more)f(e\016cien)n
(t)h(b)r(ecause)g(it)h(kno)n(ws)e(ab)r(out)h(implemen)n(tation)g(in)n
(ternals.)731 4246 y(Curren)n(tly)i(this)h(pac)n(k)-5
b(age)33 b(con)n(tains)g(only)h(extensions)g(to)g(CL,)g(but)h(in)f(the)
h(ideal)731 4346 y(sc)n(heme)19 b(of)h(things,)i(it)e(should)g(con)n
(tain)f(the)i(implemen)n(tations)e(of)h(all)g(CL)g(functions)731
4445 y(that)27 b(are)g(in)h(KERNEL)e(\(the)j(library)-7
b(.\))523 4599 y Fj(VM)41 b Fk(hides)25 b(information)f(ab)r(out)h(the)
g(hardw)n(are)d(and)j(data)f(structure)g(represen)n(tations.)731
4699 y(Con)n(tains)29 b(all)h(co)r(de)g(that)g(kno)n(ws)f(ab)r(out)i
(this)f(sort)f(of)i(thing:)42 b(parts)29 b(of)h(the)h(com-)731
4799 y(piler,)46 b(GC,)c(etc.)82 b(The)43 b(bulk)f(of)h(the)g(co)r(de)f
(is)g(the)h(compiler)f(bac)n(k-end.)80 b(Ex-)731 4898
y(p)r(orts)31 b(useful)h(things)g(that)g(are)f(meaningful)h(across)e
(all)i(implemen)n(tations,)h(suc)n(h)1934 5147 y(9)p
eop
%%Page: 10 11
10 10 bop 731 614 a Fk(as)32 b(op)r(erations)f(for)h(examining)h
(compiled)f(functions,)j(system)d(constan)n(ts.)52 b(Uses)731
714 y(COMPILER)23 b(and)i(whatev)n(er)f(else)g(it)i(w)n(an)n(ts.)35
b(Actually)-7 b(,)26 b(there)e(are)g(di\013eren)n(t)h
Fc(ma-)731 814 y(chine)p Fd(-VM)h Fk(pac)n(k)-5 b(ages)26
b(for)g(eac)n(h)g(target)h(implemen)n(tation.)36 b(VM)28
b(is)f(a)f(nic)n(kname)h(for)731 913 y(whatev)n(er)f(implemen)n(tation)
i(w)n(e)f(are)f(curren)n(tly)h(targeting)f(for.)523 1079
y Fj(compiler)39 b Fk(hides)24 b(the)f(algorithms)f(used)i(to)f(map)g
(Lisp)g(seman)n(tics)g(on)n(to)f(the)i(op)r(erations)731
1179 y(supplied)19 b(b)n(y)f(the)h(VM.)g(Exp)r(orts)f(the)h(mec)n
(hanisms)e(used)i(for)f(de\014ning)h(the)g(VM.)g(All)731
1279 y(the)32 b(VM-indep)r(enden)n(t)i(co)r(de)e(in)h(the)g(compiler,)g
(partially)f(hiding)g(the)h(compiler)731 1378 y(in)n(termediate)27
b(represen)n(tations.)35 b(Uses)27 b(KERNEL.)523 1544
y Fj(ev)-5 b(al)41 b Fk(holds)32 b(co)r(de)f(that)h(do)r(es)f(direct)h
(execution)f(of)h(the)g(compiler's)e(ICR.)i(Uses)f(KER-)731
1644 y(NEL,)c(COMPILER.)f(Exp)r(orts)h(debugger)f(in)n(terface)h(to)h
(in)n(terpreted)f(co)r(de.)523 1810 y Fj(debug-in)m(ternals)41
b Fk(presen)n(ts)c(a)g(reasonable,)i(uni\014ed)f(in)n(terface)f(to)h
(manipulation)f(of)731 1910 y(the)28 b(state)g(of)g(b)r(oth)h(compiled)
f(and)g(in)n(terpreted)g(co)r(de.)39 b(\(could)28 b(b)r(e)h(in)f
(KERNEL\))731 2009 y(Uses)f(VM,)h(INTERPRETER,)e(EV)-9
b(AL,)28 b(KERNEL.)523 2175 y Fj(debug)41 b Fk(holds)27
b(the)h(standard)f(debugger,)f(and)i(exp)r(orts)f(the)h(debugger)1914
5147 y(10)p eop
%%Page: 11 12
11 11 bop 523 1237 a Fg(Chapter)65 b(2)523 1652 y Fi(System)77
b(Building)523 2084 y Fk(It's)30 b(actually)f(rather)g(easy)g(to)h
(build)g(a)g(CMU)g(CL)g(core)e(with)j(exactly)e(what)h(y)n(ou)f(w)n(an)
n(t)523 2183 y(in)f(it.)37 b(But)28 b(to)g(do)f(this)h(y)n(ou)f(need)g
(t)n(w)n(o)g(things:)37 b(the)28 b(source)e(and)i(a)f(w)n(orking)f(CMU)
i(CL.)648 2283 y(Basically)-7 b(,)39 b(y)n(ou)e(use)h(the)h(w)n(orking)
d(cop)n(y)i(of)g(CMU)g(CL)g(to)g(compile)g(the)h(sources,)523
2383 y(then)32 b(run)f(a)f(pro)r(cess)g(call)h(\\genesis")e(whic)n(h)i
(builds)g(a)g(\\k)n(ernel")e(core.)46 b(Y)-7 b(ou)32
b(then)f(load)523 2482 y(whatev)n(er)26 b(y)n(ou)h(w)n(an)n(t)g(in)n
(to)h(this)f(k)n(ernel)g(core,)g(and)g(sa)n(v)n(e)f(it.)648
2582 y(In)34 b(the)g Fd(tools/)e Fk(directory)g(in)j(the)f(sources)e
(there)i(are)f(sev)n(eral)f(\014les)i(that)h(compile)523
2682 y(ev)n(erything,)23 b(and)g(build)h(cores,)f(etc.)36
b(The)24 b(\014rst)f(step)g(is)h(to)f(compile)g(the)h(C)f(startup)g(co)
r(de.)648 2781 y Fj(Note:)48 b Fc(the)36 b(various)h(scripts)f
(mentione)l(d)g(b)l(elow)h(have)g(har)l(d-wir)l(e)l(d)g(p)l(aths)f(in)g
(them)523 2881 y(set)27 b(up)g(for)h(our)f(dir)l(e)l(ctory)h(layout)g
(her)l(e)f(at)h(CMU.)g(A)n(nyone)f(anywher)l(e)h(else)g(wil)t(l)g(have)
g(to)523 2980 y(e)l(dit)i(them)g(b)l(efor)l(e)h(they)f(wil)t(l)h(work.)
523 3255 y Ff(2.1)135 b(Compiling)46 b(the)g(C)f(Startup)g(Co)t(de)523
3437 y Fk(There)28 b(is)g(a)g(circular)f(dep)r(endancy)h(b)r(et)n(w)n
(een)g(lisp/in)n(ternals.h)f(and)h(lisp/lisp.map)g(that)523
3537 y(causes)f(b)r(o)r(otstrapping)h(problems.)38 b(T)-7
b(o)28 b(the)h(easiest)e(w)n(a)n(y)h(to)g(get)g(around)f(this)i
(problem)523 3636 y(is)f(to)f(mak)n(e)g(a)g(fak)n(e)g(lisp.nm)h(\014le)
g(that)g(has)f(nothing)g(in)h(it)g(b)n(y)f(a)g(v)n(ersion)f(n)n(um)n(b)
r(er:)523 3819 y Fd(\045)43 b(echo)f("Map)g(file)g(for)g(lisp)g
(version)f(0")i(>)g(lisp.nm)523 4001 y Fk(and)27 b(then)i(run)e
(genesis)g(with)h(NIL)g(for)f(the)h(list)f(of)h(\014les:)523
4167 y Fd(*)43 b(\(load)f(".../compiler/ge)o(ne)o(ri)o(c/n)o(ew)o(-ge)o
(ne)o(si)o(s"\))37 b(;)43 b(compile)e(before)g(loading)523
4267 y(*)i(\(lisp::genesis)38 b(nil)k(".../lisp/lisp.nm)o(")37
b("/dev/null")523 4367 y(".../lisp/lisp.m)o(ap")g(".../lisp/lisp.h)o
("\))523 4533 y Fk(It)32 b(will)h(generate)d(a)i(whole)g(bunc)n(h)g(of)
g(w)n(arnings)e(ab)r(out)i(things)g(b)r(eing)g(unde\014ned,)i(but)523
4632 y(ignore)24 b(that,)j(b)r(ecause)e(it)h(will)g(also)f(generate)f
(a)h(correct)g(lisp.h.)36 b(Y)-7 b(ou)26 b(can)f(then)i(compile)523
4732 y(lisp)h(pro)r(ducing)f(a)g(correct)f(lisp.map:)523
4898 y Fd(\045)43 b(make)1914 5147 y Fk(11)p eop
%%Page: 12 13
12 12 bop 523 614 a Fk(and)29 b(the)g(use)g Fd(tools/do-worldbui)o(ld)
23 b Fk(and)29 b Fd(tools/mk-lisp)23 b Fk(to)29 b(build)h
Fd(kernel.core)523 714 y Fk(and)d Fd(lisp.core)d Fk(\(see)k(section)f
Fj(??)p Fk(building-cores].\))523 989 y Ff(2.2)135 b(Compiling)46
b(the)g(Lisp)e(Co)t(de)523 1170 y Fk(The)23 b Fd(tools)d
Fk(directory)i(con)n(tains)f(v)-5 b(arious)22 b(lisp)g(and)h(C-shell)f
(utilities)h(for)f(building)h(CMU)523 1270 y(CL:)523
1436 y Fj(compile-all*)38 b Fk(Will)31 b(compile)f(lisp)h(\014les)f
(and)g(build)h(a)f(k)n(ernel)g(core.)44 b(It)31 b(has)e(n)n(umerous)731
1536 y(command-line)18 b(options)g(to)g(con)n(trol)f(what)i(to)f
(compile)g(and)h(ho)n(w.)33 b(T)-7 b(ry)18 b(-help)g(to)h(see)731
1635 y(a)27 b(description.)36 b(It)28 b(runs)f(a)g(separate)f(Lisp)h
(pro)r(cess)f(to)i(compile)f(eac)n(h)g(subsystem.)731
1735 y(Error)22 b(output)k(is)f(generated)f(in)h(\014les)g(with)h(\\)p
Fd(.log)p Fk(")c(extension)j(in)g(the)h(ro)r(ot)e(of)h(the)731
1835 y(build)j(area.)523 2001 y Fj(setup.lisp)39 b Fk(Some)33
b(lisp)g(utilities)g(used)g(for)f(compiling)g(c)n(hanged)f(\014les)i
(in)g(batc)n(h)f(mo)r(de)731 2100 y(and)27 b(collecting)f(the)i(error)d
(output)j(Sort)f(of)g(a)g(crude)g(defsystem.)37 b(Loads)26
b(in)n(to)h(the)731 2200 y(\\user")f(pac)n(k)-5 b(age.)35
b(See)27 b Fd(with-compiler-log)o(-fi)o(le)21 b Fk(and)27
b Fd(comf)p Fk(.)523 2366 y Fc(fo)l(o)p Fj(com.lisp)40
b Fk(Eac)n(h)c(system)i(has)f(a)h(\\)p Fd(.lisp)p Fk(")c(\014le)k(in)h
Fd(tools/)c Fk(whic)n(h)j(compiles)f(that)731 2466 y(system.)523
2740 y Ff(2.3)135 b(Building)45 b(Core)h(Images)523 2922
y Fk(Both)23 b(the)h(k)n(ernel)e(and)i(\014nal)f(core)f(build)i(are)e
(normally)g(done)i(using)e(shell)i(script)f(driv)n(ers:)523
3088 y Fj(do-w)m(orldbuild*)40 b Fk(Builds)28 b(a)g(k)n(ernel)f(core)g
(for)h(the)h(curren)n(t)e(mac)n(hine.)39 b(The)28 b(v)n(ersion)e(to)731
3188 y(build)37 b(is)g(indicated)h(b)n(y)f(an)f(optional)h(argumen)n
(t,)h(whic)n(h)f(defaults)h(to)f(\\alpha".)731 3287 y(The)25
b Fd(kernel.core)c Fk(\014le)k(is)g(written)h(either)f(in)h(the)f
Fd(lisp/)f Fk(directory)g(in)h(the)h(build)731 3387 y(area,)20
b(or)g(in)h Fd(/usr/tmp/)p Fk(.)31 b(The)20 b(directory)g(whic)n(h)g
(already)f(con)n(tains)h Fd(kernel.core)731 3486 y Fk(is)33
b(c)n(hosen.)54 b(Y)-7 b(ou)33 b(can)g(create)g(a)g(dumm)n(y)h(v)n
(ersion)e(with)i(e.g.)54 b(\\touc)n(h")32 b(to)i(select)731
3586 y(the)28 b(initial)f(build)i(lo)r(cation.)523 3752
y Fj(mk-lisp*)39 b Fk(Builds)29 b(a)g(full)h(core,)f(with)h
(conditional)e(loading)h(of)g(subsystems.)41 b(The)30
b(v)n(er-)731 3852 y(sion)40 b(is)g(the)h(\014rst)f(argumen)n(t,)j
(whic)n(h)e(defaults)g(to)f(\\alpha".)74 b(An)n(y)41
b(additional)731 3951 y(argumen)n(ts)25 b(are)h(added)h(to)g(the)h
Fd(*features*)23 b Fk(list,)k(whic)n(h)g(con)n(trols)f(system)g(load-)
731 4051 y(ing)34 b(\(among)f(other)h(things.\))57 b(The)35
b Fd(lisp.core)c Fk(\014le)j(is)g(written)h(in)f(the)h(curren)n(t)731
4151 y(w)n(orking)25 b(directory)-7 b(.)648 4317 y(These)32
b(scripts)h(load)g(Lisp)g(command)g(\014les.)53 b(When)34
b Fd(tools/worldbuild)o(.l)o(isp)26 b Fk(is)523 4416
y(loaded,)h(it)g(calls)g(genesis)f(with)i(the)f(correct)f(argumen)n(ts)
g(to)h(build)h(a)e(k)n(ernel)h(core.)35 b(Simi-)523 4516
y(larly)-7 b(,)20 b Fd(worldload.lisp)14 b Fk(builds)20
b(a)g(full)g(core.)33 b(Adding)20 b(certain)f(sym)n(b)r(ols)g(to)g
Fd(*features*)523 4616 y Fk(b)r(efore)k(loading)g(w)n(orldload.lisp)e
(suppresses)h(loading)h(of)g(di\013eren)n(t)h(parts)e(of)i(the)g
(system.)523 4715 y(These)j(sym)n(b)r(ols)g(are:)523
4881 y Fj(:no-compiler)39 b Fk(don't)27 b(load)g(the)h(compiler.)1914
5147 y(12)p eop
%%Page: 13 14
13 13 bop 523 614 a Fj(:no-clx)41 b Fk(don't)28 b(load)f(CLX.)523
780 y Fj(:no-hemlo)s(c)m(k)39 b Fk(don't)28 b(load)f(hemlo)r(c)n(k.)523
946 y Fj(:no-p)s(cl)40 b Fk(don't)28 b(load)f(PCL.)523
1112 y Fj(:run)m(time)40 b Fk(build)28 b(a)f(run)n(time)h(co)r(de,)f
(implies)h(all)f(of)h(the)g(ab)r(o)n(v)n(e,)e(and)i(then)g(some.)648
1279 y(Note:)33 b(if)22 b(y)n(ou)f(don't)g(load)g(the)g(compiler,)h(y)n
(ou)f(can't)g(\(successfully\))h(load)e(the)i(prett)n(y-)523
1378 y(prin)n(ter)29 b(or)g(p)r(cl.)44 b(And)31 b(if)f(y)n(ou)f
(compiled)h(hemlo)r(c)n(k)g(with)g(CLX)g(loaded,)g(y)n(ou)f(can't)h
(load)523 1478 y(it)e(without)g(CLX)g(also)e(b)r(eing)i(loaded.)1914
5147 y(13)p eop
%%Page: 14 15
14 14 bop 1660 2029 a Fg(P)-5 b(art)65 b(I)5 b(I)794
2444 y Fi(Compiler)76 b(Organization)1914 5147 y Fk(14)p
eop
%%Page: 15 16
15 15 bop 523 1237 a Fg(Chapter)65 b(3)523 1652 y Fi(Compiler)76
b(Ov)-6 b(erview)523 2084 y Fk(The)31 b(structure)g(of)g(the)g
(compiler)g(ma)n(y)f(b)r(e)i(broadly)e(c)n(haracterized)f(b)n(y)i
(describing)f(the)523 2183 y(compilation)c(phases)f(and)h(the)h(data)e
(structures)h(that)g(they)g(manipulate.)37 b(The)26 b(steps)g(in)523
2283 y(the)d(compilation)f(are)g(called)g(phases)g(rather)f(than)i
(passes)e(since)h(they)h(don't)g(necessarily)523 2383
y(in)n(v)n(olv)n(e)h(a)h(full)i(pass)d(o)n(v)n(er)g(the)i(co)r(de.)36
b(The)26 b(data)f(structure)g(used)h(to)f(represen)n(t)g(the)h(co)r(de)
523 2482 y(at)i(some)f(p)r(oin)n(t)g(is)h(called)f(an)g
Fc(interme)l(diate)k(r)l(epr)l(esentation.)648 2582 y
Fk(Tw)n(o)26 b(ma)5 b(jor)27 b(in)n(termediate)g(represen)n(tations)f
(are)g(used)i(in)g(the)g(compiler:)648 2721 y Fe(\017)41
b Fk(The)29 b(Implicit)g(Con)n(tin)n(uation)f(Represen)n(tation)g
(\(ICR\))i(represen)n(ts)d(the)i(lisp-lev)n(el)731 2821
y(seman)n(tics)e(of)h(the)h(source)e(co)r(de)h(during)g(the)g(initial)h
(phases.)38 b(P)n(artial)26 b(ev)-5 b(aluation)731 2920
y(and)36 b(seman)n(tic)h(analysis)f(are)g(done)g(on)h(this)g(represen)n
(tation.)64 b(ICR)37 b(is)g(roughly)731 3020 y(equiv)-5
b(alen)n(t)23 b(to)h(a)f(subset)h(of)f(Common)g(Lisp,)i(but)f(is)g
(represen)n(ted)e(as)h(a)h(\015o)n(w-graph)731 3120 y(rather)31
b(than)h(a)g(syn)n(tax)f(tree.)50 b(Phases)31 b(whic)n(h)h(only)g
(manipulate)g(ICR)g(comprise)731 3219 y(the)d("fron)n(t)g(end".)41
b(It)30 b(w)n(ould)f(b)r(e)h(p)r(ossible)f(to)g(use)g(a)g(di\013eren)n
(t)g(bac)n(k)g(end)g(suc)n(h)g(as)731 3319 y(one)e(that)h(directly)f
(generated)f(co)r(de)i(for)f(a)g(stac)n(k)g(mac)n(hine.)648
3471 y Fe(\017)41 b Fk(The)30 b(Virtual)g(Mac)n(hine)g(Represen)n
(tation)f(\(VMR\))i(represen)n(ts)e(the)i(implemen)n(ta-)731
3571 y(tion)h(of)h(the)g(source)f(co)r(de)h(on)f(a)g(virtual)h(mac)n
(hine.)52 b(The)32 b(virtual)h(mac)n(hine)f(ma)n(y)731
3671 y(v)-5 b(ary)27 b(dep)r(ending)h(on)g(the)h(the)f(target)f(hardw)n
(are,)g(but)h(VMR)h(is)f(su\016cien)n(tly)g(st)n(yl-)731
3770 y(ized)f(that)h(most)g(of)f(the)h(phases)f(whic)n(h)g(manipulate)h
(it)g(are)f(p)r(ortable.)648 3909 y(Eac)n(h)20 b(phase)i(is)f
(brie\015y)h(describ)r(ed)f(here.)35 b(The)22 b(phases)f(from)g(\\lo)r
(cal)g(call)g(analysis")f(to)523 4009 y(\\constrain)n(t)k(propagation")
f(all)j(in)n(teract;)g(for)f(maxim)n(um)g(optimization,)h(they)g(are)f
(gen-)523 4109 y(erally)c(rep)r(eated)h(un)n(til)h(nothing)f(new)h(is)f
(disco)n(v)n(ered.)33 b(The)23 b(source)e(\014les)h(whic)n(h)g
(primarily)523 4208 y(con)n(tain)27 b(eac)n(h)g(phase)g(are)f(listed)i
(after)g(\\Files:)36 b(".)523 4347 y Fj(ICR)c(con)m(v)m(ersion)41
b Fk(Con)n(v)n(ert)20 b(the)h(source)e(in)n(to)i(ICR,)f(doing)h(macro)r
(expansion)d(and)j(sim-)731 4447 y(ple)29 b(source-to-source)d
(transformation.)40 b(All)30 b(names)f(are)f(resolv)n(ed)g(at)h(this)h
(time,)731 4546 y(so)25 b(w)n(e)h(don't)g(ha)n(v)n(e)f(to)h(w)n(orry)f
(ab)r(out)h(name)g(con\015icts)g(later)f(on.)36 b(Files:)h
Fd(ir1tran,)731 4646 y(srctran,)j(typetran)523 4799 y
Fj(Lo)s(cal)32 b(call)g(analysis)41 b Fk(Find)e(calls)e(to)h(lo)r(cal)g
(functions)g(and)g(con)n(v)n(ert)f(them)i(to)f(lo)r(cal)731
4898 y(calls)c(to)i(the)g(correct)e(en)n(try)h(p)r(oin)n(t,)i(doing)e
(k)n(eyw)n(ord)f(parsing,)i(etc.)60 b(Recognize)1914
5147 y(15)p eop
%%Page: 16 17
16 16 bop 731 614 a Fk(once-called)27 b(functions)i(as)e(lets.)40
b(Create)28 b Fc(external)i(entry)g(p)l(oints)f Fk(for)f(en)n(try-p)r
(oin)n(t)731 714 y(functions.)37 b(Files:)g Fd(locall)523
880 y Fj(Find)32 b(comp)s(onen)m(ts)39 b Fk(Find)33 b(\015o)n(w)f
(graph)f(comp)r(onen)n(ts)h(and)h(compute)f(depth-\014rst)h(or-)731
980 y(dering.)i(Separate)26 b(top-lev)n(el)f(co)r(de)h(from)g(run-time)
g(co)r(de,)h(and)f(determine)g(whic)n(h)731 1079 y(comp)r(onen)n(ts)h
(are)f(top-lev)n(el)h(comp)r(onen)n(ts.)36 b(Files:)h
Fd(dfo)523 1245 y Fj(ICR)32 b(optimize)39 b Fk(A)34 b(grab-bag)d(of)j
(all)g(the)g(non-\015o)n(w)e(ICR)i(optimizations.)55
b(F)-7 b(old)34 b(con-)731 1345 y(stan)n(t)h(functions,)j(propagate)c
(t)n(yp)r(es)i(and)g(eliminate)g(co)r(de)g(that)g(computes)f(un-)731
1445 y(used)28 b(v)-5 b(alues.)39 b(Sp)r(ecial-case)27
b(calls)g(to)h(some)g(kno)n(wn)g(global)f(functions)i(b)n(y)f(replac-)
731 1544 y(ing)i(them)g(with)h(a)f(computed)g(function.)45
b(Merge)30 b(blo)r(c)n(ks)f(and)h(eliminate)g(IF-IFs.)731
1644 y(Substitute)f(let)f(v)-5 b(ariables.)37 b(Files:)h
Fd(ir1opt,)i(ir1tran,)h(typetran,)f(seqtran,)731 1743
y(vm/vm-tran)523 1910 y Fj(T)m(yp)s(e)32 b(constrain)m(t)h(propagation)
42 b Fk(Use)36 b(global)g(\015o)n(w)g(analysis)g(to)g(propagate)f
(infor-)731 2009 y(mation)e(ab)r(out)h(lexical)f(v)-5
b(ariable)33 b(t)n(yp)r(es.)56 b(Eliminate)34 b(unnecessary)e(t)n(yp)r
(e)j(c)n(hec)n(ks)731 2109 y(and)27 b(tests.)37 b(Files:)g
Fd(constraint)523 2275 y Fj(T)m(yp)s(e)32 b(c)m(hec)m(k)i(generation)41
b Fk(Emit)20 b(explicit)h(ICR)f(co)r(de)g(for)g(an)n(y)g(necessary)e(t)
n(yp)r(e)j(c)n(hec)n(ks)731 2374 y(that)32 b(are)f(to)r(o)h(complex)g
(to)h(b)r(e)f(easily)g(generated)f(on)h(the)h(\015y)f(b)n(y)g(the)h
(bac)n(k)e(end.)731 2474 y(Files:)37 b Fd(checkgen)523
2640 y Fj(Ev)m(en)m(t)c(driv)m(en)f(op)s(erations)40
b Fk(V)-7 b(arious)18 b(parts)f(of)i(ICR)f(are)f(incremen)n(tally)h
(recomputed,)731 2740 y(either)27 b(eagerly)f(on)h(mo)r(di\014cation)g
(of)g(the)h(ICR,)g(or)e(lazily)-7 b(,)27 b(when)h(the)g(relev)-5
b(an)n(t)26 b(in-)731 2839 y(formation)g(is)i(needed.)830
3005 y Fe(\017)41 b Fk(Chec)n(k)30 b(that)h(t)n(yp)r(e)g(assertions)e
(are)h(satis\014ed,)h(marking)e(places)h(where)g(t)n(yp)r(e)913
3105 y(c)n(hec)n(ks)d(need)g(to)h(b)r(e)g(done.)830 3238
y Fe(\017)41 b Fk(Lo)r(cate)27 b(let)h(calls.)830 3371
y Fe(\017)41 b Fk(Delete)28 b(functions)g(and)g(v)-5
b(ariables)26 b(with)i(no)f(references)731 3537 y(Files:)37
b Fd(ir1util)p Fk(,)24 b Fd(ir1opt)523 3703 y Fj(ICR)32
b(\014nalize)41 b Fk(This)33 b(phase)f(is)h(run)g(after)g(all)f(comp)r
(onen)n(ts)h(ha)n(v)n(e)f(b)r(een)h(compiled.)53 b(It)731
3802 y(scans)35 b(the)j(global)d(v)-5 b(ariable)36 b(references,)i(lo)r
(oking)d(for)i(references)e(to)i(unde\014ned)731 3902
y(v)-5 b(ariables)26 b(and)h(incompatible)h(function)g
(rede\014nitions.)36 b(Files:)h Fd(ir1final)p Fk(,)25
b Fd(main)p Fk(.)523 4068 y Fj(En)m(vironmen)m(t)31 b(analysis)41
b Fk(Determine)24 b(whic)n(h)f(distinct)i(en)n(vironmen)n(ts)d(need)i
(to)f(b)r(e)h(al-)731 4168 y(lo)r(cated,)i(and)h(what)g(con)n(text)f
(needed)h(to)g(b)r(e)g(closed)g(o)n(v)n(er)e(b)n(y)h(eac)n(h)g(en)n
(vironmen)n(t.)731 4267 y(W)-7 b(e)27 b(detect)g(non-lo)r(cal)f(exits)h
(and)f(set)h(closure)f(v)-5 b(ariables.)35 b(W)-7 b(e)28
b(also)d(emit)j(clean)n(up)731 4367 y(co)r(de)18 b(as)g(funn)n(y)h
(function)g(calls.)33 b(This)18 b(is)h(the)g(last)f(pure)g(ICR)h(pass.)
33 b(Files:)f Fd(envanal)523 4533 y Fj(Global)f(TN)h(allo)s(cation)f
(\(GTN\))42 b Fk(Iterate)34 b(o)n(v)n(er)f(all)h(de\014ned)h
(functions,)i(determin-)731 4633 y(ing)27 b(calling)g(con)n(v)n(en)n
(tions)f(and)h(assigning)f(TNs)i(to)f(lo)r(cal)g(v)-5
b(ariables.)36 b(Files:)h Fd(gtn)1914 5147 y Fk(16)p
eop
%%Page: 17 18
17 17 bop 523 614 a Fj(Lo)s(cal)32 b(TN)g(allo)s(cation)f(\(L)-8
b(TN\))42 b Fk(Use)33 b(t)n(yp)r(e)g(and)g(p)r(olicy)f(information)h
(to)f(determine)731 714 y(whic)n(h)c(VMR)g(translation)f(to)h(use)g
(for)g(kno)n(wn)f(functions,)i(and)f(then)g(create)f(TNs)731
814 y(for)h(expression)f(ev)-5 b(aluation)29 b(temp)r(oraries.)39
b(W)-7 b(e)29 b(also)f(accum)n(ulate)g(some)g(random)731
913 y(information)f(needed)g(b)n(y)h(VMR)g(con)n(v)n(ersion.)34
b(Files:)j Fd(ltn)523 1079 y Fj(Con)m(trol)32 b(analysis)41
b Fk(Linearize)18 b(the)i(\015o)n(w)f(graph)g(in)h(a)f(w)n(a)n(y)g
(that)h(minimizes)g(the)g(n)n(um)n(b)r(er)731 1179 y(of)k(branc)n(hes.)
34 b(The)24 b(blo)r(c)n(k-lev)n(el)e(structure)i(of)g(the)g(\015o)n(w)f
(graph)g(is)h(basically)f(frozen)731 1279 y(at)k(this)h(p)r(oin)n(t.)37
b(Files:)g Fd(control)523 1445 y Fj(Stac)m(k)d(analysis)41
b Fk(Main)n(tain)32 b(stac)n(k)f(discipline)i(for)f(unkno)n(wn-v)-5
b(alues)31 b(con)n(tin)n(uation)g(in)731 1544 y(the)d(presence)e(of)i
(lo)r(cal)f(exits.)37 b(Files:)g Fd(stack)523 1710 y
Fj(En)m(try)c(analysis)41 b Fk(Collect)22 b(some)g(bac)n(k-end)f
(information)h(for)f(eac)n(h)h(externally)f(callable)731
1810 y(function.)523 1976 y Fj(VMR)31 b(con)m(v)m(ersion)42
b Fk(Con)n(v)n(ert)33 b(ICR)i(in)n(to)f(VMR)h(b)n(y)g(translating)e(no)
r(des)h(in)n(to)g(V)n(OPs.)731 2076 y(Emit)27 b(t)n(yp)r(e)h(c)n(hec)n
(ks.)36 b(Files:)h Fd(ir2tran,)j(vmdef)523 2242 y Fj(Cop)m(y)32
b(propagation)42 b Fk(Use)26 b(\015o)n(w)g(analysis)e(to)i(eliminate)h
(unnecessary)d(cop)n(ying)h(of)h(TN)731 2341 y(v)-5 b(alues.)36
b(Files:)h Fd(copyprop)523 2507 y Fj(Represen)m(tation)31
b(selection)40 b Fk(Lo)r(ok)f(at)g(all)g(references)f(to)i(eac)n(h)e
(TN)i(to)f(determine)731 2607 y(whic)n(h)g(represen)n(tation)e(has)i
(the)g(lo)n(w)n(est)g(cost.)71 b(Emit)39 b(appropriate)e(mo)n(v)n(e)i
(and)731 2707 y(co)r(erce)26 b(V)n(OPS)h(for)g(that)h(represen)n
(tation.)523 2873 y Fj(Lifetime)i(analysis)41 b Fk(Do)21
b(\015o)n(w)g(analysis)g(to)g(\014nd)h(the)g(set)g(of)g(TNs)f(whose)g
(lifetimes)h(o)n(v)n(er-)731 2972 y(lap)j(with)g(the)h(lifetimes)g(of)f
(eac)n(h)f(TN)i(b)r(eing)f(pac)n(k)n(ed.)35 b(Annotate)25
b(call)g(V)n(OPs)f(with)731 3072 y(the)k(TNs)f(that)h(need)g(to)f(b)r
(e)h(sa)n(v)n(ed.)36 b(Files:)h Fd(life)523 3238 y Fj(P)m(ac)m(k)44
b Fk(Find)19 b(a)f(legal)f(register)g(allo)r(cation,)i(attempting)g(to)
f(minimize)h(unnecessary)e(mo)n(v)n(es.)731 3337 y(Files:)37
b Fd(pack)523 3504 y Fj(Co)s(de)31 b(generation)41 b
Fk(Call)h(the)h(V)n(OP)e(generators)f(to)j(emit)g(assem)n(bly)e(co)r
(de.)81 b(Files:)731 3603 y Fd(codegen)523 3769 y Fj(Pip)s(eline)30
b(reorganization)42 b Fk(On)29 b(some)h(mac)n(hines,)g(mo)n(v)n(e)f
(memory)g(references)g(bac)n(k-)731 3869 y(w)n(ard)20
b(in)j(the)f(co)r(de)g(so)f(that)h(they)h(can)e(o)n(v)n(erlap)f(with)j
(computation.)34 b(On)22 b(mac)n(hines)731 3968 y(with)33
b(dela)n(y)n(ed)e(branc)n(h)h(instructions,)h(lo)r(cate)f(instructions)
g(that)h(can)f(b)r(e)h(mo)n(v)n(ed)731 4068 y(in)n(to)27
b(dela)n(y)g(slots.)36 b(Files:)h Fd(assem-opt)523 4234
y Fj(Assem)m(bly)j Fk(Resolv)n(e)27 b(branc)n(hes)f(and)i(con)n(v)n
(ert)f(in)h(to)g(ob)5 b(ject)28 b(co)r(de)g(and)g(\014xup)g(informa-)
731 4334 y(tion.)37 b(Files:)f Fd(assembler)523 4500
y Fj(Dumping)k Fk(Con)n(v)n(ert)33 b(the)i(compiled)g(co)r(de)g(in)n
(to)f(an)h(ob)5 b(ject)34 b(\014le)h(or)f(in-core)g(function.)731
4599 y(Files:)j Fd(debug-dump)p Fk(,)23 b Fd(dump)p Fk(,)j
Fd(vm/core)1914 5147 y Fk(17)p eop
%%Page: 18 19
18 18 bop 523 1237 a Fg(Chapter)65 b(4)523 1652 y Fi(The)77
b(Implicit)f(Con)-6 b(tin)g(uation)523 1901 y(Represen)g(tation)523
2333 y Fk(The)22 b(set)h(of)f(sp)r(ecial)g(forms)g(recognized)e(is)j
(exactly)e(that)i(sp)r(eci\014ed)f(in)h(the)g(Common)e(Lisp)523
2433 y(man)n(ual.)36 b(Ev)n(erything)26 b(that)i(is)g(describ)r(ed)f
(as)g(a)g(macro)f(in)i(CL)-7 b(TL)28 b(is)f(a)g(macro.)648
2532 y(Large)g(amoun)n(ts)h(of)h(syn)n(tactic)f(information)g(are)g
(thro)n(wn)g(a)n(w)n(a)n(y)f(b)n(y)h(the)i(con)n(v)n(ersion)523
2632 y(to)k(an)f(anon)n(ymous)f(\015o)n(w)h(graph)g(represen)n(tation.)
54 b(The)34 b(elimination)f(of)h(names)f(elimi-)523 2731
y(nates)26 b(the)h(need)f(to)g(represen)n(t)f(most)h(en)n(vironmen)n(t)
f(manipulation)i(sp)r(ecial)e(forms.)36 b(The)523 2831
y(explicit)28 b(represen)n(tation)f(of)h(con)n(trol)e(eliminates)i(the)
h(need)f(to)g(represen)n(t)f(BLOCK)g(and)523 2931 y(GO,)i(and)f(mak)n
(es)g(\015o)n(w)g(analysis)g(easy)-7 b(.)40 b(The)29
b(full)g(Common)f(Lisp)h(LAMBD)n(A)h(is)e(imple-)523
3030 y(men)n(ted)g(with)g(a)f(simple)h(\014xed-arg)e(lam)n(b)r(da,)h
(whic)n(h)h(greatly)e(simpli\014es)i(later)f(co)r(de.)648
3130 y(The)39 b(elimination)f(of)h(syn)n(tactic)g(information)f
(eliminates)h(the)g(need)g(for)g(most)f(of)523 3230 y(the)d("b)r(eta)g
(transformation")d(optimizations)j(in)g(Rabbit.)59 b(There)34
b(are)g(no)g(progns,)i(no)523 3329 y(tagb)r(o)r(dys)28
b(and)h(no)f(returns.)40 b(There)29 b(are)f(no)g("close)g(parens")f
(whic)n(h)i(get)f(in)i(the)f(w)n(a)n(y)e(of)523 3429
y(determining)h(whic)n(h)f(no)r(de)h(receiv)n(es)e(a)h(giv)n(en)g(v)-5
b(alue.)648 3528 y(In)27 b(ICR,)h(computation)f(is)h(represen)n(ted)e
(b)n(y)i(No)r(des.)36 b(These)28 b(are)e(the)i(no)r(de)g(t)n(yp)r(es:)
523 3694 y Fj(if)41 b Fk(Represen)n(ts)27 b(all)g(conditionals.)523
3861 y Fj(set)41 b Fk(Represen)n(ts)27 b(a)g Fd(setq)p
Fk(.)523 4027 y Fj(ref)42 b Fk(Represen)n(ts)27 b(a)g(constan)n(t)g(or)
f(v)-5 b(ariable)27 b(reference.)523 4193 y Fj(com)m(bination)40
b Fk(Represen)n(ts)27 b(a)g(normal)g(function)h(call.)523
4359 y Fj(MV-com)m(bination)40 b Fk(Represen)n(ts)19
b(a)g Fd(multiple-value-c)o(all)o Fk(.)28 b(This)20 b(is)g(used)g(to)f
(imple-)731 4458 y(men)n(t)g(all)g(m)n(ultiple)g(v)-5
b(alue)19 b(receiving)f(forms)h(except)g(for)g Fd(multiple-value-)o(pr)
o(og1)o Fk(,)731 4558 y(whic)n(h)27 b(is)h(implicit.)523
4724 y Fj(bind)41 b Fk(This)j(represen)n(ts)f(the)i(allo)r(cation)e
(and)h(initialization)g(of)h(the)f(v)-5 b(ariables)43
b(in)i(a)731 4824 y(lam)n(b)r(da.)1914 5147 y(18)p eop
%%Page: 19 20
19 19 bop 523 614 a Fj(return)42 b Fk(This)24 b(collects)f(the)h
(return)f(v)-5 b(alue)24 b(from)f(a)h(lam)n(b)r(da)f(and)g(represen)n
(ts)g(the)h(con)n(trol)731 714 y(transfer)i(on)i(return.)523
880 y Fj(en)m(try)43 b Fk(Marks)26 b(the)h(start)g(of)g(a)g(dynamic)g
(exten)n(t)h(that)f(can)g(ha)n(v)n(e)f(non-lo)r(cal)h(exits)g(to)g(it.)
731 980 y(Dynamic)g(state)h(can)f(b)r(e)h(sa)n(v)n(ed)e(at)i(this)f(p)r
(oin)n(t)h(for)f(restoration)f(on)h(re-en)n(try)-7 b(.)523
1146 y Fj(exit)41 b Fk(Marks)32 b(a)g(p)r(oten)n(tially)g(non-lo)r(cal)
f(exit.)52 b(This)33 b(no)r(de)f(is)h(in)n(terp)r(osed)f(b)r(et)n(w)n
(een)g(the)731 1245 y(non-lo)r(cal)18 b(uses)h(of)g(a)g(con)n(tin)n
(uation)f(and)h(the)h Fd(dest)e Fk(so)h(that)g(co)r(de)g(to)h(do)f(a)g
(non-lo)r(cal)731 1345 y(exit)27 b(can)h(b)r(e)g(inserted)f(if)h
(necessary)-7 b(.)648 1511 y(Some)37 b(slots)f(are)g(shared)h(b)r(et)n
(w)n(een)g(all)g(no)r(de)g(t)n(yp)r(es)g(\(via)g(defstruct)g
(inheritance.\))523 1611 y(This)h(information)g(held)h(in)g(common)f(b)
r(et)n(w)n(een)g(all)g(no)r(des)h(often)f(mak)n(es)g(it)h(p)r(ossible)
523 1710 y(to)31 b(a)n(v)n(oid)g(sp)r(ecial-casing)e(no)r(des)j(on)f
(the)h(basis)f(of)g(t)n(yp)r(e.)49 b(This)32 b(shared)f(information)f
(is)523 1810 y(primarily)19 b(concerned)g(with)h(the)h(order)d(of)i(ev)
-5 b(aluation)19 b(and)h(destinations)g(and)f(prop)r(erties)523
1910 y(of)36 b(results.)60 b(This)36 b(con)n(trol)e(and)i(v)-5
b(alue)36 b(\015o)n(w)f(is)g(indicated)h(in)g(the)g(no)r(de)g
(primarily)f(b)n(y)523 2009 y(p)r(oin)n(ting)28 b(to)f(con)n(tin)n
(uations.)648 2109 y(The)35 b Fd(continuation)c Fk(structure)k
(represen)n(ts)e(information)i(su\016cien)n(tly)h(related)e(to)523
2208 y(the)25 b(normal)e(notion)h(of)h(a)f(con)n(tin)n(uation)f(that)i
(naming)f(it)g(so)g(seems)g(sensible.)36 b(Basically)-7
b(,)523 2308 y(a)33 b(con)n(tin)n(uation)f(represen)n(ts)f(a)i(place)f
(in)h(the)h(co)r(de,)g(or)e(alternativ)n(ely)f(the)j(destination)523
2408 y(of)29 b(an)g(expression)f(result)h(and)g(a)f(transfer)h(of)g
(con)n(trol.)40 b(These)29 b(t)n(w)n(o)f(notions)h(are)f(b)r(ound)523
2507 y(together)i(for)g(the)h(same)f(reasons)f(that)h(they)h(are)f
(related)g(in)h(the)g(standard)e(functional)523 2607
y(con)n(tin)n(uation)e(in)n(terpretation.)648 2707 y(A)38
b(con)n(tin)n(uation)f(ma)n(y)g(b)r(e)h(depriv)n(ed)g(of)g(either)f(or)
g(b)r(oth)i(of)f(its)g(v)-5 b(alue)38 b(or)f(con)n(trol)523
2806 y(signi\014cance.)e(If)23 b(the)h(v)-5 b(alue)23
b(of)h(a)f(con)n(tin)n(uation)f(is)h(un)n(used)g(due)h(to)f(ev)-5
b(aluation)23 b(for)g(e\013ect,)523 2906 y(then)i(the)g(con)n(tin)n
(uation)f(will)h(ha)n(v)n(e)e(a)h(n)n(ull)h Fd(dest)p
Fk(.)34 b(If)25 b(the)g Fd(next)e Fk(no)r(de)i(for)f(a)g(con)n(tin)n
(uation)523 3005 y(is)k(deleted)f(b)n(y)h(some)f(optimization,)g(then)h
Fd(next)e Fk(will)i(b)r(e)g Fd(:none)p Fk(.)648 3105
y([###)g(Con)n(tin)n(uation)f(kinds...])648 3205 y(The)e
Fd(block)e Fk(structure)h(represen)n(ts)g(a)h(basic)f(blo)r(c)n(k,)h
(in)h(the)f(the)g(normal)f(sense.)36 b(Con-)523 3304
y(trol)e(transfers)e(other)i(than)g(simple)g(sequencing)g(are)f
(represen)n(ted)g(b)n(y)h(information)f(in)523 3404 y(the)h(blo)r(c)n
(k)g(structure.)55 b(The)33 b(con)n(tin)n(uation)g(for)h(the)g(last)f
(no)r(de)h(in)g(a)g(blo)r(c)n(k)f(represen)n(ts)523 3504
y(only)27 b(the)h(destination)g(for)f(the)h(result.)648
3603 y(It)39 b(is)g(v)n(ery)f(di\016cult)i(to)e(reconstruct)g(an)n
(ything)h(resem)n(bling)f(the)h(original)f(source)523
3703 y(from)29 b(ICR,)g(so)g(w)n(e)f(record)g(the)h(original)f(source)g
(form)h(in)g(eac)n(h)f(no)r(de.)42 b(The)29 b(lo)r(cation)f(of)523
3802 y(the)33 b(source)e(form)g(within)i(the)g(input)g(is)f(also)f
(recorded,)h(allo)n(wing)f(for)g(in)n(terfaces)h(suc)n(h)523
3902 y(as)27 b("Edit)g(Compiler)g(W)-7 b(arnings".)36
b(See)27 b(section)g Fj(??)q Fk(.)648 4002 y(F)-7 b(orms)23
b(suc)n(h)h(as)g(sp)r(ecial-bind)g(and)h(catc)n(h)f(need)g(to)h(ha)n(v)
n(e)e(clean)n(up)h(co)r(de)g(executed)h(at)523 4101 y(all)d(exit)g(p)r
(oin)n(ts)g(from)g(the)g(form.)35 b(W)-7 b(e)22 b(represen)n(t)f(this)h
(constrain)n(t)f(in)h(ICR)h(b)n(y)e(annotating)523 4201
y(the)h(co)r(de)g(syn)n(tactically)f(within)i(the)f(form)f(with)i(a)e
(Clean)n(up)h(structure)f(describing)g(what)523 4301
y(needs)k(to)h(b)r(e)g(cleaned)f(up.)36 b(En)n(vironmen)n(t)24
b(analysis)g(determines)h(the)h(clean)n(up)f(lo)r(cations)523
4400 y(b)n(y)30 b(w)n(atc)n(hing)g(for)g(a)g(c)n(hange)f(in)i(the)g
(clean)n(up)f(b)r(et)n(w)n(een)g(t)n(w)n(o)g(con)n(tin)n(uations.)45
b(W)-7 b(e)30 b(can't)523 4500 y(emit)d(clean)n(up)g(co)r(de)f(during)g
(ICR)h(con)n(v)n(ersion,)e(since)i(w)n(e)f(don't)h(kno)n(w)f(whic)n(h)h
(exits)f(will)523 4599 y(b)r(e)i(lo)r(cal)f(un)n(til)h(after)f(ICR)h
(optimizations)f(are)g(done.)648 4699 y(Sp)r(ecial)d(binding)h(is)f
(represen)n(ted)g(b)n(y)g(a)g(call)h(to)f(the)h(funn)n(y)g(function)g
(The)g(\014rst)f(argu-)523 4799 y(men)n(t)19 b(is)g(the)g(Global-V)-7
b(ar)17 b(structure)h(for)g(the)h(v)-5 b(ariable)18 b(b)r(ound)h(and)f
(the)h(second)f(argumen)n(t)523 4898 y(is)28 b(the)g(v)-5
b(alue)27 b(to)g(bind)i(it)f(to.)1914 5147 y(19)p eop
%%Page: 20 21
20 20 bop 648 614 a Fk(Some)18 b(subprimitiv)n(es)g(are)g(implemen)n
(ted)i(using)e(a)g(macro-lik)n(e)f(mec)n(hanism)h(for)g(trans-)523
714 y(lating)27 b(con)n(v)n(ersion)e(are)i(represen)n(ted)f(b)n(y)i(a)f
(call)g(to)g(the)h(funn)n(y)g(function)g(corresp)r(onding)523
814 y(T)-7 b(emplate)28 b(structure)f(is)g(passed)g(as)g(the)h(\014rst)
f(argumen)n(t.)648 913 y(W)-7 b(e)41 b(c)n(hec)n(k)f(global)f(function)
j(calls)e(for)g(syn)n(tactic)h(legalit)n(y)e(with)j(resp)r(ect)e(to)h
(an)n(y)523 1013 y(de\014ned)d(function)g(t)n(yp)r(e)g(function.)68
b(If)38 b(the)g(call)f(is)g(illegal)g(or)g(w)n(e)g(are)g(unable)g(to)h
(tell)523 1112 y(if)33 b(it)h(is)e(legal)g(due)h(to)g(non-constan)n(t)e
(k)n(eyw)n(ords,)h(then)i(w)n(e)e(giv)n(e)g(a)g(w)n(arning)g(and)g
(mark)523 1212 y(the)39 b(function)f(reference)g(as)f(:notinline)i(to)f
(force)f(a)h(full)h(call)e(and)h(cause)g(subsequen)n(t)523
1312 y(phases)24 b(to)h(ignore)f(the)h(call.)35 b(If)26
b(the)f(call)g(is)f(legal)g(and)h(is)g(to)g(a)f(kno)n(wn)g(function,)i
(then)g(w)n(e)523 1411 y(annotate)g(the)i(Com)n(bination)e(no)r(de)h
(with)h(the)f(F)-7 b(unction-Info)27 b(structure)g(that)g(con)n(tains)
523 1511 y(the)h(compiler)f(information)g(for)g(the)h(function.)523
1786 y Ff(4.1)135 b(T)-11 b(ail)46 b(sets)523 1967 y
Fk(#|)27 b(Probably)e(w)n(an)n(t)h(to)g(ha)n(v)n(e)g(a)g(GTN-lik)n(e)g
(function)i(result)e(equiv)-5 b(alence)26 b(class)g(mec)n(h-)523
2067 y(anism)36 b(for)g(ICR)h(t)n(yp)r(e)f(inference.)63
b(This)37 b(w)n(ould)f(b)r(e)h(lik)n(e)f(the)h(return)f(v)-5
b(alue)36 b(propaga-)523 2167 y(tion)26 b(b)r(eing)g(done)f(b)n(y)h
(Propagate-F)-7 b(rom-Calls,)22 b(but)k(more)f(p)r(o)n(w)n(erful,)h
(less)f(hac)n(kish,)h(and)523 2266 y(kno)n(wn)33 b(to)g(terminate.)55
b(The)33 b(ICR)h(equiv)-5 b(alence)33 b(classes)f(could)i(probably)e(b)
r(e)i(used)g(b)n(y)523 2366 y(GTN,)28 b(as)f(w)n(ell.)648
2466 y(What)41 b(w)n(e)g(do)f(is)h(ha)n(v)n(e)f(lo)r(cal)h(call)g
(analysis)e(eagerly)h(main)n(tain)g(the)i(equiv)-5 b(alence)523
2565 y(classes)32 b(of)i(functions)f(that)h(return)f(the)h(same)f(w)n
(a)n(y)f(b)n(y)h(annotating)g(functions)h(with)g(a)523
2665 y(T)-7 b(ail-Info)26 b(structure)g(shared)g(b)r(et)n(w)n(een)g
(all)g(functions)h(whose)f(v)-5 b(alue)26 b(could)h(b)r(e)g(the)f(v)-5
b(alue)523 2764 y(of)28 b(this)g(function.)38 b(W)-7
b(e)28 b(don't)g(require)f(that)h(the)g(calls)f(actually)g(b)r(e)h
(tail-recursiv)n(e,)e(only)523 2864 y(that)32 b(the)h(call)f(deliv)n
(er)f(its)h(v)-5 b(alue)32 b(to)g(the)h(result)e(con)n(tin)n(uation.)50
b([###)33 b(Actually)f(no)n(w)523 2964 y(done)h(b)n(y)h
(ICR-OPTIMIZE-RETURN,)e(whic)n(h)h(is)h(curren)n(tly)e(making)h(ICR)h
(optimize)523 3063 y(mandatory)-7 b(.])648 3163 y(W)g(e)33
b(can)g(then)h(use)f(the)g(T)-7 b(ail-Set)33 b(during)g(ICR)g(t)n(yp)r
(e)g(inference.)54 b(It)33 b(w)n(ould)g(ha)n(v)n(e)f(a)523
3263 y(t)n(yp)r(e)26 b(that)g(is)f(the)h(union)f(across)f(all)h(equiv)
-5 b(alen)n(t)25 b(functions)h(of)g(the)g(t)n(yp)r(es)f(of)h(all)f(the)
h(uses)523 3362 y(other)k(than)h(in)g(lo)r(cal)f(calls.)45
b(This)31 b(t)n(yp)r(e)g(w)n(ould)f(b)r(e)h(recomputed)f(during)h
(optimization)523 3462 y(of)f(return)f(no)r(des.)44 b(When)30
b(the)h(t)n(yp)r(e)f(c)n(hanges,)f(w)n(e)g(w)n(ould)h(propagate)e(it)i
(to)g(all)f(calls)g(to)523 3561 y(an)n(y)f(of)g(the)h(equiv)-5
b(alen)n(t)28 b(functions.)39 b(Ho)n(w)28 b(do)g(w)n(e)g(kno)n(w)f
(when)i(and)f(ho)n(w)g(to)g(recompute)523 3661 y(the)35
b(t)n(yp)r(e)g(for)f(a)g(tail-set?)58 b(Recomputation)34
b(is)h(driv)n(en)f(b)n(y)g(t)n(yp)r(e)h(propagation)e(on)h(the)523
3761 y(result)27 b(con)n(tin)n(uation.)648 3860 y(This)33
b(is)h(really)e(sp)r(ecial-casing)g(of)i(RETURN)g(no)r(des.)54
b(The)34 b(return)f(no)r(de)h(has)f(the)523 3960 y(t)n(yp)r(e)j(whic)n
(h)f(is)h(the)g(union)f(of)h(all)f(the)h(non-call)f(uses)g(of)g(the)h
(result.)61 b(The)35 b(tail-set)g(is)523 4060 y(found)28
b(though)g(the)h(lam)n(b)r(da.)38 b(W)-7 b(e)28 b(can)g(then)g
(recompute)g(the)g(o)n(v)n(erall)e(union)i(b)n(y)g(taking)523
4159 y(the)g(union)g(of)f(the)h(t)n(yp)r(e)g(p)r(er)f(return)h(no)r
(de,)f(rather)g(than)h(p)r(er-use.)648 4259 y(Ho)n(w)23
b(do)g(result)h(t)n(yp)r(e)f(assertions)f(w)n(ork?)35
b(W)-7 b(e)24 b(can't)f(in)n(tersect)g(the)h(assertions)e(across)523
4358 y(all)30 b(functions)h(in)g(the)g(equiv)-5 b(alence)30
b(class,)h(since)f(some)g(of)g(the)h(call)g(com)n(binations)e(ma)n(y)
523 4458 y(not)i(happ)r(en)g(\(or)f(ev)n(en)h(b)r(e)g(p)r(ossible\).)47
b(W)-7 b(e)31 b(can)g(in)n(tersect)f(the)h(assertion)f(of)g(the)i
(result)523 4558 y(with)c(the)g(deriv)n(ed)f(t)n(yp)r(es)g(for)h
(non-call)e(uses.)648 4657 y(When)35 b(w)n(e)g(do)g(a)g(tail)g(call,)i
(w)n(e)e(ob)n(viously)e(can't)i(c)n(hec)n(k)g(that)g(the)h(returned)e
(v)-5 b(alue)523 4757 y(matc)n(hes)26 b(our)f(assertion.)35
b(Although)27 b(in)f(principle,)h(w)n(e)f(w)n(ould)f(lik)n(e)h(to)g(b)r
(e)h(able)f(to)g(c)n(hec)n(k)523 4857 y(all)c(assertions,)g(to)g
(preserv)n(e)f(system)h(in)n(tegrit)n(y)-7 b(,)22 b(w)n(e)g(only)g
(need)h(to)f(c)n(hec)n(k)f(assertions)g(that)1914 5147
y(20)p eop
%%Page: 21 22
21 21 bop 523 614 a Fk(w)n(e)29 b(dep)r(end)h(on.)41
b(W)-7 b(e)30 b(can)f(a\013ord)f(to)h(lose)g(some)g(assertion)e
(information)i(as)g(long)f(as)h(w)n(e)523 714 y(en)n(tirely)e(lose)g
(it,)h(ignoring)e(it)i(for)f(t)n(yp)r(e)h(inference)f(as)g(w)n(ell)h
(as)f(for)g(t)n(yp)r(e)h(c)n(hec)n(king.)648 814 y(Things)21
b(will)i(w)n(ork)d(out,)j(since)f(the)h(caller)e(will)h(see)g(the)g
(tail-info)g(t)n(yp)r(e)g(as)g(the)g(deriv)n(ed)523 913
y(t)n(yp)r(e)28 b(for)f(the)h(call,)f(and)h(will)f(emit)i(a)e(t)n(yp)r
(e)h(c)n(hec)n(k)e(if)i(it)g(needs)g(a)f(stronger)f(result.)648
1013 y(A)g(remaining)f(question)h(is)g(whether)g(w)n(e)g(should)g(in)n
(tersect)g(the)g(assertion)f(with)i(p)r(er-)523 1112
y(RETURN)36 b(deriv)n(ed)g(t)n(yp)r(es)g(from)g(the)g(v)n(ery)f(b)r
(eginning)h(\(i.e.)63 b(b)r(efore)35 b(the)i(t)n(yp)r(e)f(c)n(hec)n(k)
523 1212 y(pass\).)43 b(I)30 b(think)h(the)f(answ)n(er)f(is)g(y)n(es.)
44 b(W)-7 b(e)30 b(dela)n(y)f(the)h(t)n(yp)r(e)h(c)n(hec)n(k)e(pass)g
(so)g(that)h(w)n(e)g(can)523 1312 y(get)38 b(our)f(b)r(est)h(guess)f
(for)g(the)h(deriv)n(ed)f(t)n(yp)r(e)h(b)r(efore)f(w)n(e)h(decide)g
(whether)f(a)h(c)n(hec)n(k)e(is)523 1411 y(necessary)-7
b(.)53 b(But)34 b(with)g(the)g(function)h(return)e(t)n(yp)r(e,)i(w)n(e)
f(aren't)f(committing)g(to)h(doing)523 1511 y(an)n(y)j(t)n(yp)r(e)h(c)n
(hec)n(k)f(when)h(w)n(e)f(in)n(tersect)g(with)h(the)g(t)n(yp)r(e)g
(assertion;)k(the)c(need)g(to)f(t)n(yp)r(e)523 1611 y(c)n(hec)n(k)e(is)
g(still)g(determined)h(in)g(the)f(t)n(yp)r(e)h(c)n(hec)n(k)e(pass)h(b)n
(y)g(examination)g(of)g(the)h(result)523 1710 y(con)n(tin)n(uation.)648
1810 y(What)29 b(is)g(the)g(relationship)f(b)r(et)n(w)n(een)h(the)g(p)r
(er-RETURN)g(t)n(yp)r(es)g(and)g(the)g(t)n(yp)r(es)g(in)523
1910 y(the)37 b(result)f(con)n(tin)n(uation?)63 b(The)36
b(assertion)f(is)i(exactly)f(the)g(Con)n(tin)n(uation-Asserted-)523
2009 y(T)n(yp)r(e)k(\(note)h(that)f(the)h(asserted)e(t)n(yp)r(e)i(of)f
(result)g(con)n(tin)n(uations)g(will)g(nev)n(er)g(c)n(hange)523
2109 y(after)d(ICR)g(con)n(v)n(ersion\).)64 b(The)37
b(p)r(er-RETURN)g(deriv)n(ed)g(t)n(yp)r(e)g(is)g(di\013eren)n(t)h(than)
f(the)523 2208 y(Con)n(tin)n(uation-Deriv)n(ed-T)n(yp)r(e,)29
b(since)i(it)g(is)f(in)n(tersected)g(with)i(the)f(asserted)e(t)n(yp)r
(e)i(ev)n(en)523 2308 y(b)r(efore)40 b(T)n(yp)r(e)g(Chec)n(k)g(runs.)75
b(Ignoring)39 b(the)h(Con)n(tin)n(uation-Deriv)n(ed-T)n(yp)r(e)f
(probably)523 2408 y(mak)n(es)22 b(life)i(simpler)f(an)n(yw)n(a)n(y)-7
b(,)23 b(since)g(this)h(breaks)e(the)h(p)r(oten)n(tial)h(circularit)n
(y)e(of)h(the)h(T)-7 b(ail-)523 2507 y(Info-T)n(yp)r(e)27
b(will)h(a\013ecting)f(the)h(Con)n(tin)n(uation-Deriv)n(ed-T)n(yp)r(e,)
e(whic)n(h)h(a\013ects...)648 2607 y(When)21 b(a)f(giv)n(en)g(return)g
(has)g(no)g(non-call)g(uses,)i(w)n(e)e(represen)n(t)g(this)g(b)n(y)h
(using)f(*empt)n(y-)523 2707 y(t)n(yp)r(e*.)36 b(This)26
b(consisten)n(t)g(with)h(the)f(in)n(terpretation)g(that)g(a)g(return)g
(t)n(yp)r(e)g(of)g(NIL)h(means)523 2806 y(the)h(function)g(can't)g
(return.)523 3081 y Ff(4.2)135 b(Hairy)46 b(function)f(represen)l
(tation)523 3263 y Fk(Non-\014xed-arg)22 b(functions)j(are)e(represen)n
(ted)h(using)g(Optional-Dispatc)n(h.)34 b(An)25 b(Optional-)523
3362 y(Dispatc)n(h)c(has)g(an)g(en)n(try-p)r(oin)n(t)f(function)i(for)f
(eac)n(h)f(legal)h(n)n(um)n(b)r(er)g(of)g(optionals,)h(and)f(one)523
3462 y(for)27 b(when)h(extra)f(args)f(are)h(presen)n(t.)37
b(Eac)n(h)26 b(en)n(try)i(p)r(oin)n(t)f(function)i(is)e(a)h(simple)g
(lam)n(b)r(da.)523 3561 y(The)34 b(en)n(try)f(p)r(oin)n(t)h(function)g
(for)f(an)h(optional)f(is)g(passed)g(the)h(argumen)n(ts)f(whic)n(h)g(w)
n(ere)523 3661 y(actually)24 b(supplied;)i(the)f(en)n(try)f(p)r(oin)n
(t)h(function)g(is)g(exp)r(ected)g(to)f(default)h(an)n(y)f(remaining)
523 3761 y(parameters)i(and)h(ev)-5 b(aluate)28 b(the)f(actual)h
(function)g(b)r(o)r(dy)-7 b(.)648 3860 y(If)32 b(no)f(supplied-p)h(arg)
e(is)i(presen)n(t,)g(then)h(w)n(e)e(can)g(do)h(this)g(fairly)f(easily)g
(b)n(y)g(ha)n(ving)523 3960 y(eac)n(h)d(en)n(try)h(p)r(oin)n(t)g
(supply)g(its)h(default)f(and)g(call)g(the)g(next)g(en)n(try)g(p)r(oin)
n(t,)h(with)f(the)h(last)523 4060 y(en)n(try)e(p)r(oin)n(t)h(con)n
(taining)f(the)i(b)r(o)r(dy)-7 b(.)41 b(If)29 b(there)g(are)f
(supplied-p)h(args,)e(then)j(en)n(try)e(p)r(oin)n(t)523
4159 y(function)j(is)f(replaced)g(with)g(a)g(function)h(that)g(calls)f
(the)g(original)f(en)n(try)h(function)h(with)523 4259
y(T's)25 b(inserted)g(at)g(the)h(p)r(osition)f(of)h(all)f(the)g
(supplied)h(args)e(with)i(supplied-p)f(parameters.)648
4358 y(W)-7 b(e)25 b(w)n(an)n(t)g(to)g(b)r(e)h(a)f(bit)h(clev)n(er)e
(ab)r(out)h(ho)n(w)g(w)n(e)g(handle)g(argumen)n(ts)f(declared)h(sp)r
(ecial)523 4458 y(when)37 b(doing)g(optional)f(defaulting,)k(or)d(w)n
(e)f(will)i(emit)g(really)e(gross)f(co)r(de)i(for)g(sp)r(ecial)523
4558 y(optionals.)55 b(If)35 b(w)n(e)e(b)r(ound)i(the)f(arg)f(sp)r
(ecially)g(o)n(v)n(er)g(the)h(en)n(tire)g(en)n(try-p)r(oin)n(t)f
(function,)523 4657 y(then)21 b(the)g(en)n(try)f(p)r(oin)n(t)h
(function)g(w)n(ould)f(b)r(e)h(caused)f(to)g(b)r(e)h(non-tail-recursiv)
n(e.)32 b(What)21 b(w)n(e)523 4757 y(can)28 b(do)h(is)f(only)h(bind)g
(the)g(v)-5 b(ariable)28 b(sp)r(ecially)g(around)g(the)h(ev)-5
b(aluation)28 b(of)h(the)g(default,)523 4857 y(and)h(then)g(read)f(the)
i(sp)r(ecial)e(and)h(store)f(the)h(\014nal)g(v)-5 b(alue)30
b(of)g(the)g(sp)r(ecial)g(in)n(to)f(a)h(lexical)1914
5147 y(21)p eop
%%Page: 22 23
22 22 bop 523 614 a Fk(v)-5 b(ariable)31 b(whic)n(h)h(w)n(e)f(then)i
(pass)e(as)g(the)h(argumen)n(t.)49 b(In)32 b(the)g(common)g(case)f
(where)g(the)523 714 y(default)23 b(is)g(a)g(constan)n(t,)g(w)n(e)f
(don't)h(ha)n(v)n(e)f(to)h(sp)r(ecial-bind)f(at)h(all,)h(since)e(the)i
(computation)523 814 y(of)k(the)g(default)g(is)f(not)h(a\013ected)f(b)n
(y)h(and)f(cannot)g(a\013ect)h(an)n(y)f(sp)r(ecial)g(bindings.)648
913 y(Keyw)n(ord)34 b(and)i(rest)g(args)f(are)g(b)r(oth)i(implemen)n
(ted)g(using)f(a)g(LEXPR-lik)n(e)f("more)523 1013 y(args")22
b(con)n(v)n(en)n(tion.)34 b(The)24 b(More-En)n(try)e(tak)n(es)h(t)n(w)n
(o)g(argumen)n(ts)f(in)i(addition)g(to)g(the)g(\014xed)523
1112 y(and)g(optional)f(argumen)n(ts:)34 b(the)24 b(argumen)n(t)f(con)n
(text)g(and)h(coun)n(t.)35 b(\(AR)n(G)25 b(<con)n(text>)f(<n>\))523
1212 y(accesses)h(the)h(N'th)h(additional)f(argumen)n(t.)35
b(Keyw)n(ord)24 b(args)h(are)g(implemen)n(ted)i(directly)523
1312 y(using)g(this)h(mec)n(hanism.)37 b(Rest)27 b(args)f(are)h
(created)g(b)n(y)g(calling)g(the)h(con)n(text)f(and)g(coun)n(t.)648
1411 y(The)e(More-En)n(try)e(parses)h(the)h(k)n(eyw)n(ord)f(argumen)n
(ts)f(and)i(passes)f(the)i(v)-5 b(alues)25 b(to)g(the)523
1511 y(main)35 b(function)g(as)f(p)r(ositional)g(argumen)n(ts.)57
b(If)35 b(a)f(k)n(eyw)n(ord)f(default)i(is)f(not)h(constan)n(t,)523
1611 y(then)25 b(w)n(e)f(pass)g(a)g(supplied-p)h(parameter)e(in)n(to)i
(the)g(main)f(en)n(try)g(and)h(let)g(it)g(w)n(orry)d(ab)r(out)523
1710 y(defaulting)g(the)g(argumen)n(t.)34 b(Since)22
b(the)g(main)g(en)n(try)f(accepts)g(k)n(eyw)n(ords)f(in)i(parsed)f
(form,)523 1810 y(w)n(e)30 b(can)h(parse)e(k)n(eyw)n(ords)g(at)h
(compile)h(time)g(for)f(calls)g(to)g(kno)n(wn)g(functions.)47
b(W)-7 b(e)31 b(k)n(eep)523 1910 y(around)g(the)g(original)f(parsed)h
(lam)n(b)r(da-list)g(and)g(related)g(information)g(so)g(that)g(p)r
(eople)523 2009 y(can)c(\014gure)g(out)h(ho)n(w)f(to)g(call)g(the)h
(main)g(en)n(try)-7 b(.)523 2284 y Ff(4.3)135 b(ICR)46
b(represen)l(tation)h(of)e(non-lo)t(cal)g(exits)523 2466
y Fk(All)36 b(exits)g(are)f(initially)h(represen)n(ted)e(b)n(y)i(EXIT)f
(no)r(des:)53 b(Ho)n(w)36 b(ab)r(out)f(an)h(Exit)f(no)r(de:)523
2565 y(\(defstruct)k(\(exit)g(\(:include)g(no)r(de\)\))g(v)-5
b(alue\))39 b(The)f(Exit)g(no)r(de)h(uses)f(the)g(con)n(tin)n(uation)
523 2665 y(that)c(is)f(to)g(receiv)n(e)f(the)i(thro)n(wn)f(V)-7
b(alue.)54 b(During)33 b(optimization,)i(if)f(w)n(e)f(disco)n(v)n(er)e
(that)523 2764 y(the)e(Con)n(t's)g(home-lam)n(b)r(da)f(is)h(the)g(same)
g(is)g(the)g(exit)g(no)r(de's,)h(then)f(w)n(e)g(can)g(delete)g(the)523
2864 y(Exit)e(no)r(de,)h(substituting)g(the)g(Con)n(t)f(for)h(all)f(of)
g(the)h(V)-7 b(alue's)28 b(uses.)648 2964 y(The)k(successor)e(blo)r(c)n
(k)h(of)h(an)f(EXIT)h(is)g(the)g(en)n(try)g(blo)r(c)n(k)f(in)h(the)g
(en)n(tered)g(en)n(viron-)523 3063 y(men)n(t.)47 b(So)30
b(w)n(e)h(use)f(the)i(Exit)e(no)r(de)h(to)g(mark)f(the)h(place)f(where)
g(exit)h(co)r(de)g(is)g(inserted.)523 3163 y(During)d(en)n(vironmen)n
(t)f(analysis,)f(w)n(e)i(need)g(only)f(insert)h(a)f(single)h(blo)r(c)n
(k)f(con)n(taining)g(the)523 3263 y(en)n(try)g(p)r(oin)n(t)h(stub.)648
3362 y(W)-7 b(e)23 b(ensure)g(that)g(all)g(Exits)f(that)i(aren't)e(for)
h(a)f(NLX)i(don't)f(ha)n(v)n(e)f(an)n(y)h(V)-7 b(alue,)24
b(so)e(that)523 3462 y(lo)r(cal)27 b(exits)h(nev)n(er)e(require)h(an)n
(y)f(v)-5 b(alue)28 b(massaging.)648 3561 y(The)20 b(En)n(try)f(no)r
(de)i(marks)e(the)h(b)r(eginning)h(of)f(a)g(blo)r(c)n(k)g(or)f(tagb)r
(o)r(dy:)33 b(\(defstruct)21 b(\(en)n(try)523 3661 y(\(:include)28
b(no)r(de\)\))h(\(con)n(tin)n(uations)d(nil)i(:t)n(yp)r(e)g(list\)\))
648 3761 y(It)j(con)n(tains)f(a)h(list)g(of)g(all)g(the)h(con)n(tin)n
(uations)e(that)h(the)g(b)r(o)r(dy)h(could)f(exit)g(to.)47
b(The)523 3860 y(En)n(try)22 b(no)r(de)g(is)h(used)f(as)g(a)g(mark)n
(er)f(for)h(the)h(the)g(place)f(to)h(snapshot)f(state,)h(including)g
(the)523 3960 y(con)n(trol)h(stac)n(k)g(p)r(oin)n(ter.)35
b(Eac)n(h)24 b(lam)n(b)r(da)h(has)g(a)f(list)h(of)g(its)h(En)n(tries)e
(so)g(that)h(en)n(vironmen)n(t)523 4060 y(analysis)i(can)i(\014gure)e
(out)i(whic)n(h)g(con)n(tin)n(uations)e(are)h(really)f(b)r(eing)i
(closed)f(o)n(v)n(er.)38 b(There)523 4159 y(is)29 b(no)g(reason)e(for)i
(optimization)g(to)g(delete)g(En)n(try)f(no)r(des,)i(since)f(they)g
(are)f(harmless)g(in)523 4259 y(the)g(degenerate)e(case:)36
b(w)n(e)28 b(just)g(emit)g(no)f(co)r(de)h(\(lik)n(e)f(a)g(no-v)-5
b(ar)27 b(let\).)648 4358 y(W)-7 b(e)30 b(represen)n(t)f(CA)-7
b(TCH)31 b(using)f(the)g(lexical)g(exit)g(mec)n(hanism.)45
b(W)-7 b(e)30 b(do)g(a)g(transfor-)523 4458 y(mation)d(lik)n(e)h(this:)
37 b(\(catc)n(h)27 b('fo)r(o)h(xxx\))f(==>)g(\(blo)r(c)n(k)g(#:fo)r(o)h
(\(\(xxx\)\))648 4558 y(is)23 b(an)h(ordinary)e(function)i(as)f(far)h
(as)f(ICR)h(is)g(concerned.)34 b(The)24 b(fact)g(that)g(the)g(catc)n
(her)523 4657 y(needs)32 b(to)f(b)r(e)h(cleaned)g(up)g(is)g(expressed)e
(b)n(y)i(the)g(Clean)n(up)f(slots)g(in)h(the)h(con)n(tin)n(uations)523
4757 y(in)28 b(the)g(b)r(o)r(dy)-7 b(.)37 b(fact)28 b(that)g(w)n(e)f
(don't)h(kno)n(w)f(what)g(v)-5 b(alues)27 b(will)h(b)r(e)g(thro)n(wn.)
1914 5147 y(22)p eop
%%Page: 23 24
23 23 bop 648 614 a Fk(as)29 b(the)h(curren)n(t)f(clean)n(up)h(when)g
(con)n(v)n(erting)e(the)i(b)r(o)r(dy)-7 b(.)44 b(In)30
b(realit)n(y)-7 b(,)30 b(the)g(lam)n(b)r(da)f(is)523
714 y(also)23 b(created)f(b)n(y)i(the)g(sp)r(ecial)f(sp)r(ecial)g(form)
g(lam)n(b)r(da)g(a)h(sp)r(ecial)f(:ESCAPE)f(kind)i(so)f(that)523
814 y(the)28 b(bac)n(k)f(end)h(kno)n(ws)e(not)i(to)f(generate)f(an)n(y)
h(co)r(de)h(for)f(it.)648 913 y(W)-7 b(e)40 b(use)h(a)f(similar)f(hac)n
(k)h(in)g(Un)n(wind-Protect)g(to)g(represen)n(t)f(the)i(fact)f(that)h
(the)523 1013 y(clean)n(up)31 b(forms)g(can)g(b)r(e)i(in)n(v)n(ok)n(ed)
d(at)h(arbitrarily)f(random)h(times.)49 b(\(un)n(wind-protect)31
b(p)523 1112 y(c\))36 b(==>)f(\(\015et)i(\(\(#:clean)n(up)f(\(\))g
(c\)\))g(\(blo)r(c)n(k)g(#:return)f(\(m)n(ultiple-v)-5
b(alue-bind)37 b(\(#:next)523 1212 y(#:start)27 b(#:coun)n(t\))h(\(blo)
r(c)n(k)g(#:un)n(wind)g(\(\(\(return-from)f(#:return)g(p\)\)\))i
(\(#:clean)n(up\))f(\()648 1312 y(W)-7 b(e)34 b(use)f(the)h(blo)r(c)n
(k)f(#:un)n(wind)i(to)e(represen)n(t)g(the)h(en)n(try)f(to)g(clean)n
(up)h(co)r(de)f(in)h(the)523 1411 y(case)28 b(where)g(w)n(e)g(are)f
(non-lo)r(cally)h(un)n(w)n(ound.)39 b(Calling)28 b(of)g(the)h(clean)n
(up)f(function)h(in)g(the)523 1511 y(drop-through)18
b(case)h(\(or)g(an)n(y)h(lo)r(cal)f(exit\))h(is)g(handled)g(b)n(y)g
(clean)n(up)f(generation.)33 b(W)-7 b(e)20 b(mak)n(e)523
1611 y(the)33 b(clean)n(up)g(a)f(function)i(so)e(that)i(clean)n(up)e
(generation)g(can)g(add)h(calls)f(at)h(lo)r(cal)f(exits)523
1710 y(from)22 b(the)g(protected)g(form.)34 b(#:next,)24
b(#:start)e(and)g(#:coun)n(t)g(are)f(state)h(used)g(in)g(the)g(case)523
1810 y(where)27 b(w)n(e)f(are)h(un)n(w)n(ound.)36 b(They)27
b(indicate)g(where)g(to)g(go)f(after)h(doing)f(the)i(clean)n(up)f(and)
523 1910 y(what)32 b(v)-5 b(alues)32 b(are)f(b)r(eing)h(thro)n(wn.)49
b(The)32 b(clean)n(up)g(encloses)f(only)h(the)g(protected)g(form.)523
2009 y(As)21 b(in)g(CA)-7 b(TCH,)22 b(the)f(escap)r(e)g(function)g(is)g
(sp)r(ecially)g(tagged)f(as)g(:ESCAPE.)g(The)h(clean)n(up)523
2109 y(function)28 b(is)g(tagged)f(as)g(:CLEANUP)h(to)f(inhibit)i(let)f
(con)n(v)n(ersion)e(\(since)i(references)e(are)523 2208
y(added)h(in)h(en)n(vironmen)n(t)f(analysis.\))648 2308
y(Notice)21 b(that)g(implemen)n(ting)g(these)g(forms)g(using)g
(closures)e(o)n(v)n(er)h(con)n(tin)n(uations)f(elim-)523
2408 y(inates)35 b(an)n(y)f(need)i(to)f(sp)r(ecial-case)f(ICR)h(\015o)n
(w)g(analysis.)58 b(Ob)n(viously)34 b(w)n(e)h(don't)g(really)523
2507 y(w)n(an)n(t)24 b(to)h(mak)n(e)f(heap-closures)e(here.)36
b(In)25 b(realit)n(y)f(these)g(functions)i(are)d(sp)r(ecial-cased)h(b)n
(y)523 2607 y(the)k(bac)n(k-end)f(according)e(to)j(their)f(KIND.)523
2881 y Ff(4.4)135 b(Blo)t(c)l(k)45 b(compilation)523
3063 y Fk(One)29 b(of)g(the)g(prop)r(erties)f(of)h(ICR)g(is)g(that)h
(supp)r(orts)e("blo)r(c)n(k)g(compilation")g(b)n(y)h(allo)n(wing)523
3163 y(arbitrarily)c(large)g(amoun)n(ts)h(of)h(co)r(de)f(to)h(b)r(e)g
(con)n(v)n(erted)e(at)i(once,)f(with)h(actual)f(compila-)523
3263 y(tion)i(of)f(the)h(co)r(de)g(b)r(eing)f(done)h(at)f(will.)648
3362 y(In)34 b(order)f(to)h(preserv)n(e)e(the)j(normal)e(seman)n(tics)g
(w)n(e)h(m)n(ust)h(recognize)d(that)j(pro)r(cla-)523
3462 y(mations)e(\(p)r(ossibly)g(implicit\))i(are)d(scop)r(ed.)54
b(A)34 b(pro)r(clamation)e(is)h(in)h(e\013ect)g(only)f(from)523
3561 y(the)28 b(time)h(of)f(app)r(earance)e(of)i(the)h(pro)r(clamation)
d(to)i(the)h(time)f(it)g(is)g(con)n(tradicted.)37 b(The)523
3661 y(curren)n(t)29 b(global)g(en)n(vironmen)n(t)g(at)h(the)h(end)f
(of)g(a)f(blo)r(c)n(k)h(is)g(not)g(necessarily)e(the)j(correct)523
3761 y(global)f(en)n(vironmen)n(t)g(for)g(compilation)h(of)g(all)f(the)
i(co)r(de)f(within)g(the)h(blo)r(c)n(k.)46 b(W)-7 b(e)32
b(solv)n(e)523 3860 y(this)22 b(problem)g(b)n(y)g(closing)e(o)n(v)n(er)
h(the)h(relev)-5 b(an)n(t)21 b(information)h(in)g(the)g(ICR)g(at)g(the)
h(time)f(it)g(is)523 3960 y(con)n(v)n(erted.)40 b(F)-7
b(or)29 b(example,)g(eac)n(h)f(functional)i(v)-5 b(ariable)28
b(reference)g(is)h(mark)n(ed)f(as)h(inline,)523 4060
y(notinline)k(or)g(don't)g(care.)52 b(Similarly)-7 b(,)34
b(eac)n(h)f(no)r(de)g(con)n(tains)f(a)g(structure)h(kno)n(wn)f(as)h(a)
523 4159 y(Co)r(okie)26 b(whic)n(h)g(con)n(tains)f(the)i(appropriate)e
(settings)h(of)g(the)h(compiler)f(p)r(olicy)g(switc)n(hes.)648
4259 y(W)-7 b(e)39 b(actually)g(con)n(v)n(ert)f(eac)n(h)g(form)h(in)h
(the)f(\014le)h(separately)-7 b(,)41 b(creating)d(a)h(separate)523
4358 y("initial)34 b(comp)r(onen)n(t")f(for)g(eac)n(h)h(one.)55
b(Later)33 b(on,)j(these)d(comp)r(onen)n(ts)h(are)f(merged)g(as)523
4458 y(needed.)j(The)26 b(main)g(reason)d(for)j(doing)e(this)i(is)g(to)
f(cause)g(EV)-9 b(AL-WHEN)25 b(pro)r(cessing)f(to)523
4558 y(b)r(e)k(in)n(terlea)n(v)n(ed)e(with)i(reading.)1914
5147 y(23)p eop
%%Page: 24 25
24 24 bop 523 614 a Ff(4.5)135 b(En)l(try)46 b(p)t(oin)l(ts)523
796 y Fk(#|)648 896 y(Since)30 b(w)n(e)g(need)h(to)f(ev)-5
b(aluate)30 b(p)r(oten)n(tially)g(arbitrary)f(co)r(de)h(in)h(the)g(XEP)
e(argumen)n(t)523 995 y(forms)34 b(\(for)h(t)n(yp)r(e)g(c)n(hec)n
(king\),)g(w)n(e)g(can't)f(lea)n(v)n(e)g(the)h(argumen)n(ts)e(in)i(the)
g(wired)f(passing)523 1095 y(lo)r(cations.)42 b(Instead,)29
b(it)h(seems)f(b)r(etter)h(to)f(giv)n(e)g(the)g(XEP)g(max-args)e
(\014xed)j(argumen)n(ts,)523 1195 y(with)e(the)g(passing)f(lo)r
(cations)f(b)r(eing)i(the)g(true)g(passing)e(lo)r(cations.)36
b(Instead)27 b(of)h(using)648 1294 y(Also,)22 b(it)g(migh)n(t)g(b)r(e)g
(a)f(go)r(o)r(d)g(idea)g(to)g(do)h(argumen)n(t)e(coun)n(t)h(c)n(hec)n
(king)g(and)g(dispatc)n(hing)523 1394 y(with)33 b(explicit)f
(conditional)g(co)r(de)g(in)g(the)g(XEP)-7 b(.)32 b(This)g(w)n(ould)g
(simplify)g(b)r(oth)h(the)g(co)r(de)523 1494 y(that)26
b(creates)f(the)h(XEP)f(and)h(the)g(VMR)g(con)n(v)n(ersion)e(of)i
(XEPs.)35 b(Also,)26 b(argumen)n(t)f(coun)n(t)523 1593
y(dispatc)n(hing)30 b(w)n(ould)h(automatically)f(b)r(ene\014t)i(from)e
(an)n(y)g(clev)n(erness)g(in)h(compilation)f(of)523 1693
y(case-lik)n(e)37 b(forms)i(\(jump)h(tables,)h(etc\).)72
b(On)39 b(the)g(do)n(wnside,)i(this)e(w)n(ould)g(push)g(some)523
1792 y(assumptions)h(ab)r(out)h(ho)n(w)f(arg)f(dispatc)n(hing)i(is)f
(done)h(in)n(to)f(ICR.)h(But)h(then)f(w)n(e)f(are)523
1892 y(curren)n(tly)32 b(violating)g(abstraction)g(at)g(least)h(as)f
(badly)h(in)g(VMR)h(con)n(v)n(ersion,)e(whic)n(h)g(is)523
1992 y(also)27 b(supp)r(osed)g(to)g(b)r(e)h(implemen)n(tation)g(indep)r
(enden)n(t.)38 b(|#)648 2091 y(As)30 b(a)g(side-e\013ect)g(of)g
(\014nding)h(whic)n(h)f(references)f(to)h(kno)n(wn)g(functions)h(can)e
(b)r(e)i(con-)523 2191 y(v)n(erted)20 b(to)g(lo)r(cal)h(calls,)g(w)n(e)
f(\014nd)h(an)n(y)f(references)g(that)h(cannot)f(b)r(e)h(con)n(v)n
(erted.)33 b(References)523 2291 y(that)g(cannot)g(b)r(e)g(con)n(v)n
(erted)f(to)h(a)g(lo)r(cal)f(call)h(m)n(ust)g(ev)-5 b(aluate)32
b(to)h(a)g("function)g(ob)5 b(ject")523 2390 y(\(or)26
b(function-en)n(try\))f(that)i(can)f(b)r(e)g(called)g(using)g(the)g
(full)h(call)e(con)n(v)n(en)n(tion.)35 b(A)27 b(function)523
2490 y(that)h(can)f(b)r(e)h(called)f(from)h(outside)f(the)h(comp)r
(onen)n(t)f(is)h(called)f(an)g("en)n(try-p)r(oin)n(t".)648
2589 y(Lots)e(of)i(stu\013)g(that)f(happ)r(ens)h(at)f(compile-time)g
(with)h(lo)r(cal)f(function)h(calls)f(m)n(ust)g(b)r(e)523
2689 y(done)h(at)h(run-time)f(when)h(an)f(en)n(try-p)r(oin)n(t)g(is)h
(called.)648 2789 y(It)33 b(is)g(desirable)f(for)h(optimization)g(and)g
(other)g(purp)r(oses)f(if)i(all)e(the)i(calls)f(to)g(ev)n(ery)523
2888 y(function)28 b(w)n(ere)f(directly)g(presen)n(t)g(in)g(ICR)h(as)f
(lo)r(cal)g(calls.)36 b(W)-7 b(e)28 b(cannot)f(directly)g(do)g(this)523
2988 y(with)f(en)n(try-p)r(oin)n(t)f(functions,)h(since)f(w)n(e)h
(don't)f(kno)n(w)g(where)g(and)g(ho)n(w)g(the)h(en)n(try-p)r(oin)n(t)
523 3088 y(will)i(b)r(e)g(called)f(un)n(til)h(run-time.)648
3187 y(What)k(w)n(e)f(do)g(is)h(represen)n(t)f(all)g(the)h(calls)f(p)r
(ossible)h(from)f(outside)h(the)g(comp)r(onen)n(t)523
3287 y(b)n(y)26 b(lo)r(cal)f(calls)h(within)h(the)f(comp)r(onen)n(t.)36
b(F)-7 b(or)26 b(eac)n(h)f(en)n(try-p)r(oin)n(t)h(function,)h(w)n(e)f
(create)f(a)523 3386 y(corresp)r(onding)c(lam)n(b)r(da)h(called)h(the)g
(external)f(en)n(try)g(p)r(oin)n(t)h(or)f(XEP)-7 b(.)22
b(This)h(is)f(a)h(function)523 3486 y(whic)n(h)j(tak)n(es)g(the)h(n)n
(um)n(b)r(er)f(of)h(argumen)n(ts)e(passed)h(as)f(the)i(\014rst)f
(argumen)n(t,)g(follo)n(w)n(ed)g(b)n(y)523 3586 y(argumen)n(ts)g
(corresp)r(onding)g(to)h(eac)n(h)g(required)g(or)g(optional)f(argumen)n
(t.)648 3685 y(If)38 b(an)g(optional)f(argumen)n(t)g(is)h(unsupplied,)k
(the)c(v)-5 b(alue)38 b(passed)g(in)n(to)g(the)g(XEP)f(is)523
3785 y(unde\014ned.)74 b(The)40 b(XEP)g(is)g(resp)r(onsible)f(for)g
(doing)g(argumen)n(t)g(coun)n(t)h(c)n(hec)n(king)f(and)523
3885 y(dispatc)n(hing.)648 3984 y(In)h(the)h(case)f(of)g(a)g
(\014xed-arg)f(lam)n(b)r(da,)k(w)n(e)e(emit)g(a)f(call)g(to)g(the)h
(funn)n(y)g(function)523 4084 y(\(conditional)36 b(on)f(p)r(olicy\),)k
(then)d(call)g(the)g(real)g(function)g(on)g(the)g(passed)g(argumen)n
(ts.)523 4184 y(Ev)n(en)27 b(in)i(this)g(simple)f(case,)g(w)n(e)g(b)r
(ene\014t)h(sev)n(eral)d(w)n(a)n(ys)h(from)h(ha)n(ving)f(a)h(separate)f
(XEP:)523 4283 y({)32 b(The)g(argumen)n(t)f(coun)n(t)g(c)n(hec)n(king)g
(is)h(factored)f(out,)j(and)d(only)h(needs)g(to)g(b)r(e)g(done)g(in)523
4383 y(full)h(calls.)51 b({)32 b(Argumen)n(t)g(t)n(yp)r(e)h(c)n(hec)n
(king)e(happ)r(ens)h(automatically)g(as)f(a)h(consequence)523
4482 y(of)i(passing)f(the)h(XEP)f(argumen)n(ts)g(in)h(a)g(lo)r(cal)f
(call)h(to)f(the)i(real)e(function.)56 b(This)34 b(t)n(yp)r(e)523
4582 y(c)n(hec)n(king)i(is)h(also)f(only)g(done)h(in)g(full)h(calls.)64
b({)37 b(The)g(real)f(function)h(ma)n(y)f(use)h(a)g(non-)523
4682 y(standard)27 b(calling)g(con)n(v)n(en)n(tion)f(for)i(the)g(b)r
(ene\014t)g(of)g(recursiv)n(e)e(or)h(blo)r(c)n(k-compiled)g(calls.)523
4781 y(The)32 b(XEP)f(con)n(v)n(erts)f(argumen)n(ts/return)g(v)-5
b(alues)31 b(to/from)g(the)h(standard)f(con)n(v)n(en)n(tion.)523
4881 y(This)d(also)e(requires)g(little)j(sp)r(ecial-casing)d(of)h
(XEPs.)1914 5147 y(24)p eop
%%Page: 25 26
25 25 bop 648 614 a Fk(If)22 b(the)h(function)f(has)g(v)-5
b(ariable)21 b(argumen)n(t)g(coun)n(t)h(\(represen)n(ted)f(b)n(y)h(an)g
(OPTIONAL-)523 714 y(DISP)-7 b(A)g(TCH\),)33 b(then)g(the)f(XEP)f(con)n
(tains)g(a)h(COND)g(whic)n(h)g(dispatc)n(hes)f(o\013)h(of)g(the)h(ar-)
523 814 y(gumen)n(t)k(coun)n(t,)h(calling)e(the)h(appropriate)e(en)n
(try-p)r(oin)n(t)h(function)i(\(whic)n(h)f(then)g(do)r(es)523
913 y(defaulting\).)46 b(If)31 b(there)f(is)h(a)f(more)g(en)n(try)g
(\(for)g(k)n(eyw)n(ord)e(or)i(rest)g(args\),)g(then)h(the)g(XEP)523
1013 y(obtains)c(the)h(more)f(arg)f(con)n(text)h(and)h(coun)n(t)f(b)n
(y)g(calling)g(the)h(function.)648 1112 y(All)g(non-lo)r(cal-call)d
(references)i(to)g(functions)h(are)e(replaced)h(with)h(references)f(to)
g(the)523 1212 y(corresp)r(onding)d(XEP)-7 b(.)26 b(ICR)g(optimization)
g(ma)n(y)g(disco)n(v)n(er)e(a)i(lo)r(cal)g(call)f(that)i(w)n(as)e
(previ-)523 1312 y(ously)i(a)h(non-lo)r(cal)f(reference.)38
b(When)28 b(w)n(e)g(delete)h(the)f(reference)f(to)h(the)h(XEP)-7
b(,)27 b(w)n(e)h(ma)n(y)523 1411 y(\014nd)g(that)h(it)f(has)g(no)f
(references.)37 b(In)28 b(this)g(case,)g(w)n(e)f(can)h(delete)g(the)h
(XEP)-7 b(,)27 b(causing)g(the)523 1511 y(function)h(to)g(no)f(longer)f
(b)r(e)i(an)g(en)n(try-p)r(oin)n(t.)1914 5147 y(25)p
eop
%%Page: 26 27
26 26 bop 523 1237 a Fg(Chapter)65 b(5)523 1652 y Fi(ICR)77
b(con)-6 b(v)g(ersion)523 2134 y Ff(5.1)135 b(Canonical)46
b(forms)523 2316 y Fk(#|)648 2415 y(W)-7 b(ould)24 b(b)r(e)g(useful)g
(to)f(ha)n(v)n(e)g(a)g(F)-7 b(reeze-T)n(yp)r(e)23 b(pro)r(clamation.)34
b(Its)24 b(primary)e(use)i(w)n(ould)523 2515 y(to)h(b)r(e)h(sa)n(y)e
(that)h(the)h(indicated)f(t)n(yp)r(e)g(w)n(on't)g(acquire)f(an)n(y)h
(new)g(subt)n(yp)r(es)g(in)g(the)h(future.)523 2614 y(This)31
b(allo)n(ws)e(b)r(etter)i(op)r(en-co)r(ding)f(of)g(structure)g(t)n(yp)r
(e)h(predicates,)f(since)h(the)g(p)r(ossible)523 2714
y(t)n(yp)r(es)36 b(that)g(w)n(ould)g(satisfy)g(the)g(predicate)g(will)g
(b)r(e)h(constan)n(t)e(at)h(compile)g(time,)j(and)523
2814 y(th)n(us)28 b(can)f(b)r(e)h(compiled)f(as)g(a)h(skip-c)n(hain)e
(of)i(EQ)e(tests.)648 2913 y(Of)41 b(course,)i(this)f(is)f(only)g(a)g
(big)g(win)h(when)f(the)h(subt)n(yp)r(es)f(are)f(few:)65
b(the)42 b(most)523 3013 y(imp)r(ortan)n(t)31 b(case)f(is)g(when)h
(there)g(are)f(none.)46 b(If)31 b(the)g(closure)f(of)h(the)g(subt)n(yp)
r(es)g(is)g(m)n(uc)n(h)523 3113 y(larger)24 b(than)j(the)g(a)n(v)n
(erage)c(n)n(um)n(b)r(er)j(of)h(sup)r(ert)n(yp)r(es)f(of)g(an)g
(inferior,)g(then)h(it)f(is)h(b)r(etter)f(to)523 3212
y(grab)k(the)i(list)g(of)f(sup)r(eriors)g(out)g(of)h(the)g(ob)5
b(ject's)31 b(t)n(yp)r(e,)h(and)g(test)g(for)f(mem)n(b)r(ership)g(in)
523 3312 y(that)d(list.)648 3411 y(Should)i(t)n(yp)r(e-sp)r(eci\014c)h
(n)n(umeric)f(equalit)n(y)g(b)r(e)h(done)f(b)n(y)g(EQL)g(rather)f(than)
i(=?)45 b(i.e.)523 3511 y(should)35 b(=)g(on)g(t)n(w)n(o)f(\014xn)n
(ums)h(b)r(ecome)g(EQL)f(and)h(then)h(con)n(v)n(ert)e(to)h(EQL/FIXNUM?)
523 3611 y(Curren)n(tly)g(w)n(e)g(transform)g(EQL)f(in)n(to)i(=,)h
(whic)n(h)f(is)g(complicated,)h(since)f(w)n(e)f(ha)n(v)n(e)f(to)523
3710 y(pro)n(v)n(e)c(the)i(op)r(erands)f(are)g(the)h(class)f(of)h(n)n
(umeric)f(t)n(yp)r(e)h(b)r(efore)g(w)n(e)f(do)h(it.)50
b(Also,)32 b(when)523 3810 y(EQL)g(sees)g(one)g(op)r(erand)g(is)g(a)h
(FIXNUM,)h(it)f(transforms)e(to)h(EQ,)g(but)h(the)h(generator)523
3910 y(for)27 b(EQ)g(isn't)h(exp)r(ecting)f(n)n(um)n(b)r(ers,)h(so)e
(it)j(do)r(esn't)e(use)h(an)f(immediate)h(compare.)648
4009 y(Arra)n(y)e(hac)n(k)n(ery:)648 4109 y(Arra)n(y)32
b(t)n(yp)r(e)i(tests)g(are)g(transformed)f(to)g(implemen)n(tation-dep)r
(enden)n(t)i(arra)n(y-t)n(yp)r(e)523 4208 y(handling.)65
b(This)37 b(w)n(a)n(y)f(w)n(e)h(can)f(transform)g(STRINGP)i(to:)55
b(\(or)37 b(\(simple-string-p)f(x\))523 4308 y(\(and)28
b(\(complex-arra)n(y-p)c(x\))k(\(=)g(\(arra)n(y-rank)c(x\))k(1\))f
(\(simple-string-p)g(\()648 4408 y(In)f(addition)h(to)f(the)h(similar)f
(bit-v)n(ector-p,)f(w)n(e)h(also)f(handle)i(v)n(ectorp)e(and)h(an)n(y)g
(t)n(yp)r(e)523 4507 y(tests)32 b(on)f(whic)n(h)h(the)g(a)g(dimension)f
(isn't)i(wild.)49 b([Note)32 b(that)g(w)n(e)g(will)g(w)n(an)n(t)f(to)h
(expand)523 4607 y(in)n(to)e(frobs)f(compatible)g(with)i(those)e(that)h
(arra)n(y)e(references)h(expand)g(in)n(to)h(so)f(that)h(the)523
4707 y(same)d(optimizations)g(will)h(w)n(ork)e(on)h(b)r(oth.])648
4806 y(These)f(c)n(hanges)e(com)n(bine)i(to)g(con)n(v)n(ert)f(hairy)h
(t)n(yp)r(e)g(c)n(hec)n(ks)f(in)n(to)h(hairy)g(t)n(yp)r(ep's,)h(and)
1914 5147 y(26)p eop
%%Page: 27 28
27 27 bop 523 614 a Fk(then)28 b(con)n(v)n(ert)e(hairyp)h(t)n(yp)r(eps)
h(in)n(to)f(simple)h(t)n(yp)r(eps.)648 714 y(Do)39 b(w)n(e)g(really)f
(need)h(non-V)n(OP)f(templates?)72 b(It)39 b(seems)g(that)g(w)n(e)g
(could)g(get)g(the)523 814 y(desired)d(e\013ect)h(through)f(implemen)n
(tation-dep)r(enden)n(t)g(ICR)h(transforms.)62 b(The)36
b(main)523 913 y(risk)h(w)n(ould)h(b)r(e)h(of)f(obscuring)f(the)h(t)n
(yp)r(e)h(seman)n(tics)e(of)h(the)h(co)r(de.)68 b(W)-7
b(e)39 b(could)f(fairly)523 1013 y(easily)31 b(retain)g(all)h(the)g(t)n
(yp)r(e)g(information)f(presen)n(t)g(at)h(the)g(time)h(the)f(tranform)f
(is)g(run,)523 1112 y(but)25 b(if)g(w)n(e)f(disco)n(v)n(er)e(new)j(t)n
(yp)r(e)f(information,)h(then)g(it)f(w)n(on't)g(b)r(e)h(propagated)e
(unless)h(the)523 1212 y(VM)31 b(also)f(supplies)h(t)n(yp)r(e)h
(inference)e(metho)r(ds)i(for)e(its)h(in)n(ternal)g(frobs)f
(\(precluding)h(the)523 1312 y(use)c(of)648 1411 y(I)19
b(guess)g(one)h(p)r(ossibilit)n(y)f(w)n(ould)g(b)r(e)h(to)g(ha)n(v)n(e)
f(the)h(call)f(still)h(considered)f("kno)n(wn")f(ev)n(en)523
1511 y(though)34 b(it)h(has)e(b)r(een)i(transformed.)56
b(But)34 b(this)h(do)r(esn't)f(w)n(ork,)g(since)g(w)n(e)g(start)g
(doing)523 1611 y(LET)i(optimizations)g(that)g(trash)g(the)g(arglist)g
(once)f(the)i(call)f(has)g(b)r(een)h(transformed)523
1710 y(\(and)28 b(indeed)g(w)n(e)f(w)n(an)n(t)g(to.\))648
1810 y(Actually)-7 b(,)29 b(I)f(guess)g(the)h(o)n(v)n(erhead)d(for)j
(pro)n(viding)e(t)n(yp)r(e)i(inference)f(metho)r(ds)h(for)f(the)523
1910 y(in)n(ternal)22 b(frobs)g(isn't)h(that)g(great,)f(since)h(w)n(e)f
(can)g(usually)g(b)r(orro)n(w)f(the)i(inference)g(metho)r(d)523
2009 y(for)28 b(a)h(Common)f(Lisp)h(function.)41 b(F)-7
b(or)29 b(example,)g(in)g(our)f(AREF)h(case:)39 b(\(aref)28
b(x)h(y\))g(==>)523 2109 y(\(let)f(\(\(#:len)h(\(arra)n(y-dimension)c
(x)i(0\)\)\))h(\()648 2208 y(No)n(w)c(in)h(this)g(case,)f(if)h(w)n(e)f
(made)h(as)f(AREF,)h(then)g(if)g(w)n(e)f(disco)n(v)n(ered)f(something)h
(new)523 2308 y(ab)r(out)k(X's)f(elemen)n(t)h(t)n(yp)r(e,)g(w)n(e)f
(could)h(deriv)n(e)e(a)h(new)h(t)n(yp)r(e)g(for)f(the)h(en)n(tire)f
(expression.)648 2408 y(Actually)-7 b(,)21 b(it)f(seems)f(that)h
(baring)f(this)h(detail)g(at)f(the)h(ICR)g(lev)n(el)f(is)h(b)r
(ene\014cial,)h(since)f(it)523 2507 y(admits)g(the)g(p)r(ossibly)f(of)g
(optimizing)h(a)n(w)n(a)n(y)d(the)j(b)r(ounds)g(c)n(hec)n(k)f(using)g
(t)n(yp)r(e)h(information.)523 2607 y(If)38 b(w)n(e)e(disco)n(v)n(er)g
(X's)h(dimensions,)i(then)f(#:LEN)f(b)r(ecomes)g(a)f(constan)n(t)h
(that)g(can)g(b)r(e)523 2707 y(substituted.)43 b(Then)30
b(constan)n(t)f(and)g(c)n(hec)n(k)g(it)g(against)g(the)h(t)n(yp)r(e)f
(for)g(Y.)h(If)g(Y)g(is)f(kno)n(wn)523 2806 y(to)f(b)r(e)g(in)f(range,)
g(then)h(w)n(e)f(can)g(optimize)h(a)n(w)n(a)n(y)d(the)j(b)r(ounds)g(c)n
(hec)n(k.)648 2906 y(Actually)19 b(in)g(this)g(particular)f(case,)i
(the)g(b)r(est)f(thing)g(to)g(do)g(w)n(ould)g(b)r(e)g(if)h(w)n(e)e
(disco)n(v)n(ered)523 3005 y(the)h(b)r(ound)g(is)f(constan)n(t,)i(then)
f(replace)e(the)i(b)r(ounds)g(c)n(hec)n(k)e(with)i(an)f(implicit)i(t)n
(yp)r(e)e(c)n(hec)n(k.)523 3105 y(This)23 b(w)n(a)n(y)e(all)i(the)g(t)n
(yp)r(e)g(c)n(hec)n(k)f(optimization)h(mec)n(hanisms)f(w)n(ould)g(b)r
(e)i(brough)n(t)d(in)n(to)i(the)523 3205 y(act.)648 3304
y(So)29 b(w)n(e)g(actually)g(w)n(an)n(t)f(to)i(do)f(the)h(b)r(ounds-c)n
(hec)n(k)e(expansion)g(as)h(so)r(on)g(as)g(p)r(ossible,)523
3404 y(rather)24 b(than)g(later)g(than)h(p)r(ossible:)35
b(it)25 b(should)g(b)r(e)g(a)f(source-transform,)e(enabled)j(b)n(y)f
(the)523 3504 y(fast-safe)j(p)r(olicy)-7 b(.)648 3603
y(With)29 b(m)n(ulti-dimensional)f(arra)n(ys)e(w)n(e)i(probably)g(w)n
(an)n(t)g(to)g(explicitly)h(do)f(the)h(index)523 3703
y(computation:)62 b(this)41 b(w)n(a)n(y)e(p)r(ortions)h(of)h(the)g
(index)f(computation)g(can)g(b)r(ecome)h(lo)r(op)523
3802 y(in)n(v)-5 b(arian)n(ts.)54 b(In)34 b(a)f(scan)g(in)h(ro)n(w-ma)5
b(jor)30 b(order,)k(the)g(inner)g(lo)r(op)f(w)n(ouldn't)h(ha)n(v)n(e)e
(to)i(do)523 3902 y(an)n(y)26 b(m)n(ultiplication:)36
b(it)27 b(w)n(ould)e(only)h(do)g(an)g(addition.)36 b(W)-7
b(e)27 b(w)n(ould)f(use)g(normal)f(\014xn)n(um)523 4002
y(arithmetic,)32 b(coun)n(ting)e(on)g(*)g(to)h(clev)n(erly)e(handle)i
(m)n(ultiplication)g(b)n(y)f(a)h(constan)n(t,)g(and)523
4101 y(appropriate)26 b(inline)i(expansion.)648 4201
y(Note)k(that)g(in)h(a)f(source)f(transform,)h(w)n(e)g(can't)g(mak)n(e)
g(an)n(y)f(assumptions)h(the)g(t)n(yp)r(e)523 4301 y(of)25
b(the)h(arra)n(y)-7 b(.)34 b(If)26 b(it)f(turns)h(out)f(to)g(b)r(e)h(a)
f(complex)g(arra)n(y)d(without)k(declared)f(dimensions,)523
4400 y(then)k(the)g(calls)f(to)g(ARRA)-7 b(Y-DIMENSION)30
b(will)f(ha)n(v)n(e)e(to)h(turn)h(in)n(to)f(a)g(V)n(OP)g(that)h(can)523
4500 y(b)r(e)e(a\013ected.)37 b(But)27 b(if)g(it)g(is)f(simple,)h(then)
g(the)g(V)n(OP)f(is)g(una\013ected,)i(and)e(if)h(w)n(e)f(kno)n(w)g(the)
523 4599 y(b)r(ounds,)35 b(it)e(is)g(constan)n(t.)53
b(Similarly)-7 b(,)35 b(w)n(e)d(w)n(ould)h(ha)n(v)n(e)f(op)r(erations.)
52 b(is)34 b(simple.)53 b([This)523 4699 y(is)27 b(somewhat)f
(ine\016cien)n(t)h(when)f(the)i(arra)n(y)c(isn't)j(ev)n(en)n(tually)f
(disco)n(v)n(ered)e(to)j(b)r(e)g(simple,)523 4799 y(since)32
b(\014nding)h(the)g(data)f(and)g(\014nding)h(the)g(displacemen)n(t)f
(duplicate)g(eac)n(h)g(other.)51 b(W)-7 b(e)523 4898
y(could)27 b(mak)n(e)g(optimize)h(to)f(\(V)-9 b(ALUES)28
b(\(optimization)g(of)g(trivial)f(V)-9 b(ALUES)27 b(uses.])1914
5147 y(27)p eop
%%Page: 28 29
28 28 bop 648 614 a Fk(Also)27 b(need)h(\(THE)f(\(ARRA)-7
b(Y)29 b(*)e(*)h(*)f(...\))37 b(x\))28 b(to)f(assert)g(correct)f(rank.)
648 714 y(|#)648 814 y(A)39 b(bunc)n(h)f(of)h(functions)g(ha)n(v)n(e)e
(source)h(transforms)f(that)i(con)n(v)n(ert)e(them)j(in)n(to)e(the)523
913 y(canonical)g(form)h(that)g(later)g(parts)f(of)h(the)h(compiler)e
(w)n(an)n(t)h(to)g(see.)71 b(It)39 b(is)g(not)g(legal)523
1013 y(to)f(rely)f(on)h(the)g(canonical)f(form)h(since)g(source)e
(transforms)h(can)h(b)r(e)g(inhibited)h(b)n(y)f(a)523
1112 y(Notinline)27 b(declaration.)35 b(This)26 b(shouldn't)h(b)r(e)f
(a)g(problem,)g(since)h(ev)n(ery)n(one)d(should)i(k)n(eep)523
1212 y(their)i(hands)f(o\013)h(of)f(Notinline)h(calls.)648
1312 y(Some)f(transformations:)648 1411 y(Endp)f(==>)f(\(NULL)i(\(THE)f
(LIST)g(...\)\))37 b(\(NOT)27 b(xxx\))e(or)h(\(NULL)g(xxx\))g(=>)g
(\(IF)h(xxx)523 1511 y(NIL)h(T\))648 1611 y(\(t)n(yp)r(ep)23
b(x)h('<simple)f(t)n(yp)r(e>\))h(=>)f(\(<simple)h(predicate>)f(x\))h
(\(t)n(yp)r(ep)f(x)h('<complex)f(t)n(yp)r(e>\))523 1710
y(=>)g(...comp)r(osition)g(of)h(simpler)f(op)r(erations...)34
b(TYPEP)23 b(of)g(AND,)i(OR)e(and)g(NOT)g(t)n(yp)r(es)523
1810 y(turned)j(in)n(to)f(conditionals)g(o)n(v)n(er)f(m)n(ultiple)i
(TYPEP)e(calls.)36 b(This)25 b(mak)n(es)g(hairy)g(TYPEP)523
1910 y(calls)32 b(more)h(digestible)g(to)g(t)n(yp)r(e)g(constrain)n(t)f
(propagation,)g(and)h(also)f(means)h(that)g(the)523 2009
y(TYPEP)24 b(co)r(de)h(generators)e(don't)i(ha)n(v)n(e)f(to)h(deal)g
(with)h(these)f(cases.)35 b([###)26 b(In)g(the)f(case)523
2109 y(of)31 b(union)f(t)n(yp)r(es)h(w)n(e)f(ma)n(y)g(w)n(an)n(t)g(to)g
(do)h(something)f(to)g(preserv)n(e)f(information)h(for)g(t)n(yp)r(e)523
2208 y(constrain)n(t)c(propagation.])648 2308 y(\(apply)38
b(#'fo)r(o)g(a)g(b)h(c\))g(==>)f(\(m)n(ultiple-v)-5 b(alue-call)38
b(#'fo)r(o)g(\(v)-5 b(alues)38 b(a\))h(\(v)-5 b(alues)38
b(b\))523 2408 y(\(v)-5 b(alues-list)27 b(c\)\))648 2507
y(This)39 b(w)n(a)n(y)f(only)i(MV-CALL)f(needs)h(to)f(kno)n(w)g(ho)n(w)
g(to)g(do)h(calls)f(with)h(unkno)n(wn)523 2607 y(n)n(um)n(b)r(ers)29
b(of)h(argumen)n(ts.)41 b(It)30 b(should)f(b)r(e)h(nearly)f(as)g
(e\016cien)n(t)g(as)g(a)g(sp)r(ecial-case)f(VMR-)523
2707 y(Con)n(v)n(ert)e(metho)r(d)i(could)g(b)r(e.)648
2806 y(Mak)n(e-String)j(=>)i(Mak)n(e-Arra)n(y)e(N-arg)h(predicates)g
(asso)r(ciated)g(in)n(to)h(t)n(w)n(o-arg)e(v)n(er-)523
2906 y(sions.)j(Asso)r(ciate)20 b(N-arg)f(arithmetic)h(ops.)34
b(Expand)20 b(CxxxR)g(and)h(FIRST...nTH)g(Zerop,)523
3005 y(Plusp,)i(Min)n(usp,)h(1+,)f(1-,)g(Min,)h(Max,)f(Rem,)h(Mo)r(d)f
(\(V)-7 b(alues)23 b(x\),)h(\(Iden)n(tit)n(y)f(x\))g(=>)f(\(Prog1)523
3105 y(x\))648 3205 y(All)28 b(sp)r(ecialized)f(aref)g(functions)h(=>)f
(\(aref)g(\(the)i(xxx\))e(...\))648 3304 y(Con)n(v)n(ert)f(\(ldb)j(\(b)
n(yte)f(...\))38 b(...\))g(in)n(to)27 b(in)n(ternal)h(frob)f(that)h
(tak)n(es)f(size)h(and)f(p)r(osition)h(as)523 3404 y(separate)e(args.)
35 b(Other)28 b(b)n(yte)f(functions)h(also...)648 3504
y(Change)j(for-v)-5 b(alue)30 b(primitiv)n(e)i(predicates)f(in)n(to)h
(\(if)g(<pred>)g(t)g(nil\).)50 b(This)32 b(isn't)g(par-)523
3603 y(ticularly)27 b(useful)h(during)f(ICR)h(phases,)f(but)h(mak)n(es)
f(life)h(easy)e(for)h(VMR)h(con)n(v)n(ersion.)648 3703
y(This)33 b(last)h(can't)g(b)r(e)g(a)g(source)f(transformation,)h
(since)f(a)h(source)f(transform)f(can't)523 3802 y(tell)42
b(where)e(the)i(form)e(app)r(ears.)77 b(Instead,)44 b(ICR)d(con)n(v)n
(ersion)e(sp)r(ecial-cases)g(calls)h(to)523 3902 y(kno)n(wn)24
b(functions)h(with)h(the)f(Predicate)e(attribute)i(b)n(y)g(doing)f(the)
h(con)n(v)n(ersion)e(when)i(the)523 4002 y(destination)j(of)g(the)g
(result)g(isn't)g(an)f(IF.)i(It)f(isn't)g(critical)g(that)g(this)g(nev)
n(er)f(b)r(e)h(done)g(for)523 4101 y(predicates)h(that)i(w)n(e)e
(ultimately)i(disco)n(v)n(er)d(to)i(deliv)n(er)f(their)h(v)-5
b(alue)30 b(to)g(an)g(IF,)g(since)g(IF)523 4201 y(optimizations)d(will)
h(\015ush)g(unnecessary)e(IFs)h(in)h(a)f(predicate.)523
4475 y Ff(5.2)135 b(Inline)46 b(functions)523 4657 y
Fk([###)29 b(Inline)g(expansion)e(is)i(esp)r(ecially)e(p)r(o)n(w)n
(erful)h(in)h(the)g(presence)e(of)h(go)r(o)r(d)g(lisp-lev)n(el)523
4757 y(optimization)23 b(\("partial)f(ev)-5 b(aluation"\).)35
b(Man)n(y)22 b("optimizations")g(usually)g(done)h(in)g(Lisp)1914
5147 y(28)p eop
%%Page: 29 30
29 29 bop 523 614 a Fk(compilers)19 b(b)n(y)g(sp)r(ecial-case)f
(source-to-source)e(transforms)i(can)h(b)r(e)h(had)f(simply)h(b)n(y)f
(mak-)523 714 y(ing)k(the)h(source)e(of)h(the)h(general)d(case)i
(function)h(a)n(v)-5 b(ailable)21 b(for)i(inline)h(expansion.)34
b(This)23 b(is)523 814 y(esp)r(ecially)30 b(helpful)h(in)g(Common)f
(Lisp,)h(whic)n(h)f(has)g(man)n(y)g(commonly)g(used)g(functions)523
913 y(with)c(simple)f(sp)r(ecial)g(cases)f(but)i(bad)f(general)f(cases)
g(\(list)i(and)f(sequence)g(functions,)h(for)523 1013
y(example.\))648 1112 y(Inline)35 b(expansion)e(of)i(recursiv)n(e)e
(functions)i(is)g(allo)n(w)n(ed,)g(and)g(is)f(not)h(as)f(silly)h(as)f
(it)523 1212 y(sounds.)42 b(When)31 b(expanded)e(in)h(a)f(sp)r
(eci\014c)h(con)n(text,)f(m)n(uc)n(h)h(of)f(the)h(o)n(v)n(erhead)e(of)h
(the)h(re-)523 1312 y(cursiv)n(e)19 b(calls)g(ma)n(y)g(b)r(e)i
(eliminated)f(\(esp)r(ecially)g(if)g(there)g(are)f(man)n(y)h(k)n(eyw)n
(ord)e(argumen)n(ts,)523 1411 y(etc.\))648 1511 y([Also)27
b(ha)n(v)n(e)f(MA)-7 b(YBE-INLINE])28 b(])648 1611 y(W)-7
b(e)23 b(only)f(record)g(a)g(function's)h(inline)g(expansion)f(in)h
(the)h(global)d(en)n(vironmen)n(t)h(when)523 1710 y(the)32
b(function)f(is)g(in)h(the)f(n)n(ull)g(lexical)g(en)n(vironmen)n(t,)g
(since)g(it)g(the)h(expansion)e(m)n(ust)h(b)r(e)523 1810
y(represen)n(ted)26 b(as)h(source.)648 1910 y(W)-7 b(e)34
b(do)g(inline)h(expansion)e(of)i(functions)f(lo)r(cally)g(de\014ned)g
(b)n(y)g(FLET)g(or)g(LABELS)523 2009 y(ev)n(en)40 b(when)g(the)h(en)n
(vironmen)n(t)e(is)h(not)g(n)n(ull.)75 b(Since)40 b(the)h(app)r
(earances)d(of)i(the)h(lo)r(cal)523 2109 y(function)23
b(m)n(ust)f(b)r(e)h(nested)f(within)h(the)g(desired)f(en)n(vironmen)n
(t,)g(it)h(is)f(p)r(ossible)g(to)g(expand)523 2208 y(lo)r(cal)31
b(functions)i(inline)f(ev)n(en)f(when)h(they)g(use)g(the)g(en)n
(vironmen)n(t.)49 b(W)-7 b(e)32 b(just)h(stash)e(the)523
2308 y(source)f(form)i(and)f(en)n(vironmen)n(ts)g(in)g(the)h(F)-7
b(unctional)32 b(for)f(the)h(lo)r(cal)f(function.)50
b(When)523 2408 y(w)n(e)27 b(con)n(v)n(ert)f(a)i(call)f(to)g(it,)h(w)n
(e)g(just)g(recon)n(v)n(ert)d(the)j(source)f(in)g(the)h(sa)n(v)n(ed)f
(en)n(vironmen)n(t.)648 2507 y(An)33 b(in)n(teresting)e(alternativ)n(e)
h(to)g(the)h(inline/full-call)f(dic)n(hotom)n(y)g(is)g("semi-inline")
523 2607 y(co)r(ding.)48 b(Whenev)n(er)31 b(w)n(e)h(ha)n(v)n(e)e(an)h
(inline)h(expansion)f(for)g(a)g(function,)i(w)n(e)f(can)f(expand)523
2707 y(it)j(only)f(once)g(p)r(er)g(blo)r(c)n(k)g(compilation,)h(and)f
(then)h(use)f(lo)r(cal)g(call)g(to)g(call)g(this)h(copied)523
2806 y(v)n(ersion.)h(This)27 b(should)f(get)g(most)h(of)f(the)h(sp)r
(eed)g(adv)-5 b(an)n(tage)25 b(of)i(real)f(inline)h(co)r(ding)f(with)
523 2906 y(m)n(uc)n(h)k(less)g(co)r(de)g(bloat.)45 b(This)31
b(is)f(esp)r(ecially)g(attractiv)n(e)f(for)h(simple)h(system)f
(functions)523 3005 y(suc)n(h)d(as)g(Read-Char.)648 3105
y(The)34 b(main)h(place)f(where)h(true)f(inline)h(expansion)f(w)n(ould)
g(still)h(b)r(e)g(w)n(orth)f(doing)g(is)523 3205 y(where)19
b(large)f(amoun)n(ts)h(of)g(the)h(function)g(could)f(b)r(e)h(optimized)
f(a)n(w)n(a)n(y)f(b)n(y)h(constan)n(t)g(folding)523 3304
y(or)27 b(other)g(optimizations)g(that)h(dep)r(end)g(on)f(the)h(exact)f
(argumen)n(ts)g(to)g(the)h(call.)523 3579 y Ff(5.3)135
b(Compilation)47 b(p)t(olicy)523 3761 y Fk(W)-7 b(e)25
b(w)n(an)n(t)g(more)f(sophisticated)g(con)n(trol)g(of)h(compilation)f
(safet)n(y)h(than)g(is)g(o\013ered)f(in)h(CL,)523 3860
y(so)e(that)i(w)n(e)f(can)f(emit)i(only)f(those)f(t)n(yp)r(e)i(c)n(hec)
n(ks)e(that)h(are)f(lik)n(ely)h(to)g(disco)n(v)n(er)e(something)523
3960 y(\(i.e.)37 b(external)27 b(in)n(terfaces.\))648
4060 y(#|)523 4334 y Ff(5.4)135 b(Notes)523 4516 y Fk(Generalized)27
b(bac)n(k-end)f(notion)i(pro)n(vides)e(dynamic)h(retargeting?)35
b(\(for)28 b(b)n(yte)f(co)r(de\))648 4616 y(The)39 b(curren)n(t)g(no)r
(de)h(t)n(yp)r(e)g(annotations)f(seem)h(to)f(b)r(e)i(somewhat)e
(unsatisfactory)-7 b(,)523 4715 y(since)23 b(w)n(e)g(lose)g
(information)f(when)i(w)n(e)f(do)f(a)h(THE)g(on)g(a)g(con)n(tin)n
(uation)g(that)g(already)f(has)1914 5147 y(29)p eop
%%Page: 30 31
30 30 bop 523 614 a Fk(uses,)33 b(or)e(when)i(w)n(e)f(con)n(v)n(ert)f
(a)g(let)i(where)f(the)g(actual)g(result)g(con)n(tin)n(uation)f(has)h
(other)523 714 y(uses.)648 814 y(But)h(the)g(case)f(with)h(THE)g(isn't)
g(really)e(all)i(that)g(bad,)h(since)f(the)g(test)g(of)f(whether)523
913 y(there)c(are)g(an)n(y)g(uses)g(happ)r(ens)h(b)r(efore)f(con)n(v)n
(ersion)f(of)h(the)h(argumen)n(t,)f(th)n(us)h(THE)f(loses)523
1013 y(information)k(only)g(when)h(there)f(are)g(uses)g(outside)g(of)h
(the)f(declared)g(form.)51 b(The)33 b(LET)523 1112 y(case)27
b(ma)n(y)g(not)g(b)r(e)h(a)f(big)h(deal)f(either.)648
1212 y(Note)i(also)f(that)h(losing)g(user)f(assertions)g(isn't)h
(really)f(all)h(that)h(bad,)f(since)g(it)h(w)n(on't)523
1312 y(damage)d(system)h(in)n(tegrit)n(y)-7 b(.)37 b(A)n(t)29
b(w)n(orst,)e(it)h(will)h(cause)e(a)h(bug)g(to)g(go)f(undetected.)39
b(More)523 1411 y(lik)n(ely)-7 b(,)24 b(it)f(will)g(just)h(cause)e(the)
i(error)d(to)i(b)r(e)g(signaled)f(in)h(a)g(di\013eren)n(t)g(place)g
(\(and)g(p)r(ossibly)523 1511 y(in)31 b(a)g(less)g(informativ)n(e)f(w)n
(a)n(y\).)46 b(Of)31 b(course,)g(there)g(is)g(an)g(e\016ciency)g(hit)g
(for)g(losing)f(t)n(yp)r(e)523 1611 y(information,)d(but)h(if)g(it)g
(only)g(happ)r(ens)f(in)h(strange)e(cases,)h(then)h(this)g(isn't)g(a)f
(big)g(deal.)1914 5147 y(30)p eop
%%Page: 31 32
31 31 bop 523 1237 a Fg(Chapter)65 b(6)523 1652 y Fi(Lo)6
b(cal)78 b(call)e(analysis)523 2095 y Fk(All)29 b(calls)f(to)h(lo)r
(cal)f(functions)h(\(kno)n(wn)f(named)h(functions)g(and)g(LETs\))f(are)
f(resolv)n(ed)g(to)523 2195 y(the)22 b(exact)f(LAMBD)n(A)h(no)r(de)g
(whic)n(h)f(is)g(to)h(b)r(e)g(called.)34 b(If)22 b(the)g(call)f(is)h
(syn)n(tactically)e(illegal,)523 2294 y(then)34 b(w)n(e)f(emit)g(a)g(w)
n(arning)f(and)h(mark)f(the)i(reference)e(as)h(:notinline,)i(forcing)d
(the)i(call)523 2394 y(to)c(b)r(e)h(a)f(full)h(call.)44
b(W)-7 b(e)31 b(don't)f(ev)n(en)g(think)g(ab)r(out)h(con)n(v)n(erting)d
(APPL)-7 b(Y)30 b(calls;)h(APPL)-7 b(Y)523 2493 y(is)29
b(not)g(sp)r(ecial-cased)e(at)i(all)g(in)g(ICR.)g(W)-7
b(e)29 b(also)f(tak)n(e)g(care)g(not)h(to)g(con)n(v)n(ert)e(calls)i(in)
g(the)523 2593 y(top-lev)n(el)35 b(comp)r(onen)n(t,)i(whic)n(h)f(w)n
(ould)f(join)h(it)g(to)g(normal)e(co)r(de.)61 b(Calls)35
b(to)h(functions)523 2693 y(with)28 b(rest)f(args)f(and)i(calls)f(with)
h(non-constan)n(t)e(k)n(eyw)n(ords)f(are)i(also)g(not)g(con)n(v)n
(erted.)648 2792 y(W)-7 b(e)23 b(also)f(con)n(v)n(ert)g(MV-Calls)g
(that)i(lo)r(ok)e(lik)n(e)h(MUL)-7 b(TIPLE-V)e(ALUE-BIND)22
b(to)h(lo)r(cal)523 2892 y(calls,)40 b(since)e(w)n(e)g(kno)n(w)f(that)h
(they)g(can)g(b)r(e)g(op)r(en-co)r(ded.)68 b(W)-7 b(e)39
b(replace)e(the)h(optional)523 2992 y(dispatc)n(h)27
b(with)g(a)g(call)g(to)g(the)g(last)g(optional)f(en)n(try)h(p)r(oin)n
(t,)g(letting)h(MV-Call)f(magically)523 3091 y(default)h(the)g
(unsupplied)g(v)-5 b(alues)27 b(to)h(NIL.)648 3191 y(When)k(ICR)g
(optimizations)f(disco)n(v)n(er)f(a)h(p)r(ossible)h(new)g(lo)r(cal)f
(call,)h(they)g(explicitly)523 3290 y(in)n(v)n(ok)n(e)26
b(lo)r(cal)h(call)g(analysis)g(on)g(the)h(co)r(de)f(that)h(needs)g(to)f
(b)r(e)h(reanalyzed.)648 3390 y([###)g(Let)g(con)n(v)n(ersion.)35
b(What)29 b(is)e(means)h(to)f(b)r(e)i(a)e(let.)38 b(Argumen)n(t)28
b(t)n(yp)r(e)g(c)n(hec)n(king)523 3490 y(done)f(b)n(y)h(caller.)36
b(Signi\014cance)27 b(of)g(lo)r(cal)g(call)g(is)h(that)g(all)f(callers)
f(are)h(kno)n(wn,)g(so)g(sp)r(ecial)523 3589 y(call)34
b(con)n(v)n(en)n(tions)e(ma)n(y)h(b)r(e)i(used.])56 b(A)34
b(lam)n(b)r(da)g(called)f(in)i(only)e(one)h(place)f(is)h(called)g(a)523
3689 y("let")27 b(call,)g(since)h(a)f(Let)h(w)n(ould)f(turn)g(in)n(to)h
(one.)648 3789 y(In)19 b(addition)h(to)g(enabling)f(v)-5
b(arious)18 b(ICR)i(optimizations,)h(the)f(let/non-let)f(distinction)
523 3888 y(has)29 b(imp)r(ortan)n(t)g(en)n(vironmen)n(t)f
(signi\014cance.)42 b(W)-7 b(e)30 b(treat)f(the)g(co)r(de)h(in)f
(function)h(and)g(all)523 3988 y(of)22 b(the)g(lets)h(called)e(b)n(y)h
(that)g(function)h(as)e(b)r(eing)h(in)h(the)f(same)g(en)n(vironmen)n
(t.)34 b(This)22 b(allo)n(ws)523 4087 y(exits)27 b(from)g(lets)g(to)g
(b)r(e)h(treated)f(as)f(lo)r(cal)h(exits,)g(and)g(mak)n(es)f(life)i
(easy)e(for)g(en)n(vironmen)n(t)523 4187 y(analysis.)648
4287 y(Since)f(w)n(e)f(will)i(let-con)n(v)n(ert)d(an)n(y)h(function)i
(with)f(only)g(one)g(call,)g(w)n(e)f(m)n(ust)i(b)r(e)f(careful)523
4386 y(ab)r(out)39 b(clean)n(ups.)70 b(It)39 b(is)g(p)r(ossible)f(that)
h(a)g(lexical)f(exit)h(from)f(the)i(let)f(function)g(ma)n(y)523
4486 y(ha)n(v)n(e)25 b(to)h(clean)f(up)i(dynamic)f(bindings)g(not)g
(lexically)f(apparen)n(t)g(at)h(the)g(exit)g(p)r(oin)n(t.)37
b(W)-7 b(e)523 4586 y(handle)31 b(this)h(b)n(y)f(annotating)f(lets)h
(with)h(an)n(y)f(clean)n(up)f(in)i(e\013ect)g(at)f(the)h(call)e(site.)
48 b(The)523 4685 y(clean)n(up)27 b(for)f(con)n(tin)n(uations)g(with)h
(no)g(immediately)g(enclosing)f(clean)n(up)h(is)f(the)i(lam)n(b)r(da)
523 4785 y(that)34 b(the)f(con)n(tin)n(uation)f(is)h(in.)54
b(In)34 b(this)f(case,)h(w)n(e)f(lo)r(ok)f(at)h(the)h(lam)n(b)r(da)f
(to)g(see)f(if)i(an)n(y)523 4884 y(clean)n(ups)27 b(need)h(to)f(b)r(e)h
(done.)1914 5147 y(31)p eop
%%Page: 32 33
32 32 bop 648 614 a Fk(Let)20 b(con)n(v)n(ersion)f(is)i(disabled)f(for)
g(en)n(try-p)r(oin)n(t)g(functions,)j(since)d(otherwise)g(w)n(e)g(migh)
n(t)523 714 y(con)n(v)n(ert)27 b(the)j(call)e(from)g(the)i(XEP)e(to)g
(the)i(en)n(try)e(p)r(oin)n(t)h(in)n(to)f(a)h(let.)41
b(Then)29 b(later)f(on,)h(w)n(e)523 814 y(migh)n(t)24
b(w)n(an)n(t)g(to)g(con)n(v)n(ert)f(a)h(non-lo)r(cal)f(reference)g(in)n
(to)h(a)g(lo)r(cal)g(call,)g(and)h(not)f(b)r(e)g(able)g(to,)523
913 y(since)j(once)h(a)f(function)h(has)f(b)r(een)h(con)n(v)n(erted)e
(to)i(a)f(let,)h(w)n(e)f(can't)h(con)n(v)n(ert)e(it)i(bac)n(k.)648
1013 y(A)e(function's)h(return)e(no)r(de)i(ma)n(y)e(also)g(b)r(e)i
(deleted)f(if)h(it)g(is)f(unreac)n(hable,)f(whic)n(h)h(can)523
1112 y(happ)r(en)i(if)g(the)g(function)g(nev)n(er)f(returns)g(normally)
-7 b(.)36 b(Suc)n(h)27 b(functions)h(are)f(not)g(lets.)1914
5147 y(32)p eop
%%Page: 33 34
33 33 bop 523 1237 a Fg(Chapter)65 b(7)523 1652 y Fi(Find)77
b(comp)6 b(onen)-6 b(ts)523 2084 y Fk(This)36 b(is)f(a)g(p)r(ost-pass)f
(to)i(ICR)f(con)n(v)n(ersion)e(that)j(massages)e(the)i(\015o)n(w)e
(graph)h(in)n(to)g(the)523 2183 y(shap)r(e)18 b(subsequen)n(t)h(phases)
e(exp)r(ect.)35 b(Things)18 b(done:)32 b(Compute)19 b(the)f
(depth-\014rst)h(ordering)523 2283 y(for)k(the)g(\015o)n(w)f(graph.)35
b(Find)23 b(the)h(comp)r(onen)n(ts)e(\(disconnected)h(parts\))g(of)g
(the)g(\015o)n(w)f(graph.)648 2383 y(This)30 b(pass)f(need)h(only)g(b)r
(e)g(redone)g(when)g(newly)g(con)n(v)n(erted)f(co)r(de)g(has)h(b)r(een)
h(added)523 2482 y(to)26 b(the)h(\015o)n(w)f(graph.)35
b(The)27 b(reanalyze)e(\015ag)g(in)i(the)g(comp)r(onen)n(t)f(structure)
g(should)g(b)r(e)h(set)523 2582 y(b)n(y)g(p)r(eople)h(who)f(mess)g
(things)h(up.)648 2682 y(W)-7 b(e)24 b(create)f(the)h(initial)g(DF)n(O)
g(using)g(a)f(v)-5 b(arian)n(t)23 b(of)h(the)g(basic)g(algorithm.)34
b(The)24 b(initial)523 2781 y(DF)n(O)35 b(computation)f(breaks)f(the)j
(ICR)e(up)h(in)n(to)g(comp)r(onen)n(ts,)h(whic)n(h)e(are)g(parts)g
(that)523 2881 y(can)29 b(b)r(e)h(compiled)g(indep)r(enden)n(tly)-7
b(.)44 b(This)29 b(is)h(done)f(to)g(increase)g(the)h(e\016ciency)f(of)h
(large)523 2980 y(blo)r(c)n(k)d(compilations.)36 b(In)27
b(addition)g(to)g(impro)n(ving)f(lo)r(calit)n(y)h(of)g(reference)f(and)
h(reducing)523 3080 y(the)35 b(size)f(of)g(\015o)n(w)f(analysis)g
(problems,)i(this)g(allo)n(ws)e(bac)n(k-end)g(data)g(structures)h(to)g
(b)r(e)523 3180 y(reclaimed)27 b(after)g(the)h(compilation)f(of)h(eac)n
(h)e(comp)r(onen)n(t.)648 3279 y(ICR)e(optimization)g(can)f(c)n(hange)g
(the)h(connectivit)n(y)g(of)g(the)h(\015o)n(w)e(graph)g(b)n(y)h(disco)n
(v)n(er-)523 3379 y(ing)h(new)g(calls)f(or)g(eliminating)h(dead)g(co)r
(de.)36 b(Initial)25 b(DF)n(O)g(determination)g(splits)g(up)g(the)523
3479 y(\015o)n(w)i(graph)g(in)n(to)g(separate)f(comp)r(onen)n(ts,)i
(but)g(do)r(es)f(so)g(conserv)-5 b(ativ)n(ely)e(,)26
b(ensuring)h(that)523 3578 y(parts)32 b(that)h(migh)n(t)f(b)r(ecome)h
(joined)g(\(due)g(to)f(lo)r(cal)g(call)h(con)n(v)n(ersion\))d(are)i
(joined)h(from)523 3678 y(the)d(start.)42 b(Initial)30
b(DF)n(O)f(computation)g(also)g(guaran)n(tees)e(that)j(all)f(co)r(de)g
(whic)n(h)h(shares)523 3778 y(a)j(lexical)f(en)n(vironmen)n(t)h(is)g
(in)g(the)h(same)e(comp)r(onen)n(t)h(so)g(that)g(en)n(vironmen)n(t)g
(analysis)523 3877 y(needs)28 b(to)f(op)r(erate)g(only)g(on)g(a)g
(single)g(comp)r(onen)n(t)h(at)f(a)g(time.)648 3977 y([This)j(can)f
(get)h(a)g(bit)g(hairy)-7 b(,)30 b(since)g(co)r(de)g(seemingly)f(reac)n
(hable)g(from)g(the)i(en)n(viron-)523 4076 y(men)n(t)23
b(en)n(try)f(ma)n(y)f(b)r(e)i(reac)n(hable)e(from)h(a)g(NLX)h(in)n(to)f
(that)g(en)n(vironmen)n(t.)35 b(Also,)23 b(function)523
4176 y(references)h(m)n(ust)h(b)r(e)g(considered)e(as)i(links)f
(joining)h(comp)r(onen)n(ts)f(ev)n(en)g(though)h(the)g(\015o)n(w)523
4276 y(graph)h(do)r(esn't)i(represen)n(t)f(these.])648
4375 y(After)35 b(initial)f(DF)n(O)h(determination,)h(comp)r(onen)n(ts)
e(are)g(neither)g(split)h(nor)f(joined.)523 4475 y(The)24
b(standard)f(DF)n(O)g(computation)h(do)r(esn't)f(attempt)i(to)e(split)h
(comp)r(onen)n(ts)g(that)g(ha)n(v)n(e)523 4575 y(b)r(een)k
(disconnected.)1914 5147 y(33)p eop
%%Page: 34 35
34 34 bop 523 1237 a Fg(Chapter)65 b(8)523 1652 y Fi(ICR)77
b(optimize)523 2084 y Fj(Somewhere)26 b(describ)s(e)h(basic)h(ICR)f
(utilities:)38 b(con)m(tin)m(uation-t)m(yp)s(e,)29 b(constan)m(t-)523
2183 y(con)m(tin)m(uation-p,)j(etc.)42 b(P)m(erhaps)33
b(group)e(b)m(y)i(t)m(yp)s(e)f(in)g(ICR)f(description?)648
2283 y Fk(W)-7 b(e)36 b(are)f(conserv)-5 b(ativ)n(e)34
b(ab)r(out)h(doing)g(v)-5 b(ariable-for-v)g(ariable)33
b(substitution)j(in)g(ICR)523 2383 y(optimization,)29
b(since)f(if)i(w)n(e)e(substitute)i(a)e(v)-5 b(ariable)28
b(with)h(a)g(less)f(restrictiv)n(e)g(t)n(yp)r(e,)h(then)523
2482 y(w)n(e)k(ma)n(y)h(prev)n(en)n(t)e(use)i(of)g(a)f("go)r(o)r(d")f
(represen)n(tation)h(within)h(the)g(scop)r(e)g(of)f(the)i(inner)523
2582 y(binding.)648 2682 y(Note)c(that)g(v)-5 b(ariable-v)g(ariable)28
b(substitutions)k(aren't)e(really)g(crucial)g(in)h(ICR,)h(since)523
2781 y(they)37 b(don't)h(create)e(opp)r(ortunities)g(for)h(new)g
(optimizations)g(\(unlik)n(e)g(substitution)g(of)523
2881 y(constan)n(ts)28 b(and)g(functions\).)42 b(A)29
b(spurious)f(v)-5 b(ariable-v)g(ariable)26 b(binding)j(will)g(sho)n(w)f
(up)h(as)523 2980 y(a)d(Mo)n(v)n(e)g(op)r(eration)g(in)h(VMR.)g(This)g
(can)f(b)r(e)h(optimized)g(a)n(w)n(a)n(y)e(b)n(y)h(reac)n
(hing-de\014nitions)523 3080 y(and)j(also)e(b)n(y)i(targeting.)39
b([###)29 b(But)g(actually)-7 b(,)29 b(some)f(optimizers)g(do)h(see)f
(if)h(op)r(erands)523 3180 y(are)e(the)h(same)f(v)-5
b(ariable.])648 3279 y(#|)648 3379 y(The)22 b(IF-IF)g(optimization)h
(can)e(b)r(e)i(mo)r(deled)g(as)f(a)f(v)-5 b(alue)23 b(driv)n(en)e
(optimization,)j(since)523 3479 y(adding)g(a)f(use)h(de\014nitely)h(is)
f(cause)f(for)g(marking)g(the)i(con)n(tin)n(uation)e(for)g
(reoptimization.)523 3578 y([When)41 b(do)g(w)n(e)f(add)g(uses?)76
b(Let)41 b(con)n(v)n(ersion)d(is)j(the)g(only)f(ob)n(vious)f(time.])77
b(I)40 b(guess)523 3678 y(IF-IF)e(con)n(v)n(ersion)d(could)i(also)f(b)r
(e)i(triggered)e(b)n(y)h(a)g(non-immediate)g(use)g(of)g(the)h(test)523
3778 y(con)n(tin)n(uation)33 b(b)r(ecoming)h(immediate,)i(but)f(to)e
(allo)n(w)g(this)i(to)f(happ)r(en)g(w)n(ould)f(require)523
3877 y(Delete-Blo)r(c)n(k)28 b(\(or)f(someb)r(o)r(dy\))h(to)g(mark)g
(blo)r(c)n(k-starts)e(as)i(needing)g(to)g(b)r(e)h(reoptimized)523
3977 y(when)g(a)g(predecessor)e(c)n(hanges.)39 b(It's)29
b(not)g(clear)f(ho)n(w)g(imp)r(ortan)n(t)h(it)g(is)g(that)g(IF-IF)g
(con-)523 4076 y(v)n(ersion)i(happ)r(en)i(under)g(all)f(p)r(ossible)g
(circumstances,)i(as)e(long)g(as)g(it)h(happ)r(ens)f(to)h(the)523
4176 y(ob)n(vious)26 b(cases.)648 4276 y([###)e(It)g(isn't)g(totally)g
(true)g(that)g(co)r(de)f(\015ushing)h(nev)n(er)f(enables)g(other)g(w)n
(orth)n(while)523 4375 y(optimizations.)67 b(Deleting)38
b(a)f(functional)h(reference)f(can)g(cause)g(a)g(function)i(to)e(cease)
523 4475 y(b)r(eing)d(an)g(XEP)-7 b(,)34 b(or)f(ev)n(en)h(trigger)e
(let)j(con)n(v)n(ersion.)54 b(It)35 b(seems)e(w)n(e)h(still)h(w)n(an)n
(t)e(to)h(\015ush)523 4575 y(co)r(de)27 b(during)f(ICR)i(optimize,)f
(but)h(ma)n(yb)r(e)e(w)n(e)h(w)n(an)n(t)f(to)h(in)n(terlea)n(v)n(e)f
(it)h(more)f(in)n(timately)523 4674 y(with)i(the)g(optimization)f
(pass.)648 4774 y(Ref-\015ushing)i(w)n(orks)e(just)j(as)e(w)n(ell)h
(forw)n(ard)f(as)g(bac)n(kw)n(ard,)g(so)g(it)i(could)f(b)r(e)g(done)g
(in)523 4873 y(the)37 b(forw)n(ard)e(pass.)63 b(Call)36
b(\015ushing)h(do)r(esn't)f(w)n(ork)g(so)g(w)n(ell,)i(but)f(w)n(e)g
(could)f(scan)g(the)1914 5147 y(34)p eop
%%Page: 35 36
35 35 bop 523 614 a Fk(blo)r(c)n(k)32 b(bac)n(kw)n(ard)e(lo)r(oking)h
(for)g(an)n(y)h(new)g(\015ushable)g(stu\013)g(if)h(w)n(e)f(\015ushed)g
(a)g(call)f(on)h(the)523 714 y(forw)n(ard)26 b(pass.)648
814 y(When)33 b(w)n(e)g(delete)g(a)g(v)-5 b(ariable)32
b(due)h(to)g(lac)n(k)f(of)h(references,)h(w)n(e)e(lea)n(v)n(e)g(the)h
(v)-5 b(ariable)523 913 y(in)40 b(the)f(lam)n(b)r(da-list)g(so)f(that)i
(p)r(ositional)f(references)f(still)h(w)n(ork.)71 b(The)39
b(initial)g(v)-5 b(alue)523 1013 y(con)n(tin)n(uation)33
b(is)h(\015ushed,)i(though)e(\(replaced)g(with)g(NIL\))h(allo)n(wing)e
(the)h(initial)g(v)-5 b(alue)523 1112 y(for)27 b(to)h(b)r(e)g(deleted)g
(\(mo)r(dulo)f(side-e\013ects.\))648 1212 y(Note)40 b(that)g(w)n(e)g
(can)g(delete)h(v)-5 b(ars)39 b(with)i(no)f(refs)g(ev)n(en)g(when)g
(they)h(ha)n(v)n(e)e(sets.)74 b(I)523 1312 y(guess)32
b(when)h(there)g(are)f(no)h(refs,)h(w)n(e)f(should)f(also)g(\015ush)i
(all)e(sets,)i(allo)n(wing)e(the)h(v)-5 b(alue)523 1411
y(expressions)26 b(to)h(b)r(e)h(\015ushed)g(as)f(w)n(ell.)648
1511 y(Squeeze)i(out)h(single-reference)d(unset)j(let)g(v)-5
b(ariables)29 b(b)n(y)g(c)n(hanging)f(the)j(dest)e(of)h(the)523
1611 y(initial)25 b(v)-5 b(alue)25 b(con)n(tin)n(uation)f(to)h(b)r(e)g
(the)g(no)r(de)g(that)g(receiv)n(es)f(the)h(ref.)36 b(This)25
b(can)f(b)r(e)i(done)523 1710 y(regardless)e(of)j(what)g(the)g(initial)
g(v)-5 b(alue)27 b(form)g(is,)g(since)f(w)n(e)h(aren't)f(actually)g(mo)
n(ving)g(the)523 1810 y(ev)-5 b(aluation.)39 b(Instead,)29
b(w)n(e)f(are)g(in)h(e\013ect)g(using)g(the)g(con)n(tin)n(uation's)e
(lo)r(cations)h(in)h(place)523 1910 y(of)f(the)g(temp)r(orary)e(v)-5
b(ariable.)648 2009 y(Doing)20 b(this)i(is)f(of)g(course,)g(a)g(wild)h
(violation)e(of)h(stac)n(k)f(discipline,)j(since)e(the)g(ref)g(migh)n
(t)523 2109 y(b)r(e)33 b(inside)g(a)f(lo)r(op,)h(etc.)52
b(But)33 b(with)g(the)g(VMR)g(bac)n(k-end,)g(w)n(e)f(only)g(need)h(to)f
(preserv)n(e)523 2208 y(stac)n(k)23 b(discipline)h(for)f(unkno)n(wn-v)
-5 b(alue)23 b(con)n(tin)n(uations;)g(this)h(ICR)g(transformation)e(m)n
(ust)523 2308 y(b)r(e)i(already)d(b)r(e)j(inhibited)g(when)f(the)h
(DEST)f(of)g(the)g(REF)g(is)g(a)g(m)n(ultiple-v)-5 b(alues)23
b(receiv)n(er)523 2408 y(\(EXIT,)i(RETURN)h(or)e(MV-COMBINA)-7
b(TION\),)25 b(since)g(w)n(e)g(m)n(ust)g(preserv)n(e)f(the)h(single-)
523 2507 y(v)-5 b(alue)28 b(seman)n(tics)e(of)i(the)g(let-binding)g(in)
f(this)h(case.)648 2607 y(The)i(REF)h(and)f(v)-5 b(ariable)30
b(m)n(ust)h(b)r(e)g(deleted)g(as)f(part)g(of)g(this)h(op)r(eration,)g
(since)f(the)523 2707 y(ICR)25 b(w)n(ould)g(otherwise)g(b)r(e)g(left)h
(in)g(an)f(inconsisten)n(t)f(state;)i(w)n(e)f(can't)g(w)n(ait)g(for)g
(the)g(REF)523 2806 y(to)31 b(b)r(e)g(deleted)g(due)g(to)g(bing)f(un)n
(used,)i(since)f(w)n(e)f(ha)n(v)n(e)g(grabb)r(ed)g(the)h(arg)e(con)n
(tin)n(uation)523 2906 y(and)e(substituted)i(it)f(in)n(to)f(the)h(old)g
(DEST.)648 3005 y(The)c(big)f(reason)g(for)g(doing)h(this)g
(transformation)e(is)i(that)g(in)h(macros)d(suc)n(h)i(as)f(INCF)523
3105 y(and)38 b(PSETQ,)e(temp)r(oraries)h(are)f(squeezed)i(out,)i(and)e
(the)g(new)g(v)-5 b(alue)37 b(expression)f(is)523 3205
y(ev)-5 b(aluated)25 b(directly)f(to)h(the)g(setter,)g(allo)n(wing)f
(an)n(y)g(result)g(t)n(yp)r(e)h(assertion)e(to)i(b)r(e)g(applied)523
3304 y(to)d(the)g(expression)f(ev)-5 b(aluation.)34 b(Unlik)n(e)22
b(in)h(the)f(case)f(of)h(substitution,)i(there)e(is)f(no)h(p)r(oin)n(t)
523 3404 y(in)27 b(inhibiting)h(this)f(transformation)f(when)h(the)g
(initial)h(v)-5 b(alue)27 b(t)n(yp)r(e)g(is)g(w)n(eak)n(er)e(than)i
(the)523 3504 y(v)-5 b(ariable)27 b(t)n(yp)r(e.)37 b(Instead,)27
b(w)n(e)g(in)n(tersect)h(the)g(asserted)e(t)n(yp)r(e)i(for)f(the)h(old)
f(REF's)h(CONT)523 3603 y(with)20 b(the)g(t)n(yp)r(e)g(assertion)e(on)i
(the)g(initial)g(v)-5 b(alue)19 b(con)n(tin)n(uation.)34
b(Note)20 b(that)g(the)g(v)-5 b(ariable's)523 3703 y(t)n(yp)r(e)28
b(has)f(already)f(b)r(een)i(asserted)e(on)i(the)g(initial-v)-5
b(alue)27 b(con)n(tin)n(uation.)648 3802 y(Of)i(course,)f(this)i
(transformation)d(also)h(simpli\014es)i(the)f(ICR)h(ev)n(en)e(when)i
(it)f(do)r(esn't)523 3902 y(disco)n(v)n(er)20 b(in)n(teresting)h(t)n
(yp)r(e)g(assertions,)h(so)e(it)j(mak)n(es)d(sense)h(to)h(do)f(it)h
(whenev)n(er)f(p)r(ossible.)523 4002 y(This)28 b(reduces)e(the)i
(demands)g(placed)f(on)g(register)g(allo)r(cation,)f(etc.)648
4101 y(|#)648 4201 y(There)36 b(are)g(three)g(dead-co)r(de)g
(\015ushing)h(rules:)54 b(1])37 b(Refs)f(with)i(no)e(DEST)h(ma)n(y)f(b)
r(e)523 4301 y(\015ushed.)g(2])24 b(Kno)n(wn)f(calls)h(with)h(no)f
(dest)g(that)h(are)e(\015ushable)h(ma)n(y)g(b)r(e)h(\015ushed.)36
b(W)-7 b(e)24 b(n)n(ull)523 4400 y(the)g(DEST)g(in)g(all)f(the)h(args.)
34 b(3])23 b(If)h(a)f(lam)n(b)r(da-v)-5 b(ar)22 b(has)h(no)h(refs,)g
(then)g(it)g(ma)n(y)f(b)r(e)h(deleted.)523 4500 y(The)k(\015ushed)g
(argumen)n(t)e(con)n(tin)n(uations)g(ha)n(v)n(e)h(their)g(DEST)h(n)n
(ulled.)648 4599 y(These)23 b(optimizations)g(all)h(enable)f(one)h
(another.)34 b(W)-7 b(e)25 b(scan)e(blo)r(c)n(ks)g(bac)n(kw)n(ard,)f
(lo)r(ok-)523 4699 y(ing)h(for)f(no)r(des)h(whose)f(CONT)g(has)h(no)f
(DEST,)h(then)g(t)n(yp)r(e-dispatc)n(hing)f(o\013)h(of)g(the)g(no)r
(de.)523 4799 y(If)k(w)n(e)f(delete)h(a)f(ref,)g(then)h(w)n(e)f(c)n
(hec)n(k)g(to)g(see)g(if)h(it)g(is)f(a)g(lam)n(b)r(da-v)-5
b(ar)25 b(with)i(no)f(refs.)36 b(When)523 4898 y(w)n(e)27
b(\015ush)g(an)g(argumen)n(t,)f(w)n(e)h(mark)f(the)h(blo)r(c)n(ks)g
(for)f(all)h(uses)g(of)g(the)g(CONT)g(as)g(needing)1914
5147 y(35)p eop
%%Page: 36 37
36 36 bop 523 614 a Fk(to)28 b(b)r(e)g(reoptimized.)523
889 y Ff(8.1)135 b(Goals)46 b(for)f(ICR)g(optimizations)523
1071 y Fk(#|)648 1170 y(When)21 b(an)f(optimization)g(is)h(disabled,)g
(co)r(de)g(should)f(still)h(b)r(e)g(correct)e(and)h(not)h(ridicu-)523
1270 y(lously)27 b(ine\016cien)n(t.)38 b(Phases)27 b(shouldn't)h(b)r(e)
g(made)g(mandatory)e(when)i(they)g(ha)n(v)n(e)f(lots)g(of)523
1370 y(non-required)f(stu\013)i(jammed)g(in)n(to)g(them.)648
1469 y(|#)648 1569 y(This)34 b(pass)g(is)g(optional,)i(but)f(is)g
(desirable)f(if)h(an)n(ything)f(is)g(more)g(imp)r(ortan)n(t)g(than)523
1669 y(compilation)27 b(sp)r(eed.)648 1768 y(This)g(phase)h(is)g(a)f
(grab-bag)f(of)i(optimizations)f(that)h(concern)f(themselv)n(es)h(with)
g(the)523 1868 y(\015o)n(w)f(of)h(v)-5 b(alues)27 b(through)g(the)h(co)
r(de)g(represen)n(tation.)36 b(The)27 b(main)h(things)g(done)f(are)g(t)
n(yp)r(e)523 1967 y(inference,)h(constan)n(t)e(folding)i(and)f(dead)g
(expression)f(elimination.)37 b(This)28 b(phase)f(can)g(b)r(e)523
2067 y(understo)r(o)r(d)c(as)f(a)h(w)n(alk)f(of)h(the)h(expression)e
(tree)h(that)g(propagates)e(assertions)g(do)n(wn)i(the)523
2167 y(tree)j(and)h(propagates)e(deriv)n(ed)g(information)i(up)g(the)g
(tree.)36 b(The)27 b(main)f(complication)g(is)523 2266
y(that)i(there)f(isn't)h(an)n(y)f(expression)f(tree,)i(since)f(ICR)h
(is)f(\015o)n(w-graph)f(based.)648 2366 y(W)-7 b(e)31
b(rep)r(eat)g(this)h(pass)e(un)n(til)i(w)n(e)f(don't)g(disco)n(v)n(er)f
(an)n(ything)g(new.)48 b(This)32 b(is)f(a)g(bit)g(of)523
2466 y(feat,)36 b(since)f(w)n(e)f(dispatc)n(h)g(to)g(arbitrary)f
(functions)i(whic)n(h)f(ma)n(y)g(do)g(arbitrary)e(things,)523
2565 y(making)c(it)i(hard)f(to)g(tell)g(if)h(an)n(ything)e(really)g
(happ)r(ened.)42 b(Ev)n(en)28 b(if)i(w)n(e)f(solv)n(e)f(this)h(prob-)
523 2665 y(lem)d(b)n(y)g(requiring)e(p)r(eople)i(to)g(\015ag)f(when)h
(they)g(c)n(hanged)f(or)g(b)n(y)g(c)n(hec)n(king)g(to)g(see)h(if)g
(they)523 2764 y(c)n(hanged)f(something,)h(there)g(are)g(serious)f
(e\016ciency)h(problems)f(due)i(to)f(massiv)n(e)f(redun-)523
2864 y(dan)n(t)h(computation,)g(since)f(in)h(man)n(y)g(cases)f(the)h
(only)f(w)n(a)n(y)g(to)h(tell)g(if)g(an)n(ything)f(c)n(hanged)523
2964 y(is)j(to)f(recompute)g(the)h(v)-5 b(alue)28 b(and)f(see)g(if)h
(it)g(is)g(di\013eren)n(t)g(from)f(the)h(old)f(one.)648
3063 y(W)-7 b(e)19 b(solv)n(e)g(this)h(problem)f(b)n(y)g(requiring)f
(that)i(optimizations)f(for)g(a)g(no)r(de)h(only)f(dep)r(end)523
3163 y(on)h(the)h(prop)r(erties)e(of)i(the)f(CONT)h(and)f(the)h(con)n
(tin)n(uations)e(that)h(ha)n(v)n(e)g(the)g(no)r(de)h(as)e(their)523
3263 y(DEST.)30 b(If)g(the)h(con)n(tin)n(uations)d(ha)n(v)n(en't)h(c)n
(hanged)g(since)h(the)g(last)g(pass,)f(then)i(w)n(e)e(don't)523
3362 y(attempt)23 b(to)f(re-optimize)g(the)h(no)r(de,)g(since)f(w)n(e)g
(kno)n(w)g(nothing)g(in)n(teresting)f(will)i(happ)r(en.)648
3462 y(W)-7 b(e)24 b(k)n(eep)f(trac)n(k)f(of)h(whic)n(h)h(con)n(tin)n
(uations)e(ha)n(v)n(e)h(c)n(hanged)f(b)n(y)h(a)h(REOPTIMIZE)d(\015ag)
523 3561 y(that)28 b(is)f(set)h(whenev)n(er)f(something)g(ab)r(out)g
(the)h(con)n(tin)n(uation's)f(v)-5 b(alue)27 b(c)n(hanges.)648
3661 y(When)19 b(doing)f(the)i(b)r(ottom)f(up)g(pass,)h(w)n(e)f
(dispatc)n(h)f(to)h(t)n(yp)r(e)g(sp)r(eci\014c)g(co)r(de)g(that)g(kno)n
(ws)523 3761 y(ho)n(w)34 b(to)h(tell)h(when)f(a)f(no)r(de)h(needs)g(to)
g(b)r(e)g(reoptimized)g(and)g(do)r(es)f(the)i(optimization.)523
3860 y(These)h(no)r(de)g(t)n(yp)r(es)g(are)f(sp)r(ecial-cased:)55
b(COMBINA)-7 b(TION,)37 b(IF,)g(RETURN,)h(EXIT,)523 3960
y(SET.)648 4060 y(The)20 b(REOPTIMIZE)f(\015ag)h(in)h(the)h(COMBINA)-7
b(TION-FUN)21 b(is)f(used)h(to)g(detect)g(when)523 4159
y(the)39 b(function)g(information)f(migh)n(t)h(ha)n(v)n(e)e(c)n
(hanged,)j(so)e(that)h(w)n(e)f(kno)n(w)g(when)h(where)523
4259 y(are)h(new)h(assertions)e(that)i(could)g(b)r(e)g(propagated)e
(from)i(the)g(function)g(t)n(yp)r(e)g(to)g(the)523 4358
y(argumen)n(ts.)648 4458 y(When)29 b(w)n(e)g(disco)n(v)n(er)e
(something)i(ab)r(out)g(a)g(leaf,)h(or)e(substitute)i(for)f(leaf,)g(w)n
(e)g(reopti-)523 4558 y(mize)f(the)g(CONT)f(for)g(all)h(the)g(REF)f
(and)g(SET)h(no)r(des.)648 4657 y(W)-7 b(e)30 b(ha)n(v)n(e)e(\015ags)h
(in)h(eac)n(h)f(blo)r(c)n(k)g(that)h(indicate)g(when)g(an)n(y)f(no)r
(des)h(or)f(con)n(tin)n(uations)523 4757 y(in)36 b(the)f(blo)r(c)n(k)g
(need)h(to)f(b)r(e)h(re-optimized,)h(so)d(w)n(e)h(don't)h(ha)n(v)n(e)e
(to)i(scan)e(blo)r(c)n(ks)h(where)523 4857 y(there)27
b(is)h(no)f(c)n(hance)g(of)h(an)n(ything)f(happ)r(ening.)1914
5147 y(36)p eop
%%Page: 37 38
37 37 bop 648 614 a Fk(It)33 b(is)g(imp)r(ortan)n(t)f(for)h
(e\016ciency)g(purp)r(oses)f(that)h(optimizers)f(nev)n(er)g(sa)n(y)g
(that)h(they)523 714 y(did)39 b(something)f(when)h(they)g(didn't,)j
(but)e(this)f(b)n(y)f(itself)h(do)r(esn't)g(guaran)n(tee)e(timely)523
814 y(termination.)49 b(I)32 b(b)r(eliev)n(e)g(that)g(with)g(the)g(t)n
(yp)r(e)g(system)g(implemen)n(ted,)h(t)n(yp)r(e)g(inference)523
913 y(will)24 b(con)n(v)n(erge)e(in)i(\014nite)h(time,)h(but)e(as)g(a)f
(practical)g(matter,)i(it)g(can)e(tak)n(e)h(far)f(to)r(o)h(long)f(to)
523 1013 y(disco)n(v)n(er)j(not)h(m)n(uc)n(h.)37 b(F)-7
b(or)28 b(this)g(reason,)e(ICR)i(optimization)f(is)h(terminated)f
(after)h(three)523 1112 y(consecutiv)n(e)i(passes)f(that)i(don't)g(add)
f(or)g(delete)h(co)r(de.)45 b(This)31 b(premature)f(termination)523
1212 y(only)d(happ)r(ens)h(2)523 1487 y Ff(8.2)135 b(Flo)l(w)46
b(graph)f(simpli\014cation)523 1669 y Fk(Things)36 b(done:)53
b(Delete)37 b(blo)r(c)n(ks)e(with)h(no)g(predecessors.)60
b(Merge)35 b(blo)r(c)n(ks)g(that)h(can)g(b)r(e)523 1768
y(merged.)g(Con)n(v)n(ert)26 b(lo)r(cal)h(calls)g(to)h(Let)g(calls.)36
b(Eliminate)27 b(degenerate)f(IFs.)648 1868 y(W)-7 b(e)38
b(tak)n(e)e(care)h(not)g(to)h(merge)e(blo)r(c)n(ks)h(that)h(are)f(in)g
(di\013eren)n(t)h(functions)g(or)f(ha)n(v)n(e)523 1967
y(di\013eren)n(t)i(clean)n(ups.)70 b(This)39 b(guaran)n(tees)e(that)i
(non-lo)r(cal)f(exits)g(are)g(alw)n(a)n(ys)f(at)i(blo)r(c)n(k)523
2067 y(ends)28 b(and)f(that)h(clean)n(up)f(co)r(de)g(nev)n(er)g(needs)h
(to)f(b)r(e)h(inserted)f(within)i(a)e(blo)r(c)n(k.)648
2167 y(W)-7 b(e)20 b(eliminate)g(IFs)g(with)g(iden)n(tical)g(consequen)
n(t)f(and)g(alternativ)n(e.)33 b(This)20 b(w)n(ould)g(most)523
2266 y(lik)n(ely)27 b(happ)r(en)h(if)g(b)r(oth)g(the)g(consequen)n(t)f
(and)g(alternativ)n(e)g(w)n(ere)f(optimized)i(a)n(w)n(a)n(y)-7
b(.)648 2366 y([Could)28 b(also)f(b)r(e)i(done)f(if)g(the)h(consequen)n
(t)e(and)h(alternativ)n(e)f(w)n(ere)h(di\013eren)n(t)g(blo)r(c)n(ks,)
523 2466 y(but)k(computed)g(the)g(same)g(v)-5 b(alue.)49
b(This)31 b(could)h(b)r(e)g(done)f(b)n(y)h(a)f(sort)g(of)h
(cross-jumping)523 2565 y(optimization)21 b(that)h(lo)r(ok)n(ed)f(at)g
(the)h(predecessors)d(for)j(a)f(blo)r(c)n(k)g(and)g(merged)g(co)r(de)g
(shared)523 2665 y(b)r(et)n(w)n(een)j(predecessors.)34
b(IFs)24 b(with)h(iden)n(tical)f(branc)n(hes)e(w)n(ould)i(ev)n(en)n
(tually)f(b)r(e)i(left)g(with)523 2764 y(nothing)i(in)h(their)g(branc)n
(hes.])648 2864 y(W)-7 b(e)31 b(eliminate)h(IF-IF)g(constructs:)44
b(\(IF)32 b(\(IF)g(A)g(B)f(C\))h(D)g(E\))f(==>)g(\(IF)i(A)e(\(IF)h(B)g
(D)523 2964 y(E\))c(\(IF)g(C)f(D)h(E\)\))648 3063 y(In)h(realit)n(y)-7
b(,)28 b(what)h(w)n(e)g(do)f(is)h(replicate)f(blo)r(c)n(ks)h(con)n
(taining)e(only)i(an)g(IF)g(no)r(de)g(where)523 3163
y(the)d(predicate)g(con)n(tin)n(uation)e(is)i(the)g(blo)r(c)n(k)g
(start.)35 b(W)-7 b(e)27 b(mak)n(e)e(one)g(cop)n(y)g(of)h(the)g(IF)g
(no)r(de)523 3263 y(for)32 b(eac)n(h)h(use,)h(lea)n(ving)d(the)j
(consequen)n(t)e(and)h(alternativ)n(e)e(the)j(same.)52
b(If)33 b(y)n(ou)f(lo)r(ok)h(at)523 3362 y(the)28 b(\015o)n(w)f(graph)g
(represen)n(tation,)f(y)n(ou)h(will)h(see)g(that)g(this)g(is)g(really)f
(the)h(same)f(thing)h(as)523 3462 y(the)g(ab)r(o)n(v)n(e)e(source)h(to)
g(source)f(transformation.)523 3736 y Ff(8.3)135 b(F)-11
b(orw)l(ard)45 b(ICR)h(optimizations)523 3918 y Fk(In)25
b(the)h(forw)n(ard)d(pass,)i(w)n(e)f(scan)h(the)g(co)r(de)g(in)g(forw)n
(ard)f(depth-\014rst)h(order.)34 b(W)-7 b(e)26 b(examine)523
4018 y(eac)n(h)h(call)g(to)h(a)f(kno)n(wn)g(function,)h(and:)648
4200 y Fe(\017)41 b Fk(Eliminate)27 b(an)n(y)g(bindings)g(for)g(un)n
(used)h(v)-5 b(ariables.)648 4366 y Fe(\017)41 b Fk(Do)f(top-do)n(wn)f
(t)n(yp)r(e)h(assertion)e(propagation.)72 b(In)41 b(lo)r(cal)e(calls,)k
(w)n(e)c(propagate)731 4466 y(asserted)26 b(and)h(deriv)n(ed)g(t)n(yp)r
(es)h(b)r(et)n(w)n(een)f(the)h(call)g(and)f(the)h(called)f(lam)n(b)r
(da.)648 4632 y Fe(\017)41 b Fk(Replace)18 b(calls)g(of)h(foldable)f
(functions)h(with)g(constan)n(t)f(argumen)n(ts)f(with)j(the)f(result.)
731 4732 y(W)-7 b(e)29 b(don't)g(ha)n(v)n(e)e(to)i(actually)f(delete)h
(the)g(call)f(no)r(de,)h(since)f(T)-7 b(op-Do)n(wn)28
b(optimize)731 4831 y(will)f(delete)h(it)g(no)n(w)f(that)h(its)g(v)-5
b(alue)27 b(is)h(un)n(used.)1914 5147 y(37)p eop
%%Page: 38 39
38 38 bop 648 614 a Fe(\017)41 b Fk(Run)23 b(an)n(y)f(Optimizer)h(for)g
(the)g(curren)n(t)f(function.)36 b(The)23 b(optimizer)g(do)r(es)f
(arbitrary)731 714 y(transformations)34 b(b)n(y)j(hac)n(king)e
(directly)h(on)h(the)g(IR.)f(This)h(is)f(useful)h(primarily)731
814 y(for)25 b(arithmetic)g(simpli\014cation)g(and)h(similar)f(things)g
(that)h(ma)n(y)f(need)g(to)h(examine)731 913 y(and)f(mo)r(dify)h(calls)
f(other)h(than)f(the)i(curren)n(t)e(call.)35 b(The)26
b(optimizer)g(is)f(resp)r(onsible)731 1013 y(for)g(recording)e(an)n(y)i
(c)n(hanges)f(that)i(it)g(mak)n(es.)35 b(An)27 b(optimizer)e(can)g
(inhibit)h(further)731 1112 y(optimization)i(of)g(the)g(no)r(de)h
(during)f(the)g(curren)n(t)g(pass)f(b)n(y)h(returning)g(true.)38
b(This)731 1212 y(is)27 b(useful)h(when)g(deleting)f(the)h(no)r(de.)648
1376 y Fe(\017)41 b Fk(Do)30 b(ICR)g(transformations,)e(replacing)h(a)g
(global)g(function)i(call)e(with)i(equiv)-5 b(alen)n(t)731
1476 y(inline)28 b(lisp)f(co)r(de.)648 1639 y Fe(\017)41
b Fk(Do)29 b(b)r(ottom-up)h(t)n(yp)r(e)f(propagation/inferencing.)40
b(F)-7 b(or)28 b(some)h(functions)h(suc)n(h)f(as)731
1739 y(Co)r(erce)c(w)n(e)h(will)g(dispatc)n(h)g(to)g(a)g(function)h(to)
f(\014nd)h(the)f(result)g(t)n(yp)r(e.)37 b(The)26 b(Deriv)n(e-)731
1839 y(T)n(yp)r(e)g(function)g(just)h(returns)e(a)h(t)n(yp)r(e)g
(structure,)g(and)g(w)n(e)g(c)n(hec)n(k)f(if)i(it)f(is)g(di\013eren)n
(t)731 1938 y(from)h(the)h(old)f(t)n(yp)r(e)h(in)g(order)e(to)i(see)f
(if)h(there)f(w)n(as)g(a)g(c)n(hange.)648 2102 y Fe(\017)41
b Fk(Eliminate)27 b(IFs)h(with)g(predicates)e(kno)n(wn)h(to)h(b)r(e)g
(true)f(or)g(false.)648 2266 y Fe(\017)41 b Fk(Substitute)32
b(the)h(v)-5 b(alue)31 b(for)g(unset)h(let)g(v)-5 b(ariables)31
b(that)h(are)f(b)r(ound)h(to)f(constan)n(ts,)731 2366
y(unset)c(lam)n(b)r(da)h(v)-5 b(ariables)26 b(or)h(functionals.)648
2529 y Fe(\017)41 b Fk(Propagate)25 b(t)n(yp)r(es)i(from)g(lo)r(cal)g
(call)h(args)e(to)h(v)-5 b(ar)27 b(refs.)648 2707 y(W)-7
b(e)39 b(use)g(t)n(yp)r(e)h(info)g(from)f(the)g(function)h(con)n(tin)n
(uation)f(to)g(\014nd)h(result)f(t)n(yp)r(es)g(for)523
2806 y(functions)28 b(that)g(don't)g(ha)n(v)n(e)e(a)h(deriv)n(e-t)n(yp)
r(e)g(metho)r(d.)648 2906 y(ICR)g(transformation:)648
3005 y(ICR)19 b(transformation)e(do)r(es)h("source)f(to)i(source")e
(transformations)g(on)h(kno)n(wn)h(global)523 3105 y(functions,)k
(taking)d(adv)-5 b(an)n(tage)19 b(of)h(seman)n(tic)h(information)f(suc)
n(h)g(as)g(argumen)n(t)g(t)n(yp)r(es)h(and)523 3205 y(constan)n(t)33
b(argumen)n(ts.)53 b(T)-7 b(ransformation)32 b(is)h(optional,)i(but)f
(should)f(b)r(e)h(done)f(if)h(sp)r(eed)523 3304 y(or)k(space)g(is)g
(more)g(imp)r(ortan)n(t)g(than)h(compilation)f(sp)r(eed.)70
b(T)-7 b(ransformations)36 b(whic)n(h)523 3404 y(increase)26
b(space)h(should)h(pass)e(when)i(space)f(is)h(more)e(imp)r(ortan)n(t)i
(than)f(sp)r(eed.)648 3504 y(A)34 b(transform)g(is)g(actually)g(an)g
(inline)h(function)g(call)g(where)f(the)g(function)i(is)e(com-)523
3603 y(puted)27 b(at)f(compile)g(time.)37 b(The)27 b(transform)e(gets)h
(to)g(p)r(eek)g(at)g(the)h(con)n(tin)n(uations)e(for)h(the)523
3703 y(argumen)n(ts,)g(and)i(computes)f(a)g(function)h(using)f(the)h
(information)f(gained.)36 b(T)-7 b(ransforms)523 3802
y(should)35 b(b)r(e)g(cautious)g(ab)r(out)g(directly)g(using)g(the)g(v)
-5 b(alues)35 b(of)g(constan)n(t)f(con)n(tin)n(uations,)523
3902 y(since)26 b(the)h(compiler)f(m)n(ust)g(preserv)n(e)f(eqlness)h
(of)g(named)g(constan)n(ts,)g(and)g(it)h(will)g(ha)n(v)n(e)e(a)523
4002 y(hard)i(time)h(if)g(transforms)e(go)h(around)g(randomly)f(cop)n
(ying)h(constan)n(ts.)648 4101 y(The)c(lam)n(b)r(da)f(that)h(the)h
(transform)e(computes)g(replaces)g(the)h(original)f(function)h(v)-5
b(ari-)523 4201 y(able)31 b(reference)e(as)i(the)g(function)g(for)f
(the)i(call.)46 b(This)30 b(lets)h(the)g(compiler)g(w)n(orry)d(ab)r
(out)523 4301 y(ev)-5 b(aluating)35 b(eac)n(h)g(argumen)n(t)g(once)g
(in)h(the)h(righ)n(t)e(order.)60 b(W)-7 b(e)36 b(w)n(an)n(t)f(to)h(b)r
(e)g(careful)g(to)523 4400 y(preserv)n(e)c(t)n(yp)r(e)h(information)g
(when)h(w)n(e)f(do)g(a)g(transform,)h(since)f(it)h(ma)n(y)e(b)r(e)i
(less)f(than)523 4500 y(ob)n(vious)26 b(what)i(the)g(transformed)e(co)r
(de)i(do)r(es.)648 4599 y(There)38 b(can)h(b)r(e)h(an)n(y)f(n)n(um)n(b)
r(er)g(of)g(transforms)f(for)h(a)g(function.)72 b(Eac)n(h)39
b(transform)523 4699 y(is)c(asso)r(ciated)f(with)i(a)e(function)i(t)n
(yp)r(e)f(that)h(the)f(call)g(m)n(ust)g(b)r(e)h(compatible)f(with.)60
b(A)523 4799 y(transform)27 b(is)g(only)h(in)n(v)n(ok)n(ed)e(if)i(the)h
(call)e(has)g(the)i(righ)n(t)e(t)n(yp)r(e.)37 b(This)28
b(pro)n(vides)f(a)g(w)n(a)n(y)g(to)523 4898 y(deal)22
b(with)g(the)h(common)e(case)h(of)g(a)f(transform)g(that)i(only)e
(applies)h(when)g(the)h(argumen)n(ts)1914 5147 y(38)p
eop
%%Page: 39 40
39 39 bop 523 614 a Fk(are)29 b(of)i(certain)e(t)n(yp)r(es)h(and)h
(some)e(argumen)n(ts)g(are)g(not)i(sp)r(eci\014ed.)45
b(W)-7 b(e)31 b(alw)n(a)n(ys)d(use)i(the)523 714 y(deriv)n(ed)f(t)n(yp)
r(e)g(when)h(determining)f(whether)g(a)g(transform)f(is)h(applicable.)
42 b(T)n(yp)r(e)29 b(c)n(hec)n(k)523 814 y(is)24 b(resp)r(onsible)f
(for)g(setting)h(the)g(deriv)n(ed)g(t)n(yp)r(e)g(to)f(the)i(in)n
(tersection)e(of)h(the)g(asserted)f(and)523 913 y(deriv)n(ed)k(t)n(yp)r
(es.)648 1013 y(If)19 b(the)h(co)r(de)f(in)h(the)g(expansion)e(has)h
(insu\016cien)n(t)h(explicit)f(or)g(implicit)h(argumen)n(t)e(t)n(yp)r
(e)523 1112 y(c)n(hec)n(king,)26 b(then)j(it)f(should)f(cause)g(c)n
(hec)n(ks)f(to)i(b)r(e)g(generated)e(b)n(y)i(making)e(declarations.)648
1212 y(A)k(transformation)f(ma)n(y)h(decide)g(to)g(pass)g(if)h(it)f(do)
r(esn't)h(lik)n(e)f(what)g(it)h(sees)e(when)i(it)523
1312 y(lo)r(oks)22 b(at)g(the)h(args.)34 b(The)23 b(Giv)n(e-Up)f
(function)h(un)n(winds)g(out)f(of)h(the)g(transform)e(and)i(deals)523
1411 y(with)d(complaining)e(ab)r(out)h(ine\016ciency)g(if)g(sp)r(eed)g
(is)g(more)f(imp)r(ortan)n(t)h(than)g(brevit)n(y)-7 b(.)33
b(The)523 1511 y(format)27 b(args)e(for)i(the)h(message)d(are)i
(argumen)n(ts)f(to)h(Giv)n(e-Up.)36 b(If)28 b(a)f(transform)f(can't)h
(b)r(e)523 1611 y(done,)e(w)n(e)g(just)g(record)f(the)h(message)f
(where)g(ICR)h(\014nalize)g(can)f(\014nd)i(it.)36 b(note.)g(W)-7
b(e)25 b(can't)523 1710 y(complain)i(immediately)-7 b(,)28
b(since)g(it)g(migh)n(t)f(get)g(transformed)g(later)g(on.)523
1985 y Ff(8.4)135 b(Bac)l(kw)l(ard)46 b(ICR)f(optimizations)523
2167 y Fk(In)33 b(the)f(bac)n(kw)n(ard)f(pass,)h(w)n(e)g(scan)g(eac)n
(h)f(blo)r(c)n(k)h(in)h(rev)n(erse)d(order,)i(and)h(eliminate)f(an)n(y)
523 2266 y(e\013ectless)h(no)r(des)g(with)h(un)n(used)f(v)-5
b(alues.)53 b(In)34 b(ICR)f(this)h(is)f(the)g(only)g(w)n(a)n(y)f(that)h
(co)r(de)g(is)523 2366 y(deleted)28 b(other)f(than)h(the)g(elimination)
f(of)h(unreac)n(hable)e(blo)r(c)n(ks.)1914 5147 y(39)p
eop
%%Page: 40 41
40 40 bop 523 1237 a Fg(Chapter)65 b(9)523 1652 y Fi(T)-6
b(yp)6 b(e)77 b(c)-6 b(hec)g(king)523 2095 y Fk([###)33
b(Someho)n(w)e(split)h(this)h(section)e(up)i(in)n(to)e(three)h(parts:)
45 b({)32 b(Conceptual:)45 b(ho)n(w)32 b(w)n(e)523 2195
y(kno)n(w)j(a)f(c)n(hec)n(k)h(is)g(necessary)-7 b(,)36
b(and)f(who)g(is)g(resp)r(onsible)g(for)g(doing)f(c)n(hec)n(ks.)59
b({)35 b(Incre-)523 2294 y(men)n(tal:)55 b(in)n(tersection)37
b(of)g(deriv)n(ed)f(and)g(asserted)g(t)n(yp)r(es,)k(c)n(hec)n(king)35
b(for)i(non-subt)n(yp)r(e)523 2394 y(relationship.)f({)27
b(Chec)n(k)g(generation)f(phase.)37 b(])648 2493 y(W)-7
b(e)19 b(need)h(to)f(do)g(a)g(prett)n(y)g(go)r(o)r(d)g(job)g(of)h
(guessing)e(when)h(a)g(t)n(yp)r(e)h(c)n(hec)n(k)e(will)i(ultimately)523
2593 y(need)f(to)g(b)r(e)g(done.)34 b(Generic)18 b(arithmetic,)j(for)d
(example:)33 b(In)19 b(the)g(absence)f(of)h(declarations,)523
2693 y(w)n(e)31 b(will)h(use)f(use)h(the)g(safe)f(v)-5
b(arian)n(t,)31 b(but)h(if)g(w)n(e)f(don't)h(kno)n(w)f(this,)i(w)n(e)e
(will)h(generate)e(a)523 2792 y(c)n(hec)n(k)j(for)g(NUMBER)h(an)n(yw)n
(a)n(y)-7 b(.)54 b(W)-7 b(e)34 b(need)g(to)g(lo)r(ok)f(at)g(the)i
(fast-safe)e(templates)h(and)523 2892 y(guess)27 b(if)h(an)n(y)f(of)g
(them)h(could)g(apply)-7 b(.)648 2992 y(W)g(e)36 b(compute)h(a)f
(function)h(t)n(yp)r(e)g(from)f(the)h(V)n(OP)e(argumen)n(ts)h(and)g
(assertions)f(on)523 3091 y(those)28 b(argumen)n(ts.)39
b(This)29 b(can)f(b)r(e)h(used)g(with)g(V)-7 b(alid-F)g(unction-Use)29
b(to)f(see)h(whic)n(h)f(tem-)523 3191 y(plates)36 b(do)f(or)g(migh)n(t)
h(apply)g(to)f(a)h(particular)e(call.)62 b(If)36 b(w)n(e)f(guess)g
(that)h(a)g(safe)f(imple-)523 3290 y(men)n(tation)h(will)h(b)r(e)g
(used,)i(then)e(w)n(e)f(mark)f(the)i(con)n(tin)n(uation)f(so)g(as)g(to)
g(force)g(a)g(safe)523 3390 y(implemen)n(tation)27 b(to)f(b)r(e)i(c)n
(hosen.)35 b([This)27 b(will)g(happ)r(en)g(if)g(ICR)g(optimize)g(do)r
(esn't)g(run)g(to)523 3490 y(completion,)c(so)f(the)h(icr)e
(optimization)h(after)g(t)n(yp)r(e)h(c)n(hec)n(k)e(generation)g(can)h
(disco)n(v)n(er)e(new)523 3589 y(t)n(yp)r(e)27 b(information.)36
b(Since)27 b(w)n(e)g(w)n(on't)g(redo)f(t)n(yp)r(e)h(c)n(hec)n(k)f(at)h
(that)g(p)r(oin)n(t,)g(there)g(could)g(b)r(e)523 3689
y(a)g(call)g(that)h(has)f(applicable)g(unsafe)h(templates,)g(but)g
(isn't)g(t)n(yp)r(e)g(c)n(hec)n(k)-5 b(able.])648 3789
y([###)29 b(A)f(b)r(etter)h(and)f(more)g(general)f(optimization)h(of)g
(structure)g(t)n(yp)r(e)h(c)n(hec)n(ks:)37 b(in)523 3888
y(t)n(yp)r(e)20 b(c)n(hec)n(k)f(con)n(v)n(ersion,)g(w)n(e)g(lo)r(ok)g
(at)h(the)g(*original)d(deriv)n(ed*)i(t)n(yp)r(e)h(of)f(the)h(con)n
(tin)n(uation:)523 3988 y(if)26 b(the)g(di\013erence)g(b)r(et)n(w)n
(een)f(the)h(pro)n(v)n(en)e(t)n(yp)r(e)i(and)g(the)g(asserted)e(t)n(yp)
r(e)i(is)f(a)g(simple)h(t)n(yp)r(e)523 4087 y(c)n(hec)n(k,)g(then)h(c)n
(hec)n(k)e(for)h(the)g(negation)g(of)g(the)h(di\013erence.)36
b(e.g.)g(if)27 b(w)n(e)f(w)n(an)n(t)f(a)h(F)n(OO)g(and)523
4187 y(w)n(e)35 b(kno)n(w)f(w)n(e'v)n(e)g(got)g(\(OR)h(F)n(OO)f
(NULL\),)h(then)h(test)f(for)f(\(NOT)i(NULL\).)f(This)g(is)g(a)523
4287 y(v)n(ery)25 b(imp)r(ortan)n(t)i(optimization)f(for)g(link)n(ed)g
(lists)h(of)f(structures,)g(but)h(can)f(also)g(apply)g(in)523
4386 y(other)h(situations.])648 4486 y(If)e(after)g(ICR)g(phases,)g(w)n
(e)g(ha)n(v)n(e)f(a)h(con)n(tin)n(uation)f(with)i(c)n(hec)n(k-t)n(yp)r
(e)e(set)h(in)h(a)f(con)n(text)523 4586 y(where)32 b(it)g(seems)g(lik)n
(ely)g(a)f(c)n(hec)n(k)h(will)g(b)r(e)h(emitted,)h(and)e(the)g(t)n(yp)r
(e)h(is)f(to)r(o)g(hairy)f(to)h(b)r(e)523 4685 y(easily)26
b(c)n(hec)n(k)n(ed)g(\(i.e.)37 b(no)27 b(CHECK-xxx)f(V)n(OP\),)g(then)i
(w)n(e)e(do)h(a)g(transformation)e(on)i(the)523 4785
y(ICR)f(equiv)-5 b(alen)n(t)26 b(to:)36 b(\(...)h(\(the)26
b(hair)g(<fo)r(o>\))g(...\))37 b(==>)25 b(\(...)37 b(\(funcall)27
b(#'\(lam)n(b)r(da)f(\(#:v)-5 b(al\))523 4884 y(\(if)39
b(\(t)n(yp)r(ep)h(#:v)-5 b(al)38 b('hair\))h(#:v)-5 b(al)38
b(\(<fo)r(o>\))i(...\))70 b(This)39 b(w)n(a)n(y)-7 b(,)40
b(w)n(e)e(guaran)n(tee)f(that)i(VMR)1914 5147 y(40)p
eop
%%Page: 41 42
41 41 bop 523 614 a Fk(con)n(v)n(ersion)25 b(nev)n(er)i(has)g(to)g
(emit)i(t)n(yp)r(e)e(c)n(hec)n(ks)g(for)g(hairy)g(t)n(yp)r(es.)648
714 y([Actually)-7 b(,)26 b(w)n(e)f(need)h(to)g(do)g(a)f(MV-bind)h(and)
g(sev)n(eral)e(t)n(yp)r(e)i(c)n(hec)n(ks)f(when)h(there)f(is)h(a)523
814 y(MV)f(con)n(tin)n(uation.)35 b(And)25 b(some)f(v)-5
b(alues)25 b(t)n(yp)r(es)f(are)g(just)h(to)r(o)f(hairy)g(to)g(c)n(hec)n
(k.)35 b(W)-7 b(e)25 b(really)523 913 y(can't)h(c)n(hec)n(k)e(an)n(y)h
(assertion)f(for)h(a)g(non-\014xed)g(n)n(um)n(b)r(er)g(of)h(v)-5
b(alues,)26 b(since)f(there)g(isn't)h(an)n(y)523 1013
y(e\016cien)n(t)h(w)n(a)n(y)f(to)g(bind)i(arbitrary)c(n)n(um)n(b)r(ers)
j(of)f(v)-5 b(alues.)37 b(\(could)27 b(b)r(e)g(done)f(with)i(MV-call)
523 1112 y(of)g(a)f(more-arg)e(function,)j(I)g(guess...\))36
b(])648 1212 y([P)n(erhaps)27 b(only)i(use)g(CHECK-xxx)f(V)n(OPs)g(for)
g(t)n(yp)r(es)h(equiv)-5 b(alen)n(t)29 b(to)g(a)g(pt)n(yp)r(e?)42
b(Ex-)523 1312 y(ceptions)37 b(for)g(CONS)g(and)g(SYMBOL?)h(An)n(yw)n
(a)n(y)-7 b(,)38 b(no)f(p)r(oin)n(t)h(in)f(going)f(to)i(trouble)e(to)
523 1411 y(implemen)n(t)28 b(and)g(emit)g(rarely)e(used)h(CHECK-xxx)f
(v)n(ops.])648 1511 y(One)g(p)r(oten)n(tial)h(lose)g(in)g(con)n(v)n
(erting)e(a)i(t)n(yp)r(e)g(c)n(hec)n(k)f(to)h(explicit)g(conditionals)f
(rather)523 1611 y(than)i(to)g(a)g(CHECK-xxx)f(V)n(OP)g(is)h(that)h
(VMR)f(co)r(de)g(motion)g(optimizations)g(w)n(on't)g(b)r(e)523
1710 y(able)34 b(to)g(do)h(an)n(ything.)56 b(This)35
b(shouldn't)f(b)r(e)h(m)n(uc)n(h)g(of)f(an)g(issue,)i(though,)g(since)e
(t)n(yp)r(e)523 1810 y(constrain)n(t)26 b(propagation)g(has)h(already)f
(done)h(global)g(optimization)g(of)h(t)n(yp)r(e)g(c)n(hec)n(ks.)648
1910 y(This)34 b(phase)g(is)g(optional,)i(but)f(should)f(b)r(e)h(done)g
(if)g(an)n(ything)f(is)g(more)g(imp)r(ortan)n(t)523 2009
y(than)28 b(compile)f(sp)r(eed.)648 2109 y(T)n(yp)r(e)j(c)n(hec)n(k)g
(is)h(resp)r(onsible)f(for)h(reconciling)f(the)h(con)n(tin)n(uation)f
(asserted)g(and)h(de-)523 2208 y(riv)n(ed)22 b(t)n(yp)r(es,)i(emitting)
f(t)n(yp)r(e)g(c)n(hec)n(ks)f(if)h(appropriate.)34 b(If)23
b(the)g(deriv)n(ed)f(t)n(yp)r(e)h(is)g(a)f(subt)n(yp)r(e)523
2308 y(of)28 b(the)g(asserted)e(t)n(yp)r(e,)i(then)g(w)n(e)f(don't)h
(need)g(to)f(do)g(an)n(ything.)648 2408 y(If)c(there)g(is)g(no)g(in)n
(tersection)g(b)r(et)n(w)n(een)g(the)g(asserted)f(and)h(deriv)n(ed)g(t)
n(yp)r(es,)h(then)g(there)523 2507 y(is)e(a)g(manifest)h(t)n(yp)r(e)f
(error.)33 b(W)-7 b(e)23 b(prin)n(t)f(a)g(w)n(arning)f(message,)h
(indicating)g(that)h(something)523 2607 y(is)i(almost)g(surely)f
(wrong.)35 b(This)25 b(will)g(inhibit)h(an)n(y)e(transforms)g(or)g
(generators)f(that)i(care)523 2707 y(ab)r(out)j(their)g(argumen)n(t)f
(t)n(yp)r(es,)g(y)n(et)h(also)f(inhibits)h(further)g(error)e(messages,)
g(since)i(NIL)523 2806 y(is)g(a)f(subt)n(yp)r(e)h(of)f(ev)n(ery)f(t)n
(yp)r(e.)648 2906 y(If)c(the)h(in)n(tersection)e(is)h(not)h(n)n(ull,)g
(then)g(w)n(e)f(set)g(the)h(deriv)n(ed)e(t)n(yp)r(e)h(to)h(the)f(in)n
(tersection)523 3005 y(of)31 b(the)h(asserted)e(and)h(deriv)n(ed)f(t)n
(yp)r(es)h(and)g(set)g(the)h(T)n(yp)r(e-Chec)n(k)e(\015ag)g(in)i(the)f
(con)n(tin)n(u-)523 3105 y(ation.)55 b(W)-7 b(e)34 b(alw)n(a)n(ys)e
(set)i(the)g(\015ag)f(when)h(w)n(e)f(can't)h(pro)n(v)n(e)e(that)i(the)g
(t)n(yp)r(e)g(assertion)e(is)523 3205 y(satis\014ed,)26
b(regardless)f(of)h(whether)h(w)n(e)f(will)h(ultimately)g(actually)f
(emit)h(a)f(t)n(yp)r(e)h(c)n(hec)n(k)e(or)523 3304 y(not.)55
b(This)33 b(is)h(so)f(other)g(phases)g(suc)n(h)g(as)g(t)n(yp)r(e)h
(constrain)n(t)e(propagation)f(can)j(use)f(the)523 3404
y(T)n(yp)r(e-Chec)n(k)i(\015ag)f(to)i(detect)g(an)f(in)n(teresting)g(t)
n(yp)r(e)h(assertion,)g(instead)f(of)h(ha)n(ving)e(to)523
3504 y(duplicate)24 b(m)n(uc)n(h)g(of)h(the)f(w)n(ork)f(in)i(this)f
(phase.)35 b([###)25 b(7)f(extremely)g(random)f(v)-5
b(alues)24 b(for)523 3603 y(CONTINUA)-7 b(TION-TYPE-CHECK.])648
3703 y(T)n(yp)r(e)28 b(c)n(hec)n(ks)f(are)g(generated)g(on)h(the)g
(\015y)g(during)g(VMR)h(con)n(v)n(ersion.)36 b(When)29
b(VMR)523 3802 y(con)n(v)n(ersion)21 b(generates)h(the)i(c)n(hec)n(k,)f
(it)h(prin)n(ts)f(an)g(e\016ciency)h(note)f(if)h(sp)r(eed)f(is)h(imp)r
(ortan)n(t.)523 3902 y(W)-7 b(e)37 b(don't)g(\015ame)f(no)n(w)g(since)g
(t)n(yp)r(e)h(constrain)n(t)e(progpagation)f(ma)n(y)i(decide)g(that)h
(the)523 4002 y(c)n(hec)n(k)27 b(is)g(unnecessary)-7
b(.)36 b([###)28 b(Not)g(done)f(no)n(w,)g(ma)n(yb)r(e)g(nev)n(er.])648
4101 y(In)e(lo)r(cal)g(function)g(call,)h(it)g(is)f(the)g(caller)g
(that)g(is)g(in)h(e\013ect)f(resp)r(onsible)g(for)g(c)n(hec)n(king)523
4201 y(argumen)n(t)j(t)n(yp)r(es.)42 b(This)29 b(happ)r(ens)g(in)h(the)
f(same)g(w)n(a)n(y)f(as)g(an)n(y)h(other)f(t)n(yp)r(e)i(c)n(hec)n(k,)f
(since)523 4301 y(ICR)24 b(optimize)f(propagates)f(the)i(declared)f
(argumen)n(t)f(t)n(yp)r(es)i(to)f(the)h(t)n(yp)r(e)g(assertions)e(for)
523 4400 y(the)28 b(argumen)n(t)f(con)n(tin)n(uations)f(in)i(all)f(the)
h(calls.)648 4500 y(Since)g(the)h(t)n(yp)r(es)f(of)h(argumen)n(ts)e(to)
h(en)n(try)g(p)r(oin)n(ts)g(are)f(unkno)n(wn)h(at)h(compile)f(time,)523
4599 y(w)n(e)d(w)n(an)n(t)f(to)h(do)f(run)n(time)h(c)n(hec)n(ks)f(to)h
(ensure)f(that)i(the)f(incoming)f(argumen)n(ts)g(are)g(of)h(the)523
4699 y(correct)e(t)n(yp)r(e.)36 b(This)24 b(happ)r(ens)g(without)h(an)n
(y)e(sp)r(ecial)h(e\013ort)g(on)g(the)h(part)f(of)g(t)n(yp)r(e)g(c)n
(hec)n(k,)523 4799 y(since)39 b(the)h(XEP)e(is)i(represen)n(ted)e(as)g
(a)h(lo)r(cal)g(call)g(with)g(unkno)n(wn)g(t)n(yp)r(e)h(argumen)n(ts.)
523 4898 y(These)27 b(argumen)n(ts)g(will)g(b)r(e)h(mark)n(ed)f(as)g
(needing)g(to)h(b)r(e)g(c)n(hec)n(k)n(ed.)1914 5147 y(41)p
eop
%%Page: 42 43
42 42 bop 523 1237 a Fg(Chapter)65 b(10)523 1652 y Fi(Constrain)-6
b(t)77 b(propagation)523 2084 y Fk(#|)28 b(New)g(lam)n(b)r(da-v)-5
b(ar-slot:)648 2183 y(constrain)n(ts:)35 b(a)27 b(list)h(of)g(all)f
(the)h(constrain)n(ts)e(on)h(this)h(v)-5 b(ar)27 b(for)g(either)h(X)g
(or)e(Y.)648 2283 y(Ho)n(w)h(to)h(main)n(tain)f(consistency?)38
b(Do)r(es)28 b(it)g(really)f(matter)h(if)g(there)g(are)f(constrain)n
(ts)523 2383 y(with)40 b(deleted)g(v)-5 b(ars)38 b(lying)h(around?)71
b(Note)39 b(that)h(whatev)n(er)e(mec)n(hanism)h(w)n(e)g(use)g(for)523
2482 y(getting)30 b(the)h(constrain)n(ts)d(in)j(the)g(\014rst)f(place)f
(should)h(tend)h(to)f(k)n(eep)g(them)h(up)f(to)g(date.)523
2582 y(Probably)g(w)n(e)i(w)n(ould)g(de\014ne)g(optimizers)f(for)h(the)
h(in)n(teresting)e(relations)g(that)h(lo)r(ok)f(at)523
2682 y(their)d(CONT's)f(dest)h(and)f(annotate)g(it)h(if)g(it)g(is)g(an)
f(IF.)648 2781 y(But)j(ma)n(yb)r(e)f(it)h(is)g(more)f(trouble)h(then)g
(it)g(is)g(w)n(orth)f(trying)g(to)h(build)g(up)g(the)h(set)e(of)523
2881 y(constrain)n(ts)20 b(during)i(ICR)g(optimize)g(\(main)n(taining)f
(consistency)g(in)h(the)g(pro)r(cess\).)34 b(Since)523
2980 y(ICR)c(optimize)f(iterates)g(a)g(bunc)n(h)g(of)h(times)f(b)r
(efore)g(it)h(con)n(v)n(erges,)e(w)n(e)h(w)n(ould)g(b)r(e)g(w)n(ast-)
523 3080 y(ing)35 b(time)g(recomputing)f(the)h(constrain)n(ts,)g(when)g
(nob)r(o)r(dy)g(uses)f(them)h(till)h(constrain)n(t)523
3180 y(propagation)26 b(runs.)648 3279 y(It)35 b(seems)f(that)i(the)f
(only)g(p)r(ossible)f(win)h(is)g(if)h(w)n(e)e(re-ran)g(constrain)n(t)g
(propagation)523 3379 y(\(whic)n(h)29 b(w)n(e)f(migh)n(t)g(w)n(an)n(t)g
(to)h(do.\))40 b(In)28 b(that)h(case,)f(w)n(e)g(w)n(ouldn't)h(ha)n(v)n
(e)e(to)i(recompute)f(all)523 3479 y(the)f(constrain)n(ts)d(from)i
(scratc)n(h.)35 b(But)26 b(it)h(seems)f(that)g(w)n(e)g(could)g(do)f
(this)i(just)f(as)g(w)n(ell)g(b)n(y)523 3578 y(ha)n(ving)g(ICR)i
(optimize)f(in)n(v)-5 b(alidate)27 b(the)h(a\013ected)f(parts)g(of)g
(the)h(constrain)n(t)e(annotation,)523 3678 y(rather)38
b(than)i(trying)e(to)h(k)n(eep)g(them)h(up)g(to)f(date.)72
b(This)39 b(also)f(\014ts)i(b)r(etter)f(with)h(the)523
3778 y(optional)25 b(nature)f(of)h(constrain)n(t)f(propagation,)g
(since)h(w)n(e)g(don't)g(w)n(an)n(t)g(ICR)g(optimize)g(to)523
3877 y(commit)j(to)f(doing)g(a)h(lot)f(of)h(the)g(w)n(ork)e(of)h
(constrain)n(t)g(propagation.)648 3977 y(F)-7 b(or)24
b(example,)i(w)n(e)e(migh)n(t)i(ha)n(v)n(e)e(a)h(p)r(er-blo)r(c)n(k)f
(\015ag)g(indicating)i(that)f(something)g(hap-)523 4076
y(p)r(ened)32 b(in)f(that)g(blo)r(c)n(k)g(since)g(the)g(last)g(time)h
(constrain)n(t)d(propagation)g(ran.)47 b(W)-7 b(e)31
b(migh)n(t)523 4176 y(ha)n(v)n(e)26 b(di\013eren)n(t)h(\015ags)f(to)h
(represen)n(t)f(the)i(distinction)f(b)r(et)n(w)n(een)g(disco)n(v)n
(ering)e(a)i(new)g(t)n(yp)r(e)523 4276 y(assertion)d(inside)i(the)g
(blo)r(c)n(k)f(and)h(disco)n(v)n(ering)d(something)i(new)h(ab)r(out)f
(an)h(if)g(predicate,)523 4375 y(since)h(the)h(latter)g(w)n(ould)f(b)r
(e)h(c)n(heap)r(er)e(to)i(up)r(date)g(and)f(probably)g(is)g(more)g
(common.)648 4475 y(It's)19 b(fairly)f(easy)g(to)h(see)f(ho)n(w)g(w)n
(e)h(can)f(build)i(these)f(sets)f(of)h(restrictions)f(and)g(propagate)
523 4575 y(them)29 b(using)g(\015o)n(w)f(analysis,)g(but)h(actually)f
(using)h(this)g(information)f(seems)g(a)h(bit)g(more)523
4674 y(ad-ho)r(c.)648 4774 y(Probably)c(the)j(biggest)e(thing)h(w)n(e)g
(do)g(is)g(lo)r(ok)g(at)g(all)g(the)g(refs.)37 b(If)27
b(ha)n(v)n(e)f(pro)n(v)n(en)g(that)523 4873 y(the)33
b(v)-5 b(alue)32 b(is)g(EQ)g(\(EQL)f(for)h(a)g(n)n(um)n(b)r(er\))g(to)g
(some)g(other)g(leaf)g(\(constan)n(t)g(or)f(lam)n(b)r(da-)1914
5147 y(42)p eop
%%Page: 43 44
43 43 bop 523 614 a Fk(v)-5 b(ar\),)29 b(then)h(w)n(e)f(can)g
(substitute)h(for)f(that)h(reference.)41 b(In)30 b(some)e(cases,)h(w)n
(e)g(will)h(w)n(an)n(t)f(to)523 714 y(do)24 b(sp)r(ecial)f(stu\013)h
(dep)r(ending)h(on)e(the)h(DEST.)g(If)g(the)h(dest)f(is)f(an)h(IF)g
(and)f(w)n(e)h(pro)n(v)n(ed)e(\(not)523 814 y(n)n(ull\),)34
b(then)f(w)n(e)f(can)f(substitute)i(T.)g(And)g(if)f(the)h(dest)f(is)g
(some)g(relation)f(on)h(the)h(same)523 913 y(t)n(w)n(o)27
b(lam)n(b)r(da-v)-5 b(ars,)27 b(then)h(w)n(e)g(w)n(an)n(t)g(to)g(see)f
(if)i(w)n(e)f(can)f(sho)n(w)g(that)i(relation)e(is)h(de\014nitely)523
1013 y(true)g(or)e(false.)648 1112 y(Otherwise,)31 b(w)n(e)g(can)g(do)g
(our)f(b)r(est)i(to)f(in)n(v)n(ert)f(the)i(set)f(of)g(restrictions)f
(in)n(to)h(a)g(t)n(yp)r(e.)523 1212 y(Since)d(t)n(yp)r(es)g(hold)f
(only)h(constan)n(t)f(info,)h(w)n(e)f(ha)n(v)n(e)g(to)h(ignore)e(an)n
(y)h(constrain)n(ts)f(b)r(et)n(w)n(een)523 1312 y(t)n(w)n(o)i(v)-5
b(ars.)41 b(W)-7 b(e)29 b(can)g(mak)n(e)f(some)g(use)h(of)g(negated)g
(t)n(yp)r(e)g(restrictions)f(b)n(y)h(using)f(TYPE-)523
1411 y(DIFFERENCE)k(to)g(remo)n(v)n(e)f(the)i(t)n(yp)r(e)g(from)f(the)h
(ref)f(t)n(yp)r(es.)51 b(If)33 b(our)f(inferred)g(t)n(yp)r(e)g(is)523
1511 y(as)i(go)r(o)r(d)f(as)h(the)g(t)n(yp)r(e)g(assertion,)h(then)g
(the)f(con)n(tin)n(uation's)f(t)n(yp)r(e-c)n(hec)n(k)g(\015ag)h(will)g
(b)r(e)523 1611 y(cleared.)648 1710 y(It)e(really)f(isn't)h(m)n(uc)n(h)
g(of)f(a)h(problem)f(that)i(w)n(e)e(don't)h(infer)g(union)g(t)n(yp)r
(es)g(on)f(joins,)523 1810 y(since)g(union)g(t)n(yp)r(es)g(are)e
(relativ)n(ely)h(easy)g(to)h(deriv)n(e)f(without)h(using)g(\015o)n(w)f
(information.)523 1910 y(The)i(normal)g(b)r(ottom-up)g(t)n(yp)r(e)h
(inference)f(done)g(b)n(y)g(ICR)h(optimize)f(do)r(es)g(this)h(for)e
(us:)523 2009 y(it)c(annotates)f(ev)n(erything)f(with)i(the)g(union)g
(of)g(all)f(of)h(the)g(things)f(it)h(migh)n(t)g(p)r(ossibly)f(b)r(e.)
523 2109 y(Then)33 b(constrain)n(t)f(propagation)g(subtracts)g(out)h
(those)g(t)n(yp)r(es)g(that)h(can't)f(b)r(e)g(in)h(e\013ect)523
2208 y(b)r(ecause)27 b(of)h(predicates)f(or)f(c)n(hec)n(ks.)648
2308 y(This)k(phase)g(is)g(optional,)h(but)g(is)g(desirable)e(if)i(an)n
(ything)f(is)g(more)g(imp)r(ortan)n(t)g(than)523 2408
y(compilation)39 b(sp)r(eed.)75 b(W)-7 b(e)40 b(use)g(an)g(algorithm)e
(similar)i(to)g(a)n(v)-5 b(ailable)38 b(expressions)h(to)523
2507 y(propagate)e(v)-5 b(ariable)37 b(t)n(yp)r(e)i(information)f(that)
h(has)f(b)r(een)i(disco)n(v)n(ered)c(b)n(y)j(implicit)g(or)523
2607 y(explicit)28 b(t)n(yp)r(e)g(tests,)f(or)g(b)n(y)g(t)n(yp)r(e)h
(inference.)648 2707 y(W)-7 b(e)30 b(m)n(ust)f(do)h(a)f(pre-pass)f
(whic)n(h)i(lo)r(cates)f(set)h(closure)e(v)-5 b(ariables,)29
b(since)h(w)n(e)f(cannot)523 2806 y(do)f(\015o)n(w)f(analysis)g(on)h
(suc)n(h)g(v)-5 b(ariables.)37 b(W)-7 b(e)29 b(set)f(a)g(\015ag)f(in)h
(eac)n(h)g(set)g(closure)f(v)-5 b(ariable)27 b(so)523
2906 y(that)33 b(w)n(e)g(can)f(quic)n(kly)g(tell)h(that)g(it)g(is)g
(losing)f(when)h(w)n(e)f(see)h(it)g(again.)51 b(Although)33
b(this)523 3005 y(ma)n(y)h(seem)g(to)h(b)r(e)g(w)n(astefully)f
(redundan)n(t)g(with)h(en)n(vironmen)n(t)f(analysis,)h(the)f(o)n(v)n
(erlap)523 3105 y(isn't)h(really)e(that)i(great,)g(and)f(the)h(cost)f
(should)g(b)r(e)g(small)h(compared)e(to)h(that)h(of)f(the)523
3205 y(\015o)n(w)25 b(analysis)f(that)i(w)n(e)g(are)e(preparing)g(to)i
(do.)36 b([Or)25 b(w)n(e)g(could)g(pun)n(t)h(on)g(set)f(v)-5
b(ariables...])648 3304 y(A)26 b(t)n(yp)r(e)h(constrain)n(t)e(is)h(a)g
(structure)g(that)g(includes)h(sset-elemen)n(t)f(and)g(has)f(the)i(t)n
(yp)r(e)523 3404 y(and)g(v)-5 b(ariable.)36 b([###)27
b(Also)g(a)f(not-p)h(\015ag)f(indicating)h(whether)g(the)g(sense)g(is)g
(negated.])523 3504 y(Eac)n(h)35 b(v)-5 b(ariable)36
b(has)f(a)h(list)h(of)f(its)h(t)n(yp)r(e)f(constrain)n(ts.)62
b(W)-7 b(e)37 b(create)e(a)h(t)n(yp)r(e)h(constrain)n(t)523
3603 y(when)30 b(w)n(e)f(see)g(a)g(t)n(yp)r(e)h(test)f(or)g(c)n(hec)n
(k.)41 b(If)30 b(there)g(is)f(already)f(a)h(constrain)n(t)f(for)h(the)h
(same)523 3703 y(v)-5 b(ariable)23 b(and)g(t)n(yp)r(e,)i(then)f(w)n(e)f
(just)i(re-use)d(it.)36 b(If)24 b(there)g(is)f(already)f(a)i(w)n(eak)n
(er)d(constrain)n(t,)523 3802 y(then)32 b(w)n(e)f(generate)g(b)r(oth)h
(the)f(w)n(eak)g(constrain)n(ts)f(and)i(the)f(strong)g(constrain)n(t)f
(so)h(that)523 3902 y(the)d(w)n(eak)f(constrain)n(ts)f(w)n(on't)h(b)r
(e)h(lost)f(ev)n(en)g(if)i(the)f(strong)e(one)h(is)h(una)n(v)-5
b(ailable.)648 4002 y(W)e(e)22 b(\014nd)h(all)e(the)i(distinct)g(t)n
(yp)r(e)f(constrain)n(ts)f(for)g(eac)n(h)h(v)-5 b(ariable)21
b(during)g(the)i(pre-pass)523 4101 y(o)n(v)n(er)g(the)i(lam)n(b)r(da)g
(nesting.)36 b(Eac)n(h)24 b(constrain)n(t)f(has)i(a)f(list)h(of)g(the)h
(w)n(eak)n(er)d(constrain)n(ts)g(so)523 4201 y(that)28
b(w)n(e)f(can)g(easily)g(generate)f(them.)648 4301 y(Ev)n(ery)c(blo)r
(c)n(k)i(generates)e(all)i(the)h(t)n(yp)r(e)f(constrain)n(ts)f(in)i
(it,)g(but)g(a)e(constrain)n(t)h(is)g(a)n(v)-5 b(ail-)523
4400 y(able)30 b(in)g(a)f(successor)f(only)i(if)g(it)h(is)f(a)n(v)-5
b(ailable)28 b(in)i(all)g(predecessors.)42 b(W)-7 b(e)30
b(determine)g(the)523 4500 y(actual)e(t)n(yp)r(e)g(constrain)n(t)f(for)
h(a)f(v)-5 b(ariable)28 b(at)g(a)f(blo)r(c)n(k)h(b)n(y)g(in)n
(tersecting)f(all)h(the)h(a)n(v)-5 b(ailable)523 4599
y(t)n(yp)r(e)28 b(constrain)n(ts)e(for)h(that)h(v)-5
b(ariable.)648 4699 y(This)22 b(isn't)h(maximally)f(tense)h(when)g
(there)f(are)g(constrain)n(ts)f(that)i(are)f(not)g(hierarc)n(hi-)523
4799 y(cally)k(related,)g(e.g.)36 b(\(or)26 b(a)g(b\))g(\(or)g(b)h
(c\).)37 b(If)26 b(these)h(constrain)n(ts)e(w)n(ere)g(a)n(v)-5
b(ailable)25 b(from)h(t)n(w)n(o)523 4898 y(predecessors,)e(then)j(w)n
(e)f(could)g(infer)g(that)h(w)n(e)f(ha)n(v)n(e)f(an)h(\(or)g(a)g(b)g
(c\))h(constrain)n(t,)e(but)i(the)1914 5147 y(43)p eop
%%Page: 44 45
44 44 bop 523 614 a Fk(ab)r(o)n(v)n(e)26 b(algorithm)h(w)n(ould)g(come)
g(up)h(with)g(none.)37 b(This)27 b(probably)g(isn't)h(a)f(big)g
(problem.)648 714 y([###)h(Do)g(w)n(e)f(w)n(an)n(t)g(to)g(deal)h(with)g
(\(if)g(\(eq)g(<v)-5 b(ar>)27 b('<fo)r(o>\))h(...\))38
b(indicating)27 b(singleton)523 814 y(mem)n(b)r(er)h(t)n(yp)r(e?])648
913 y(W)-7 b(e)33 b(detect)h(explicit)f(t)n(yp)r(e)h(tests)f(b)n(y)g
(lo)r(oking)f(at)i(t)n(yp)r(e)f(test)h(annotation)e(in)h(the)h(IF)523
1013 y(no)r(de.)g(If)21 b(there)f(is)g(a)g(t)n(yp)r(e)g(c)n(hec)n(k,)h
(the)f(OUT)h(sets)e(are)h(stored)f(in)h(the)h(no)r(de,)h(with)e
(di\013eren)n(t)523 1112 y(sets)37 b(for)g(the)h(consequen)n(t)f(and)g
(alternativ)n(e.)66 b(Implicit)38 b(t)n(yp)r(e)g(c)n(hec)n(ks)e(are)g
(lo)r(cated)i(b)n(y)523 1212 y(\014nding)30 b(Ref)g(no)r(des)g(whose)f
(Con)n(t)h(has)f(the)h(T)n(yp)r(e-Chec)n(k)f(\015ag)g(set.)44
b(W)-7 b(e)30 b(don't)g(actually)523 1312 y(represen)n(t)e(the)i(GEN)g
(sets,)g(w)n(e)f(just)h(initialize)g(OUT)f(to)g(it,)i(and)e(then)h
(form)f(the)h(union)523 1411 y(in)e(place.)648 1511 y(When)j(w)n(e)f
(do)g(the)h(p)r(ost-pass,)g(w)n(e)f(clear)g(the)h(T)n(yp)r(e-Chec)n(k)e
(\015ags)h(in)h(the)g(con)n(tin)n(ua-)523 1611 y(tions)20
b(for)g(Refs)h(when)f(w)n(e)g(disco)n(v)n(er)e(that)j(the)g(a)n(v)-5
b(ailable)19 b(constrain)n(ts)g(satisfy)h(the)h(asserted)523
1710 y(t)n(yp)r(e.)36 b(An)n(y)26 b(explicit)g(uses)f(of)h(t)n(yp)r(ep)
g(should)f(b)r(e)h(cleaned)g(up)f(b)n(y)h(the)g(ICR)g(optimizer)f(for)
523 1810 y(t)n(yp)r(ep.)36 b(W)-7 b(e)25 b(can)f(also)f(set)i(the)g
(deriv)n(ed)e(t)n(yp)r(e)i(for)f(Refs)h(to)f(the)h(in)n(tersection)e
(of)i(the)g(a)n(v)-5 b(ail-)523 1910 y(able)31 b(t)n(yp)r(e)g
(assertions.)45 b(If)31 b(w)n(e)f(disco)n(v)n(er)f(an)n(ything,)j(w)n
(e)e(should)h(consider)f(redoing)f(ICR)523 2009 y(optimization,)e
(since)h(b)r(etter)g(t)n(yp)r(e)g(information)f(migh)n(t)g(enable)g
(more)g(optimizations.)1914 5147 y(44)p eop
%%Page: 45 46
45 45 bop 523 1237 a Fg(Chapter)65 b(11)523 1652 y Fi(ICR)77
b(\014nalize)523 2084 y Fk(This)33 b(pass)f(lo)r(oks)g(for)g(in)n
(teresting)g(things)h(in)g(the)g(ICR)g(so)f(that)i(w)n(e)e(can)g
(forget)g(ab)r(out)523 2183 y(them.)37 b(Used)28 b(and)g(not)f
(de\014ned)h(things)g(are)e(\015amed)i(ab)r(out.)648
2283 y(W)-7 b(e)38 b(p)r(ostp)r(one)g(these)g(c)n(hec)n(ks)f(un)n(til)i
(no)n(w)e(b)r(ecause)h(the)g(ICR)h(optimizations)e(ma)n(y)523
2383 y(disco)n(v)n(er)19 b(errors)f(that)j(are)f(not)h(initially)g(ob)n
(vious.)33 b(W)-7 b(e)21 b(also)f(emit)h(e\016ciency)g(notes)f(ab)r
(out)523 2482 y(optimizations)25 b(that)h(w)n(e)f(w)n(ere)f(unable)i
(to)f(do.)36 b(W)-7 b(e)26 b(can't)f(emit)h(the)g(notes)f(immediately)
-7 b(,)523 2582 y(since)31 b(w)n(e)g(don't)g(kno)n(w)f(for)h(sure)f
(whether)h(a)g(rep)r(eated)g(attempt)g(at)g(optimization)g(will)523
2682 y(succeed.)648 2781 y(W)-7 b(e)27 b(examine)f(all)g(references)g
(to)h(unkno)n(wn)f(global)g(function)h(v)-5 b(ariables)25
b(and)i(up)r(date)523 2881 y(the)33 b(appro)n(ximate)e(t)n(yp)r(e)h
(accordingly)-7 b(.)50 b(W)-7 b(e)33 b(also)e(record)g(the)i(names)f
(of)g(the)h(unkno)n(wn)523 2980 y(functions)27 b(so)e(that)i(they)f
(can)g(b)r(e)g(\015amed)g(ab)r(out)g(if)h(they)g(are)e(nev)n(er)g
(de\014ned.)37 b(Unkno)n(wn)523 3080 y(normal)19 b(v)-5
b(ariables)19 b(are)g(\015amed)h(ab)r(out)g(on)g(the)g(\015y)g(during)g
(ICR)g(con)n(v)n(ersion,)g(so)f(w)n(e)h(ignore)523 3180
y(them)28 b(here.)648 3279 y(W)-7 b(e)34 b(c)n(hec)n(k)e(eac)n(h)h
(newly)g(de\014ned)h(global)f(function)h(for)f(compatibilit)n(y)g(with)
h(previ-)523 3379 y(ously)28 b(recorded)f(t)n(yp)r(e)i(information.)40
b(If)29 b(there)g(is)f(no)h(:de\014ned)g(or)f(:declared)g(t)n(yp)r(e,)h
(then)523 3479 y(w)n(e)34 b(c)n(hec)n(k)g(for)g(compatibilit)n(y)h
(with)g(an)n(y)f(appro)n(ximate)e(function)k(t)n(yp)r(e)f(inferred)f
(from)523 3578 y(previous)27 b(uses.)1914 5147 y(45)p
eop
%%Page: 46 47
46 46 bop 523 1237 a Fg(Chapter)65 b(12)523 1652 y Fi(En)-6
b(vironmen)g(t)76 b(analysis)523 2084 y Fk(#|)648 2183
y(A)36 b(related)f(c)n(hange)g(w)n(ould)h(b)r(e)g(to)g(annotate)g(ICR)g
(with)g(information)g(ab)r(out)g(tail-)523 2283 y(recursion)26
b(relations.)36 b(What)28 b(w)n(e)f(w)n(ould)h(do)f(is)h(add)f(a)g
(slot)h(to)f(the)h(no)r(de)g(structure)f(that)523 2383
y(p)r(oin)n(ts)34 b(to)h(the)f(corresp)r(onding)f(T)-7
b(ail-Info)34 b(when)g(a)g(no)r(de)h(is)f(in)h(a)f(TR)g(p)r(osition.)57
b(This)523 2482 y(annotation)30 b(w)n(ould)h(b)r(e)g(made)g(in)g(a)g
(\014nal)f(ICR)i(pass)e(that)h(runs)g(after)f(clean)n(up)h(co)r(de)f
(is)523 2582 y(generated)36 b(\(part)i(of)f(en)n(vironmen)n(t)g
(analysis\).)66 b(When)38 b(true,)i(the)e(no)r(de)g(is)f(in)h(a)f(true)
523 2682 y(TR)32 b(p)r(osition)f(\(mo)r(dulo)h(return-con)n(v)n(en)n
(tion)d(incompatibilit)n(y\).)48 b(When)32 b(w)n(e)f(determine)523
2781 y(return)20 b(con)n(v)n(en)n(tions,)h(w)n(e)f(n)n(ull)h(out)f(the)
i(tail-p)e(slots)g(in)h(XEP)f(calls)g(or)g(kno)n(wn)g(calls)g(where)523
2881 y(w)n(e)27 b(decided)h(not)g(to)f(preserv)n(e)f(tail-recursion.)
648 2980 y(In)d(this)h(phase,)f(w)n(e)g(also)f(c)n(hec)n(k)h(for)g(c)n
(hanges)f(in)h(the)h(dynamic)f(binding)g(en)n(vironmen)n(t)523
3080 y(that)35 b(require)f(clean)n(up)g(co)r(de)h(to)g(b)r(e)g
(generated.)57 b(W)-7 b(e)36 b(just)f(c)n(hec)n(k)f(for)g(c)n(hanges)g
(in)h(the)523 3180 y(Con)n(tin)n(uation-Clean)n(up)g(on)h(lo)r(cal)f
(con)n(trol)g(transfers.)62 b(If)36 b(it)h(c)n(hanges)e(from)h(an)g
(inner)523 3279 y(dynamic)25 b(con)n(text)f(to)h(an)g(outer)f(one)h
(that)g(is)g(in)g(the)h(same)e(en)n(vironmen)n(t,)h(then)g(w)n(e)g
(emit)523 3379 y(co)r(de)k(to)g(clean)g(up)h(the)f(dynamic)h(bindings)f
(b)r(et)n(w)n(een)g(the)h(old)f(and)g(new)g(con)n(tin)n(uation.)523
3479 y(W)-7 b(e)32 b(represen)n(t)e(the)i(result)f(of)h(clean)n(up)f
(detection)g(to)h(the)g(bac)n(k)e(end)i(b)n(y)f(in)n(terp)r(osing)g(a)
523 3578 y(new)h(blo)r(c)n(k)g(con)n(taining)g(a)g(call)g(to)g(a)g
(funn)n(y)h(function.)51 b(Lo)r(cal)32 b(exits)g(from)g(CA)-7
b(TCH)33 b(or)523 3678 y(UNWIND-PR)n(OTECT)27 b(are)g(detected)h(in)g
(the)g(same)f(w)n(a)n(y)-7 b(.)648 3778 y(|#)648 3877
y(The)26 b(primary)f(activit)n(y)g(in)h(en)n(vironmen)n(t)f(analysis)g
(is)h(the)h(annotation)e(of)h(ICR)g(with)523 3977 y(en)n(vironmen)n(t)
20 b(structures)g(describing)g(where)h(v)-5 b(ariables)20
b(are)g(allo)r(cated)g(and)h(what)g(v)-5 b(alues)523
4076 y(the)28 b(en)n(vironmen)n(t)f(closes)f(o)n(v)n(er.)648
4176 y(Eac)n(h)34 b(lam)n(b)r(da)h(p)r(oin)n(ts)h(to)f(the)h(en)n
(vironmen)n(t)e(where)i(its)f(v)-5 b(ariables)35 b(are)f(allo)r(cated,)
523 4276 y(and)e(the)g(en)n(vironmen)n(ts)e(p)r(oin)n(t)i(bac)n(k.)49
b(W)-7 b(e)32 b(alw)n(a)n(ys)e(allo)r(cate)g(the)j(en)n(vironmen)n(t)d
(at)i(the)523 4375 y(Bind)h(no)r(de)g(for)f(the)h(sole)g(non-let)f(lam)
n(b)r(da)h(in)g(the)g(en)n(vironmen)n(t,)g(so)f(there)h(is)g(a)f(close)
523 4475 y(relationship)21 b(b)r(et)n(w)n(een)h(en)n(vironmen)n(ts)f
(and)h(functions.)35 b(Eac)n(h)21 b("real)g(function")h(\(i.e.)35
b(not)523 4575 y(a)27 b(LET\))h(has)f(a)g(corresp)r(onding)e(en)n
(vironmen)n(t.)648 4674 y(W)-7 b(e)40 b(attempt)g(to)g(share)e(the)i
(same)f(en)n(vironmen)n(t)g(among)g(as)g(man)n(y)g(lam)n(b)r(das)g(as)
523 4774 y(p)r(ossible)e(so)g(that)h(unnecessary)e(en)n(vironmen)n(t)h
(manipulation)h(is)f(not)h(done.)67 b(During)523 4873
y(en)n(vironmen)n(t)23 b(analysis)g(the)h(only)g(optimization)g(of)g
(this)g(sort)f(is)h(realizing)f(that)i(a)e(Let)i(\(a)1914
5147 y(46)p eop
%%Page: 47 48
47 47 bop 523 614 a Fk(lam)n(b)r(da)29 b(with)h(no)f(Return)h(no)r
(de\))f(cannot)g(need)h(its)f(o)n(wn)g(en)n(vironmen)n(t,)g(since)g
(there)g(is)523 714 y(no)e(w)n(a)n(y)f(that)h(it)h(can)e(return)h(and)g
(disco)n(v)n(er)e(that)i(its)h(old)f(v)-5 b(alues)26
b(ha)n(v)n(e)g(b)r(een)i(clobb)r(ered.)648 814 y(When)34
b(the)g(function)g(is)g(called,)h(v)-5 b(alues)33 b(from)h(other)f(en)n
(vironmen)n(ts)g(ma)n(y)g(need)h(to)523 913 y(b)r(e)f(made)g(a)n(v)-5
b(ailable)32 b(in)h(the)g(function's)g(en)n(vironmen)n(t.)52
b(These)32 b(v)-5 b(alues)33 b(are)f(said)g(to)h(b)r(e)523
1013 y("closed)26 b(o)n(v)n(er".)648 1112 y(Ev)n(en)h(if)j(a)e(v)-5
b(alue)29 b(is)g(not)f(referenced)g(in)h(a)g(giv)n(en)f(en)n(vironmen)n
(t,)g(it)h(ma)n(y)f(need)h(to)g(b)r(e)523 1212 y(closed)k(o)n(v)n(er)g
(in)h(that)g(en)n(vironmen)n(t)f(so)h(that)g(it)g(can)g(b)r(e)g(passed)
g(to)g(a)f(called)h(function)523 1312 y(that)f(do)r(es)g(reference)f
(the)h(v)-5 b(alue.)52 b(When)33 b(w)n(e)g(disco)n(v)n(er)e(that)i(a)f
(v)-5 b(alue)33 b(m)n(ust)g(b)r(e)g(closed)523 1411 y(o)n(v)n(er)27
b(b)n(y)h(a)g(function,)i(w)n(e)e(m)n(ust)h(close)e(o)n(v)n(er)g(the)i
(v)-5 b(alue)29 b(in)f(all)h(the)g(en)n(vironmen)n(ts)e(where)523
1511 y(that)33 b(function)g(is)g(referenced.)51 b(This)33
b(applies)f(to)h(all)f(references,)h(not)g(just)g(lo)r(cal)f(calls,)523
1611 y(since)27 b(at)f(other)g(references)g(w)n(e)h(m)n(ust)f(ha)n(v)n
(e)g(the)h(v)-5 b(alues)27 b(on)f(hand)h(so)f(that)h(w)n(e)f(can)h
(build)523 1710 y(a)k(closure.)49 b(This)32 b(propagation)d(m)n(ust)j
(b)r(e)h(applied)e(recursiv)n(ely)-7 b(,)32 b(since)f(the)i(v)-5
b(alue)31 b(m)n(ust)523 1810 y(also)c(b)r(e)h(a)n(v)-5
b(ailable)26 b(in)i(*those*)e(functions')i(callers.)648
1910 y(If)23 b(a)g(closure)g(reference)f(is)h(kno)n(wn)g(to)g(b)r(e)h
("safe")e(\(not)i(an)f(up)n(w)n(ard)f(funarg\),)i(then)g(the)523
2009 y(closure)i(structure)i(ma)n(y)e(b)r(e)i(allo)r(cated)f(on)h(the)g
(stac)n(k.)648 2109 y(Closure)k(analysis)h(deals)g(only)g(with)i
(closures)d(o)n(v)n(er)g(v)-5 b(alues,)35 b(while)f(Common)f(Lisp)523
2208 y(requires)e(closures)f(o)n(v)n(er)h(v)-5 b(ariables.)49
b(The)32 b(di\013erence)g(only)f(b)r(ecomes)h(signi\014can)n(t)f(when)
523 2308 y(v)-5 b(ariables)35 b(are)h(set.)63 b(If)37
b(a)f(v)-5 b(ariable)36 b(is)g(not)h(set,)i(then)e(w)n(e)f(can)g
(freely)g(mak)n(e)g(copies)f(of)523 2408 y(it)g(without)f(k)n(eeping)g
(trac)n(k)f(of)h(where)g(they)g(are.)56 b(When)35 b(a)f(v)-5
b(ariable)33 b(is)h(set,)i(w)n(e)e(m)n(ust)523 2507 y(main)n(tain)i(a)f
(single)g(v)-5 b(alue)36 b(cell,)i(or)d(at)h(least)g(the)g(illusion)g
(thereof.)61 b(W)-7 b(e)36 b(ac)n(hiev)n(e)f(this)523
2607 y(b)n(y)29 b(creating)f(a)h(heap-allo)r(cated)e("v)-5
b(alue)29 b(cell")f(structure)h(for)g(eac)n(h)f(set)h(v)-5
b(ariable)28 b(that)h(is)523 2707 y(closed)f(o)n(v)n(er.)38
b(The)29 b(p)r(oin)n(ter)f(to)h(this)g(v)-5 b(alue)28
b(cell)h(is)g(passed)e(around)h(as)g(the)h("v)-5 b(alue")28
b(cor-)523 2806 y(resp)r(onding)f(to)i(that)f(v)-5 b(ariable.)38
b(References)28 b(to)g(the)g(v)-5 b(ariable)28 b(m)n(ust)g(explicitly)g
(indirect)523 2906 y(through)f(the)h(v)-5 b(alue)27 b(cell.)648
3005 y(When)34 b(w)n(e)f(are)g(scanning)g(o)n(v)n(er)e(the)j(lam)n(b)r
(das)f(in)h(the)g(comp)r(onen)n(t,)h(w)n(e)f(also)e(c)n(hec)n(k)523
3105 y(for)27 b(b)r(ound)h(but)g(not)g(referenced)f(v)-5
b(ariables.)648 3205 y(En)n(vironmen)n(t)38 b(analysis)g(emits)i(clean)
n(up)f(co)r(de)g(for)g(lo)r(cal)g(exits)h(and)f(mark)n(ers)f(for)523
3304 y(non-lo)r(cal)26 b(exits.)648 3404 y(A)31 b(non-lo)r(cal)f(exit)h
(is)g(a)g(con)n(trol)e(transfer)i(from)f(one)h(en)n(vironmen)n(t)f(to)h
(another.)46 b(In)523 3504 y(a)38 b(non-lo)r(cal)f(exit,)j(w)n(e)e(m)n
(ust)g(close)f(o)n(v)n(er)g(the)h(con)n(tin)n(uation)f(that)h(w)n(e)g
(transfer)f(to)h(so)523 3603 y(that)31 b(the)g(exiting)f(function)h
(can)g(\014nd)g(its)f(w)n(a)n(y)g(bac)n(k.)45 b(W)-7
b(e)30 b(indicate)h(the)g(need)g(to)f(close)523 3703
y(a)38 b(con)n(tin)n(uation)f(b)n(y)h(placing)g(the)h(con)n(tin)n
(uation)e(structure)h(in)g(the)h(closure)e(and)h(also)523
3802 y(pushing)h(it)h(on)f(a)g(list)g(in)h(the)f(en)n(vironmen)n(t)g
(structure)g(for)f(the)i(target)e(of)i(the)f(exit.)523
3902 y([###)f(T)-7 b(o)37 b(b)r(e)h(safe,)i(w)n(e)d(w)n(ould)g(treat)g
(the)h(con)n(tin)n(uation)f(as)f(a)i(set)f(closure)f(v)-5
b(ariable)523 4002 y(so)36 b(that)h(w)n(e)g(could)f(in)n(v)-5
b(alidate)37 b(it)g(when)g(w)n(e)f(lea)n(v)n(e)g(the)h(dynamic)f(exten)
n(t)h(of)g(the)g(exit)523 4101 y(p)r(oin)n(t.)74 b(T)-7
b(ransferring)38 b(con)n(trol)h(to)h(a)f(meaningless)g(stac)n(k)g(p)r
(oin)n(ter)h(w)n(ould)f(b)r(e)i(apt)f(to)523 4201 y(cause)27
b(horrible)f(death.])648 4301 y(Eac)n(h)g(lo)r(cal)i(con)n(trol)f
(transfer)g(ma)n(y)g(require)g(dynamic)h(state)f(suc)n(h)h(as)f(sp)r
(ecial)h(bind-)523 4400 y(ings)k(to)g(b)r(e)h(undone.)52
b(W)-7 b(e)33 b(represen)n(t)e(clean)n(up)h(actions)g(b)n(y)g(funn)n(y)
h(function)g(calls)f(in)h(a)523 4500 y(new)28 b(blo)r(c)n(k)f(link)n
(ed)g(in)h(as)f(an)g(implicit)i(MV-PR)n(OG1.)1914 5147
y(47)p eop
%%Page: 48 49
48 48 bop 523 1237 a Fg(Chapter)65 b(13)523 1652 y Fi(Virtual)77
b(Mac)-6 b(hine)523 1901 y(Represen)g(tation)523 2150
y(In)g(tro)6 b(duction)1914 5147 y Fk(48)p eop
%%Page: 49 50
49 49 bop 523 1237 a Fg(Chapter)65 b(14)523 1652 y Fi(Global)76
b(TN)h(assignmen)-6 b(t)523 2095 y Fk([###)34 b(Rename)g(this)g(phase)f
(so)g(as)g(not)h(to)g(b)r(e)g(confused)f(with)i(the)f(lo)r(cal/global)d
(TN)523 2195 y(represen)n(tation.])648 2294 y(The)19
b(basic)f(mec)n(hanism)g(for)h(closing)f(o)n(v)n(er)f(v)-5
b(alues)18 b(is)h(to)g(pass)f(the)h(v)-5 b(alues)19 b(as)f(additional)
523 2394 y(implicit)26 b(argumen)n(ts)e(in)h(the)g(function)h(call.)35
b(This)25 b(tec)n(hnique)g(is)g(only)g(applicable)f(when:)523
2493 y({)d(the)g(calling)g(function)h(kno)n(ws)e(whic)n(h)h(v)-5
b(alues)21 b(the)h(called)e(function)i(w)n(an)n(ts)f(to)g(close)f(o)n
(v)n(er,)523 2593 y(and)27 b({)h(the)g(v)-5 b(alues)27
b(to)g(b)r(e)h(closed)f(o)n(v)n(er)f(are)h(a)n(v)-5 b(ailable)26
b(in)i(the)g(calling)f(en)n(vironmen)n(t.)648 2693 y(The)g(\014rst)g
(condition)h(is)f(alw)n(a)n(ys)e(true)j(of)f(lo)r(cal)g(function)h
(calls.)36 b(En)n(vironmen)n(t)26 b(anal-)523 2792 y(ysis)j(can)h
(guaran)n(tee)e(that)i(the)g(second)f(condition)h(holds)g(b)n(y)f
(closing)g(o)n(v)n(er)f(an)n(y)h(needed)523 2892 y(v)-5
b(alues)27 b(in)h(the)g(calling)f(en)n(vironmen)n(t.)648
2992 y(If)41 b(the)h(function)f(that)h(closes)e(o)n(v)n(er)f(v)-5
b(alues)41 b(ma)n(y)f(b)r(e)h(called)g(in)h(an)e(en)n(vironmen)n(t)523
3091 y(where)26 b(the)g(closed)g(o)n(v)n(er)e(v)-5 b(alues)26
b(are)f(not)h(a)n(v)-5 b(ailable,)26 b(then)g(w)n(e)g(m)n(ust)g(store)g
(the)g(v)-5 b(alues)26 b(in)523 3191 y(a)21 b("closure")f(so)h(that)h
(they)g(are)f(alw)n(a)n(ys)f(accessible.)34 b(Closures)20
b(are)h(called)h(using)f(the)h("full)523 3290 y(call")e(con)n(v)n(en)n
(tion.)33 b(When)22 b(a)f(closure)f(is)h(called,)h(con)n(trol)e(is)h
(transferred)e(to)i(the)h("external)523 3390 y(en)n(try)29
b(p)r(oin)n(t",)h(whic)n(h)f(fetc)n(hes)h(the)g(v)-5
b(alues)29 b(out)g(of)h(the)g(closure)e(and)i(then)g(do)r(es)f(a)g(lo)r
(cal)523 3490 y(call)e(to)h(the)g(real)e(function,)j(passing)d(the)i
(closure)f(v)-5 b(alues)27 b(as)g(implicit)h(argumen)n(ts.)648
3589 y(In)j(this)g(sc)n(heme)g(there)g(is)g(no)g(suc)n(h)g(thing)g(as)f
(a)h("heap)g(closure)e(v)-5 b(ariable")30 b(in)h(co)r(de,)523
3689 y(since)26 b(the)h(closure)e(v)-5 b(alues)26 b(are)g(mo)n(v)n(ed)f
(in)n(to)h(TNs)h(b)n(y)f(the)h(external)e(en)n(try)h(p)r(oin)n(t.)37
b(There)523 3789 y(is)30 b(some)f(p)r(oten)n(tial)h(for)f(p)r
(essimization)g(here,)h(since)g(w)n(e)g(ma)n(y)f(end)h(up)g(mo)n(ving)f
(the)h(v)-5 b(al-)523 3888 y(ues)27 b(from)g(the)h(closure)e(in)n(to)h
(a)g(stac)n(k)g(memory)f(lo)r(cation,)h(but)h(the)g(adv)-5
b(an)n(tages)25 b(are)h(also)523 3988 y(substan)n(tial.)35
b(Simplicit)n(y)25 b(is)g(gained)f(b)n(y)g(alw)n(a)n(ys)f(represen)n
(ting)g(closure)h(v)-5 b(alues)24 b(the)h(same)523 4087
y(w)n(a)n(y)-7 b(,)35 b(and)g(functions)f(with)i(closure)d(references)g
(ma)n(y)h(still)h(b)r(e)g(called)f(lo)r(cally)g(without)523
4187 y(allo)r(cating)23 b(a)h(closure.)35 b(All)25 b(the)g(TN)g(based)f
(VMR)h(optimizations)e(will)i(apply)f(to)h(closure)523
4287 y(v)-5 b(ariables,)33 b(since)g(closure)g(v)-5 b(ariables)31
b(are)i(represen)n(ted)f(in)h(the)h(same)e(w)n(a)n(y)g(as)h(all)g
(other)523 4386 y(v)-5 b(ariables)26 b(in)i(VMR.)g(Closure)f(v)-5
b(alues)27 b(will)h(b)r(e)g(allo)r(cated)e(in)i(registers)e(where)h
(appropri-)523 4486 y(ate.)648 4586 y(Closures)d(are)h(created)h(at)g
(the)g(p)r(oin)n(t)g(where)g(the)g(function)h(is)f(referenced,)f
(eliminat-)523 4685 y(ing)35 b(the)g(need)h(to)f(b)r(e)g(able)g(to)g
(close)g(o)n(v)n(er)e(closures.)58 b(This)35 b(lazy)g(creation)f(of)h
(closures)523 4785 y(has)27 b(the)h(additional)f(adv)-5
b(an)n(tage)25 b(that)j(when)g(a)f(closure)f(reference)g(is)i
(conditionally)e(not)523 4884 y(done,)38 b(then)f(the)f(closure)f
(consing)h(will)g(nev)n(er)f(b)r(e)i(done)f(at)g(all.)62
b(The)36 b(corresp)r(onding)1914 5147 y(49)p eop
%%Page: 50 51
50 50 bop 523 614 a Fk(disadv)-5 b(an)n(tage)35 b(is)h(that)g(a)g
(closure)f(o)n(v)n(er)f(the)j(same)f(v)-5 b(alues)35
b(ma)n(y)h(b)r(e)g(created)g(m)n(ultiple)523 714 y(times)28
b(if)h(there)f(are)f(m)n(ultiple)i(references.)38 b(Note)28
b(ho)n(w)n(ev)n(er,)e(that)j(VMR)f(lo)r(op)g(and)g(com-)523
814 y(mon)k(sub)r(expression)e(optimizations)i(can)f(eliminate)h
(redundan)n(t)g(closure)e(consing.)49 b(In)523 913 y(an)n(y)38
b(case,)k(m)n(ultiple)d(closures)f(o)n(v)n(er)f(the)j(same)e(v)-5
b(ariables)38 b(do)r(esn't)i(seem)f(to)g(b)r(e)g(that)523
1013 y(common.)648 1112 y(#|)27 b(Ha)n(ving)e(the)i(T)-7
b(ail-Info)27 b(w)n(ould)f(also)f(mak)n(e)h(return)g(con)n(v)n(en)n
(tion)g(determination)523 1212 y(trivial.)47 b(W)-7 b(e)31
b(could)g(just)h(lo)r(ok)e(at)h(the)g(t)n(yp)r(e,)i(c)n(hec)n(king)c
(to)i(see)g(if)h(it)f(represen)n(ts)f(a)g(\014xed)523
1312 y(n)n(um)n(b)r(er)f(of)g(v)-5 b(alues.)41 b(T)-7
b(o)29 b(determine)g(if)g(the)h(standard)e(return)h(con)n(v)n(en)n
(tion)e(is)i(necessary)523 1411 y(to)f(preserv)n(e)e(tail-recursion,)g
(w)n(e)i(just)g(iterate)g(o)n(v)n(er)e(the)i(equiv)-5
b(alen)n(t)28 b(functions,)g(lo)r(oking)523 1511 y(for)f(XEPs)g(and)g
(uses)g(in)h(full)h(calls.)36 b(|#)648 1611 y(The)d(Global)g(TN)h
(Assignmen)n(t)f(pass)f(\(GTN\))j(can)e(b)r(e)h(considered)e(a)h(p)r
(ost-pass)f(to)523 1710 y(en)n(vironmen)n(t)20 b(analysis.)34
b(This)21 b(phase)f(assigns)g(the)h(TNs)g(used)g(to)g(hold)g(lo)r(cal)g
(lexical)f(v)-5 b(ari-)523 1810 y(ables)31 b(and)h(pass)f(argumen)n(ts)
g(and)h(return)f(v)-5 b(alues)32 b(and)g(determines)g(the)g(v)-5
b(alue-passing)523 1910 y(strategy)26 b(used)i(in)g(lo)r(cal)f(calls.)
648 2009 y(T)-7 b(o)27 b(assign)f(return)h(lo)r(cations,)g(w)n(e)g(lo)r
(ok)g(at)h(the)g(function's)g(tail-set.)648 2109 y(If)i(the)g(result)g
(con)n(tin)n(uation)f(for)g(an)h(en)n(try)f(p)r(oin)n(t)h(is)g(used)f
(as)h(the)g(con)n(tin)n(uation)f(for)523 2208 y(a)38
b(full)i(call,)h(then)f(w)n(e)e(ma)n(y)g(need)h(to)g(constrain)f(the)h
(con)n(tin)n(uation's)f(v)-5 b(alues)38 b(passing)523
2308 y(con)n(v)n(en)n(tion)30 b(to)h(the)g(standard)g(one.)47
b(This)31 b(is)g(not)h(necessary)d(when)j(the)f(call)g(is)g(kno)n(wn)
523 2408 y(not)d(to)f(b)r(e)h(part)f(of)h(a)f(tail-recursiv)n(e)e(lo)r
(op)j(\(due)g(to)f(b)r(eing)h(a)f(kno)n(wn)g(function\).)648
2507 y(Once)36 b(w)n(e)g(ha)n(v)n(e)g(\014gured)g(out)h(where)f(w)n(e)g
(m)n(ust)h(use)g(the)g(standard)f(v)-5 b(alue)36 b(passing)523
2607 y(strategy)-7 b(,)20 b(w)n(e)f(can)f(use)h(a)g(more)g(\015exible)g
(strategy)f(to)h(determine)g(the)h(return)f(lo)r(cations)f(for)523
2707 y(lo)r(cal)28 b(functions.)38 b(W)-7 b(e)28 b(determine)h(the)f(p)
r(ossible)g(n)n(um)n(b)r(ers)f(of)h(return)g(v)-5 b(alues)27
b(from)h(eac)n(h)523 2806 y(function)d(b)n(y)f(examining)f(the)i(uses)e
(of)i(all)e(the)i(result)f(con)n(tin)n(uations)f(in)h(the)h(equiv)-5
b(alence)523 2906 y(class)27 b(of)g(the)h(result)g(con)n(tin)n(uation.)
648 3005 y(If)f(the)f(tail-set)h(t)n(yp)r(e)f(is)h(for)f(a)g(\014xed)g
(n)n(um)n(b)r(er)g(of)h(v)-5 b(alues,)26 b(then)h(w)n(e)f(return)h
(that)f(\014xed)523 3105 y(n)n(um)n(b)r(er)f(of)g(v)-5
b(alues)25 b(from)g(all)g(the)g(functions)h(whose)e(result)h(con)n(tin)
n(uations)f(are)h(equated.)523 3205 y(If)40 b(the)g(n)n(um)n(b)r(er)g
(of)g(v)-5 b(alues)39 b(is)h(not)f(\014xed,)k(then)e(w)n(e)e(m)n(ust)h
(use)f(the)i(unkno)n(wn-v)-5 b(alues)523 3304 y(con)n(v)n(en)n(tion,)23
b(although)f(w)n(e)g(are)g(not)h(forced)g(to)g(use)f(the)i(standard)e
(lo)r(cations.)34 b(W)-7 b(e)24 b(assign)523 3404 y(the)k(result)f(TNs)
h(at)f(this)h(time.)648 3504 y(W)-7 b(e)30 b(also)g(use)g(the)h
(tail-sets)f(to)g(see)g(what)h(con)n(v)n(en)n(tion)d(w)n(e)j(w)n(an)n
(t)e(to)i(use.)45 b(What)31 b(w)n(e)523 3603 y(do)e(is)h(use)g(the)g
(full)g(con)n(v)n(en)n(tion)e(for)h(an)n(y)g(function)i(that)f(has)f(a)
g(XEP)g(its)h(tail-set,)g(ev)n(en)523 3703 y(if)j(w)n(e)f(aren't)f
(required)h(to)g(do)g(so)f(b)n(y)h(a)g(tail-recursiv)n(e)e(full)j
(call,)g(as)e(long)h(as)f(there)h(are)523 3802 y(no)f
(non-tail-recursiv)n(e)e(lo)r(cal)i(calls)g(in)h(the)g(set.)48
b(This)32 b(prev)n(en)n(ts)e(us)i(from)f(gratuitously)523
3902 y(using)c(a)g(non-standard)g(con)n(v)n(en)n(tion)f(when)h(there)h
(is)f(no)h(reason)e(to.)1914 5147 y(50)p eop
%%Page: 51 52
51 51 bop 523 1237 a Fg(Chapter)65 b(15)523 1652 y Fi(Lo)6
b(cal)78 b(TN)e(assignmen)-6 b(t)523 2095 y Fk([W)f(an)n(t)40
b(a)g(di\013eren)n(t)g(name)f(for)h(this)g(so)f(as)h(not)g(to)f(b)r(e)i
(confused)f(with)g(the)g(di\013eren)n(t)523 2195 y(lo)r(cal/global)35
b(TN)i(represen)n(tations.)62 b(The)37 b(really)f(in)n(teresting)g
(stu\013)i(in)f(this)g(phase)f(is)523 2294 y(op)r(eration)24
b(selection,)g(v)-5 b(alues)25 b(represen)n(tation)e(selection,)i
(return)f(strategy)-7 b(,)24 b(etc.)36 b(Ma)n(yb)r(e)523
2394 y(this)26 b(phase)f(should)h(b)r(e)g(conceptually)f(lump)r(ed)h
(with)h(GTN)f(as)f("implemen)n(tation)g(selec-)523 2493
y(tion",)i(since)h(GTN)g(determines)f(call)g(strategies)f(and)i(lo)r
(cations.])648 2593 y(#|)648 2693 y([###)j(I)f(guess)g(I)g(b)r(eliev)n
(e)g(that)h(it)g(is)f(OK)f(for)h(VMR)h(con)n(v)n(ersion)d(to)i(dic)n(k)
g(the)h(ICR)523 2792 y(\015o)n(w)26 b(graph.)36 b(An)27
b(alternativ)n(e)f(w)n(ould)g(b)r(e)h(to)g(giv)n(e)f(VMR)i(its)f(v)n
(ery)e(o)n(wn)i(\015o)n(w)f(graph,)g(but)523 2892 y(that)i(seems)f(lik)
n(e)g(o)n(v)n(erkill.)648 2992 y(In)k(particular,)g(it)h(w)n(ould)e(b)r
(e)i(v)n(ery)e(nice)h(if)h(a)f(TR)g(lo)r(cal)g(call)g(lo)r(ok)n(ed)f
(exactly)h(lik)n(e)g(a)523 3091 y(jump)25 b(in)f(VMR.)g(This)g(w)n
(ould)f(allo)n(w)g(lo)r(op)h(optimizations)f(to)h(b)r(e)g(done)f(on)h
(lo)r(ops)f(written)523 3191 y(as)30 b(recursions.)42
b(In)31 b(addition)f(to)g(making)f(the)i(call)f(blo)r(c)n(k)f(transfer)
g(to)h(the)h(head)f(of)g(the)523 3290 y(function)g(rather)f(than)h(to)f
(the)i(return,)e(w)n(e)h(w)n(ould)f(also)g(ha)n(v)n(e)f(to)i(do)f
(something)g(ab)r(out)523 3390 y(skipping)24 b(the)h(part)e(of)i(the)f
(function)h(prolog)e(that)h(mo)n(v)n(es)f(argumen)n(ts)g(from)h(the)g
(passing)523 3490 y(lo)r(cations,)j(since)g(in)h(a)f(TR)h(call)f(they)h
(are)f(already)f(in)i(the)g(righ)n(t)e(frame.)648 3589
y(In)38 b(addition)h(to)g(directly)f(indicating)g(whether)h(a)f(call)h
(should)f(b)r(e)h(co)r(ded)g(with)g(a)523 3689 y(TR)28
b(v)-5 b(arian)n(t,)26 b(the)i(T)-7 b(ail-P)26 b(annotation)h(\015ags)f
(non-call)h(no)r(des)g(that)h(can)f(directly)g(return)523
3789 y(the)33 b(v)-5 b(alue)33 b(\(an)g("adv)-5 b(anced)32
b(return"\),)i(rather)d(than)j(mo)n(ving)d(the)j(v)-5
b(alue)33 b(to)f(the)i(result)523 3888 y(con)n(tin)n(uation)d(and)h
(jumping)g(to)g(the)g(return)g(co)r(de.)49 b(Then)32
b(\(according)f(to)h(p)r(olicy\),)h(w)n(e)523 3988 y(can)f(decide)g(to)
g(adv)-5 b(ance)31 b(all)h(p)r(ossible)g(returns.)49
b(If)33 b(all)e(uses)h(of)g(the)g(result)g(are)f(T)-7
b(ail-P)g(,)523 4087 y(then)28 b(L)-7 b(TN)28 b(can)f(annotate)h(the)g
(result)f(con)n(tin)n(uation)g(as)g(:Un)n(used,)h(inhibiting)g
(emission)523 4187 y(of)g(the)g(default)g(return)f(co)r(de.)648
4287 y([###)32 b(But)h(not)f(really)-7 b(.)50 b(No)n(w)32
b(there)g(is)g(a)g(single)f(list)i(of)f(templates,)h(and)f(a)g(giv)n
(en)523 4386 y(template)c(has)f(only)g(one)g(p)r(olicy)-7
b(.])648 4486 y(In)31 b(L)-7 b(TN,)31 b(w)n(e)f(use)h(the)g(:Safe)g
(template)g(as)g(a)f(last)h(resort)e(ev)n(en)h(when)i(the)f(p)r(olicy)f
(is)523 4586 y(unsafe.)36 b(Note)24 b(that)h(w)n(e)e(don't)i(try)f(:F)
-7 b(ast-Safe;)25 b(if)g(this)f(is)g(also)f(a)h(go)r(o)r(d)g(unsafe)g
(template,)523 4685 y(then)k(it)g(should)g(ha)n(v)n(e)e(the)i(unsafe)f
(p)r(olicies)h(explicitly)f(sp)r(eci\014ed.)648 4785
y(With)35 b(a)e(:F)-7 b(ast-Safe)34 b(template,)i(the)e(result)g(t)n
(yp)r(e)g(m)n(ust)g(b)r(e)h(pro)n(v)n(en)d(to)i(satisfy)g(the)523
4884 y(output)40 b(t)n(yp)r(e)g(assertion.)71 b(This)40
b(means)f(that)h(a)f(fast-safe)g(template)h(with)g(a)f(\014xn)n(um)1914
5147 y(51)p eop
%%Page: 52 53
52 52 bop 523 614 a Fk(output)39 b(t)n(yp)r(e)g(do)r(esn't)g(need)g(to)
f(do)h(\014xn)n(um)g(o)n(v)n(er\015o)n(w)d(c)n(hec)n(king.)69
b([###)39 b(Not)g(righ)n(t)523 714 y(to)32 b(just)g(c)n(hec)n(k)f
(against)g(the)h(No)r(de-Deriv)n(ed-T)n(yp)r(e,)g(since)g(t)n(yp)r(e-c)
n(hec)n(k)f(in)n(tersects)g(with)523 814 y(this.])648
913 y(It)f(seems)g(that)g(it)g(w)n(ould)g(b)r(e)g(useful)h(to)f(ha)n(v)
n(e)f(a)g(kind)i(of)f(template)g(where)g(the)g(args)523
1013 y(m)n(ust)c(b)r(e)g(c)n(hec)n(k)n(ed)f(to)g(b)r(e)i(\014xn)n(um,)f
(but)g(the)h(template)f(c)n(hec)n(ks)e(for)i(o)n(v)n(er\015o)n(w)d(and)
j(signals)523 1112 y(an)i(error.)37 b(In)29 b(the)g(case)e(where)h(an)g
(output)h(assertion)e(is)h(presen)n(t,)g(this)h(w)n(ould)f(generate)523
1212 y(b)r(etter)e(co)r(de)f(than)h(conditionally)f(branc)n(hing)f
(o\013)i(to)f(mak)n(e)g(a)g(bign)n(um,)h(and)g(then)g(doing)523
1312 y(a)h(t)n(yp)r(e)h(c)n(hec)n(k)f(on)g(the)h(result.)648
1411 y(Ho)n(w)d(do)h(w)n(e)g(deal)g(with)h(deciding)f(whether)g(to)g
(do)g(a)g(\014xn)n(um)g(o)n(v)n(er\015o)n(w)e(c)n(hec)n(k?)35
b(This)523 1511 y(is)24 b(p)r(erhaps)f(a)g(more)g(general)g(problem)g
(with)h(the)h(in)n(terpretation)d(of)i(result)g(t)n(yp)r(e)g(restric-)
523 1611 y(tions)32 b(in)h(templates.)51 b(It)33 b(w)n(ould)f(b)r(e)h
(useful)f(to)h(b)r(e)f(able)g(to)h(discriminate)f(b)r(et)n(w)n(een)g
(the)523 1710 y(case)d(where)g(the)h(result)f(has)g(b)r(een)h(pro)n(v)n
(en)e(to)h(b)r(e)h(a)f(\014xn)n(um)h(and)f(where)g(it)h(has)f(simply)
523 1810 y(b)r(een)f(asserted)e(to)i(b)r(e)g(so.)648
1910 y(The)34 b(seman)n(tics)g(of)g(result)h(t)n(yp)r(e)f(restriction)g
(is)g(that)h(the)g(result)f(m)n(ust)h(b)r(e)g(pro)n(v)n(en)523
2009 y(to)h(b)r(e)h(of)f(that)h(t)n(yp)r(e)f(*except*)f(for)h(safe)g
(generators,)g(whic)n(h)g(are)f(assumed)h(to)g(v)n(erify)523
2109 y(the)31 b(assertion.)45 b(That)30 b(w)n(a)n(y)g("is-\014xn)n(um")
f(case)h(can)g(b)r(e)h(a)f(fast-safe)g(generator)f(and)h(the)523
2208 y("should-b)r(e-\014xn)n(um")23 b(case)g(is)i(a)f(safe)f
(generator.)34 b(W)-7 b(e)25 b(could)f(c)n(ho)r(ose)f(not)h(to)h(ha)n
(v)n(e)e(a)h(safe)523 2308 y("should-b)r(e-\014xn)n(um")f(generator,)f
(and)i(let)h(the)f(unrestricted)g(safe)g(generator)e(handle)i(it.)523
2408 y(W)-7 b(e)28 b(w)n(ould)f(then)h(ha)n(v)n(e)f(to)g(do)g(an)h
(explicit)g(t)n(yp)r(e)f(c)n(hec)n(k)g(on)g(the)h(result.)648
2507 y(In)h(other)f(w)n(ords,)g(for)g(all)g(template)h(except)g(Safe,)g
(a)g(t)n(yp)r(e)g(restriction)f(on)g(either)h(an)523
2607 y(argumen)n(t)22 b(or)g(result)g(means)h("this)g(m)n(ust)g(b)r(e)g
(true;)h(if)g(it)f(is)g(not)g(the)g(system)g(ma)n(y)f(break.")523
2707 y(In)28 b(con)n(trast,)f(in)h(a)g(Safe)g(template,)g(the)h
(restriction)e(means)g("If)h(this)g(is)g(not)g(true,)g(I)g(will)523
2806 y(signal)f(an)g(error.")648 2906 y(Since)j(the)g(no)r(de-deriv)n
(ed-t)n(yp)r(e)f(only)h(tak)n(es)f(in)n(to)h(consideration)f(stu\013)i
(that)f(can)g(b)r(e)523 3005 y(pro)n(v)n(ed)23 b(from)h(the)g(argumen)n
(ts,)g(w)n(e)g(can)g(use)g(the)h(no)r(de-deriv)n(ed-t)n(yp)r(e)e(to)h
(select)g(fast-safe)523 3105 y(templates.)36 b(With)25
b(unsafe)f(p)r(olicies,)h(w)n(e)f(don't)h(care,)f(since)g(the)h(co)r
(de)f(is)g(supp)r(osed)h(to)f(b)r(e)523 3205 y(unsafe.)648
3304 y(|#)648 3404 y(Lo)r(cal)36 b(TN)i(assignmen)n(t)e(\(L)-7
b(TN\))38 b(assigns)e(all)h(the)h(TNs)f(needed)h(to)f(represen)n(t)f
(the)523 3504 y(v)-5 b(alues)31 b(of)g(con)n(tin)n(uations.)47
b(This)31 b(pass)f(scans)h(o)n(v)n(er)e(the)j(co)r(de)f(for)f(the)i
(comp)r(onen)n(t,)g(ex-)523 3603 y(amining)19 b(eac)n(h)g(con)n(tin)n
(uation)f(and)i(its)f(destination.)34 b(A)20 b(n)n(um)n(b)r(er)g(of)f
(somewhat)g(unrelated)523 3703 y(things)29 b(are)f(also)f(done)i(at)g
(the)g(same)f(time)h(so)g(that)g(m)n(ultiple)g(passes)f(aren't)g
(necessary)-7 b(.)523 3802 y({)34 b(Determine)g(the)g(Primitiv)n(e-T)n
(yp)r(e)f(for)h(eac)n(h)f(con)n(tin)n(uation)g(v)-5 b(alue)34
b(and)g(assigns)e(TNs)523 3902 y(to)e(hold)g(the)h(v)-5
b(alues.)45 b({)30 b(Use)g(p)r(olicy)g(information)g(to)g(determine)h
(the)f(implemen)n(tation)523 4002 y(strategy)38 b(for)i(eac)n(h)f(call)
g(to)h(a)f(kno)n(wn)g(function.)74 b({)40 b(Clear)e(the)j(t)n(yp)r(e-c)
n(hec)n(k)d(\015ags)h(in)523 4101 y(con)n(tin)n(uations)31
b(whose)g(destinations)g(ha)n(v)n(e)g(safe)g(implemen)n(tations.)49
b({)32 b(Determine)g(the)523 4201 y(v)-5 b(alue-passing)32
b(strategy)h(for)g(eac)n(h)h(con)n(tin)n(uation:)48 b(kno)n(wn)34
b(or)f(unkno)n(wn.)55 b({)34 b(Note)g(us-)523 4301 y(age)27
b(of)h(unkno)n(wn-v)-5 b(alues)27 b(con)n(tin)n(uations)f(so)i(that)g
(stac)n(k)f(analysis)f(can)i(tell)g(when)g(stac)n(k)523
4400 y(v)-5 b(alues)27 b(m)n(ust)h(b)r(e)g(discarded.)648
4500 y(If)20 b(safet)n(y)f(is)g(more)g(imp)r(ortan)n(t)h(that)g(sp)r
(eed)g(and)f(space,)i(then)f(w)n(e)f(consider)g(generating)523
4599 y(t)n(yp)r(e)30 b(c)n(hec)n(ks)f(on)h(the)g(v)-5
b(alues)30 b(of)g(no)r(des)g(whose)f(CONT)h(has)g(the)g(T)n(yp)r
(e-Chec)n(k)f(\015ag)g(set.)523 4699 y(If)e(the)g(destinatation)g(for)f
(the)h(con)n(tin)n(uation)f(v)-5 b(alue)27 b(is)g(safe,)f(then)i(w)n(e)
e(don't)h(need)g(to)g(do)523 4799 y(a)c(c)n(hec)n(k.)34
b(W)-7 b(e)24 b(assume)e(that)i(all)f(full)h(calls)e(are)g(safe,)i(and)
f(use)g(the)h(template)f(information)523 4898 y(to)28
b(determine)f(whether)h(inline)g(op)r(erations)e(are)h(safe.)1914
5147 y(52)p eop
%%Page: 53 54
53 53 bop 648 614 a Fk(This)28 b(phase)f(is)h(where)f(compiler)h(p)r
(olicy)g(switc)n(hes)f(ha)n(v)n(e)g(most)h(of)g(their)g(e\013ect.)38
b(The)523 714 y(sp)r(eed/space/safet)n(y)26 b(tradeo\013)h(can)g
(determine)h(whic)n(h)g(of)f(a)h(n)n(um)n(b)r(er)f(of)h(co)r(ding)f
(strate-)523 814 y(gies)35 b(are)g(used.)61 b(It)37 b(is)e(imp)r(ortan)
n(t)h(to)f(mak)n(e)g(the)i(p)r(olicy)e(c)n(hoice)g(in)h(VMR)h(con)n(v)n
(ersion)523 913 y(rather)f(than)g(in)h(co)r(de)f(generation)g(b)r
(ecause)g(the)h(cost)f(and)g(storage)f(requiremen)n(t)g(in-)523
1013 y(formation)30 b(whic)n(h)h(driv)n(es)f(TNBIND)i(will)f(dep)r(end)
h(strongly)e(on)h(what)g(actual)f(V)n(OP)g(is)523 1112
y(c)n(hosen.)54 b(In)33 b(the)h(case)f(of)g(+/FIXNUM,)h(there)f(migh)n
(t)h(b)r(e)g(three)f(or)f(more)h(implemen-)523 1212 y(tations,)i(some)e
(optimized)i(for)e(sp)r(eed,)j(some)d(for)g(space,)i(etc.)56
b(Some)33 b(of)h(these)g(V)n(OPS)523 1312 y(migh)n(t)28
b(b)r(e)g(op)r(en-co)r(ded)f(and)g(some)g(not.)648 1411
y(W)-7 b(e)22 b(represen)n(t)f(the)i(implemen)n(tation)f(strategy)f
(for)h(a)g(call)f(b)n(y)h(either)h(marking)e(it)h(as)g(a)523
1511 y(full)28 b(call)f(or)g(annotating)f(it)i(with)g(a)f("template")g
(represen)n(ting)f(the)i(op)r(en-co)r(ding)e(strat-)523
1611 y(egy)-7 b(.)39 b(T)-7 b(emplates)28 b(are)g(selected)g(using)g(a)
g(t)n(w)n(o-w)n(a)n(y)e(dispatc)n(h)i(o\013)h(of)f(op)r(erand)g
(primitiv)n(e-)523 1710 y(t)n(yp)r(es)35 b(and)g(p)r(olicy)-7
b(.)58 b(The)35 b(general)f(case)g(of)h(L)-7 b(TN)35
b(is)g(handled)g(b)n(y)f(the)h(L)-7 b(TN-Annotate)523
1810 y(function)28 b(in)h(the)f(function-info,)g(but)h(most)e
(functions)i(are)e(handled)g(b)n(y)h(a)g(table-driv)n(en)523
1910 y(mec)n(hanism.)53 b(There)32 b(are)g(four)g(di\013eren)n(t)i
(translation)d(p)r(olicies)i(that)g(a)g(template)g(ma)n(y)523
2009 y(ha)n(v)n(e:)523 2175 y Fj(Safe)42 b Fk(The)28
b(safest)f(implemen)n(tation;)h(m)n(ust)f(do)h(argumen)n(t)e(t)n(yp)r
(e)i(c)n(hec)n(king.)523 2341 y Fj(Small)40 b Fk(The)27
b(\(unsafe\))h(smallest)f(implemen)n(tation.)523 2507
y Fj(F)-8 b(ast)42 b Fk(The)28 b(\(unsafe\))g(fastest)f(implemen)n
(tation.)523 2673 y Fj(F)-8 b(ast-Safe)42 b Fk(An)36
b(implemen)n(tation)g(optimized)f(for)g(sp)r(eed,)j(but)e(whic)n(h)g
(do)r(es)f(an)n(y)g(nec-)731 2773 y(essary)e(c)n(hec)n(ks)g(exclusiv)n
(e)h(of)h(argumen)n(t)e(t)n(yp)r(e)i(c)n(hec)n(king.)57
b(Examples)34 b(are)g(arra)n(y)731 2873 y(b)r(ounds)27
b(c)n(hec)n(ks)g(and)g(\014xn)n(um)h(o)n(v)n(er\015o)n(w)d(c)n(hec)n
(ks.)648 3039 y(Usually)31 b(a)h(function)h(will)f(ha)n(v)n(e)f(only)h
(one)g(or)f(t)n(w)n(o)g(distinct)i(templates.)51 b(Either)31
b(or)523 3138 y(b)r(oth)g(of)f(the)h(safe)f(and)g(fast-safe)f
(templates)i(ma)n(y)e(b)r(e)i(omitted;)h(if)f(b)r(oth)g(are)e(sp)r
(eci\014ed,)523 3238 y(then)e(they)f(should)g(b)r(e)g(distinct.)37
b(If)27 b(there)f(is)g(no)f(safe)h(template)h(and)e(our)h(p)r(olicy)g
(is)g(safe,)523 3337 y(then)i(w)n(e)f(do)h(a)f(full)h(call.)648
3437 y(W)-7 b(e)28 b(use)f(four)g(di\013eren)n(t)h(co)r(ding)f
(strategies,)f(dep)r(ending)i(on)g(the)g(p)r(olicy:)523
3603 y Fj(Safe:)41 b Fk(safet)n(y)35 b Fb(>)f Fk(space)g
Fb(>)g Fk(sp)r(eed,)j(or)d(w)n(e)g(w)n(an)n(t)g(to)g(use)h(the)g
(fast-safe)f(template,)j(but)731 3703 y(there)27 b(isn't)h(one.)523
3869 y Fj(Small:)39 b Fk(space)27 b Fb(>)g Fk(\(max)h(sp)r(eed)f(safet)
n(y\))523 4035 y Fj(F)-8 b(ast:)41 b Fk(sp)r(eed)28 b
Fb(>)f Fk(\(max)h(space)f(safet)n(y\))523 4201 y Fj(F)-8
b(ast-Safe)32 b(\(and)h(t)m(yp)s(e)f(c)m(hec)m(k\):)43
b Fk(safet)n(y)27 b Fb(>)h Fk(sp)r(eed)g Fb(>)f Fk(space,)g(or)g(w)n(e)
h(w)n(an)n(t)f(to)g(use)h(the)731 4301 y(safe)f(template,)h(but)g
(there)f(isn't)h(one.)648 4467 y(\\Space")38 b(ab)r(o)n(v)n(e)h(is)h
(actually)f(the)h(maxim)n(um)g(of)g(space)f(and)h(csp)r(eed,)j(under)d
(the)523 4566 y(theory)27 b(that)i(less)e(co)r(de)h(will)h(tak)n(e)e
(less)h(time)g(to)g(generate)f(and)h(assem)n(ble.)38
b([###)28 b(This)523 4666 y(could)36 b(lose)g(if)h(the)g(smallest)g
(case)e(is)i(out-of-line,)h(and)e(m)n(ust)h(allo)r(cate)f(man)n(y)g
(link)-5 b(age)523 4765 y(registers.])1914 5147 y(53)p
eop
%%Page: 54 55
54 54 bop 523 1237 a Fg(Chapter)65 b(16)523 1652 y Fi(Con)-6
b(trol)77 b(optimization)523 2084 y Fk(In)31 b(this)h(phase)f(w)n(e)g
(annotate)f(blo)r(c)n(ks)h(with)g(drop-throughs.)46 b(This)31
b(con)n(trols)f(ho)n(w)h(co)r(de)523 2183 y(generation)d(linearizes)h
(co)r(de)g(so)g(that)h(drop-throughs)e(are)g(used)i(most)f(e\013ectiv)n
(ely)-7 b(.)43 b(W)-7 b(e)523 2283 y(totally)32 b(linearize)g(the)h(co)
r(de)f(here,)i(allo)n(wing)d(co)r(de)h(generation)f(to)h(scan)g(the)h
(blo)r(c)n(ks)f(in)523 2383 y(the)c(emit)g(order.)648
2482 y(There)e(are)g(basically)g(t)n(w)n(o)g(asp)r(ects)h(to)f(this)i
(optimization:)36 b(1])27 b(Dynamically)f(reduc-)523
2582 y(ing)d(the)g(n)n(um)n(b)r(er)g(of)g(branc)n(hes)f(tak)n(en)g
(v.s.)35 b(branc)n(hes)22 b(not)h(tak)n(en)g(under)f(the)i(assumption)
523 2682 y(that)35 b(branc)n(hes)d(not)j(tak)n(en)e(are)h(c)n(heap)r
(er.)55 b(2])34 b(Statically)g(minimizing)h(the)f(n)n(um)n(b)r(er)g(of)
523 2781 y(unconditional)27 b(branc)n(hes,)g(sa)n(ving)f(space)h(and)g
(presumably)g(time.)648 2881 y(These)32 b(t)n(w)n(o)g(goals)g(can)g
(con\015ict,)j(but)e(if)h(they)f(do)f(it)i(seems)e(prett)n(y)h(clear)f
(that)h(the)523 2980 y(dynamic)f(optimization)g(should)g(get)g
(preference.)51 b(The)32 b(main)h(dynamic)f(optimization)523
3080 y(is)j(c)n(hanging)e(the)i(sense)f(of)h(a)f(conditional)g(test)h
(so)f(that)h(the)g(more)f(commonly)g(tak)n(en)523 3180
y(branc)n(h)g(is)h(the)g(fall-through)f(case.)57 b(The)35
b(problem)f(is)h(determining)g(whic)n(h)g(branc)n(h)e(is)523
3279 y(more)27 b(commonly)g(tak)n(en.)648 3379 y(The)21
b(most)g(clear-cut)f(case)g(is)h(where)g(one)f(branc)n(h)g(leads)h(out)
g(of)g(a)g(lo)r(op)g(and)f(the)i(other)523 3479 y(is)30
b(within.)44 b(In)30 b(this)g(case,)g(clearly)e(the)j(branc)n(h)d
(within)j(the)f(lo)r(op)g(should)f(b)r(e)h(preferred.)523
3578 y(The)f(only)f(added)h(complication)f(is)h(that)g(at)g(some)f(p)r
(oin)n(t)h(in)g(the)h(lo)r(op)e(there)h(has)f(to)h(b)r(e)523
3678 y(a)f(bac)n(kw)n(ard)e(branc)n(h,)h(and)h(it)g(is)g(preferable)f
(for)h(this)g(branc)n(h)g(to)f(b)r(e)i(conditional,)f(since)523
3778 y(an)f(unconditional)h(branc)n(h)e(is)i(just)g(a)f(w)n(aste)g(of)g
(time.)648 3877 y(In)36 b(the)h(absence)f(of)g(suc)n(h)g(go)r(o)r(d)g
(information,)i(w)n(e)e(can)g(attempt)i(to)e(guess)f(whic)n(h)523
3977 y(branc)n(h)c(is)h(more)f(p)r(opular)g(on)g(the)i(basis)e(of)h
(di\013erence)f(in)i(the)f(cost)f(b)r(et)n(w)n(een)h(the)g(t)n(w)n(o)
523 4076 y(cases.)i(Min-max)20 b(strategy)f(suggests)g(that)i(w)n(e)g
(should)f(c)n(ho)r(ose)g(the)h(c)n(heap)r(er)f(alternativ)n(e,)523
4176 y(since)32 b(the)h(p)r(ercen)n(tagewise)e(impro)n(v)n(emen)n(t)g
(is)h(greater)f(when)h(the)h(branc)n(h)e(o)n(v)n(erhead)f(is)523
4276 y(signi\014can)n(t)k(with)h(resp)r(ect)f(to)h(the)f(cost)g(of)h
(the)g(co)r(de)f(branc)n(hed)g(to.)57 b(A)35 b(tractable)f(ap-)523
4375 y(pro)n(ximation)26 b(of)i(this)h(is)e(to)h(compare)f(only)g(the)i
(costs)e(of)h(the)g(t)n(w)n(o)f(blo)r(c)n(ks)g(immediately)523
4475 y(branc)n(hed)33 b(to,)j(since)e(this)g(w)n(ould)g(a)n(v)n(oid)e
(ha)n(ving)h(to)h(do)g(an)n(y)f(hairy)h(graph)f(w)n(alking)g(to)523
4575 y(\014nd)25 b(all)g(the)g(co)r(de)f(for)g(the)h(consequen)n(t)f
(and)h(the)g(alternativ)n(e.)35 b(It)25 b(migh)n(t)f(b)r(e)h(w)n(orth)n
(while)523 4674 y(discriminating)i(against)f(ultra-exp)r(ensiv)n(e)h
(functions)h(suc)n(h)f(as)g(ERR)n(OR.)648 4774 y(F)-7
b(or)32 b(this)i(to)f(w)n(ork,)h(w)n(e)f(ha)n(v)n(e)f(to)i(detect)g
(when)f(one)g(of)h(the)f(options)g(is)h(empt)n(y)-7 b(.)54
b(In)523 4873 y(this)25 b(case,)f(the)g(next)g(for)g(one)g(branc)n(h)f
(is)h(a)g(successor)e(of)i(the)h(other)f(branc)n(h,)g(making)f(the)1914
5147 y(54)p eop
%%Page: 55 56
55 55 bop 523 614 a Fk(comparison)19 b(meaningless.)34
b(W)-7 b(e)21 b(use)g(dominator)e(information)h(to)h(detect)g(this)h
(situation.)523 714 y(When)k(a)f(branc)n(h)g(is)g(empt)n(y)-7
b(,)26 b(one)f(of)h(the)g(predecessors)d(of)i(the)h(\014rst)g(blo)r(c)n
(k)f(in)g(the)h(empt)n(y)523 814 y(branc)n(h)g(will)h(b)r(e)g
(dominated)g(b)n(y)f(the)h(\014rst)g(blo)r(c)n(k)f(in)h(the)h(other)e
(branc)n(h.)35 b(In)27 b(suc)n(h)g(a)f(case)523 913 y(w)n(e)h(fa)n(v)n
(or)f(the)i(empt)n(y)g(branc)n(h,)e(since)i(that's)g(ab)r(out)f(as)g(c)
n(heap)g(as)g(y)n(ou)g(can)g(get.)648 1013 y(Statically)c(minimizing)h
(branc)n(hes)f(is)h(really)e(a)i(m)n(uc)n(h)g(more)f(tractable)g
(problem,)h(but)523 1112 y(what)29 b(literature)f(there)h(is)f(mak)n
(es)g(it)h(lo)r(ok)f(hard.)40 b(Clearly)28 b(the)h(thing)g(to)g(do)g
(is)f(to)h(use)g(a)523 1212 y(non-optimal)e(heuristic)g(algorithm.)648
1312 y(A)h(go)r(o)r(d)g(p)r(ossibilit)n(y)g(is)g(to)h(use)f(an)g
(algorithm)f(based)h(on)g(the)h(depth)g(\014rst)f(ordering.)523
1411 y(W)-7 b(e)31 b(can)f(mo)r(dify)h(the)g(basic)f(DF)n(O)h
(algorithm)e(so)h(that)h(it)g(c)n(ho)r(oses)e(an)i(ordering)d(whic)n(h)
523 1511 y(fa)n(v)n(ors)h(an)n(y)h(drop-thrus)g(that)i(w)n(e)f(ma)n(y)f
(c)n(ho)r(ose)g(for)g(dynamic)h(reasons.)46 b(When)32
b(w)n(e)e(are)523 1611 y(w)n(alking)h(the)h(graph,)g(w)n(e)f(w)n(alk)g
(the)i(desired)e(drop-thru)g(arc)g(last,)i(whic)n(h)e(will)h(place)g
(it)523 1710 y(immediately)c(after)f(us)h(in)f(the)h(DF)n(O)g(unless)f
(the)h(arc)f(is)g(a)h(retreating)e(arc.)648 1810 y(W)-7
b(e)31 b(scan)g(through)f(the)i(DF)n(O)f(and)g(whenev)n(er)f(w)n(e)h
(\014nd)h(a)f(blo)r(c)n(k)f(that)i(hasn't)f(b)r(een)523
1910 y(done)g(y)n(et,)g(w)n(e)f(build)i(a)e(straigh)n(t-line)f(segmen)n
(t)h(b)n(y)h(setting)g(the)g(drop-thru)f(to)g(the)h(un-)523
2009 y(reac)n(hed)k(successor)f(blo)r(c)n(k)i(whic)n(h)g(has)g(the)g
(lo)n(w)n(est)f(DFN)i(greater)e(than)h(that)g(for)g(the)523
2109 y(blo)r(c)n(k.)g(W)-7 b(e)27 b(mo)n(v)n(e)e(to)h(the)h(drop-thru)e
(blo)r(c)n(k)h(and)h(rep)r(eat)e(the)i(pro)r(cess)e(un)n(til)i(there)f
(is)h(no)523 2208 y(suc)n(h)f(blo)r(c)n(k.)35 b(W)-7
b(e)27 b(then)f(go)f(bac)n(k)g(to)h(our)f(original)f(scan)i(through)f
(the)h(DF)n(O,)g(lo)r(oking)f(for)523 2308 y(the)j(head)f(of)h(another)
f(straigh)n(t-line)f(segmen)n(t.)648 2408 y(This)g(pro)r(cess)f(will)h
(automagically)e(implemen)n(t)j(all)f(of)g(the)g(dynamic)g
(optimizations)523 2507 y(describ)r(ed)33 b(ab)r(o)n(v)n(e)e(as)h(long)
g(as)h(w)n(e)f(fa)n(v)n(or)f(the)i(appropriate)e(IF)j(branc)n(h)d(when)
i(creating)523 2607 y(the)j(DF)n(O.)f(Using)g(the)h(DF)n(O)f(will)g
(prev)n(en)n(t)f(us)i(from)f(making)f(the)i(bac)n(k)e(branc)n(h)g(in)i
(a)523 2707 y(lo)r(op)25 b(the)i(drop-thru,)e(but)h(w)n(e)g(need)f(to)h
(b)r(e)g(clev)n(er)f(ab)r(out)h(fa)n(v)n(oring)d(IF)j(branc)n(hes)f
(within)523 2806 y(lo)r(ops)d(while)g(computing)h(the)g(DF)n(O.)f(The)h
(IF)f(join)h(will)g(b)r(e)f(fa)n(v)n(ored)f(without)i(an)n(y)f(sp)r
(ecial)523 2906 y(e\013ort,)27 b(since)h(w)n(e)f(follo)n(w)g(through)g
(the)h(most)f(fa)n(v)n(ored)f(path)i(un)n(til)g(w)n(e)f(reac)n(h)f(the)
i(end.)648 3005 y(This)34 b(needs)h(some)f(kno)n(wledge)g(ab)r(out)g
(the)h(target)f(mac)n(hine,)i(since)f(on)f(most)h(ma-)523
3105 y(c)n(hines)24 b(non-tail-recursiv)n(e)e(calls)i(will)h(use)f
(some)g(sort)f(of)i(call)f(instruction.)36 b(In)24 b(this)h(case,)523
3205 y(the)20 b(call)g(actually)g(w)n(an)n(ts)f(to)h(drop)f(through)g
(to)h(the)h(return)e(p)r(oin)n(t,)j(rather)d(than)h(dropping)523
3304 y(through)27 b(to)g(the)h(b)r(eginning)g(of)f(the)h(called)g
(function.)1914 5147 y(55)p eop
%%Page: 56 57
56 56 bop 523 1237 a Fg(Chapter)65 b(17)523 1652 y Fi(VMR)79
b(con)-6 b(v)g(ersion)523 2084 y Fk(#|)28 b(Single-use)g(let)g(v)-5
b(ar)28 b(con)n(tin)n(uation)f(substitution)i(not)f(really)f(correct,)g
(since)h(it)h(can)523 2183 y(cause)21 b(a)h(spurious)e(t)n(yp)r(e)i
(error.)33 b(Ma)n(yb)r(e)22 b(w)n(e)f(do)h(w)n(an)n(t)f(stu\013)i(to)e
(pro)n(v)n(e)f(that)j(an)e(NLX)h(can't)523 2283 y(happ)r(en)33
b(after)g(all.)53 b(Or)32 b(go)g(bac)n(k)g(to)h(the)g(idea)g(of)g(mo)n
(ving)f(a)g(com)n(bination)h(arg)e(to)i(the)523 2383
y(ref)c(lo)r(cation,)f(and)h(ha)n(ving)f(that)h(use)g(the)g(ref)g(con)n
(t)g(\(with)g(its)g(output)h(assertion.\))39 b(This)523
2482 y(lossage)25 b(do)r(esn't)h(seem)h(v)n(ery)e(lik)n(ely)h(to)g
(actually)g(happ)r(en,)h(though.)37 b([###)27 b(m)n(ust-reac)n(h)523
2582 y(stu\013)h(w)n(ouldn't)f(w)n(ork)e(quite)i(as)f(w)n(ell)h(as)f
(com)n(bination)g(substitute)i(in)f(psetq,)g(etc.,)h(since)523
2682 y(it)g(w)n(ould)f(fail)h(when)g(one)f(of)g(the)h(new)g(v)-5
b(alues)27 b(is)h(random)e(co)r(de)i(\(migh)n(t)g(un)n(wind.\)])648
2781 y(Is)21 b(this)h(really)f(a)g(general)g(problem)g(with)h(eager)e
(t)n(yp)r(e)i(c)n(hec)n(king?)34 b(It)22 b(seems)g(y)n(ou)f(could)523
2881 y(argue)i(that)i(there)g(w)n(as)f(no)g(t)n(yp)r(e)h(error)e(in)i
(this)g(co)r(de:)35 b(\(+)24 b(:fo)r(o)h(\(thro)n(w)f('up)h(nil\)\))h
(But)f(w)n(e)523 2980 y(w)n(ould)i(signal)g(an)g(error.)648
3080 y(Emit)37 b(explicit)h(y)n(ou-lose)e(op)r(eration)h(when)h(w)n(e)f
(do)g(a)h(mo)n(v)n(e)e(b)r(et)n(w)n(een)i(t)n(w)n(o)f(non-T)523
3180 y(pt)n(yp)r(es,)c(ev)n(en)e(when)h(t)n(yp)r(e)f(c)n(hec)n(king)g
(isn't)h(on.)48 b(Can)32 b(this)f(really)g(happ)r(en?)49
b(Seems)32 b(w)n(e)523 3279 y(should)25 b(treat)f(con)n(tin)n(uations)g
(lik)n(e)g(this)h(as)f(though)h(t)n(yp)r(e-c)n(hec)n(k)e(w)n(as)h
(true.)36 b(Ma)n(yb)r(e)24 b(L)-7 b(TN)523 3379 y(should)26
b(lea)n(v)n(e)f(t)n(yp)r(e-c)n(hec)n(k)g(true)h(in)g(this)g(case,)g(ev)
n(en)g(when)g(the)g(p)r(olicy)g(is)g(unsafe.)36 b(\(Do)27
b(a)523 3479 y(t)n(yp)r(e)h(c)n(hec)n(k)f(against)f(NIL?\))648
3578 y(A)n(t)33 b(con)n(tin)n(uation)f(use)h(time,)i(w)n(e)e(ma)n(y)f
(in)i(general)d(ha)n(v)n(e)h(to)h(do)g(b)r(oth)h(a)e(co)r(erce-to-)523
3678 y(t)39 b(and)f(a)g(t)n(yp)r(e)g(c)n(hec)n(k,)i(allo)r(cating)d(t)n
(w)n(o)h(temp)r(orary)f(TNs)h(to)g(hold)g(the)h(in)n(termediate)523
3778 y(results.)648 3877 y(VMR)28 b(Con)n(trol)e(represen)n(tation:)648
3977 y(W)-7 b(e)22 b(represen)n(t)e(all)i(con)n(trol)e(transfer)h
(explicitly)-7 b(.)35 b(In)22 b(particular,)f(:Conditional)h(V)n(OPs)
523 4076 y(tak)n(e)i(a)h(single)g(T)-7 b(arget)23 b(con)n(tin)n(uation)
i(and)f(a)h(Not-P)f(\015ag)h(indicating)g(whether)f(the)i(sense)523
4176 y(of)38 b(the)g(test)g(is)g(negated.)67 b(Then)38
b(an)g(unconditional)g(Branc)n(h)e(V)n(OP)h(will)h(b)r(e)h(emitted)523
4276 y(afterw)n(ard)26 b(if)i(the)g(other)f(path)h(isn't)g(a)f
(drop-through.)648 4375 y(So)c(w)n(e)h(linearize)e(the)j(co)r(de)e(b)r
(efore)h(VMR-con)n(v)n(ersion.)33 b(This)24 b(isn't)g(a)f(problem,)i
(since)523 4475 y(there)k(isn't)g(m)n(uc)n(h)f(c)n(hange)g(in)h(con)n
(trol)e(\015o)n(w)h(after)g(VMR)i(con)n(v)n(ersion)c(\(none)j(un)n(til)
g(lo)r(op)523 4575 y(optimization)i(requires)g(in)n(tro)r(duction)g(of)
h(header)f(blo)r(c)n(ks.\))48 b(It)33 b(do)r(es)e(mak)n(e)g(cost-based)
523 4674 y(branc)n(h)c(prediction)g(a)g(bit)h(uc)n(ky)-7
b(,)27 b(though,)g(since)g(w)n(e)g(don't)h(ha)n(v)n(e)e(an)n(y)h(cost)g
(information)523 4774 y(in)33 b(ICR.)h(Actually)-7 b(,)34
b(I)f(guess)f(w)n(e)h(do)g(ha)n(v)n(e)e(prett)n(y)i(go)r(o)r(d)g(cost)f
(information)g(after)h(L)-7 b(TN)523 4873 y(ev)n(en)27
b(b)r(efore)h(VMR)g(con)n(v)n(ersion,)d(since)j(the)g(most)f(imp)r
(ortan)n(t)h(thing)f(to)h(kno)n(w)f(is)g(whic)n(h)1914
5147 y(56)p eop
%%Page: 57 58
57 57 bop 523 614 a Fk(functions)28 b(are)f(op)r(en-co)r(ded.)648
714 y(|#)648 814 y(VMR)33 b(preserv)n(es)f(the)h(blo)r(c)n(k)g
(structure)g(of)g(ICR,)g(but)h(replaces)e(the)i(no)r(des)f(with)h(a)523
913 y(target)29 b(dep)r(enden)n(t)i(virtual)f(mac)n(hine)f(\(VM\))i
(represen)n(tation.)43 b(Di\013eren)n(t)31 b(implemen)n(ta-)523
1013 y(tions)j(ma)n(y)f(use)g(di\013eren)n(t)h(VMs)g(without)g(making)f
(ma)5 b(jor)33 b(c)n(hanges)f(in)i(the)g(bac)n(k)f(end.)523
1112 y(The)f(t)n(w)n(o)f(main)g(comp)r(onen)n(ts)h(of)f(VMR)h(are)f(T)
-7 b(emp)r(orary)30 b(Names)i(\(TNs\))g(and)f(Virtual)523
1212 y(OP)n(erations)e(\(V)n(OPs\).)49 b(TNs)32 b(represen)n(t)e(the)i
(lo)r(cations)f(that)h(hold)g(v)-5 b(alues,)32 b(and)g(V)n(OPs)523
1312 y(represen)n(t)26 b(the)i(op)r(erations)f(p)r(erformed)g(on)g(the)
h(v)-5 b(alues.)648 1411 y(A)37 b("primitiv)n(e)g(t)n(yp)r(e")g(is)h(a)
f(t)n(yp)r(e)g(meaningful)h(at)f(the)h(VM)g(lev)n(el.)66
b(Examples)36 b(are)523 1511 y(Fixn)n(um,)e(String-Char,)e
(Short-Float.)50 b(During)33 b(VMR)g(con)n(v)n(ersion)d(w)n(e)i(use)g
(the)h(prim-)523 1611 y(itiv)n(e)38 b(t)n(yp)r(e)g(of)g(an)f
(expression)f(to)i(determine)g(b)r(oth)g(where)g(w)n(e)f(can)h(store)e
(the)j(result)523 1710 y(of)30 b(the)g(expression)e(and)h(whic)n(h)h(t)
n(yp)r(e-sp)r(eci\014c)g(implemen)n(tations)f(of)h(an)f(op)r(eration)g
(can)523 1810 y(b)r(e)i(applied)f(to)h(the)g(v)-5 b(alue.)45
b([Pt)n(yp)r(e)31 b(is)f(a)g(set)h(of)f(SCs)h(==)e(represen)n(tation)g
(c)n(hoices)h(and)523 1910 y(represen)n(tation)c(sp)r(eci\014c)i(op)r
(erations])648 2009 y(The)40 b(VM)h(sp)r(eci\014c)g(de\014nitions)g
(pro)n(vide)e(functions)i(that)g(do)f(stu\013)i(lik)n(e)e(\014nd)h(the)
523 2109 y(primitiv)n(e)35 b(t)n(yp)r(e)h(corresp)r(onding)d(to)i(a)g
(t)n(yp)r(e)h(and)f(test)h(for)e(primitiv)n(e)h(t)n(yp)r(e)h(subt)n(yp)
r(ep.)523 2208 y(Usually)24 b(primitiv)n(e)h(t)n(yp)r(es)g(will)g(b)r
(e)g(disjoin)n(t)g(except)g(for)f(T,)h(whic)n(h)g(represen)n(ts)e(all)h
(t)n(yp)r(es.)648 2308 y(The)k(primitiv)n(e)g(t)n(yp)r(e)g(T)g(is)g(sp)
r(ecial-cased.)37 b(Not)28 b(only)f(do)r(es)h(it)h(o)n(v)n(erlap)d
(with)i(all)g(the)523 2408 y(other)i(t)n(yp)r(es,)h(but)h(it)f(implies)
g(a)f(descriptor)f(\("b)r(o)n(xed")h(or)f("p)r(oin)n(ter"\))h(represen)
n(tation.)523 2507 y(F)-7 b(or)31 b(e\016ciency)h(reasons,)g(w)n(e)f
(sometimes)h(w)n(an)n(t)f(to)h(use)g(alternate)f(represen)n(tations)f
(for)523 2607 y(some)i(ob)5 b(jects)33 b(suc)n(h)f(as)g(n)n(um)n(b)r
(ers.)52 b(The)33 b(ma)5 b(jorit)n(y)32 b(of)h(op)r(erations)e(cannot)h
(exploit)h(al-)523 2707 y(ternate)d(represen)n(tations,)f(and)h(w)n
(ould)g(only)g(b)r(e)h(complicated)e(if)i(they)g(had)f(to)g(b)r(e)h
(able)523 2806 y(to)24 b(con)n(v)n(ert)e(alternate)i(represen)n
(tations)e(in)n(to)h(descriptors.)35 b(A)24 b(template)g(can)g(require)
f(an)523 2906 y(op)r(erand)k(to)g(b)r(e)h(a)f(descriptor)g(b)n(y)g
(constraining)f(the)i(op)r(erand)f(to)h(b)r(e)g(of)f(t)n(yp)r(e)h(T.)
648 3005 y(A)40 b(TN)g(can)g(only)g(represen)n(t)e(a)i(single)g(v)-5
b(alue,)43 b(so)c(w)n(e)h(bare)f(the)h(implemen)n(tation)523
3105 y(of)f(MVs)g(at)g(this)g(p)r(oin)n(t.)71 b(When)39
b(w)n(e)g(kno)n(w)f(the)h(n)n(um)n(b)r(er)g(of)f(m)n(ultiple)i(v)-5
b(alues)38 b(b)r(eing)523 3205 y(handled,)h(w)n(e)d(use)h(m)n(ultiple)g
(TNs)g(to)g(hold)f(them.)65 b(When)37 b(the)g(n)n(um)n(b)r(er)g(of)f(v)
-5 b(alues)36 b(is)523 3304 y(actually)g(unkno)n(wn,)i(w)n(e)e(use)h(a)
f(con)n(v)n(en)n(tion)f(that)i(is)f(compatible)h(with)g(full)g
(function)523 3404 y(call.)648 3504 y(Ev)n(erything)21
b(that)i(is)f(done)h(is)f(done)h(b)n(y)f(a)h(V)n(OP)f(in)h(VMR.)g
(Calls)f(to)h(simple)g(primitiv)n(e)523 3603 y(functions)35
b(suc)n(h)f(as)g(+)h(and)f(CAR)h(are)f(translated)g(to)g(V)n(OP)g
(equiv)-5 b(alen)n(ts)34 b(b)n(y)g(a)h(table-)523 3703
y(driv)n(en)22 b(mec)n(hanism.)34 b(This)23 b(translation)e(is)h(sp)r
(eci\014ed)g(b)n(y)g(the)h(particular)e(VM)i(de\014nition;)523
3802 y(VMR)g(con)n(v)n(ersion)d(mak)n(es)i(no)g(assumptions)g(ab)r(out)
g(whic)n(h)g(op)r(erations)g(are)f(primitiv)n(e)h(or)523
3902 y(what)32 b(op)r(erand)e(t)n(yp)r(es)i(are)e(w)n(orth)h(sp)r
(ecial-casing.)47 b(The)31 b(default)h(calling)f(mec)n(hanisms)523
4002 y(and)25 b(other)g(miscellaneous)g(builtin)h(features)f(are)g
(implemen)n(ted)h(using)f(standard)g(V)n(OPs)523 4101
y(that)j(m)n(ust)g(implemen)n(ted)g(b)n(y)f(eac)n(h)g(VM.)648
4201 y(T)n(yp)r(e)36 b(information)h(can)f(b)r(e)i(forgotten)e(after)g
(VMR)i(con)n(v)n(ersion,)f(since)g(all)f(t)n(yp)r(e-)523
4301 y(sp)r(eci\014c)28 b(op)r(eration)e(selections)h(ha)n(v)n(e)g(b)r
(een)h(made.)648 4400 y(Simple)g(t)n(yp)r(e)f(c)n(hec)n(king)f(is)i
(explicitly)f(done)h(using)f(CHECK-xxx)f(V)n(OPs.)35
b(They)28 b(act)523 4500 y(lik)n(e)38 b(inno)r(cuous)f
(e\013ectless/una\013ected)h(V)n(OPs)f(whic)n(h)g(return)h(the)g(c)n
(hec)n(k)n(ed)f(thing)h(as)523 4599 y(a)e(result.)62
b(This)37 b(allo)n(ws)d(lo)r(op-in)n(v)-5 b(arian)n(t)35
b(optimization)h(and)g(common)g(sub)r(expression)523
4699 y(elimination)28 b(to)h(remo)n(v)n(e)e(redundan)n(t)h(c)n(hec)n
(ks.)38 b(All)29 b(t)n(yp)r(e)g(c)n(hec)n(king)e(is)h(done)h(at)f(the)h
(time)523 4799 y(the)f(con)n(tin)n(uation)f(is)g(used.)648
4898 y(Note)18 b(that)h(w)n(e)f(need)h(only)f(c)n(hec)n(k)g(asserted)f
(t)n(yp)r(es,)k(since)d(if)h(t)n(yp)r(e)g(inference)f(w)n(orks,)h(the)
1914 5147 y(57)p eop
%%Page: 58 59
58 58 bop 523 614 a Fk(deriv)n(ed)24 b(t)n(yp)r(es)g(will)h(also)e(b)r
(e)i(satis\014ed.)36 b(W)-7 b(e)24 b(can)h(c)n(hec)n(k)e(whic)n(hev)n
(er)g(is)i(more)e(con)n(v)n(enien)n(t,)523 714 y(since)k(b)r(oth)h
(should)g(b)r(e)g(true.)648 814 y(Constan)n(ts)j(are)g(turned)h(in)n
(to)g(sp)r(ecial)f(Constan)n(t)h(TNs,)h(whic)n(h)f(are)f(wired)h(do)n
(wn)f(in)523 913 y(a)e(SC)h(that)g(is)g(determined)f(b)n(y)h(their)f(t)
n(yp)r(e.)44 b(The)29 b(VM)h(de\014nition)g(pro)n(vides)f(a)g(function)
523 1013 y(that)f(returns)f(constan)n(t)g(a)g(TN)h(to)f(represen)n(t)g
(a)g(Constan)n(t)g(Leaf.)648 1112 y(Eac)n(h)e(comp)r(onen)n(t)i(has)f
(a)h(constan)n(t)f(p)r(o)r(ol.)36 b(There)27 b(is)f(a)h(register)e
(dedicated)i(to)g(hold-)523 1212 y(ing)i(the)h(constan)n(t)f(p)r(o)r
(ol)g(for)g(the)h(curren)n(t)f(comp)r(onen)n(t.)42 b(The)29
b(bac)n(k)g(end)h(allo)r(cates)e(non-)523 1312 y(immediate)f(constan)n
(ts)f(in)i(the)f(constan)n(t)g(p)r(o)r(ol)g(when)g(it)g(disco)n(v)n
(ers)e(them)j(during)e(trans-)523 1411 y(lation)h(from)h(ICR.)648
1511 y([###)d(Chec)n(k)f(that)h(w)n(e)f(are)g(describing)g(what)g(is)h
(actually)f(implemen)n(ted.)36 b(But)25 b(this)523 1611
y(really)j(isn't)i(v)n(ery)e(go)r(o)r(d)h(in)g(the)h(presence)e(of)i
(in)n(teresting)e(un)n(b)r(o)n(xed)h(represen)n(tations...])523
1710 y(Since)23 b(L)-7 b(TN)22 b(only)g(deals)g(with)h(v)-5
b(alues)22 b(from)g(the)g(viewp)r(oin)n(t)h(of)f(the)h(receiv)n(er,)f
(w)n(e)g(m)n(ust)g(b)r(e)523 1810 y(prepared)d(during)g(the)i
(translation)e(pass)g(to)h(do)f(stu\013)i(to)f(the)g(con)n(tin)n
(uation)f(at)h(the)g(time)h(it)523 1910 y(is)f(used.)34
b({)20 b(If)h(a)e(V)n(OP)g(yields)h(more)g(v)-5 b(alues)19
b(than)h(are)g(desired,)h(then)f(w)n(e)g(m)n(ust)g(create)f(TNs)523
2009 y(to)26 b(hold)f(the)h(discarded)f(results.)36 b(An)26
b(imp)r(ortan)n(t)f(sp)r(ecial-case)f(is)i(con)n(tin)n(uations)e(whose)
523 2109 y(v)-5 b(alue)30 b(is)f(discarded.)43 b(These)29
b(con)n(tin)n(uations)g(w)n(on't)g(b)r(e)h(annotated)g(at)f(all.)43
b(In)30 b(the)g(case)523 2208 y(of)f(a)f(Ref,)i(w)n(e)e(can)h(simply)g
(skip)f(ev)-5 b(aluation)28 b(of)h(the)g(reference)f(when)h(the)g(con)n
(tin)n(uation)523 2308 y(hasn't)j(b)r(een)g(annotated.)49
b(Although)32 b(this)g(will)g(eliminate)g(b)r(ogus)f(references)g(that)
h(for)523 2408 y(some)39 b(reason)f(w)n(eren't)h(optimized)h(a)n(w)n(a)
n(y)-7 b(,)41 b(the)f(real)e(purp)r(ose)h(is)h(to)f(handle)h(deferred)
523 2507 y(references.)47 b({)31 b(If)g(a)g(V)n(OP)f(yields)h(few)n(er)
g(v)-5 b(alues)31 b(than)g(desired,)h(then)g(w)n(e)f(m)n(ust)g(default)
523 2607 y(the)d(extra)e(v)-5 b(alues)27 b(to)g(NIL.)g({)g(If)h(a)f
(con)n(tin)n(uation)f(has)h(its)g(t)n(yp)r(e-c)n(hec)n(k)f(\015ag)h
(set,)g(then)h(w)n(e)523 2707 y(m)n(ust)k(c)n(hec)n(k)e(the)i(t)n(yp)r
(e)g(of)g(the)f(v)-5 b(alue)32 b(b)r(efore)f(mo)n(ving)g(it)h(in)n(to)f
(the)h(result)f(lo)r(cation.)48 b(In)523 2806 y(general,)23
b(this)g(requires)f(computing)h(the)h(result)f(in)g(a)g(temp)r(orary)-7
b(,)23 b(and)g(ha)n(ving)f(the)h(t)n(yp)r(e-)523 2906
y(c)n(hec)n(k)g(op)r(eration)f(deliv)n(er)h(it)h(in)f(the)h(actual)f
(result)g(lo)r(cation.)35 b({)23 b(If)h(the)g(template's)g(result)523
3005 y(t)n(yp)r(e)30 b(is)g(T,)g(then)h(w)n(e)f(m)n(ust)g(generate)f(a)
g(b)r(o)n(xed)h(temp)r(orary)f(to)h(compute)g(the)g(result)g(in)523
3105 y(when)e(the)g(con)n(tin)n(uation's)e(t)n(yp)r(e)i(isn't)g(T.)648
3205 y(W)-7 b(e)31 b(ma)n(y)e(also)h(need)h(to)f(do)g(stu\013)i(to)e
(the)h(argumen)n(ts)e(when)i(w)n(e)f(generate)g(co)r(de)g(for)523
3304 y(a)37 b(template.)65 b(If)38 b(an)f(argumen)n(t)f(con)n(tin)n
(uation)g(isn't)h(annotated,)i(then)f(it)f(m)n(ust)g(b)r(e)h(a)523
3404 y(deferred)23 b(reference.)35 b(W)-7 b(e)24 b(use)g(the)h(leaf)6
b('s)24 b(TN)g(instead.)35 b(W)-7 b(e)25 b(ma)n(y)e(ha)n(v)n(e)g(to)g
(do)h(an)n(y)f(of)h(the)523 3504 y(ab)r(o)n(v)n(e)g(use-time)i(actions)
e(also.)36 b(Alternativ)n(ely)-7 b(,)25 b(w)n(e)g(could)h(a)n(v)n(oid)e
(hair)g(b)n(y)i(not)f(deferring)523 3603 y(references)h(that)i(m)n(ust)
g(b)r(e)g(t)n(yp)r(e-c)n(hec)n(k)n(ed)e(or)h(ma)n(y)g(need)h(to)f(b)r
(e)h(b)r(o)n(xed.)523 3878 y Ff(17.1)136 b(Stac)l(k)45
b(analysis)523 4060 y Fk(Think)30 b(of)g(this)g(as)f(a)h(lifetime)g
(problem:)41 b(a)30 b(v)-5 b(alues)29 b(generator)f(is)i(a)f(write)h
(and)f(a)h(v)-5 b(alues)523 4159 y(receiv)n(er)30 b(is)i(a)g(read.)50
b(W)-7 b(e)32 b(w)n(an)n(t)g(to)g(annotate)f(eac)n(h)h(VMR-Blo)r(c)n(k)
f(with)i(the)f(unkno)n(wn-)523 4259 y(v)-5 b(alues)31
b(con)n(tin)n(uations)e(that)j(are)d(liv)n(e)i(at)g(that)g(p)r(oin)n
(t.)47 b(If)31 b(w)n(e)g(do)f(a)h(con)n(trol)f(transfer)f(to)523
4358 y(a)h(place)h(where)f(few)n(er)h(con)n(tin)n(uations)e(are)h(liv)n
(e,)h(then)h(w)n(e)e(m)n(ust)h(deallo)r(cate)f(the)h(newly)523
4458 y(dead)c(con)n(tin)n(uations.)648 4558 y(W)-7 b(e)37
b(w)n(an)n(t)g(to)g(con)n(vince)g(ourselv)n(es)e(that)i(v)-5
b(alues)37 b(deallo)r(cation)g(based)f(on)h(lifetime)523
4657 y(analysis)23 b(actually)g(w)n(orks.)34 b(In)25
b(particular,)e(w)n(e)h(need)g(to)g(b)r(e)h(sure)e(that)h(it)h(do)r
(esn't)f(violate)523 4757 y(the)32 b(required)e(stac)n(k)h(discipline.)
48 b(It)32 b(is)f(clear)f(that)i(it)g(is)f(imp)r(ossible)g(to)g(deallo)
r(cate)g(the)523 4857 y(v)-5 b(alues)31 b(b)r(efore)h(they)g(b)r(ecome)
f(dead,)i(since)e(later)g(co)r(de)h(ma)n(y)f(decide)h(to)f(use)h(them.)
50 b(So)1914 5147 y(58)p eop
%%Page: 59 60
59 59 bop 523 614 a Fk(the)33 b(only)g(thing)g(w)n(e)f(need)h(to)g
(ensure)f(is)h(that)g(the)g("righ)n(t")e(time)j(isn't)f(later)f(than)h
(the)523 714 y(time)28 b(that)g(the)g(con)n(tin)n(uation)f(b)r(ecomes)g
(dead.)648 814 y(The)35 b(only)h(reason)e(wh)n(y)h(w)n(e)g(couldn't)h
(deallo)r(cate)f(con)n(tin)n(uation)g(A)h(as)f(so)r(on)g(as)g(it)523
913 y(b)r(ecomes)30 b(dead)h(w)n(ould)f(b)r(e)h(that)f(there)h(is)f
(another)g(con)n(tin)n(uation)f(B)i(on)f(top)h(of)f(it)h(that)523
1013 y(isn't)d(dead)f(\(since)h(w)n(e)f(can)g(only)h(deallo)r(cate)e
(the)i(topmost)g(con)n(tin)n(uation\).)648 1112 y(The)i(k)n(ey)g(to)h
(understanding)f(wh)n(y)g(this)h(can't)f(happ)r(en)h(is)g(that)f(eac)n
(h)g(con)n(tin)n(uation)523 1212 y(has)e(only)f(one)h(read)f(\(receiv)n
(er\).)37 b(If)29 b(B)f(is)g(on)g(top)g(of)g(A,)g(then)h(it)g(m)n(ust)f
(b)r(e)g(the)h(case)e(that)523 1312 y(A)h(is)g(liv)n(e)g(at)f(the)i
(receiv)n(er)d(for)h(B.)h(This)g(means)f(that)i(it)f(is)g(imp)r
(ossible)g(for)f(B)h(to)f(b)r(e)i(liv)n(e)523 1411 y(without)f(A)g(b)r
(eing)g(liv)n(e.)648 1511 y(The)k(reason)g(that)h(w)n(e)f(don't)h(solv)
n(e)e(this)i(problem)g(using)f(a)g(normal)g(iterativ)n(e)g(\015o)n(w)
523 1611 y(analysis)d(is)h(that)g(w)n(e)g(also)f(need)i(to)f(kno)n(w)f
(the)i(ordering)d(of)i(the)h(con)n(tin)n(uations)e(on)h(the)523
1710 y(stac)n(k)j(so)g(that)h(w)n(e)g(can)f(do)h(deallo)r(cation.)55
b(When)34 b(it)g(comes)g(time)g(to)g(discard)f(v)-5 b(alues,)523
1810 y(w)n(e)25 b(w)n(an)n(t)g(to)g(kno)n(w)g(whic)n(h)h(discarded)e
(con)n(tin)n(uation)h(is)g(on)g(the)h(b)r(ottom)g(so)f(that)h(w)n(e)f
(can)523 1910 y(reset)i(SP)g(to)h(its)g(start.)648 2009
y([I)23 b(supp)r(ose)f(w)n(e)h(could)f(also)g(decremen)n(t)g(SP)h(b)n
(y)f(the)i(aggregate)c(size)i(of)h(the)g(discarded)523
2109 y(con)n(tin)n(uations.])62 b(Another)36 b(adv)-5
b(an)n(tage)35 b(of)h(kno)n(wing)g(the)g(order)f(in)i(whic)n(h)f(w)n(e)
g(exp)r(ect)523 2208 y(con)n(tin)n(uations)g(to)h(b)r(e)g(on)g(the)h
(stac)n(k)e(is)h(that)g(it)g(allo)n(ws)f(us)h(to)g(do)g(some)f
(consistency)523 2308 y(c)n(hec)n(king.)g(Also)26 b(doing)h(a)g(lo)r
(calized)f(graph)g(w)n(alk)h(around)f(the)h(v)-5 b(alues-receiv)n(er)25
b(is)i(lik)n(ely)523 2408 y(to)f(b)r(e)g(m)n(uc)n(h)g(more)f(e\016cien)
n(t)h(than)g(doing)f(an)h(iterativ)n(e)f(\015o)n(w)g(analysis)f
(problem)i(o)n(v)n(er)e(all)523 2507 y(the)k(co)r(de)f(in)h(the)g(comp)
r(onen)n(t)g(\(not)f(that)h(big)g(a)f(consideration.\))648
2607 y(#|)d(Actually)-7 b(,)25 b(what)f(w)n(e)g(do)g(is)f(do)h(a)g(bac)
n(kw)n(ard)e(graph)h(w)n(alk)g(from)h(eac)n(h)f(unkno)n(wn-)523
2707 y(v)-5 b(alues)28 b(receiv)n(er.)38 b(As)28 b(w)n(e)g(go,)g(w)n(e)
g(mark)g(eac)n(h)f(w)n(alk)n(ed)h(blo)r(c)n(k)f(with)i(ther)g(ordered)e
(list)h(of)523 2806 y(con)n(tin)n(uations)e(w)n(e)i(b)r(eliev)n(e)f
(are)g(on)g(the)h(stac)n(k.)36 b(Starting)27 b(with)h(an)g(empt)n(y)f
(stac)n(k,)g(w)n(e:)37 b({)523 2906 y(When)20 b(w)n(e)g(encoun)n(ter)f
(another)g(unkno)n(wn-v)-5 b(alues)18 b(receiv)n(er,)i(w)n(e)f(push)h
(that)g(con)n(tin)n(uation)523 3005 y(on)29 b(our)g(sim)n(ulated)g
(stac)n(k.)42 b({)29 b(When)h(w)n(e)f(encoun)n(ter)f(a)h(receiv)n(er)f
(\(whic)n(h)i(had)f(b)r(etter)h(b)r(e)523 3105 y(for)i(the)h(topmost)g
(con)n(tin)n(uation\),)g(w)n(e)g(p)r(op)f(that)h(con)n(tin)n(uation.)52
b({)32 b(When)h(w)n(e)g(p)r(op)g(all)523 3205 y(con)n(tin)n(uations,)27
b(w)n(e)g(terminate)g(our)g(w)n(alk.)648 3304 y([###)g(not)g(quite)g
(righ)n(t...)36 b(It)27 b(seems)f(w)n(e)g(ma)n(y)g(run)h(in)n(to)f
("dead)g(v)-5 b(alues")26 b(during)g(the)523 3404 y(graph)31
b(w)n(alk)h(to)r(o.)51 b(It)32 b(seems)g(that)h(w)n(e)f(ha)n(v)n(e)f
(to)h(c)n(hec)n(k)g(if)h(the)f(pushed)h(con)n(tin)n(uation)e(is)523
3504 y(on)h(stac)n(k)f(top,)i(and)e(if)i(not,)g(add)f(it)g(to)g(the)g
(ending)g(stac)n(k)f(so)g(that)h(the)g(p)r(ost-pass)f(will)523
3603 y(discard)c(it.])648 3703 y([###)h(Also,)f(w)n(e)g(can't)h
(terminate)g(our)e(w)n(alk)h(just)h(b)r(ecause)f(w)n(e)h(hit)g(a)f(blo)
r(c)n(k)g(previ-)523 3802 y(ously)h(w)n(alk)n(ed.)39
b(W)-7 b(e)29 b(ha)n(v)n(e)f(to)h(compare)e(the)i(the)g(End-Stac)n(k)f
(with)h(the)g(v)-5 b(alues)28 b(receiv)n(ed)523 3902
y(along)34 b(the)i(curren)n(t)e(path:)52 b(if)36 b(w)n(e)e(ha)n(v)n(e)g
(more)h(v)-5 b(alues)35 b(on)f(our)h(curren)n(t)f(w)n(alk)g(than)i(on)
523 4002 y(the)h(w)n(alk)f(that)h(last)f(touc)n(hed)h(the)g(blo)r(c)n
(k,)h(then)g(w)n(e)e(need)h(to)f(re-w)n(alk)f(the)j(subgraph)523
4101 y(reac)n(hable)27 b(from)h(from)h(that)f(blo)r(c)n(k,)h(using)f
(our)g(larger)f(set)h(of)h(con)n(tin)n(uations.)39 b(It)29
b(seems)523 4201 y(that)34 b(our)f(actual)g(termination)g(condition)g
(is)h(reac)n(hing)e(a)h(blo)r(c)n(k)g(whose)g(End-Stac)n(k)f(is)523
4301 y(already)26 b(EQ)h(to)g(our)g(curren)n(t)g(stac)n(k.])648
4400 y(If)37 b(at)h(the)f(start,)j(the)e(blo)r(c)n(k)e(con)n(taining)h
(the)h(v)-5 b(alues)37 b(receiv)n(er)e(has)i(already)f(b)r(een)523
4500 y(w)n(alk)n(ed,)e(the)h(w)n(e)e(skip)h(the)h(w)n(alk)e(for)g(that)
h(con)n(tin)n(uation,)h(since)f(it)g(has)f(already)g(b)r(een)523
4599 y(handled)i(b)n(y)g(an)g(enclosing)f(v)-5 b(alues)35
b(receiv)n(er.)58 b(Once)35 b(a)f(w)n(alk)h(has)f(started,)j(w)n(e)e
(ignore)523 4699 y(an)n(y)30 b(signs)g(of)h(a)f(previous)g(w)n(alk,)g
(clobb)r(ering)g(the)h(old)g(result)f(with)h(our)f(o)n(wn,)h(since)g(w)
n(e)523 4799 y(enclose)22 b(that)h(con)n(tin)n(uation,)g(and)g(the)g
(previous)f(w)n(alk)g(do)r(esn't)h(tak)n(e)f(in)n(to)h(consideration)
523 4898 y(the)28 b(fact)g(that)g(our)e(v)-5 b(alues)28
b(blo)r(c)n(k)f(underlies)g(its)h(o)n(wn.)1914 5147 y(59)p
eop
%%Page: 60 61
60 60 bop 648 614 a Fk(When)36 b(w)n(e)f(are)g(done,)i(w)n(e)e(ha)n(v)n
(e)g(annotated)g(eac)n(h)f(blo)r(c)n(k)i(with)g(the)g(stac)n(k)e
(curren)n(t)523 714 y(b)r(oth)c(at)e(the)i(b)r(eginning)f(and)g(at)g
(the)g(end)g(of)h(that)f(blo)r(c)n(k.)41 b(Blo)r(c)n(ks)28
b(that)h(aren't)g(w)n(alk)n(ed)523 814 y(don't)35 b(ha)n(v)n(e)e(an)n
(ything)h(on)g(the)h(stac)n(k)e(either)h(place)g(\(although)g(they)h
(ma)n(y)f(hac)n(k)f(MVs)523 913 y(in)n(ternally\).)648
1013 y(W)-7 b(e)28 b(then)i(scan)d(all)i(the)g(blo)r(c)n(ks)e(in)i(the)
g(comp)r(onen)n(t,)g(lo)r(oking)e(for)h(blo)r(c)n(ks)g(that)h(ha)n(v)n
(e)523 1112 y(predecessors)20 b(with)j(a)f(di\013eren)n(t)h(ending)f
(stac)n(k)g(than)h(that)f(blo)r(c)n(k's)g(starting)g(stac)n(k.)34
b(\(The)523 1212 y(starting)25 b(stac)n(k)g(had)h(b)r(etter)g(b)r(e)g
(a)g(tail)g(of)g(the)g(predecessor's)e(ending)i(stac)n(k.\))35
b(W)-7 b(e)27 b(insert)523 1312 y(a)f(blo)r(c)n(k)h(in)n(terv)n(ening)e
(b)r(et)n(w)n(een)i(all)g(of)f(these)h(predecessors)e(that)i(sets)f(SP)
h(to)f(the)h(end)g(of)523 1411 y(the)d(v)-5 b(alues)24
b(for)f(the)h(con)n(tin)n(uation)f(that)h(should)g(b)r(e)g(on)f(stac)n
(k)g(top.)36 b(Of)24 b(course,)f(this)h(pass)523 1511
y(needn't)k(b)r(e)g(done)g(if)g(there)f(aren't)g(an)n(y)g(global)f
(unkno)n(wn)i(MVs.)648 1611 y(Also,)38 b(if)f(w)n(e)f(\014nd)h(an)n(y)e
(blo)r(c)n(k)h(that)h(w)n(asn't)f(reac)n(hed)f(during)h(the)g(w)n(alk,)
i(but)f(that)523 1710 y(USEs)c(an)f(outside)h(unkno)n(wn-v)-5
b(alues)32 b(con)n(tin)n(uation,)h(then)h(w)n(e)f(kno)n(w)f(that)h(the)
g(DEST)523 1810 y(can't)i(b)r(e)h(reac)n(hed)e(from)h(this)h(p)r(oin)n
(t,)i(so)c(the)i(v)-5 b(alues)35 b(are)f(un)n(used.)61
b(W)-7 b(e)35 b(either)h(insert)523 1910 y(co)r(de)30
b(to)f(p)r(op)h(the)h(v)-5 b(alues,)30 b(or)f(someho)n(w)f(mark)h(the)i
(co)r(de)e(to)h(prev)n(en)n(t)f(the)h(v)-5 b(alues)30
b(from)523 2009 y(ev)n(er)24 b(b)r(eing)h(pushed.)36
b(\(W)-7 b(e)25 b(could)g(cause)f(the)h(p)r(opping)g(to)g(b)r(e)g(done)
g(b)n(y)f(the)h(normal)f(pass)523 2109 y(if)k(w)n(e)f(iterated)h(o)n(v)
n(er)d(the)j(pushes)g(b)r(eforehand,)f(assigning)f(a)h(correct)g
(END-ST)-7 b(A)n(CK.\))648 2208 y([###)30 b(But)g(I)g(think)g(that)g(w)
n(e)f(ha)n(v)n(e)g(to)h(b)r(e)g(a)f(bit)h(clev)n(er)f(within)h(blo)r(c)
n(ks,)g(giv)n(en)f(the)523 2308 y(p)r(ossibilit)n(y)34
b(of)h(blo)r(c)n(ks)e(b)r(eing)i(joined.)58 b(W)-7 b(e)35
b(could)f(collect)g(some)g(unkno)n(wn)g(MVs)h(in)g(a)523
2408 y(blo)r(c)n(k,)e(then)g(do)f(a)h(con)n(trol)e(transfer)g(out)i(of)
f(the)h(receiv)n(er,)f(and)g(this)h(con)n(trol)e(transfer)523
2507 y(could)c(b)r(e)h(squeezed)g(out)f(b)n(y)g(merging)g(blo)r(c)n
(ks.)36 b(Ho)n(w)27 b(ab)r(out:)648 2607 y(\(tagb)r(o)r(dy)g(\(return)g
(\(m)n(ultiple-v)-5 b(alue-prog1)26 b(\(fo)r(o\))i(\(when)g(bar)f(\(go)
g(UNWIND\)\)\)\))648 2707 y(UNWIND)i(\(return)e(\(m)n(ultiple-v)-5
b(alue-prog1)26 b(\(baz\))i(bletc)n(h\)\)\))648 2806
y(But)19 b(the)h(problem)e(do)r(esn't)i(happ)r(en)f(here)g(\(can't)g
(happ)r(en)h(in)f(general?\))34 b(since)19 b(a)f(no)r(de)523
2906 y(buried)28 b(within)h(a)e(blo)r(c)n(k)h(can't)f(use)h(a)g(con)n
(tin)n(uation)f(outside)h(of)g(the)g(blo)r(c)n(k.)37
b(In)28 b(fact,)h(no)523 3005 y(blo)r(c)n(k)e(can)h(ha)n(v)n(e)e(more)h
(then)h(one)g(PUSH)g(con)n(tin)n(uation,)f(and)g(this)h(m)n(ust)g(alw)n
(a)n(ys)e(b)r(e)i(b)r(e)523 3105 y(last)e(con)n(tin)n(uation.)35
b(So)26 b(it)h(is)f(trivially)f(\(structurally\))h(true)g(that)g(all)g
(p)r(ops)g(come)g(b)r(efore)523 3205 y(an)n(y)h(push.)648
3304 y([###)g(But)g(not)g(really:)35 b(the)27 b(DEST)g(of)f(an)h(em)n
(b)r(edded)g(con)n(tin)n(uation)f(ma)n(y)g(b)r(e)h(out-)523
3404 y(side)19 b(the)h(blo)r(c)n(k.)33 b(There)19 b(can)g(b)r(e)g(m)n
(ultiple)h(pushes,)h(and)e(w)n(e)g(m)n(ust)g(\014nd)g(them)h(b)n(y)f
(iterating)523 3504 y(o)n(v)n(er)31 b(the)i(uses)g(of)g(MV)g(receiv)n
(ers)e(in)i(L)-7 b(TN.)33 b(But)h(it)f(w)n(ould)f(b)r(e)i(hard)e(to)h
(get)f(the)i(order)523 3603 y(righ)n(t)24 b(this)g(w)n(a)n(y)-7
b(.)35 b(W)-7 b(e)25 b(could)f(easily)f(get)h(the)h(order)e(righ)n(t)g
(if)i(w)n(e)f(added)g(the)h(generators)d(as)523 3703
y(w)n(e)28 b(sa)n(w)g(the)g(uses,)h(except)f(that)h(w)n(e)f(can't)h
(guaran)n(tee)d(that)j(the)g(con)n(tin)n(uations)e(will)i(b)r(e)523
3802 y(annotated)i(at)g(that)g(p)r(oin)n(t.)48 b(\(Actually)-7
b(,)32 b(I)f(think)h(w)n(e)f(only)f(need)i(the)f(order)f(for)h(consis-)
523 3902 y(tency)26 b(c)n(hec)n(ks,)g(but)h(that)g(is)f(probably)f(w)n
(orth)n(while\).)36 b(I)26 b(guess)f(the)i(thing)g(to)f(do)g(is)g(when)
523 4002 y(w)n(e)21 b(pro)r(cess)g(the)h(receiv)n(er,)f(add)h(the)g
(generator)e(blo)r(c)n(ks)h(to)g(the)h(V)-7 b(alues-Generators,)21
b(then)523 4101 y(do)27 b(a)h(p)r(ost-pass)e(that)i(re-scans)e(the)i
(blo)r(c)n(ks)e(adding)i(the)g(pushes.])648 4201 y(I)g(b)r(eliev)n(e)g
(that)h(ab)r(o)n(v)n(e)e(concern)g(with)i(a)f(dead)g(use)g(getting)g
(mashed)g(inside)h(a)f(blo)r(c)n(k)523 4301 y(can't)33
b(happ)r(en,)j(since)d(the)h(use)f(inside)g(the)h(blo)r(c)n(k)f(m)n
(ust)h(b)r(e)f(the)h(only)f(use,)i(and)e(if)h(the)523
4400 y(use)41 b(isn't)g(reac)n(hable)f(from)g(the)i(push,)i(then)e(the)
f(use)g(is)g(totally)g(unreac)n(hable,)i(and)523 4500
y(should)30 b(ha)n(v)n(e)g(b)r(een)h(deleted,)g(whic)n(h)g(w)n(ould)f
(prev)n(en)n(t)f(the)i(prev)n(en)n(t)f(it)h(from)f(ev)n(er)f(b)r(eing)
523 4599 y(annotated.)36 b(])h(])g(|#)648 4699 y(W)-7
b(e)37 b(\014nd)g(the)h(partial)e(ordering)f(of)i(the)h(v)-5
b(alues)36 b(globs)g(for)h(unkno)n(wn)f(v)-5 b(alues)37
b(con-)523 4799 y(tin)n(uations)f(in)g(eac)n(h)f(en)n(vironmen)n(t.)62
b(W)-7 b(e)36 b(don't)g(ha)n(v)n(e)f(to)h(scan)g(the)g(co)r(de)g(lo)r
(oking)f(for)523 4898 y(unkno)n(wn)26 b(v)-5 b(alues)25
b(con)n(tin)n(uations)g(since)h(L)-7 b(TN)26 b(annotates)f(eac)n(h)g
(blo)r(c)n(k)g(with)i(the)f(con)n(tin-)1914 5147 y(60)p
eop
%%Page: 61 62
61 61 bop 523 614 a Fk(uations)30 b(that)i(w)n(ere)e(p)r(opp)r(ed)h
(and)g(not)g(pushed)g(or)f(pushed)h(and)g(not)g(p)r(opp)r(ed.)48
b(This)30 b(is)523 714 y(all)d(w)n(e)h(need)f(to)h(do)f(the)h(in)n
(ter-blo)r(c)n(k)e(analysis.)648 814 y(After)i(w)n(e)g(ha)n(v)n(e)f
(found)i(out)f(what)g(stu\013)h(is)g(on)f(the)g(stac)n(k)g(at)g(eac)n
(h)f(blo)r(c)n(k)h(b)r(oundary)-7 b(,)523 913 y(w)n(e)24
b(lo)r(ok)h(for)f(blo)r(c)n(ks)g(with)h(predecessors)e(that)i(ha)n(v)n
(e)e(junk)j(on)e(the)i(stac)n(k.)35 b(F)-7 b(or)24 b(eac)n(h)g(suc)n(h)
523 1013 y(blo)r(c)n(k,)34 b(w)n(e)e(in)n(tro)r(duce)h(a)f(new)h(blo)r
(c)n(k)g(con)n(taining)f(co)r(de)g(to)h(restore)e(the)j(stac)n(k)e(p)r
(oin)n(ter.)523 1112 y(Since)j(unkno)n(wn-v)-5 b(alues)34
b(con)n(tin)n(uations)f(are)h(represen)n(ted)g(as)g(<start,)i(coun)n
(t>,)g(w)n(e)f(can)523 1212 y(easily)27 b(p)r(op)h(a)f(con)n(tin)n
(uation)f(using)i(the)g(Start)f(TN.)648 1312 y(Note)g(that)g(there)g
(is)g(only)g(doubt)g(ab)r(out)g(ho)n(w)g(m)n(uc)n(h)f(stu\013)i(is)f
(on)g(the)g(con)n(trol)f(stac)n(k,)523 1411 y(since)34
b(only)g(it)h(is)g(used)f(for)g(unkno)n(wn)g(v)-5 b(alues.)58
b(An)n(y)34 b(sp)r(ecial)g(stac)n(ks)g(suc)n(h)g(as)g(n)n(um)n(b)r(er)
523 1511 y(stac)n(ks)26 b(will)i(alw)n(a)n(ys)e(ha)n(v)n(e)g(a)i
(\014xed)f(allo)r(cation.)523 1786 y Ff(17.2)136 b(Non-lo)t(cal)45
b(exit)523 1967 y Fk(If)27 b(the)h(starting)d(and)i(ending)g(con)n(tin)
n(uations)f(are)f(not)i(in)g(the)h(same)e(en)n(vironmen)n(t,)g(then)523
2067 y(the)32 b(con)n(trol)d(transfer)i(is)g(a)f(non-lo)r(cal)g(exit.)
48 b(In)31 b(this)h(case)e(just)i(call)f(Un)n(wind)g(with)h(the)523
2167 y(appropriate)f(stac)n(k)g(p)r(oin)n(ter,)i(and)f(let)h(the)g(co)r
(de)f(at)g(the)h(re-en)n(try)e(p)r(oin)n(t)h(w)n(orry)e(ab)r(out)523
2266 y(\014xing)d(things)h(up.)648 2366 y(It)e(seems)g(lik)n(e)g(ma)n
(yb)r(e)g(a)f(go)r(o)r(d)h(w)n(a)n(y)f(to)h(organize)e(VMR)j(con)n(v)n
(ersion)d(of)i(NLX)h(w)n(ould)523 2466 y(b)r(e)19 b(to)g(ha)n(v)n(e)e
(en)n(vironmen)n(t)h(analysis)f(insert)i(funn)n(y)g(functions)g(in)g
(new)g(in)n(terp)r(osed)f(clean)n(up)523 2565 y(blo)r(c)n(ks.)37
b(The)27 b(thing)h(is)g(that)g(w)n(e)f(need)h(some)f(w)n(a)n(y)g(for)g
(VMR)h(con)n(v)n(ersion)e(to:)37 b(1])27 b(Get)h(its)523
2665 y(hands)k(on)h(the)g(returned)f(v)-5 b(alues.)52
b(2])32 b(Do)h(w)n(eird)f(con)n(trol)g(shit.)52 b(3])32
b(Deliv)n(er)h(the)g(v)-5 b(alues)523 2764 y(to)35 b(the)g(original)e
(con)n(tin)n(uation)h(destination.)58 b(I.e.)g(w)n(e)34
b(need)h(some)f(w)n(a)n(y)g(to)g(in)n(terp)r(ose)523
2864 y(arbitrary)26 b(co)r(de)h(in)h(the)g(path)g(of)f(v)-5
b(alue)28 b(deliv)n(ery)-7 b(.)648 2964 y(What)21 b(w)n(e)g(do)g(is)g
(replace)g(the)h(NLX)f(uses)g(of)h(the)f(con)n(tin)n(uation)g(with)h
(another)e(con)n(tin-)523 3063 y(uation)h(that)h(is)g(receiv)n(ed)e(b)n
(y)h(a)g(MV-Call)h(to)f(that)h(is)f(in)n(terp)r(osed)g(b)r(et)n(w)n
(een)h(the)g(NLX)g(uses)523 3163 y(and)32 b(the)g(old)g(con)n(tin)n
(uation's)e(blo)r(c)n(k.)50 b(The)32 b(MV-Call)f(uses)h(the)g(original)
e(con)n(tin)n(uation)523 3263 y(to)e(deliv)n(er)e(it's)i(v)-5
b(alues)27 b(to.)648 3362 y([Actually)-7 b(,)29 b(it's)g(not)f(really)g
(imp)r(ortan)n(t)g(that)h(this)g(b)r(e)g(an)f(MV-Call,)h(since)f(it)h
(has)g(to)523 3462 y(b)r(e)24 b(sp)r(ecial-cased)e(b)n(y)h(L)-7
b(TN)24 b(an)n(yw)n(a)n(y)-7 b(.)34 b(Or)23 b(ma)n(yb)r(e)g(w)n(e)g(w)n
(ould)g(w)n(an)n(t)g(it)h(to)f(b)r(e)h(an)g(MV)g(call.)523
3561 y(If)33 b(did)g(normal)f(L)-7 b(TN)33 b(analysis)e(of)i(an)f(MV)h
(call,)h(it)f(w)n(ould)f(force)g(the)h(returned)g(v)-5
b(alues)523 3661 y(in)n(to)36 b(the)g(unkno)n(wn)f(v)-5
b(alues)35 b(con)n(v)n(en)n(tion,)i(whic)n(h)e(is)h(probably)f(prett)n
(y)g(con)n(v)n(enien)n(t)g(for)523 3761 y(use)27 b(in)h(NLX.)648
3860 y(Then)23 b(the)g(en)n(try)g(co)r(de)g(w)n(ould)f(ha)n(v)n(e)g(to)
h(use)g(some)f(sp)r(ecial)h(V)n(OPs)f(to)h(receiv)n(e)f(the)h(un-)523
3960 y(kno)n(wn)j(v)-5 b(alues.)36 b(But)26 b(w)n(e)g(probably)f(need)i
(sp)r(ecial)f(V)n(OPs)f(for)h(NLX)g(en)n(try)g(an)n(yw)n(a)n(y)-7
b(,)25 b(and)523 4060 y(the)k(co)r(de)g(can)g(share)e(with)j(the)f
(call)g(V)n(OPs.)40 b(Also)28 b(w)n(e)h(probably)e(need)j(the)f(tec)n
(hnology)523 4159 y(an)n(yw)n(a)n(y)-7 b(,)26 b(since)h(THR)n(O)n(W)g
(will)h(use)g(truly)f(unkno)n(wn)g(v)-5 b(alues.])648
4259 y(On)34 b(en)n(try)h(to)f(a)h(dynamic)g(exten)n(t)g(that)g(has)f
(non-lo)r(cal-exists)f(in)n(to)i(it)g(\(alw)n(a)n(ys)f(at)523
4358 y(an)c(ENTR)-7 b(Y)30 b(no)r(de\),)g(w)n(e)g(tak)n(e)f(a)g
(complete)h(snapshot)f(of)g(the)i(dynamic)e(state:)41
b(the)30 b(top)523 4458 y(p)r(oin)n(ters)20 b(for)g(all)g(stac)n(ks)f
(curren)n(t)h(Catc)n(h)g(and)g(Un)n(wind-Protect)f(curren)n(t)h(sp)r
(ecial)g(binding)523 4558 y(\(binding)28 b(stac)n(k)f(p)r(oin)n(ter)g
(in)h(shallo)n(w)e(binding\))648 4657 y(W)-7 b(e)24 b(insert)f(co)r(de)
h(at)g(the)g(re-en)n(try)e(p)r(oin)n(t)i(whic)n(h)g(restores)e(the)i
(sa)n(v)n(ed)f(dynamic)h(state.)523 4757 y(All)h(TNs)g(liv)n(e)f(at)g
(a)g(NLX)h(EP)f(are)f(forced)h(on)n(to)g(the)g(stac)n(k,)h(so)e(w)n(e)i
(don't)f(ha)n(v)n(e)g(to)g(restore)523 4857 y(them,)k(and)g(w)n(e)f
(don't)h(ha)n(v)n(e)e(to)i(w)n(orry)d(ab)r(out)j(getting)f(them)h(sa)n
(v)n(ed.)1914 5147 y(61)p eop
%%Page: 62 63
62 62 bop 523 1237 a Fg(Chapter)65 b(18)523 1652 y Fi(Cop)-6
b(y)77 b(propagation)523 2084 y Fk(File:)37 b Fd(copyprop)648
2183 y Fk(This)26 b(phase)f(is)i(optional,)e(but)i(should)f(b)r(e)h
(done)f(whenev)n(er)f(sp)r(eed)h(or)g(space)f(is)h(more)523
2283 y(imp)r(ortan)n(t)g(than)g(compile)g(sp)r(eed.)37
b(W)-7 b(e)26 b(use)g(global)f(\015o)n(w)h(analysis)f(to)h(\014nd)g
(the)h(reac)n(hing)523 2383 y(de\014nitions)g(for)f(eac)n(h)g(TN.)h
(This)f(information)g(is)h(used)f(here)h(to)f(eliminate)h(unnecessary)
523 2482 y(TNs,)h(and)f(is)h(also)e(used)i(later)f(on)g(b)n(y)g(lo)r
(op)g(in)n(v)-5 b(arian)n(t)27 b(optimization.)648 2582
y(In)33 b(some)f(cases,)h(VMR)h(con)n(v)n(ersion)c(will)j
(unnecessarily)f(cop)n(y)g(the)h(v)-5 b(alue)33 b(of)g(a)f(TN)523
2682 y(in)n(to)h(another)g(TN,)h(since)f(it)h(ma)n(y)f(not)h(b)r(e)g
(able)f(to)g(tell)h(that)g(the)g(initial)g(TN)g(has)f(the)523
2781 y(same)i(v)-5 b(alue)35 b(at)g(the)g(time)h(the)f(second)g(TN)g
(is)g(referenced.)59 b(This)35 b(can)g(happ)r(en)g(when)523
2881 y(ICR)26 b(optimize)g(is)f(unable)h(to)g(eliminate)g(a)f(trivial)g
(v)-5 b(ariable)25 b(binding,)h(or)f(when)h(the)g(user)523
2980 y(do)r(es)33 b(a)g(setq,)h(or)e(ma)n(y)h(also)f(result)g(from)h
(creation)f(of)h(expression)f(ev)-5 b(aluation)32 b(temp)r(o-)523
3080 y(raries)25 b(during)h(VMR)h(con)n(v)n(ersion.)35
b(Whatev)n(er)25 b(the)i(cause,)g(w)n(e)f(w)n(ould)g(lik)n(e)g(to)h(a)n
(v)n(oid)e(the)523 3180 y(unnecessary)h(creation)h(and)g(assignmen)n(t)
g(of)g(these)h(TNs.)648 3279 y(What)38 b(w)n(e)f(do)g(is)h(replace)f
(TN)h(references)e(whose)i(only)f(reac)n(hing)f(de\014nition)i(is)g(a)
523 3379 y(Mo)n(v)n(e)28 b(V)n(OP)h(with)h(a)f(reference)f(to)h(the)h
(TN)g(mo)n(v)n(ed)e(from,)i(and)f(then)h(delete)g(the)g(Mo)n(v)n(e)523
3479 y(V)n(OP)24 b(if)i(the)g(cop)n(y)e(TN)i(has)f(no)g(remaining)f
(references.)35 b(There)25 b(are)f(sev)n(eral)g(restrictions)523
3578 y(on)j(cop)n(y)g(propagation:)648 3744 y Fe(\017)41
b Fk(The)34 b(TNs)g(m)n(ust)h(b)r(e)g(\\ordinary")c(TNs,)37
b(not)d(restricted)g(or)f(otherwise)h(un)n(usual.)731
3844 y(Extending)19 b(the)i(life)g(of)f(restricted)g(\(or)g(wired\))g
(TNs)g(can)g(mak)n(e)g(register)e(allo)r(cation)731 3944
y(imp)r(ossible.)36 b(Some)28 b(other)f(TN)h(kinds)f(ha)n(v)n(e)g
(hidden)h(references.)648 4110 y Fe(\017)41 b Fk(W)-7
b(e)28 b(don't)g(w)n(an)n(t)f(to)h(defeat)g(source-lev)n(el)e
(debugging)h(b)n(y)h(replacing)e(named)i(v)-5 b(ari-)731
4209 y(ables)27 b(with)h(anon)n(ymous)e(temp)r(oraries.)648
4375 y Fe(\017)41 b Fk(W)-7 b(e)27 b(can't)h(delete)f(mo)n(v)n(es)f
(that)i(represen)n(tation)e(selected)h(migh)n(t)g(w)n(an)n(t)g(to)h(c)n
(hange)731 4475 y(in)n(to)22 b(a)h(represen)n(tation)e(con)n(v)n
(ersion,)g(since)i(w)n(e)f(need)h(the)h(primitiv)n(e)e(t)n(yp)r(es)h
(of)g(b)r(oth)731 4575 y(TNs)k(to)h(select)f(a)g(con)n(v)n(ersion.)648
4741 y(Some)k(clev)n(erness)g(reduces)g(the)h(cost)g(of)g(\015o)n(w)f
(analysis.)49 b(As)32 b(for)g(lifetime)h(analysis,)523
4840 y(w)n(e)f(only)f(need)h(to)g(do)f(\015o)n(w)g(analysis)g(on)g
(global)g(pac)n(k)n(ed)g(TNs.)49 b(W)-7 b(e)33 b(can't)f(do)f(the)h
(real)1914 5147 y(62)p eop
%%Page: 63 64
63 63 bop 523 614 a Fk(lo)r(cal)23 b(TN)h(assignmen)n(t)f(pass)g(b)r
(efore)g(this,)i(since)f(w)n(e)f(allo)r(cate)g(TNs)h(afterw)n(ard,)f
(so)g(w)n(e)h(do)523 714 y(a)h(pre-pass)f(that)h(marks)g(the)g(TNs)h
(that)f(are)g(lo)r(cal)g(for)f(our)h(purp)r(oses.)35
b(W)-7 b(e)26 b(don't)g(care)e(if)523 814 y(blo)r(c)n(k)j(splitting)h
(ev)n(en)n(tually)f(causes)f(some)h(of)h(them)g(to)g(b)r(e)g
(considered)e(global.)648 913 y(Note)20 b(also)g(that)g(w)n(e)g(are)g
(really)f(only)i(are)e(in)n(terested)h(in)h(kno)n(wing)e(if)i(there)g
(is)f(a)g(unique)523 1013 y(reac)n(hing)25 b(de\014nition,)i(whic)n(h)f
(w)n(e)g(can)g(mash)g(in)n(to)g(our)g(\015o)n(w)f(analysis)g(rules)h(b)
n(y)g(doing)g(an)523 1112 y(in)n(tersection.)49 b(Then)32
b(a)f(de\014nition)h(only)g(app)r(ears)e(in)i(the)h(set)e(when)h(it)h
(is)e(unique.)50 b(W)-7 b(e)523 1212 y(then)34 b(propagate)d(only)h
(de\014nitions)i(of)f(TNs)g(with)h(only)e(one)h(write,)h(whic)n(h)f
(allo)n(ws)f(the)523 1312 y(TN)c(to)f(stand)h(for)f(the)h
(de\014nition.)1914 5147 y(63)p eop
%%Page: 64 65
64 64 bop 523 1237 a Fg(Chapter)65 b(19)523 1652 y Fi(Represen)-6
b(tation)78 b(selection)523 2084 y Fk(File:)37 b Fd(represent)648
2183 y Fk(Some)28 b(t)n(yp)r(es)g(of)g(ob)5 b(ject)28
b(\(suc)n(h)g(as)g Fd(single-float)p Fk(\))c(ha)n(v)n(e)j(m)n(ultiple)i
(p)r(ossible)f(repre-)523 2283 y(sen)n(tations.)51 b(Multiple)33
b(represen)n(tations)d(are)i(useful)h(mainly)f(when)h(there)f(is)g(a)g
(partic-)523 2383 y(ularly)e(e\016cien)n(t)h(non-descriptor)e(represen)
n(tation.)44 b(In)31 b(this)g(case,)f(there)h(is)f(the)h(normal)523
2482 y(descriptor)26 b(represen)n(tation,)g(and)i(an)f(alternate)g
(non-descriptor)f(represen)n(tation.)648 2582 y(This)h(p)r(ossibilit)n
(y)g(brings)g(up)h(t)n(w)n(o)f(ma)5 b(jor)26 b(issues:)648
2748 y Fe(\017)41 b Fk(The)30 b(compiler)g(m)n(ust)h(decide)g(whic)n(h)
f(represen)n(tation)f(will)i(b)r(e)g(most)f(e\016cien)n(t)h(for)731
2848 y(an)n(y)26 b(giv)n(en)h(v)-5 b(alue,)28 b(and)648
3014 y Fe(\017)41 b Fk(Represen)n(tation)21 b(con)n(v)n(ersion)f(co)r
(de)i(m)n(ust)h(b)r(e)f(inserted)g(where)g(the)h(represen)n(tation)731
3113 y(of)k(a)g(v)-5 b(alue)28 b(is)f(c)n(hanged.)523
3279 y(First,)32 b(the)g(represen)n(tations)e(for)h(TNs)g(are)g
(selected)g(b)n(y)h(examining)e(all)i(the)g(TN)f(refer-)523
3379 y(ences)c(and)f(attempting)i(to)f(minimize)g(reference)f(costs.)36
b(Then)27 b(represen)n(tation)e(con)n(v)n(er-)523 3479
y(sion)i(co)r(de)h(is)f(in)n(tro)r(duced.)648 3578 y(This)35
b(phase)f(is)i(in)f(e\013ect)h(a)e(pre-pass)g(to)h(register)f(allo)r
(cation.)59 b(The)35 b(main)g(reason)523 3678 y(for)30
b(its)h(existence)f(is)h(that)g(represen)n(tation)d(con)n(v)n(ersions)g
(ma)n(y)i(b)r(e)h(farily)f(complex)g(\(e.g.)523 3778
y(in)n(v)n(olving)25 b(memory)g(allo)r(cation\),)h(and)h(th)n(us)f(m)n
(ust)g(b)r(e)h(disco)n(v)n(ered)e(b)r(efore)h(register)e(allo-)523
3877 y(cation.)648 3977 y(VMR)38 b(con)n(v)n(ersion)d(lea)n(v)n(es)h
(stubs)i(for)f(represen)n(tation)e(sp)r(eci\014c)j(mo)n(v)n(e)f(op)r
(erations.)523 4076 y(Represen)n(tation)26 b(selection)h(recognizes)e
Fd(move)h Fk(b)n(y)h(name.)37 b(Argumen)n(t)27 b(and)g(return)f(v)-5
b(alue)523 4176 y(passing)17 b(for)h(call)g(V)n(OPs)f(is)i(con)n
(trolled)e(b)n(y)h(the)h Fd(:move-arguments)12 b Fk(option)18
b(to)g Fd(define-vop)p Fk(.)648 4276 y(Represen)n(tation)29
b(selection)i(is)g(also)f(resp)r(onsible)g(for)g(determining)h(what)g
(functions)523 4375 y(use)25 b(the)g(n)n(um)n(b)r(er)f(stac)n(k.)35
b(If)25 b(an)n(y)f(represen)n(tation)f(is)i(c)n(hosen)e(whic)n(h)i
(could)f(in)n(v)n(olv)n(e)g(pac)n(k-)523 4475 y(ing)40
b(in)n(to)h(the)g Fd(non-descriptor-)o(sta)o(ck)34 b
Fk(SB,)41 b(then)g(w)n(e)f(allo)r(cate)f(the)i(NFP)g(register)523
4575 y(throughout)24 b(the)h(comp)r(onen)n(t.)36 b(As)24
b(an)h(optimization,)g(p)r(ermit)g(the)g(decision)f(of)g(whether)523
4674 y(a)h(n)n(um)n(b)r(er)f(stac)n(k)g(frame)h(needs)g(to)f(b)r(e)i
(allo)r(cated)e(to)h(b)r(e)g(made)g(on)f(a)h(p)r(er-function)g(basis.)
523 4774 y(If)h(a)f(function)i(do)r(esn't)e(use)h(the)g(n)n(um)n(b)r
(er)f(stac)n(k,)g(and)h(isn't)g(in)g(the)g(same)f(tail-set)g(as)g(an)n
(y)1914 5147 y(64)p eop
%%Page: 65 66
65 65 bop 523 614 a Fk(function)23 b(that)g(uses)f(the)h(n)n(um)n(b)r
(er)f(stac)n(k,)h(then)g(it)g(do)r(esn't)f(need)h(a)f(n)n(um)n(b)r(er)g
(stac)n(k)g(frame,)523 714 y(ev)n(en)27 b(if)h(other)f(functions)h(in)g
(the)g(comp)r(onen)n(t)f(do.)1914 5147 y(65)p eop
%%Page: 66 67
66 66 bop 523 1237 a Fg(Chapter)65 b(20)523 1652 y Fi(Lifetime)76
b(analysis)523 2084 y Fk(File:)37 b Fd(life)648 2183
y Fk(This)29 b(phase)g(is)h(a)f(preliminary)g(to)g(P)n(ac)n(k.)42
b(It)30 b(in)n(v)n(olv)n(es)d(three)j(passes:)40 b({)29
b(A)h(pre-pass)523 2283 y(that)c(computes)g(the)g(DEF)g(and)g(USE)g
(sets)f(for)h(liv)n(e)f(TN)h(analysis,)f(while)h(also)f(assigning)523
2383 y(lo)r(cal)e(TN)i(n)n(um)n(b)r(ers,)f(splitting)g(blo)r(c)n(ks)g
(if)g(necessary)-7 b(.)34 b(###)25 b(But)f(not)g(really)-7
b(...)35 b({)24 b(A)g(\015o)n(w)523 2482 y(analysis)33
b(pass)h(that)g(do)r(es)h(bac)n(kw)n(ard)d(\015o)n(w)i(analysis)f(on)h
(the)h(comp)r(onen)n(t)f(to)g(\014nd)h(the)523 2582 y(liv)n(e)c(TNs)g
(at)g(eac)n(h)g(blo)r(c)n(k)g(b)r(oundary)-7 b(.)47 b({)31
b(A)g(p)r(ost-pass)g(that)g(\014nds)h(the)f(con\015ict)h(set)f(for)523
2682 y(eac)n(h)c(TN.)648 2781 y(#|)38 b(Exploit)g(the)g(fact)g(that)h
(a)e(single)h(V)n(OP)f(can)h(only)g(exhaust)f(L)-7 b(TN)39
b(n)n(um)n(b)r(ers)523 2881 y(when)32 b(there)f(are)f(large)g(more)g
(op)r(erands.)47 b(Since)32 b(more)e(op)r(erand)h(reference)f(cannot)h
(b)r(e)523 2980 y(in)n(terlea)n(v)n(ed)c(with)i(temp)r(orary)e
(reference,)h(the)h(references)e(all)h(e\013ectiv)n(ely)h(o)r(ccur)f
(at)g(the)523 3080 y(same)i(time.)46 b(This)31 b(means)f(that)g(w)n(e)h
(can)f(assign)f(all)h(the)h(more)f(args)f(and)h(all)g(the)h(more)523
3180 y(results)c(the)h(same)f(L)-7 b(TN)28 b(n)n(um)n(b)r(er)f(and)h
(the)g(same)f(lifetime)h(info.)37 b(|#)523 3454 y Ff(20.1)136
b(Flo)l(w)45 b(analysis)523 3636 y Fk(It)29 b(seems)f(w)n(e)h(could)f
(use)h(the)g(global-con\015icts)e(structures)h(during)g(compute)h(the)g
(in)n(ter-)523 3736 y(blo)r(c)n(k)18 b(lifetime)i(information.)33
b(The)19 b(pre-pass)e(creates)g(all)h(the)h(global-con\015icts)e(for)h
(blo)r(c)n(ks)523 3835 y(that)29 b(global)e(TNs)h(are)f(referenced)h
(in.)39 b(The)28 b(\015o)n(w)g(analysis)f(pass)g(just)i(adds)f(alw)n(a)
n(ys-liv)n(e)523 3935 y(global-con\015icts)34 b(for)i(the)h(other)e
(blo)r(c)n(ks)h(the)g(TNs)h(are)e(liv)n(e)g(in.)63 b(In)37
b(addition)f(to)g(p)r(os-)523 4035 y(sibly)c(b)r(eing)h(more)e
(e\016cien)n(t)i(than)g(SSets,)g(this)g(w)n(ould)f(directly)g(result)g
(in)h(the)g(desired)523 4134 y(global-con\015icts)24
b(information,)i(rather)f(that)h(ha)n(ving)f(to)h(create)f(it)h(from)g
(another)f(repre-)523 4234 y(sen)n(tation.)648 4334 y(The)i(DF)n(O)g
(sorted)g(p)r(er-TN)g(global-con\015icts)e(thread)i(suggests)f(some)g
(kind)i(of)f(algo-)523 4433 y(rithm)f(based)g(on)g(the)h(manipulation)f
(of)g(the)g(sets)g(of)g(blo)r(c)n(ks)g(eac)n(h)f(TN)i(is)f(liv)n(e)g
(in)g(\(whic)n(h)523 4533 y(is)i(what)f(w)n(e)g(really)g(w)n(an)n(t\),)
g(rather)g(than)g(the)h(set)g(of)g(TNs)f(liv)n(e)g(in)h(eac)n(h)f(blo)r
(c)n(k.)648 4632 y(If)20 b(w)n(e)g(sorted)f(the)h(p)r(er-TN)g
(global-con\015icts)e(in)j(rev)n(erse)d(DF)n(O)i(\(whic)n(h)g(is)g
(just)h(as)e(go)r(o)r(d)523 4732 y(for)24 b(determining)g(con\015icts)g
(b)r(et)n(w)n(een)g(TNs\),)h(then)g(it)g(seems)f(w)n(e)f(could)h(scan)g
(though)g(the)523 4832 y(con\015icts)j(sim)n(ultaneously)g(with)h(our)f
(\015o)n(w-analysis)e(scan)i(through)g(the)h(blo)r(c)n(ks.)1914
5147 y(66)p eop
%%Page: 67 68
67 67 bop 648 614 a Fk(The)24 b(\015o)n(w)g(analysis)f(step)h(is)h(the)
f(follo)n(wing:)34 b(If)25 b(a)f(TN)h(is)f(alw)n(a)n(ys-liv)n(e)e(or)h
(read-b)r(efore-)523 714 y(written)32 b(in)h(a)e(successor)g(blo)r(c)n
(k,)h(then)h(w)n(e)f(mak)n(e)f(it)h(alw)n(a)n(ys-liv)n(e)e(in)i(the)h
(curren)n(t)e(blo)r(c)n(k)523 814 y(unless)c(there)h(are)e(already)h
(global-con\015icts)e(recorded)h(for)i(that)f(TN)h(in)g(this)g(blo)r(c)
n(k.)648 913 y(The)d(iteration)f(terminates)g(when)h(w)n(e)g(don't)g
(add)g(an)n(y)f(new)h(global-con\015icts)e(during)523
1013 y(a)k(pass.)648 1112 y(W)-7 b(e)30 b(ma)n(y)f(also)g(w)n(an)n(t)g
(to)h(promote)f(TNs)h(only)g(read)f(within)h(a)g(blo)r(c)n(k)f(to)h
(alw)n(a)n(ys-liv)n(e)523 1212 y(when)f(the)h(TN)g(is)f(liv)n(e)g(in)g
(a)g(successor.)40 b(This)30 b(should)f(b)r(e)g(easy)g(enough)f(as)h
(long)f(as)h(the)523 1312 y(global-con\015icts)d(structure)h(con)n
(tains)g(this)g(kind)h(of)g(info.)648 1411 y(The)34 b(critical)g(op)r
(eration)g(here)g(is)g(determining)g(whether)h(a)f(giv)n(en)g(global)f
(TN)i(has)523 1511 y(global)c(con\015icts)h(in)h(a)f(giv)n(en)g(blo)r
(c)n(k.)50 b(Note)33 b(that)f(since)h(w)n(e)f(scan)f(the)i(blo)r(c)n
(ks)f(in)g(DF)n(O,)523 1611 y(and)27 b(the)h(global-con\015icts)e(are)g
(sorted)h(in)h(DF)n(O,)f(if)h(w)n(e)f(giv)n(e)g(eac)n(h)g(global)f(TN)i
(a)f(p)r(oin)n(ter)523 1710 y(to)36 b(the)h(global-con\015icts)d(for)i
(the)g(last)g(blo)r(c)n(k)g(w)n(e)g(c)n(hec)n(k)n(ed)f(the)i(TN)f(w)n
(as)f(in,)k(then)e(w)n(e)523 1810 y(can)26 b(guaran)n(tee)f(that)i(the)
g(global-con\015icts)d(w)n(e)i(are)g(lo)r(oking)g(for)g(are)f(alw)n(a)n
(ys)g(at)h(or)g(after)523 1910 y(that)h(p)r(oin)n(ter.)36
b(If)26 b(w)n(e)g(need)h(to)f(insert)g(a)g(new)g(structure,)g(then)h
(the)f(p)r(oin)n(ter)g(will)h(help)f(us)523 2009 y(rapidly)h(\014nd)h
(the)g(place)f(to)h(do)f(the)h(insertion.])523 2284 y
Ff(20.2)136 b(Con\015ict)45 b(detection)523 2466 y Fk([###)28
b(En)n(vironmen)n(t,)f(:more)f(TNs.])648 2565 y(This)35
b(phase)g(mak)n(es)g(use)h(of)f(the)h(results)f(of)h(lifetime)h
(analysis)d(to)i(\014nd)g(the)g(set)f(of)523 2665 y(TNs)d(that)f(ha)n
(v)n(e)g(lifetimes)h(o)n(v)n(erlapping)d(with)j(those)f(of)g(eac)n(h)g
(TN.)h(W)-7 b(e)32 b(also)e(annotate)523 2764 y(call)e(V)n(OPs)g(with)i
(information)e(ab)r(out)h(the)g(liv)n(e)f(TNs)h(so)f(that)h(co)r(de)g
(generation)e(kno)n(ws)523 2864 y(whic)n(h)h(registers)d(need)j(to)g(b)
r(e)g(sa)n(v)n(ed.)648 2964 y(The)h(basic)g(action)g(is)h(a)f(bac)n(kw)
n(ard)f(scan)h(of)g(eac)n(h)g(blo)r(c)n(k,)h(lo)r(oking)f(at)g(eac)n(h)
g(TN-Ref)523 3063 y(and)e(main)n(taining)f(a)h(set)g(of)g(the)g(curren)
n(tly)f(liv)n(e)g(TNs.)37 b(When)28 b(w)n(e)e(see)h(a)f(read,)h(w)n(e)f
(c)n(hec)n(k)523 3163 y(if)34 b(the)h(TN)f(is)g(in)g(the)g(liv)n(e)g
(set.)56 b(If)34 b(not,)i(w)n(e:)49 b({)34 b(Add)g(the)h(TN)f(to)g(the)
g(con\015ict)g(set)g(for)523 3263 y(ev)n(ery)26 b(curren)n(tly)g(liv)n
(e)h(TN,)h({)f(Union)g(the)h(set)f(of)g(curren)n(tly)g(liv)n(e)g(TNs)g
(with)h(the)f(con\015ict)523 3362 y(set)h(for)f(the)h(TN,)g(and)f({)g
(Add)h(the)g(TN)g(to)g(the)g(set)f(of)h(liv)n(e)f(TNs.)648
3462 y(When)e(w)n(e)g(see)f(a)h(write)f(for)h(a)f(liv)n(e)h(TN,)g(w)n
(e)g(just)g(remo)n(v)n(e)f(it)h(from)g(the)g(liv)n(e)f(set.)36
b(If)26 b(w)n(e)523 3561 y(see)31 b(a)f(write)h(to)g(a)f(dead)h(TN,)g
(then)g(w)n(e)g(up)r(date)g(the)g(con\015icts)g(sets)g(as)f(for)g(a)h
(read,)g(but)523 3661 y(don't)h(add)f(the)h(TN)g(to)f(the)h(liv)n(e)f
(set.)49 b(W)-7 b(e)32 b(ha)n(v)n(e)e(to)h(do)g(this)h(so)f(that)h(the)
g(b)r(ogus)f(write)523 3761 y(do)r(esn't)d(clobb)r(er)f(an)n(ything.)
648 3860 y([W)-7 b(e)31 b(don't)f(consider)g(alw)n(a)n(ys-liv)n(e)d
(TNs)k(at)f(all)h(in)f(this)h(pro)r(cess,)f(since)h(the)f(con\015ict)
523 3960 y(of)24 b(alw)n(a)n(ys-liv)n(e)d(TNs)j(with)h(other)e(TNs)h
(in)h(the)f(blo)r(c)n(k)g(is)g(implicit)g(in)h(the)f
(global-con\015icts)523 4060 y(structures.)648 4159 y(Before)k(w)n(e)h
(do)g(the)g(scan)g(on)g(a)g(blo)r(c)n(k,)g(w)n(e)g(go)f(through)h(the)h
(global-con\015icts)d(struc-)523 4259 y(tures)39 b(of)f(TNs)h(that)h(c)
n(hange)d(liv)n(eness)h(in)h(the)h(blo)r(c)n(k,)h(assigning)c(the)j
(recorded)d(L)-7 b(TN)523 4358 y(n)n(um)n(b)r(er)27 b(to)h(the)g(TN's)g
(L)-7 b(TN)27 b(n)n(um)n(b)r(er)h(for)f(the)h(duration)f(of)g(pro)r
(cessing)f(of)i(that)g(blo)r(c)n(k.])648 4458 y(E\016cien)n(tly)f
(computing)h(and)g(represen)n(ting)f(this)i(information)e(calls)h(for)f
(some)h(clev-)523 4558 y(erness.)39 b(It)28 b(w)n(ould)h(b)r(e)f
(prohibitiv)n(ely)g(exp)r(ensiv)n(e)g(to)h(represen)n(t)e(the)i(full)g
(con\015ict)f(set)h(for)523 4657 y(ev)n(ery)g(TN)h(with)g(sparse)f
(sets,)h(as)g(is)g(done)f(at)h(the)g(blo)r(c)n(k-lev)n(el.)43
b(Although)30 b(it)g(w)n(ouldn't)523 4757 y(cause)c(non-linear)g(b)r
(eha)n(vior,)g(it)i(w)n(ould)e(require)g(a)h(complex)g(link)n(ed)g
(structure)f(con)n(tain-)523 4857 y(ing)f(tens)g(of)g(elemen)n(ts)f(to)
h(b)r(e)g(created)g(for)f(ev)n(ery)g(TN.)h(F)-7 b(ortunately)24
b(w)n(e)h(can)f(impro)n(v)n(e)g(on)1914 5147 y(67)p eop
%%Page: 68 69
68 68 bop 523 614 a Fk(this)25 b(if)f(w)n(e)g(tak)n(e)g(in)n(to)g
(accoun)n(t)f(the)i(fact)f(that)h(most)f(TNs)g(are)f("lo)r(cal")g(TNs:)
35 b(TNs)24 b(whic)n(h)523 714 y(ha)n(v)n(e)i(all)i(their)f(uses)h(in)f
(one)h(blo)r(c)n(k.)648 814 y(First,)23 b(man)n(y)f(global)g(TNs)h
(will)f(b)r(e)i(either)e(liv)n(e)g(or)g(dead)h(for)f(the)h(en)n(tire)f
(duration)g(of)h(a)523 913 y(giv)n(en)k(blo)r(c)n(k.)37
b(W)-7 b(e)28 b(can)g(represen)n(t)e(the)j(con\015ict)e(b)r(et)n(w)n
(een)h(global)f(TNs)h(liv)n(e)f(throughout)523 1013 y(the)c(blo)r(c)n
(k)f(and)g(TNs)g(lo)r(cal)g(to)g(the)h(blo)r(c)n(k)f(b)n(y)g(storing)f
(the)i(set)f(of)g(alw)n(a)n(ys-liv)n(e)e(global)h(TNs)523
1112 y(in)28 b(the)h(blo)r(c)n(k.)38 b(This)28 b(reduces)g(the)g(n)n
(um)n(b)r(er)g(of)g(global)f(TNs)h(that)h(m)n(ust)f(b)r(e)h(represen)n
(ted)523 1212 y(in)f(the)g(con\015icts)f(for)g(lo)r(cal)g(TNs.)648
1312 y(Second,)36 b(w)n(e)f(can)g(represen)n(t)f(con\015icts)h(within)h
(a)f(blo)r(c)n(k)f(using)h(bit-v)n(ectors.)59 b(Eac)n(h)523
1411 y(TN)29 b(that)h(c)n(hanges)d(liv)n(eness)h(within)i(a)f(blo)r(c)n
(k)f(is)h(assigned)f(a)g(lo)r(cal)h(TN)g(n)n(um)n(b)r(er.)41
b(Lo)r(cal)523 1511 y(con\015icts)26 b(are)f(represen)n(ted)f(using)i
(a)f(\014xed-size)h(bit-v)n(ector)e(of)i(64)f(elemen)n(ts)h(or)f(so)g
(whic)n(h)523 1611 y(has)k(a)g(1)f(for)h(the)h(lo)r(cal)e(TN)i(n)n(um)n
(b)r(er)f(of)g(ev)n(ery)f(TN)h(liv)n(e)g(at)g(that)h(time.)42
b(The)29 b(blo)r(c)n(k)g(has)523 1710 y(a)e(simple-v)n(ector)e(whic)n
(h)i(maps)g(from)g(lo)r(cal)g(TN)g(n)n(um)n(b)r(ers)g(to)g(TNs.)36
b(Fixed-size)27 b(v)n(ectors)523 1810 y(reduce)f(the)g(hassle)f(of)h
(doing)g(allo)r(cations)f(and)g(allo)n(w)g(op)r(erations)g(to)h(b)r(e)g
(op)r(en-co)r(ded)g(in)523 1910 y(a)h(maximally)g(tense)h(fashion.)648
2009 y(W)-7 b(e)28 b(can)f(represen)n(t)g(the)i(con\015icts)e(for)h(a)f
(lo)r(cal)h(TN)g(b)n(y)f(a)h(single)f(bit-v)n(ector)g(indexed)523
2109 y(b)n(y)g(the)h(lo)r(cal)g(TN)f(n)n(um)n(b)r(ers)h(for)f(that)h
(blo)r(c)n(k,)f(but)h(in)g(the)g(global)f(TN)h(case,)e(w)n(e)i(need)f
(to)523 2208 y(b)r(e)d(able)e(to)h(represen)n(t)f(con\015icts)h(with)h
(arbitrary)d(TNs.)35 b(W)-7 b(e)24 b(could)f(use)g(a)f(list-lik)n(e)h
(sparse)523 2308 y(set)i(represen)n(tation,)g(but)h(then)f(w)n(e)h(w)n
(ould)e(ha)n(v)n(e)h(to)g(either)g(sp)r(ecial-case)f(global)g(TNs)i(b)n
(y)523 2408 y(using)31 b(the)g(sparse)f(represen)n(tation)f(within)j
(the)f(blo)r(c)n(k,)g(or)f(con)n(v)n(ert)g(the)h(lo)r(cal)g
(con\015icts)523 2507 y(bit-v)n(ector)d(to)i(the)g(sparse)e(represen)n
(tation)g(at)h(the)h(blo)r(c)n(k)f(end.)43 b(Instead,)29
b(w)n(e)h(giv)n(e)e(eac)n(h)523 2607 y(global)h(TN)h(a)f(list)h(of)g
(the)g(lo)r(cal)f(con\015icts)h(bit-v)n(ectors)e(for)h(eac)n(h)g(blo)r
(c)n(k)g(that)h(the)g(TN)g(is)523 2707 y(liv)n(e)j(in.)56
b(If)34 b(the)g(TN)h(is)e(alw)n(a)n(ys-liv)n(e)e(in)j(a)g(blo)r(c)n(k,)
h(then)f(w)n(e)f(record)g(that)h(fact)f(instead.)523
2806 y(This)24 b(giv)n(es)f(us)i(a)f(ma)5 b(jor)23 b(reduction)h(in)g
(the)h(amoun)n(t)f(of)g(w)n(ork)f(w)n(e)h(ha)n(v)n(e)f(to)h(do)g(in)g
(lifetime)523 2906 y(analysis)29 b(at)h(the)h(cost)f(of)g(some)f
(increase)g(in)i(the)g(time)f(to)h(iterate)e(o)n(v)n(er)g(the)i(set)f
(during)523 3005 y(P)n(ac)n(k.)648 3105 y(Since)25 b(w)n(e)h(build)g
(the)g(lists)g(of)g(lo)r(cal)f(con\015ict)h(v)n(ectors)e(a)h(blo)r(c)n
(k)g(at)h(a)f(time,)i(the)f(blo)r(c)n(ks)523 3205 y(in)h(the)h(lists)f
(for)f(eac)n(h)h(TN)g(will)g(b)r(e)h(sorted)e(b)n(y)g(the)i(blo)r(c)n
(k)e(n)n(um)n(b)r(er.)37 b(The)27 b(structure)f(also)523
3304 y(con)n(tains)31 b(the)h(lo)r(cal)f(TN)h(n)n(um)n(b)r(er)f(for)g
(the)h(TN)g(in)g(that)g(blo)r(c)n(k.)48 b(These)31 b(features)g(allo)n
(w)523 3404 y(pac)n(k)25 b(to)h(e\016cien)n(tly)f(determine)h(whether)g
(t)n(w)n(o)f(arbitrary)f(TNs)i(con\015ict.)36 b(Y)-7
b(ou)26 b(just)g(scan)523 3504 y(the)33 b(lists)f(in)h(order,)g
(skipping)f(blo)r(c)n(ks)g(that)g(are)g(in)h(only)f(one)g(list)h(b)n(y)
f(using)g(the)h(blo)r(c)n(k)523 3603 y(n)n(um)n(b)r(ers.)51
b(When)33 b(w)n(e)f(\014nd)h(a)f(blo)r(c)n(k)g(that)h(b)r(oth)f(TNs)h
(are)e(liv)n(e)h(in,)i(w)n(e)e(just)h(c)n(hec)n(k)f(the)523
3703 y(lo)r(cal)27 b(TN)h(n)n(um)n(b)r(er)f(of)h(one)f(TN)h(in)g(the)g
(lo)r(cal)f(con\015icts)g(v)n(ector)f(of)i(the)g(other.)648
3802 y(In)36 b(order)g(to)g(do)g(these)h(optimizations,)h(w)n(e)e(m)n
(ust)h(do)f(a)g(pre-pass)f(that)i(\014nds)g(the)523 3902
y(alw)n(a)n(ys-liv)n(e)22 b(TNs)j(and)g(breaks)e(blo)r(c)n(ks)h(up)i
(in)n(to)e(small)h(enough)f(pieces)g(so)h(that)g(w)n(e)f(don't)523
4002 y(run)h(out)h(of)f(lo)r(cal)g(TN)h(n)n(um)n(b)r(ers.)36
b(If)26 b(w)n(e)f(can)g(mak)n(e)g(a)g(blo)r(c)n(k)g(arbitrarily)e
(small,)j(then)g(w)n(e)523 4101 y(can)k(guaran)n(tee)f(that)i(an)g
(arbitrarily)d(small)j(n)n(um)n(b)r(er)f(of)h(TNs)f(c)n(hange)g(liv)n
(eness)g(within)523 4201 y(the)22 b(blo)r(c)n(k.)34 b(W)-7
b(e)22 b(m)n(ust)f(b)r(e)h(prepared)e(to)h(mak)n(e)f(the)i(argumen)n
(ts)e(to)h(un)n(b)r(ounded)h(arg)e(coun)n(t)523 4301
y(V)n(OPs)29 b(\(suc)n(h)h(as)f(function)i(call\))f(alw)n(a)n(ys-liv)n
(e)d(ev)n(en)j(when)g(they)h(really)e(aren't.)43 b(This)30
b(is)523 4400 y(enabled)23 b(b)n(y)h(a)f(panic)g(mo)r(de)h(in)f(the)h
(blo)r(c)n(k)f(splitter:)35 b(if)24 b(w)n(e)f(disco)n(v)n(er)f(that)i
(the)g(blo)r(c)n(k)f(only)523 4500 y(con)n(tains)e(one)g(V)n(OP)h(and)f
(there)h(are)f(still)h(to)r(o)g(man)n(y)f(TNs)h(that)g(aren't)f(alw)n
(a)n(ys-liv)n(e,)g(then)523 4599 y(w)n(e)27 b(promote)g(the)h(argumen)n
(ts)e(\(whic)n(h)i(w)n(e'd)f(b)r(etter)h(b)r(e)g(able)g(to)f(do...\).)
648 4699 y(This)c(is)f(done)h(during)g(the)g(pre-scan)f(in)h(lifetime)h
(analysis.)34 b(W)-7 b(e)23 b(can)g(do)f(this)i(b)r(ecause)523
4799 y(all)35 b(TNs)g(that)h(c)n(hange)e(liv)n(eness)h(within)h(a)e
(blo)r(c)n(k)h(can)g(b)r(e)h(found)f(b)n(y)g(examining)g(that)523
4898 y(blo)r(c)n(k:)h(the)28 b(\015o)n(w)f(analysis)g(only)g(adds)g
(alw)n(a)n(ys-liv)n(e)e(TNs.)1914 5147 y(68)p eop
%%Page: 69 70
69 69 bop 648 614 a Fk(When)32 b(w)n(e)f(are)g(doing)g(the)h
(con\015ict)g(detection)g(pass,)g(w)n(e)f(set)h(the)g(L)-7
b(TN)32 b(n)n(um)n(b)r(er)f(of)523 714 y(global)22 b(TNs.)35
b(W)-7 b(e)23 b(can)f(easily)g(detect)h(global)e(TNs)i(that)g(ha)n(v)n
(e)e(not)i(b)r(een)g(lo)r(cally)f(mapp)r(ed)523 814 y(b)r(ecause)d
(this)i(slot)e(is)h(initially)g(n)n(ull)g(for)f(global)f(TNs)i(and)g(w)
n(e)f(n)n(ull)h(it)h(out)e(after)h(pro)r(cessing)523
913 y(eac)n(h)31 b(blo)r(c)n(k.)50 b(W)-7 b(e)33 b(assign)e(all)g(Alw)n
(a)n(ys-Liv)n(e)f(TNs)i(to)g(the)h(same)e(lo)r(cal)h(n)n(um)n(b)r(er)g
(so)f(that)523 1013 y(w)n(e)c(don't)h(need)g(to)f(treat)g(references)g
(to)g(them)h(sp)r(ecially)g(when)f(making)g(the)h(scan.)648
1112 y(W)-7 b(e)31 b(also)e(annotate)h(call)g(V)n(OPs)g(that)h(do)f
(register)f(sa)n(ving)h(with)h(the)g(TNs)f(that)h(are)523
1212 y(liv)n(e)38 b(during)g(the)h(call,)i(and)e(th)n(us)f(w)n(ould)g
(need)h(to)f(b)r(e)h(sa)n(v)n(ed)e(if)i(they)g(are)f(pac)n(k)n(ed)f(in)
523 1312 y(registers.)648 1411 y(W)-7 b(e)24 b(adjust)h(the)f(costs)g
(for)g(TNs)g(that)g(need)h(to)f(b)r(e)h(sa)n(v)n(ed)d(so)i(that)g(TNs)h
(costing)e(more)523 1511 y(to)32 b(sa)n(v)n(e)e(and)h(restore)g(than)h
(to)f(reference)g(get)g(pac)n(k)n(ed)g(on)h(the)g(stac)n(k.)48
b(W)-7 b(e)32 b(w)n(ould)f(also)523 1611 y(lik)n(e)e(more)g(often)h(sa)
n(v)n(ed)e(TNs)i(to)g(get)f(higher)g(costs)g(so)g(that)h(they)g(are)f
(pac)n(k)n(ed)f(in)i(more)523 1710 y(sa)n(v)-5 b(able)26
b(lo)r(cations.)1914 5147 y(69)p eop
%%Page: 70 71
70 70 bop 523 1237 a Fg(Chapter)65 b(21)523 1652 y Fi(P)-6
b(ac)g(king)523 2084 y Fk(File:)37 b Fd(pack)648 2183
y Fk(#|)648 2283 y(Add)28 b(lifetime/pac)n(k)f(supp)r(ort)g(for)g
(pre-pac)n(k)n(ed)f(sa)n(v)n(e)g(TNs.)648 2383 y(Fix)40
b(GTN/VMR)h(con)n(v)n(ersion)c(to)k(use)f(pre-pac)n(k)n(ed)e(sa)n(v)n
(e)g(TNs)j(for)e(old-con)n(t)h(and)523 2482 y(return-PC.)23
b(\(Will)i(prev)n(en)n(t)f(preference)g(from)g(passing)f(lo)r(cation)h
(to)g(sa)n(v)n(e)f(lo)r(cation)h(from)523 2582 y(ev)n(er)j(b)r(eing)g
(honored?\))648 2682 y(W)-7 b(e)25 b(will)h(need)f(to)g(mak)n(e)g(pac)n
(king)f(of)h(passing)f(lo)r(cations)h(smarter)f(b)r(efore)h(w)n(e)f
(will)i(b)r(e)523 2781 y(able)d(to)g(target)f(the)i(passing)e(lo)r
(cation)h(on)g(the)h(stac)n(k)e(in)h(a)g(tail)h(call)e(\(when)i(that)g
(is)f(where)523 2881 y(the)k(callee)f(w)n(an)n(ts)f(it.\))38
b(Curren)n(tly)-7 b(,)26 b(w)n(e)g(will)h(almost)e(alw)n(a)n(ys)g(pac)n
(k)h(the)h(passing)e(lo)r(cation)523 2980 y(in)37 b(a)f(register)f
(without)i(considering)e(whether)h(that)h(is)f(really)g(a)g(go)r(o)r(d)
g(idea.)63 b(Ma)n(yb)r(e)523 3080 y(w)n(e)30 b(should)g(consider)g(sc)n
(hemes)g(that)g(explicitly)h(understand)f(the)h(parallel)e(assignmen)n
(t)523 3180 y(seman)n(tics,)20 b(and)f(try)g(to)h(do)f(the)g(assignmen)
n(t)g(with)g(a)g(minim)n(um)h(n)n(um)n(b)r(er)f(of)h(temp)r(oraries.)
523 3279 y(W)-7 b(e)21 b(only)e(need)h(assignmen)n(t)f(temps)i(for)e
(TNs)i(that)f(app)r(ear)f(b)r(oth)i(as)e(an)h(actual)f(argumen)n(t)523
3379 y(v)-5 b(alue)32 b(and)f(as)g(a)h(formal)f(parameter)f(of)i(the)g
(called)f(function.)50 b(This)32 b(only)f(happ)r(ens)h(in)523
3479 y(self-recursiv)n(e)26 b(functions.)648 3578 y(Could)d(b)r(e)h(a)g
(problem)f(with)h(lifetime)h(analysis,)e(though.)35 b(The)24
b(write)g(b)n(y)f(a)g(mo)n(v)n(e-arg)523 3678 y(V)n(OP)j(w)n(ould)f(lo)
r(ok)h(lik)n(e)g(a)g(write)g(in)h(the)g(curren)n(t)e(en)n(v,)h(when)h
(it)g(really)e(isn't.)37 b(If)27 b(this)g(is)f(a)523
3778 y(problem,)c(then)g(w)n(e)f(migh)n(t)h(w)n(an)n(t)f(to)g(mak)n(e)g
(the)h(result)f(TN)h(b)r(e)g(an)f(info)h(arg)e(rather)g(than)i(a)523
3877 y(real)f(op)r(erand.)34 b(But)22 b(this)g(w)n(ould)g(only)f(b)r(e)
h(a)g(problem)f(in)h(recursiv)n(e)e(calls,)i(an)n(yw)n(a)n(y)-7
b(.)33 b([This)523 3977 y(w)n(ould)28 b(prev)n(en)n(t)f(targeting,)g
(but)h(targeting)f(across)f(passing)h(lo)r(cations)g(rarely)g(seems)g
(to)523 4076 y(w)n(ork)37 b(an)n(yw)n(a)n(y)-7 b(.])67
b([###)39 b(But)f(the)h(:ENVIR)n(ONMENT)f(TN)g(mec)n(hanism)g(w)n(ould)
g(get)523 4176 y(confused.)f(Ma)n(yb)r(e)27 b(put)i(en)n(v)e
(explicitly)h(in)g(TN,)g(and)f(ha)n(v)n(e)g(it)h(only)f(alw)n(a)n
(ys-liv)n(e)e(in)j(that)523 4276 y(en)n(v,)37 b(and)e(normal)f(in)i
(other)e(en)n(vs)h(\(or)f(blo)r(c)n(ks)h(it)h(is)f(written)g(in.\))61
b(This)35 b(w)n(ould)f(allo)n(w)523 4375 y(targeting)26
b(in)n(to)i(en)n(vironmen)n(t)e(TNs.)648 4475 y(I)e(guess)f(w)n(e)g(w)n
(ould)h(also)f(w)n(an)n(t)g(the)i(en)n(v/PC)d(sa)n(v)n(e)h(TNs)h
(normal)f(in)h(the)g(return)g(blo)r(c)n(k)523 4575 y(so)29
b(that)i(w)n(e)e(can)h(target)f(them.)45 b(W)-7 b(e)30
b(could)g(do)g(this)g(b)n(y)g(considering)f(en)n(v)g(TNs)h(normal)523
4674 y(in)e(read)f(blo)r(c)n(ks)f(with)j(no)e(successors.)648
4774 y(ENV)g(TNs)g(w)n(ould)g(b)r(e)g(treated)g(totally)g(normally)f
(in)h(non-en)n(v)f(blo)r(c)n(ks,)h(so)f(w)n(e)h(don't)523
4873 y(ha)n(v)n(e)19 b(to)i(w)n(orry)d(ab)r(out)i(lifetime)i(analysis)d
(getting)h(confused)g(b)n(y)g(v)-5 b(ariable)20 b(initializations.)1914
5147 y(70)p eop
%%Page: 71 72
71 71 bop 523 614 a Fk(Do)20 b(some)f(kind)h(of)f(TN)h(costing)f(to)h
(determine)g(when)g(it)g(is)f(more)g(trouble)h(than)f(it)i(is)e(w)n
(orth)523 714 y(to)28 b(allo)r(cate)e(TNs)i(in)g(registers.)648
814 y(Change)34 b(pac)n(k)h(ordering)f(to)i(b)r(e)g(less)f(p)r
(essimal.)61 b(P)n(ac)n(k)34 b(TNs)i(as)f(they)h(are)f(seen)g(in)523
913 y(the)e(L)-7 b(TN)33 b(map)f(in)h(DF)n(O,)g(whic)n(h)f(at)h(least)f
(in)g(non-blo)r(c)n(k)g(compilations)g(has)g(an)g(e\013ect)523
1013 y(something)c(lik)n(e)g(pac)n(king)g(main)g(trace)g(TNs)h
(\014rst,)f(since)h(con)n(trol)e(analysis)g(tries)h(to)h(put)523
1112 y(the)g(go)r(o)r(d)e(co)r(de)h(\014rst.)39 b(This)28
b(could)g(also)f(reduce)h(spilling,)g(since)g(it)g(mak)n(es)g(it)g
(less)g(lik)n(ely)523 1212 y(w)n(e)f(will)h(clog)f(all)g(registers)f
(with)i(global)e(TNs.)648 1312 y(If)36 b(w)n(e)g(pac)n(k)g(a)g(TN)h
(with)g(a)f(sp)r(eci\014ed)g(sa)n(v)n(e)f(lo)r(cation)h(on)g(the)h
(stac)n(k,)h(pac)n(k)d(in)i(the)523 1411 y(sp)r(eci\014ed)28
b(lo)r(cation.)648 1511 y(Allo)n(w)f(old-con)n(t)f(and)i(return-p)r(c)f
(to)h(b)r(e)g(k)n(ept)f(in)h(registers)e(b)n(y)h(adding)g(a)h(new)f("k)
n(eep)523 1611 y(around")18 b(kind)h(of)g(TN.)g(These)g(are)f(kind)i
(of)f(lik)n(e)g(en)n(vironmen)n(t)f(liv)n(e,)i(but)g(are)e(only)h(alw)n
(a)n(ys-)523 1710 y(liv)n(e)k(in)g(blo)r(c)n(ks)f(that)i(they)f(w)n
(eren't)g(referenced)f(in.)36 b(Lifetime)23 b(analysis)f(do)r(es)h(a)g
(p)r(ost-pass)523 1810 y(adding)j(alw)n(a)n(ys-liv)n(e)e(con\015icts)i
(for)g(eac)n(h)f("k)n(eep)h(around")f(TN)i(to)f(those)g(blo)r(c)n(ks)g
(with)h(no)523 1910 y(con\015ict)20 b(for)f(that)h(TN.)g(The)g
(distinction)g(b)r(et)n(w)n(een)g(alw)n(a)n(ys-liv)n(e)d(and)j(k)n
(eep-around)e(allo)n(ws)523 2009 y(us)32 b(to)h(successfully)f(target)f
(old-con)n(t)g(and)h(return-p)r(c)g(to)h(passing)e(lo)r(cations.)50
b(MAKE-)523 2109 y(KEEP-AR)n(OUND-TN)24 b(\(pt)n(yp)r(e\),)j(PRE-P)-7
b(A)n(CK-SA)e(VE-TN)24 b(\(tn)i(scn)g(o\013set\).)36
b(En)n(viron-)523 2208 y(men)n(t)24 b(needs)f(a)g(KEEP-AR)n(OUND-TNS)f
(slot)h(so)g(that)h(con\015ict)g(analysis)e(can)h(\014nd)h(them)523
2308 y(\(no)e(sp)r(ecial)f(casing)f(is)i(needed)f(after)g(then,)j(they)
e(can)f(b)r(e)h(made)f(with)h(:NORMAL)g(kind\).)523 2408
y(VMR-comp)r(onen)n(t)28 b(needs)g(PRE-P)-7 b(A)n(CKED-SA)e(VE-TNS)25
b(so)i(that)i(con\015ict)f(analysis)e(or)523 2507 y(someb)r(o)r(dy)h
(can)g(cop)n(y)g(con\015ict)h(info)f(from)h(the)g(sa)n(v)n(ed)e(TN.)648
2607 y(Note)f(that)i(ha)n(ving)d(blo)r(c)n(k)i(gran)n(ularit)n(y)d(in)j
(the)h(con\015ict)e(information)h(do)r(esn't)g(mean)523
2707 y(that)f(a)f(lo)r(calized)g(pac)n(king)f(sc)n(heme)h(w)n(ould)g
(ha)n(v)n(e)f(to)i(do)f(all)g(mo)n(v)n(es)f(at)h(blo)r(c)n(k)g(b)r
(oundaries)523 2806 y(\(whic)n(h)j(w)n(ould)g(clash)g(with)h(the)f
(desire)g(the)g(ha)n(v)n(e)g(sa)n(ving)e(done)i(as)g(part)g(of)g(this)g
(mec)n(ha-)523 2906 y(nism.\))44 b(All)31 b(that)f(it)g(means)g(is)g
(that)g(if)g(w)n(e)g(w)n(an)n(t)f(to)h(do)f(a)h(mo)n(v)n(e)f(within)h
(the)h(blo)r(c)n(k,)f(w)n(e)523 3005 y(w)n(ould)d(need)h(to)f(allo)r
(cate)g(b)r(oth)h(lo)r(cations)f(throughout)g(that)g(blo)r(c)n(k)h
(\(or)f(something\).)648 3105 y(Load)f(TN)i(pac)n(k:)648
3205 y(A)g(lo)r(cation)e(is)i(out)g(for)f(load)f(TN)i(pac)n(king)f(if:)
648 3304 y(The)d(lo)r(cation)g(has)g(TN)g(liv)n(e)g(in)h(it)g(after)f
(the)h(V)n(OP)e(for)h(a)g(result,)h(or)e(b)r(efore)h(the)h(V)n(OP)523
3404 y(for)i(an)g(argumen)n(t,)g(or)648 3504 y(The)f(lo)r(cation)g(is)h
(used)f(earlier)g(in)g(the)h(TN-ref)g(list)g(\(after\))g(the)g(sa)n(v)n
(ed)e(results)h(ref)g(or)523 3603 y(later)h(in)h(the)g(TN-Ref)g(list)g
(\(b)r(efore\))f(the)h(loaded)f(argumen)n(t's)g(ref.)648
3703 y(T)-7 b(o)37 b(pac)n(k)g(load)g(TNs,)k(w)n(e)c(adv)-5
b(ance)38 b(the)g(liv)n(e-tns)f(to)h(the)g(in)n(teresting)g(V)n(OP)-7
b(,)37 b(then)523 3802 y(rep)r(eatedly)24 b(scan)f(the)i(v)n(op-refs)d
(to)i(\014nd)h(v)n(op-lo)r(cal)d(con\015icts)i(for)g(eac)n(h)f(needed)i
(load)e(TN.)523 3902 y(W)-7 b(e)21 b(insert)g(mo)n(v)n(e)f(V)n(OPs)g
(and)h(c)n(hange)f(o)n(v)n(er)f(the)i(TN-Ref-TNs)g(as)g(w)n(e)f(go)g
(so)h(the)g(TN-Refs)523 4002 y(will)28 b(re\015ect)f(con\015icts)g
(with)i(already)d(pac)n(k)n(ed)g(load-TNs.)648 4101 y(If)31
b(w)n(e)f(fail)h(to)f(pac)n(k)g(a)g(load-TN)g(in)h(the)g(desired)f(SC,)
h(then)g(w)n(e)f(scan)g(the)h(Liv)n(e-TNs)523 4201 y(for)25
b(the)i(SB,)f(lo)r(oking)f(for)g(a)h(TN)g(that)g(can)g(b)r(e)g(pac)n(k)
n(ed)f(in)h(an)g(un)n(b)r(ounded)g(SB.)g(This)g(TN)523
4301 y(m)n(ust)i(then)h(b)r(e)f(repac)n(k)n(ed)f(in)h(the)g(un)n(b)r
(ounded)h(SB.)f(It)g(is)g(imp)r(ortan)n(t)g(the)g(load-TNs)f(are)523
4400 y(nev)n(er)i(pac)n(k)n(ed)g(in)h(un)n(b)r(ounded)g(SBs,)g(since)g
(that)g(w)n(ould)f(in)n(v)-5 b(alidate)29 b(the)i(con\015icts)e(info,)
523 4500 y(prev)n(en)n(ting)35 b(us)h(from)g(repac)n(king)f(TNs)h(in)g
(un)n(b)r(ounded)h(SBs.)63 b(W)-7 b(e)36 b(can't)g(repac)n(k)f(in)i(a)
523 4599 y(\014nite)25 b(SB,)g(since)g(there)f(migh)n(t)h(ha)n(v)n(e)e
(b)r(een)i(load)f(TNs)h(pac)n(k)n(ed)f(in)h(that)g(SB)f(whic)n(h)h
(aren't)523 4699 y(represen)n(ted)h(in)i(the)g(original)e(con\015ict)i
(structures.)648 4799 y(Is)22 b(it)i(p)r(ermissible)f(to)g("restrict")e
(an)i(op)r(erand)f(to)h(an)g(un)n(b)r(ounded)g(SC?)h(Not)f(imp)r(ossi-)
523 4898 y(ble)f(to)f(satisfy)h(as)f(long)f(as)h(a)h(\014nite)g(SC)g
(is)f(also)g(allo)n(w)n(ed.)33 b(But)22 b(in)g(practice,)g(no)f
(restriction)1914 5147 y(71)p eop
%%Page: 72 73
72 72 bop 523 614 a Fk(w)n(ould)27 b(probably)g(b)r(e)h(as)f(go)r(o)r
(d.)648 714 y(W)-7 b(e)29 b(assume)f(all)g(lo)r(cations)g(can)g(b)r(e)h
(used)g(when)g(an)f(sc)g(is)h(based)f(on)h(an)f(un)n(b)r(ounded)523
814 y(sb.)648 913 y(])648 1013 y(TN-Refs)34 b(are)f(b)r(e)h(con)n(v)n
(enien)n(t)f(structures)g(to)h(build)g(the)g(target)f(graph)g(out)h
(of.)56 b(If)523 1112 y(w)n(e)33 b(allo)r(cated)f(space)g(in)i(ev)n
(ery)d(TN-Ref,)k(then)f(there)f(w)n(ould)f(certainly)h(b)r(e)g(enough)f
(to)523 1212 y(represen)n(t)19 b(arbitrary)f(target)h(graphs.)33
b(W)-7 b(ould)21 b(it)g(b)r(e)f(enough)g(to)g(allo)r(cate)f(a)h(single)
g(T)-7 b(arget)523 1312 y(slot?)36 b(If)25 b(there)g(is)g(a)g(target)f
(path)h(though)g(a)f(giv)n(en)g(V)n(OP)-7 b(,)25 b(then)g(the)g(T)-7
b(arget)24 b(of)h(the)h(write)523 1411 y(ref)32 b(w)n(ould)g(b)r(e)h
(the)g(read,)f(and)g(vice-v)n(ersa.)49 b(T)-7 b(o)32
b(\014nd)h(all)f(the)h(TNs)f(that)h(target)e(us,)j(w)n(e)523
1511 y(lo)r(ok)27 b(at)g(the)h(TN)g(for)f(the)h(target)f(of)h(all)f
(our)g(write)g(refs.)648 1611 y(W)-7 b(e)40 b(separately)e(c)n(hain)h
(together)g(the)h(read)f(refs)h(and)f(the)h(write)g(refs)f(for)h(a)f
(TN,)523 1710 y(allo)n(wing)30 b(easy)g(determination)h(of)g(things)g
(suc)n(h)g(as)g(whether)g(a)g(TN)h(has)e(only)h(a)g(single)523
1810 y(de\014nition)37 b(or)g(has)f(no)h(reads.)64 b(It)37
b(w)n(ould)g(also)f(allo)n(w)g(easier)g(tra)n(v)n(ersal)e(of)j(the)g
(target)523 1910 y(graph.)648 2009 y(Represen)n(t)27
b(p)r(er-lo)r(cation)f(con\015icts)h(as)g(v)n(ectors)g(indexed)g(b)n(y)
h(blo)r(c)n(k)f(n)n(um)n(b)r(er)g(of)h(p)r(er-)523 2109
y(blo)r(c)n(k)c(con\015ict)h(info.)36 b(T)-7 b(o)25 b(test)g(whether)g
(a)f(TN)h(con\015icts)g(on)g(a)f(lo)r(cation,)h(w)n(e)f(w)n(ould)h
(then)523 2208 y(ha)n(v)n(e)i(to)h(iterate)f(o)n(v)n(er)f(the)i(TNs)g
(global-con\015icts,)f(using)g(the)h(blo)r(c)n(k)g(n)n(um)n(b)r(er)f
(and)h(L)-7 b(TN)523 2308 y(n)n(um)n(b)r(er)26 b(to)f(c)n(hec)n(k)g
(for)h(a)f(con\015ict)h(in)g(that)g(blo)r(c)n(k.)36 b(But)26
b(since)g(most)g(TNs)g(are)e(lo)r(cal,)i(this)523 2408
y(test)e(actually)f(isn't)h(m)n(uc)n(h)f(more)g(exp)r(ensiv)n(e)g(than)
g(indexing)h(in)n(to)f(a)g(bit-v)n(ector)g(b)n(y)g(GTN)523
2507 y(n)n(um)n(b)r(ers.)648 2607 y(The)e(big)h(win)g(of)g(this)g(sc)n
(heme)f(is)h(that)g(it)g(is)g(m)n(uc)n(h)g(c)n(heap)r(er)f(to)g(add)h
(con\015icts)f(in)n(to)h(the)523 2707 y(con\015ict)28
b(set)g(for)g(a)g(lo)r(cation,)g(since)g(w)n(e)f(nev)n(er)h(need)g(to)g
(actually)g(compute)g(the)g(con\015ict)523 2806 y(set)g(in)g(a)g
(list-lik)n(e)f(represen)n(tation)g(\(whic)n(h)h(requires)e(iterating)i
(o)n(v)n(er)e(the)i(L)-7 b(TN)29 b(con\015icts)523 2906
y(v)n(ectors)e(and)i(unioning)f(in)h(the)g(alw)n(a)n(ys-liv)n(e)d
(TNs\).)41 b(Instead,)28 b(w)n(e)h(just)g(iterate)f(o)n(v)n(er)f(the)
523 3005 y(global-con\015icts)37 b(for)i(the)g(TN,)g(using)g(BIT-IOR)f
(to)h(com)n(bine)g(the)g(con\015ict)g(set)g(with)523
3105 y(the)34 b(bit-v)n(ector)f(for)h(that)g(blo)r(c)n(k)g(in)g(that)h
(lo)r(cation,)g(or)e(marking)g(that)h(blo)r(c)n(k/lo)r(cation)523
3205 y(com)n(bination)27 b(as)g(b)r(eing)g(alw)n(a)n(ys-liv)n(e)e(if)j
(the)g(con\015ict)g(is)f(alw)n(a)n(ys-liv)n(e.)648 3304
y(Generating)i(the)h(con\015ict)f(set)h(is)g(inheren)n(tly)f(more)g
(costly)-7 b(,)30 b(since)g(although)f(w)n(e)g(b)r(e-)523
3404 y(liev)n(e)k(the)g(con\015ict)h(set)f(size)g(to)g(b)r(e)h(roughly)
e(constan)n(t,)i(it)f(can)g(easily)g(con)n(tain)f(tens)h(of)523
3504 y(elemen)n(ts.)45 b(W)-7 b(e)31 b(w)n(ould)f(ha)n(v)n(e)g(to)g
(generate)f(these)i(mo)r(derately)f(large)f(lists)h(for)g(all)g(TNs,)
523 3603 y(including)g(lo)r(cal)f(TNs.)43 b(In)29 b(con)n(trast,)g(the)
h(prop)r(osed)f(sc)n(heme)g(do)r(es)g(w)n(ork)f(prop)r(ortional)523
3703 y(to)e(the)g(n)n(um)n(b)r(er)g(of)g(blo)r(c)n(ks)g(the)g(TN)g(is)g
(liv)n(e)g(in,)h(whic)n(h)f(is)g(small)f(on)h(a)n(v)n(erage)d(\(1)j
(for)g(lo)r(cal)523 3802 y(TNs\).)37 b(This)26 b(win)h(exists)e(indep)r
(enden)n(tly)i(from)f(the)h(win)g(of)f(not)g(ha)n(ving)f(to)h(iterate)g
(o)n(v)n(er)523 3902 y(L)-7 b(TN)28 b(con\015ict)f(v)n(ectors.)648
4002 y([###)k(Note)h(that)f(since)g(w)n(e)g(nev)n(er)f(do)h(bit)n(wise)
g(iteration)g(o)n(v)n(er)e(the)j(L)-7 b(TN)31 b(con\015ict)523
4101 y(v)n(ectors,)38 b(part)e(of)h(the)h(motiv)-5 b(ation)36
b(for)h(k)n(eeping)f(these)h(a)f(small)h(\014xed)g(size)g(has)f(b)r
(een)523 4201 y(remo)n(v)n(ed.)e(But)25 b(it)g(w)n(ould)f(still)g(b)r
(e)h(useful)g(to)f(k)n(eep)g(the)h(size)f(\014xed)g(so)g(that)g(w)n(e)g
(can)g(easily)523 4301 y(recycle)29 b(the)h(bit-v)n(ectors,)f(and)h(so)
f(that)i(w)n(e)e(could)h(p)r(oten)n(tially)f(ha)n(v)n(e)g(maximally)g
(tense)523 4400 y(sp)r(ecial)e(primitiv)n(es)g(for)h(doing)f(clear)f
(and)i(bit-ior)e(on)i(these)f(v)n(ectors.])648 4500 y(This)33
b(sc)n(heme)h(is)g(somewhat)f(more)g(space-in)n(tensiv)n(e)f(than)i(ha)
n(ving)f(a)h(p)r(er-lo)r(cation)523 4599 y(bit-v)n(ector.)i(Eac)n(h)26
b(v)n(ector)f(en)n(try)i(w)n(ould)g(b)r(e)g(something)g(lik)n(e)f(150)g
(bits)h(rather)g(than)g(one)523 4699 y(bit,)h(but)f(this)g(is)g
(mitigated)g(b)n(y)g(the)g(n)n(um)n(b)r(er)g(of)g(blo)r(c)n(ks)f(b)r
(eing)h(5-10x)e(smaller)h(than)h(the)523 4799 y(n)n(um)n(b)r(er)f(of)f
(TNs.)37 b(This)26 b(seems)f(lik)n(e)g(an)h(acceptable)f(o)n(v)n
(erhead,)f(a)i(small)f(fraction)g(of)h(the)523 4898 y(total)h(VMR)i
(represen)n(tation.)1914 5147 y(72)p eop
%%Page: 73 74
73 73 bop 648 614 a Fk(The)36 b(space)h(o)n(v)n(erhead)d(could)j(also)f
(b)r(e)h(reduced)f(b)n(y)h(using)f(something)h(equiv)-5
b(alen)n(t)523 714 y(to)30 b(a)f(t)n(w)n(o-dimensional)g(bit)h(arra)n
(y)-7 b(,)28 b(indexed)i(\014rst)g(b)n(y)g(L)-7 b(TN)30
b(n)n(um)n(b)r(ers,)g(and)f(then)i(blo)r(c)n(k)523 814
y(n)n(um)n(b)r(ers)e(\(instead)g(of)g(using)g(a)g(simple-v)n(ector)e
(of)i(separate)f(bit-v)n(ectors.\))41 b(This)29 b(w)n(ould)523
913 y(eliminate)k(space)f(w)n(astage)g(due)h(to)g(bit-v)n(ector)f(o)n
(v)n(erheads,)g(whic)n(h)h(migh)n(t)g(b)r(e)g(50more,)523
1013 y(and)c(w)n(ould)g(also)g(mak)n(e)g(e\016cien)n(t)g(zeroing)f(of)i
(the)g(v)n(ectors)e(more)g(straigh)n(tforw)n(ard.)40
b(W)-7 b(e)523 1112 y(w)n(ould)26 b(then)g(w)n(an)n(t)g(e\016cien)n(t)g
(op)r(erations)f(for)g(OR'ing)h(L)-7 b(TN)27 b(con\015ict)f(v)n(ectors)
e(with)j(ro)n(ws)523 1212 y(in)h(the)g(arra)n(y)-7 b(.)648
1312 y(This)30 b(represen)n(tation)e(also)h(op)r(ens)h(a)f(whole)h(new)
g(range)f(of)h(allo)r(cation)f(algorithms:)523 1411 y(ones)j(that)h
(store)e(allo)r(cate)h(TNs)h(in)f(di\013eren)n(t)h(lo)r(cations)f
(within)h(di\013eren)n(t)g(p)r(ortions)e(of)523 1511
y(the)k(program.)54 b(This)34 b(is)g(b)r(ecause)g(w)n(e)g(can)f(no)n(w)
h(represen)n(t)f(a)h(lo)r(cation)f(b)r(eing)h(used)g(to)523
1611 y(hold)25 b(a)g(certain)g(TN)h(within)g(an)f(arbitrary)e(subset)j
(of)f(the)h(blo)r(c)n(ks)e(the)i(TN)g(is)f(referenced)523
1710 y(in.)648 1810 y(P)n(ac)n(k)g(goals:)648 1910 y(P)n(ac)n(k)g
(should:)648 2009 y(Sub)5 b(ject)22 b(to)g(resource)f(constrain)n(ts:)
32 b({)22 b(Minimize)h(use)f(costs)f({)h("Register)f(allo)r(cation")523
2109 y(Allo)r(cate)32 b(as)e(man)n(y)h(v)-5 b(alues)32
b(as)f(p)r(ossible)g(in)h(scarce)e("go)r(o)r(d")g(lo)r(cations,)i
(attempting)g(to)523 2208 y(minimize)d(the)g(aggregate)c(use)j(cost)g
(for)g(the)h(en)n(tire)f(program.)37 b({)28 b("Sa)n(v)n(e)e
(optimization")523 2308 y(Don't)38 b(allo)r(cate)e(v)-5
b(alues)37 b(in)g(registers)f(when)h(the)h(sa)n(v)n(e/restore)33
b(costs)k(exceed)f(the)i(ex-)523 2408 y(p)r(ected)32
b(gain)e(for)h(k)n(eeping)f(the)i(v)-5 b(alue)31 b(in)g(a)g(register.)
46 b(\(Similar)31 b(to)g("op)r(ening)f(costs")g(in)523
2507 y(RA)n(OC.\))e([Really)f(just)h(a)f(case)g(of)h(represen)n(tation)
d(selection.])648 2607 y({)i(Minimize)h(preference)f(costs)g(Eliminate)
g(as)g(man)n(y)g(mo)n(v)n(es)f(as)h(p)r(ossible.)648
2707 y("Register)36 b(allo)r(cation")h(is)h(basically)e(an)i(attempt)h
(to)f(eliminate)g(mo)n(v)n(es)e(b)r(et)n(w)n(een)523
2806 y(registers)g(and)i(memory)-7 b(.)66 b("Sa)n(v)n(e)36
b(optimization")h(coun)n(terbalances)f("register)g(allo)r(ca-)523
2906 y(tion")f(to)g(prev)n(en)n(t)g(it)g(from)g(b)r(ecoming)g(a)g(p)r
(essimization,)i(since)e(sa)n(v)n(es)f(can)h(in)n(tro)r(duce)523
3005 y(register/memory)25 b(mo)n(v)n(es.)648 3105 y(Preference)j
(optimization)h(reduces)g(the)h(n)n(um)n(b)r(er)g(of)g(mo)n(v)n(es)e
(within)i(an)g(SC.)g(Doing)523 3205 y(a)e(go)r(o)r(d)g(job)g(of)h
(honoring)e(preferences)g(is)h(imp)r(ortan)n(t)g(to)h(the)f(success)g
(of)g(the)h(compiler,)523 3304 y(since)37 b(w)n(e)f(ha)n(v)n(e)g
(assumed)g(in)h(man)n(y)f(places)g(that)h(mo)n(v)n(es)f(will)h(usually)
f(b)r(e)h(optimized)523 3404 y(a)n(w)n(a)n(y)-7 b(.)648
3504 y(The)29 b(scarcit)n(y-orien)n(ted)d(asp)r(ect)j(of)f("register)f
(allo)r(cation")h(is)g(handled)h(b)n(y)g(a)g(greedy)523
3603 y(algorithm)g(in)h(pac)n(k.)44 b(W)-7 b(e)31 b(try)f(to)g(pac)n(k)
f(the)h("most)g(imp)r(ortan)n(t")f(TNs)h(\014rst,)h(under)f(the)523
3703 y(theory)d(that)h(earlier)e(pac)n(king)g(is)i(more)f(lik)n(ely)g
(to)g(succeed)g(due)h(to)g(few)n(er)f(constrain)n(ts.)648
3802 y(The)e(dra)n(wbac)n(k)f(of)h(greedy)f(algorithms)h(is)g(their)g
(inabilit)n(y)h(to)f(lo)r(ok)g(ahead.)35 b(P)n(ac)n(king)523
3902 y(a)22 b(TN)h(ma)n(y)g(mess)f(up)h(later)f("register)f(allo)r
(cation")g(b)n(y)i(precluding)f(pac)n(king)g(of)g(TNs)h(that)523
4002 y(are)k(individually)i("less)e(imp)r(ortan)n(t",)h(but)h(more)e
(imp)r(ortan)n(t)h(in)g(aggregate.)37 b(P)n(ac)n(king)26
b(a)523 4101 y(TN)i(ma)n(y)f(also)f(prev)n(en)n(t)h(preferences)g(from)
g(b)r(eing)h(honored.)648 4201 y(Initial)f(pac)n(king:)648
4301 y(P)n(ac)n(k)e(all)j(TNs)f(restricted)g(to)h(a)f(\014nite)h(SC)g
(\014rst,)f(b)r(efore)h(pac)n(king)e(an)n(y)h(other)g(TNs.)648
4400 y(One)f(migh)n(t)h(supp)r(ose)g(that)g(P)n(ac)n(k)e(w)n(ould)i(ha)
n(v)n(e)e(to)i(treat)g(TNs)g(in)g(di\013eren)n(t)g(en)n(viron-)523
4500 y(men)n(ts)e(di\013eren)n(tly)-7 b(,)25 b(but)g(this)g(is)g(not)f
(the)h(case.)35 b(P)n(ac)n(k)23 b(simply)i(assigns)e(TNs)i(to)f(lo)r
(cations)523 4599 y(so)39 b(that)g(no)h(t)n(w)n(o)e(con\015icting)h
(TNs)h(are)e(in)i(the)f(same)g(lo)r(cation.)72 b(In)39
b(the)h(pro)r(cess)e(of)523 4699 y(implemen)n(ting)25
b(call)f(seman)n(tics)g(in)h(con\015ict)f(analysis,)g(w)n(e)g(cause)g
(TNs)h(in)f(di\013eren)n(t)h(en)n(vi-)523 4799 y(ronmen)n(ts)c(not)h
(to)g(con\015ict.)35 b(In)22 b(the)h(case)e(of)h(passing)f(TNs,)i
(cross)e(en)n(vironmen)n(t)g(con\015icts)523 4898 y(do)h(exist,)h(but)f
(this)h(re\015ects)e(realit)n(y)-7 b(,)22 b(since)g(the)g(passing)f
(TNs)h(are)f(liv)n(e)g(in)i(b)r(oth)f(the)g(caller)1914
5147 y(73)p eop
%%Page: 74 75
74 74 bop 523 614 a Fk(and)33 b(the)g(callee.)52 b(En)n(vironmen)n(t)32
b(seman)n(tics)g(has)g(already)g(b)r(een)h(implemen)n(ted)g(at)g(this)
523 714 y(p)r(oin)n(t.)648 814 y(This)21 b(means)f(that)i(P)n(ac)n(k)d
(can)i(pac)n(k)f(all)h(TNs)g(sim)n(ultaneously)-7 b(,)22
b(using)f(one)f(data)h(struc-)523 913 y(ture)32 b(to)h(represen)n(t)e
(the)i(con\015icts)f(for)g(eac)n(h)g(lo)r(cation.)51
b(So)33 b(w)n(e)f(ha)n(v)n(e)f(only)h(one)g(con\015ict)523
1013 y(set)37 b(p)r(er)g(SB)g(lo)r(cation,)h(rather)e(than)h
(separating)e(this)j(information)e(b)n(y)g(en)n(vironmen)n(t)523
1112 y(en)n(vironmen)n(t.)648 1212 y(Load)26 b(TN)i(pac)n(king:)648
1312 y(W)-7 b(e)32 b(create)g(load)f(TNs)i(as)e(needed)i(in)f(a)g(p)r
(ost-pass)g(to)g(the)g(initial)h(pac)n(king.)50 b(After)523
1411 y(TNs)26 b(are)g(pac)n(k)n(ed,)f(it)i(ma)n(y)e(b)r(e)i(that)f
(some)g(references)f(to)h(a)g(TN)g(will)h(require)e(it)h(to)g(b)r(e)h
(in)523 1511 y(a)h(SC)h(other)f(than)h(the)g(one)g(it)g(w)n(as)f(pac)n
(k)n(ed)f(in.)41 b(W)-7 b(e)29 b(create)f(load-TNs)f(and)i(pac)n(k)f
(them)523 1611 y(on)f(the)h(\015y)g(during)f(this)h(p)r(ost-pass.)648
1710 y(What)21 b(w)n(e)h(do)f(is)g(ha)n(v)n(e)g(an)g(optional)g(SC)h
(restriction)e(asso)r(ciated)g(with)i(TN-refs.)35 b(If)22
b(w)n(e)523 1810 y(pac)n(k)j(the)h(TN)g(in)g(an)f(SC)h(whic)n(h)f(is)h
(di\013eren)n(t)f(from)h(the)g(required)e(SC)i(for)f(the)h(reference,)
523 1910 y(then)i(w)n(e)f(create)g(a)g(TN)h(for)f(eac)n(h)g(suc)n(h)g
(reference,)g(and)g(pac)n(k)g(it)h(in)n(to)g(the)g(required)e(SC.)648
2009 y(In)32 b(man)n(y)g(cases)f(w)n(e)h(will)g(b)r(e)h(able)f(to)g
(pac)n(k)g(the)g(load)g(TN)h(with)f(no)g(hassle,)h(but)g(in)523
2109 y(general)e(w)n(e)i(ma)n(y)f(need)h(to)g(spill)g(a)f(TN)h(that)g
(has)f(already)g(b)r(een)h(pac)n(k)n(ed.)51 b(W)-7 b(e)34
b(c)n(ho)r(ose)523 2208 y(a)c(TN)g(that)h(isn't)f(in)h(use)f(b)n(y)g
(the)g(o\013ending)g(V)n(OP)-7 b(,)30 b(and)g(then)g(spill)h(that)f(TN)
h(on)n(to)e(the)523 2308 y(stac)n(k)f(for)g(the)h(duration)f(of)h(that)
g(V)n(OP)-7 b(.)28 b(If)h(the)g(V)n(OP)f(is)g(a)g(conditional,)h(then)g
(w)n(e)f(m)n(ust)523 2408 y(insert)35 b(a)g(new)g(blo)r(c)n(k)g(in)n
(terp)r(osed)f(b)r(efore)h(the)h(branc)n(h)e(target)g(so)h(that)g(the)h
(v)-5 b(alue)35 b(TN)523 2507 y(v)-5 b(alue)28 b(is)f(restored)f
(regardless)f(of)j(whic)n(h)f(branc)n(h)g(is)h(tak)n(en.)648
2607 y(Instead)h(of)g(remem)n(b)r(ering)g(lifetime)h(information)f
(from)h(con\015ict)f(analysis,)g(w)n(e)g(red-)523 2707
y(eriv)n(e)i(it.)51 b(W)-7 b(e)32 b(scan)g(eac)n(h)f(blo)r(c)n(k)h(bac)
n(kw)n(ard)e(while)i(k)n(eeping)f(trac)n(k)g(of)h(whic)n(h)g(lo)r
(cations)523 2806 y(ha)n(v)n(e)25 b(liv)n(e)g(TNs)h(in)g(them.)37
b(When)26 b(w)n(e)f(\014nd)h(a)g(reference)e(that)j(needs)e(a)g(load)g
(TN)h(pac)n(k)n(ed,)523 2906 y(w)n(e)31 b(try)h(to)g(pac)n(k)f(it)h(in)
g(an)f(un)n(used)h(lo)r(cation.)49 b(If)32 b(w)n(e)g(can't,)h(w)n(e)e
(unpac)n(k)g(the)h(curren)n(tly)523 3005 y(liv)n(e)27
b(TN)h(with)g(the)g(lo)n(w)n(est)f(cost)g(and)g(force)g(it)h(in)n(to)g
(an)f(un)n(b)r(ounded)h(SC.)648 3105 y(The)23 b(p)r(er-lo)r(cation)f
(and)h(p)r(er-TN)g(con\015ict)h(information)e(used)h(b)n(y)g(pac)n(k)g
(do)r(esn't)g(need)523 3205 y(to)35 b(b)r(e)g(up)r(dated)h(when)f(w)n
(e)g(pac)n(k)f(a)h(load)f(TN,)h(since)g(w)n(e)g(are)f(done)h(using)f
(those)h(data)523 3304 y(structures.)648 3404 y(W)-7
b(e)20 b(also)f(don't)h(need)g(to)g(create)f(an)n(y)g(TN-Refs)h(for)g
(load)f(TNs.)34 b([???)h(Ho)n(w)20 b(do)f(w)n(e)h(k)n(eep)523
3504 y(trac)n(k)27 b(of)i(load-tn)f(lifetimes?)41 b(It)29
b(isn't)g(really)e(that)i(hard,)f(I)h(guess.)39 b(W)-7
b(e)29 b(just)g(remem)n(b)r(er)523 3603 y(whic)n(h)24
b(load)f(TNs)h(w)n(e)g(created)f(at)h(eac)n(h)f(V)n(OP)-7
b(,)23 b(killing)h(them)g(when)g(w)n(e)g(pass)f(the)h(loading)523
3703 y(\(or)g(sa)n(ving\))f(step.)36 b(This)25 b(suggests)e(w)n(e)h
(could)h(\015ush)g(the)g(Refs)f(thread)h(if)g(w)n(e)f(w)n(ere)f
(willing)523 3802 y(to)34 b(sacri\014ce)e(some)i(\015exibilit)n(y)g(in)
g(explicit)g(temp)r(orary)f(lifetimes.)56 b(Flushing)34
b(the)g(Refs)523 3902 y(w)n(ould)27 b(mak)n(e)g(creating)f(the)i(VMR)h
(represen)n(tation)c(easier.])648 4002 y(The)h(lifetime)g(analysis)f
(done)h(during)f(load-TN)g(pac)n(king)g(doubles)g(as)h(a)f(consistency)
523 4101 y(c)n(hec)n(k.)42 b(If)30 b(w)n(e)g(see)f(a)g(read)g(of)h(a)f
(TN)h(pac)n(k)n(ed)f(in)h(a)f(lo)r(cation)g(whic)n(h)h(has)f(a)g
(di\013eren)n(t)h(TN)523 4201 y(curren)n(tly)c(liv)n(e,)g(then)h(there)
g(is)f(a)g(pac)n(king)g(bug.)36 b(If)27 b(an)n(y)f(of)h(the)g(TNs)f
(recorded)f(as)h(b)r(eing)523 4301 y(liv)n(e)e(at)h(the)g(blo)r(c)n(k)g
(b)r(eginning)f(are)g(pac)n(k)n(ed)g(in)h(a)f(scarce)g(SB,)g(but)i
(aren't)e(curren)n(t)g(in)h(that)523 4400 y(lo)r(cation,)i(then)h(w)n
(e)f(also)g(ha)n(v)n(e)f(a)h(problem.)648 4500 y(The)i(con\015ict)h
(structure)f(for)h(load)f(TNs)g(is)h(fairly)f(simple,)i(the)f(load)f
(TNs)h(for)f(argu-)523 4599 y(men)n(ts)23 b(and)g(results)g(all)f
(con\015ict)h(with)h(eac)n(h)e(other,)i(and)f(don't)g(con\015ict)g
(with)h(m)n(uc)n(h)f(else.)523 4699 y(W)-7 b(e)28 b(just)g(try)g(pac)n
(king)e(in)i(targeted)e(lo)r(cations)h(b)r(efore)g(trying)g(at)h
(random.)1914 5147 y(74)p eop
%%Page: 75 76
75 75 bop 523 1237 a Fg(Chapter)65 b(22)523 1652 y Fi(Co)6
b(de)78 b(generation)523 2084 y Fk(This)25 b(is)f(fairly)g(straigh)n
(tforw)n(ard.)33 b(W)-7 b(e)25 b(translate)f(V)n(OPs)g(in)n(to)g
(instruction)h(sequences)f(on)523 2183 y(a)j(p)r(er-blo)r(c)n(k)g
(basis.)648 2283 y(After)j(co)r(de)f(generation,)g(the)h(VMR)g
(represen)n(tation)e(is)h(gone.)43 b(Ev)n(erything)28
b(is)h(rep-)523 2383 y(resen)n(ted)e(b)n(y)g(the)h(assem)n(bler)e(data)
h(structures.)1914 5147 y(75)p eop
%%Page: 76 77
76 76 bop 523 1237 a Fg(Chapter)65 b(23)523 1652 y Fi(Assem)-6
b(bly)523 2084 y Fk(In)28 b(e\013ect,)g(w)n(e)f(do)g(m)n(uc)n(h)h(of)f
(the)h(w)n(ork)f(of)g(assem)n(bly)g(when)g(the)h(compiler)f(is)h
(compiled.)648 2183 y(The)34 b(assem)n(bler)e(mak)n(es)h(one)g(pass)h
(\014xing)f(up)i(branc)n(h)e(o\013sets,)i(then)f(squeezes)f(out)523
2283 y(the)k(space)f(left)i(b)n(y)f(branc)n(h)e(shortening)h(and)h
(dumps)g(out)g(the)g(co)r(de)g(along)f(with)h(the)523
2383 y(load-time)31 b(\014xup)g(information.)48 b(The)31
b(assem)n(bler)f(also)h(deals)f(with)i(dumping)g(un)n(b)r(o)n(xed)523
2482 y(non-immediate)26 b(constan)n(ts)f(and)h(sym)n(b)r(ols.)36
b(Bo)n(xed)25 b(constan)n(ts)g(are)h(created)f(b)n(y)h(explicit)523
2582 y(constructor)c(co)r(de)h(in)h(the)f(top-lev)n(el)g(form,)h(while)
f(immediate)h(constan)n(ts)e(are)h(generated)523 2682
y(using)k(inline)h(co)r(de.)648 2781 y([###)d(The)f(basic)g(output)h
(of)g(the)g(assem)n(bler)e(is:)35 b(A)25 b(co)r(de)f(v)n(ector)f(A)i
(represen)n(tation)523 2881 y(of)32 b(the)g(\014xups)g(along)e(with)i
(indices)g(in)n(to)g(the)g(co)r(de)f(v)n(ector)g(for)g(the)h(\014xup)g
(lo)r(cations)f(A)523 2980 y(PC)c(map)h(translating)e(PCs)h(in)n(to)g
(source)g(paths)648 3080 y(This)39 b(information)h(can)f(then)i(b)r(e)f
(used)g(to)f(build)i(an)f(output)g(\014le)g(or)f(an)h(in-core)523
3180 y(function)28 b(ob)5 b(ject.)37 b(])648 3279 y(The)20
b(assem)n(bler)f(is)i(table-driv)n(en)e(and)i(supp)r(orts)f(arbitrary)e
(instruction)j(formats.)33 b(As)523 3379 y(far)24 b(as)f(the)h(assem)n
(bler)f(is)h(concerned,)g(an)g(instruction)g(is)f(a)h(bit)h(sequence)e
(that)i(is)f(brok)n(en)523 3479 y(do)n(wn)i(in)n(to)g(subsequences.)35
b(Some)26 b(of)g(the)h(subsequences)e(are)g(constan)n(t)g(in)i(v)-5
b(alue,)26 b(while)523 3578 y(others)h(can)g(b)r(e)h(determined)g(at)f
(assem)n(ble)g(or)g(load)f(time.)648 3678 y(Assem)n(ble)18
b(No)r(de)h(F)-7 b(orm*)18 b(Allo)n(w)h(instructions)f(to)h(b)r(e)g
(emitted)h(during)f(the)g(ev)-5 b(aluation)523 3778 y(of)23
b(the)g(F)-7 b(orms)21 b(b)n(y)i(de\014ning)f(Inst)h(as)f(a)g(lo)r(cal)
g(macro.)34 b(This)23 b(macro)e(cac)n(hes)g(v)-5 b(arious)22
b(global)523 3877 y(information)31 b(in)i(lo)r(cal)e(v)-5
b(ariables.)49 b(No)r(de)32 b(tells)g(the)h(assem)n(bler)d(what)i(no)r
(de)g(ultimately)523 3977 y(caused)f(this)i(co)r(de)e(to)h(b)r(e)h
(generated.)49 b(This)32 b(is)f(used)h(to)g(create)f(the)i(p)r
(c=>source)d(map)523 4076 y(for)d(the)h(debugger.)648
4176 y(Assem)n(ble-Elsewhere)i(No)r(de)j(F)-7 b(orm*)32
b(Similar)g(to)h(Assem)n(ble,)g(but)h(the)f(curren)n(t)e(as-)523
4276 y(sem)n(bler)36 b(lo)r(cation)f(is)h(c)n(hanged)g(to)g(somewhere)f
(else.)63 b(This)36 b(is)g(useful)h(for)f(generating)523
4375 y(error)26 b(co)r(de)h(and)h(similar)e(things.)37
b(Assem)n(ble-Elsewhere)26 b(ma)n(y)h(not)g(b)r(e)h(nested.)648
4475 y(Inst)f(Name)h(Arg*)e(Emit)i(the)g(instruction)g(Name)f(with)h
(the)g(sp)r(eci\014ed)g(argumen)n(ts.)648 4575 y(Gen-Lab)r(el)e
(Emit-Lab)r(el)f(\(Lab)r(el\))i(Gen-Lab)r(el)f(returns)g(a)g(Lab)r(el)g
(ob)5 b(ject,)26 b(whic)n(h)h(de-)523 4674 y(scrib)r(es)e(a)g(place)g
(in)h(the)g(co)r(de.)36 b(Emit-Lab)r(el)25 b(marks)f(the)i(curren)n(t)e
(p)r(osition)i(as)e(b)r(eing)i(the)523 4774 y(lo)r(cation)h(of)h(Lab)r
(el.)1914 5147 y(76)p eop
%%Page: 77 78
77 77 bop 523 1237 a Fg(Chapter)65 b(24)523 1652 y Fi(Dumping)523
2095 y Fk(So)35 b(far)g(as)f(input)i(to)f(the)h(dump)r(er/loader,)f(ho)
n(w)g(ab)r(out)g(ha)n(ving)f(a)h(list)h(of)f(En)n(try-Info)523
2195 y(structures)d(in)h(the)h(VMR-Comp)r(onen)n(t?)53
b(These)32 b(structures)g(con)n(tain)g(all)h(information)523
2294 y(needed)39 b(to)f(dump)i(the)f(asso)r(ciated)e(function)i(ob)5
b(jects,)41 b(and)e(are)f(only)g(implicitly)h(as-)523
2394 y(so)r(ciated)c(with)h(the)f(functional/XEP)f(data)h(structures.)
59 b(Load-time)35 b(constan)n(ts)f(that)523 2493 y(reference)29
b(these)h(function)g(ob)5 b(jects)30 b(should)f(sp)r(ecify)i(the)f(En)n
(try-Info,)f(rather)g(than)h(the)523 2593 y(functional)f(\(or)f
(something\).)40 b(W)-7 b(e)29 b(w)n(ould)f(then)i(need)e(to)h(main)n
(tain)f(some)h(sort)e(of)i(asso-)523 2693 y(ciation)g(so)f(VMR)i(con)n
(v)n(ersion)d(can)i(\014nd)h(the)g(appropriate)d(En)n(try-Info.)41
b(Alternativ)n(ely)-7 b(,)523 2792 y(w)n(e)28 b(could)g(initially)g
(reference)g(the)h(functional,)f(and)g(then)h(later)f(clobb)r(er)g(the)
g(reference)523 2892 y(to)g(the)f(En)n(try-Info.)648
2992 y(W)-7 b(e)25 b(ha)n(v)n(e)f(some)h(kind)h(of)f(p)r(ost-pass)f
(that)i(runs)f(after)g(assem)n(bly)-7 b(,)24 b(going)g(through)h(the)
523 3091 y(functions)f(and)g(constan)n(ts,)f(annotating)g(the)h
(VMR-Comp)r(onen)n(t)g(for)f(the)i(b)r(ene\014t)f(of)g(the)523
3191 y(dump)r(er:)45 b(Resolv)n(e)30 b(:Lab)r(el)h(load-time)g(constan)
n(ts.)47 b(Mak)n(e)30 b(the)i(debug)f(info.)49 b(Mak)n(e)30
b(the)523 3290 y(en)n(try-info)d(structures.)648 3390
y(F)-7 b(asl)23 b(dump)r(er)h(and)f(in-core)f(loader)h(are)f(implemen)n
(tation)i(\(but)g(not)g(instruction)f(set\))523 3490
y(dep)r(enden)n(t,)28 b(so)f(w)n(e)h(w)n(an)n(t)e(to)i(giv)n(e)f(them)h
(a)f(clear)g(in)n(terface.)648 3589 y(op)r(en-fasl-\014le)33
b(name)h(=>)g(fasl-\014le)f(Returns)h(a)g("fasl-\014le")e(ob)5
b(ject)34 b(represen)n(ting)f(all)523 3689 y(state)22
b(needed)h(b)n(y)f(the)h(dump)r(er.)35 b(W)-7 b(e)23
b(ob)5 b(jectify)22 b(the)h(state,)g(since)f(the)h(fasdump)r(er)g
(should)523 3789 y(b)r(e)28 b(reen)n(tran)n(t.)36 b(\(but)28
b(could)f(fail)h(to)g(b)r(e)g(at)f(\014rst.\))648 3888
y(close-fasl-\014le)e(fasl-\014le)j(ab)r(ort-p)e(Close)h(the)h(sp)r
(eci\014ed)g(fasl-\014le.)648 3988 y(fasl-dump-comp)r(onen)n(t)36
b(comp)r(onen)n(t)i(co)r(de-v)n(ector)d(length)j(\014xups)f
(fasl-\014le)g(Dump)523 4087 y(the)c(co)r(de,)h(constan)n(ts,)e(etc.)52
b(for)32 b(comp)r(onen)n(t.)52 b(Co)r(de-V)-7 b(ector)31
b(is)i(a)f(v)n(ector)f(holding)h(the)523 4187 y(assem)n(bled)22
b(co)r(de.)35 b(Length)23 b(is)g(the)g(n)n(um)n(b)r(er)g(of)g(elemen)n
(ts)g(of)g(V)-7 b(ector)22 b(that)i(are)e(actually)g(in)523
4287 y(use.)36 b(Fixups)24 b(is)f(a)h(list)g(of)g(conses)e(\(o\013set)i
(.)36 b(\014xup\))25 b(describing)e(the)h(lo)r(cations)f(and)g(things)
523 4386 y(that)d(need)h(to)f(b)r(e)g(\014xed)h(up)f(at)g(load)g(time.)
34 b(If)21 b(the)g(comp)r(onen)n(t)f(is)g(a)f(top-lev)n(el)h(comp)r
(onen)n(t,)523 4486 y(then)28 b(the)g(top-lev)n(el)f(lam)n(b)r(da)g
(will)h(b)r(e)g(called)f(after)g(the)h(comp)r(onen)n(t)g(is)f(loaded.)
648 4586 y(load-comp)r(onen)n(t)17 b(comp)r(onen)n(t)h(co)r(de-v)n
(ector)e(length)j(\014xups)f(Lik)n(e)g(F)-7 b(asl-Dump-Comp)r(onen)n
(t,)523 4685 y(but)32 b(directly)f(installs)g(the)h(co)r(de)f(in)h
(core,)f(running)g(an)n(y)f(top-lev)n(el)h(co)r(de)g(immediately)-7
b(.)523 4785 y(\(???\))37 b(but)27 b(w)n(e)e(need)g(some)g(w)n(a)n(y)g
(to)g(glue)g(together)g(the)h(comp)r(onenen)n(ts,)g(since)f(w)n(e)g
(don't)523 4884 y(ha)n(v)n(e)h(a)i(fasl)f(table.)1914
5147 y(77)p eop
%%Page: 78 79
78 78 bop 648 614 a Fk(Dumping:)648 714 y(Dump)31 b(co)r(de)f(for)f
(eac)n(h)g(comp)r(onen)n(t)h(after)g(compiling)g(that)g(comp)r(onen)n
(t,)h(but)f(defer)523 814 y(dumping)f(of)g(other)f(stu\013.)42
b(W)-7 b(e)29 b(do)f(the)i(\014xups)e(on)h(the)g(co)r(de)g(v)n(ectors,)
e(and)i(accum)n(ulate)523 913 y(them)f(in)g(the)g(table.)648
1013 y(W)-7 b(e)35 b(ha)n(v)n(e)g(to)g(gro)n(v)n(el)e(the)j(constan)n
(ts)e(for)h(eac)n(h)g(comp)r(onen)n(t)g(after)g(compiling)g(that)523
1112 y(comp)r(onen)n(t)27 b(so)g(that)h(w)n(e)g(can)f(\014x)h(up)g
(load-time)f(constan)n(ts.)36 b(Load-time)27 b(constan)n(ts)f(are)523
1212 y(v)-5 b(alues)31 b(needed)g(m)n(y)g(the)g(co)r(de)g(that)h(are)e
(computed)h(after)g(co)r(de)g(generation/assem)n(bly)523
1312 y(time.)36 b(Since)24 b(the)g(co)r(de)f(is)h(\014xed)f(at)h(this)f
(p)r(oin)n(t,)i(load-time)e(constan)n(ts)f(are)h(alw)n(a)n(ys)f(repre-)
523 1411 y(sen)n(ted)29 b(as)f(non-immediate)g(constan)n(ts)g(in)h(the)
g(constan)n(t)f(p)r(o)r(ol.)40 b(A)29 b(load-time)f(constan)n(t)523
1511 y(is)37 b(distinguished)f(b)n(y)h(b)r(eing)f(a)h(cons)f(\(Kind)g
(.)65 b(What\),)39 b(instead)e(of)f(a)g(Constan)n(t)g(leaf.)523
1611 y(Kind)27 b(is)g(a)f(k)n(eyw)n(ord)f(indicating)i(ho)n(w)f(the)h
(constan)n(t)f(is)h(computed,)g(and)g(What)g(is)g(some)523
1710 y(con)n(text.)648 1810 y(Some)g(in)n(teresting)g(load-time)g
(constan)n(ts:)648 1910 y(\(:lab)r(el)38 b(.)70 b(<lab)r(el>\))39
b(Is)f(replaced)g(with)h(the)f(b)n(yte)h(o\013set)f(of)h(the)f(lab)r
(el)h(within)g(the)523 2009 y(co)r(de-v)n(ector.)648
2109 y(\(:co)r(de-v)n(ector)26 b(.)37 b(<comp)r(onen)n(t>\))27
b(Is)h(replaced)f(b)n(y)g(the)h(comp)r(onen)n(t's)f(co)r(de-v)n(ector.)
648 2208 y(\(:en)n(try)22 b(.)35 b(<function>\))24 b(\(:closure-en)n
(try)d(.)35 b(<function>\))24 b(Is)e(replaced)g(b)n(y)g(the)h
(function-)523 2308 y(en)n(try)e(structure)g(for)g(the)h(sp)r
(eci\014ed)f(function.)36 b(:En)n(try)20 b(is)h(ho)n(w)g(the)h(top-lev)
n(el)f(comp)r(onen)n(t)523 2408 y(gets)27 b(a)g(handle)h(on)f(the)h
(function)g(de\014nitions)g(so)f(that)h(it)g(can)f(set)h(them)g(up.)648
2507 y(W)-7 b(e)27 b(also)g(need)g(to)g(remem)n(b)r(er)g(the)h
(starting)e(o\013set)h(for)g(eac)n(h)g(en)n(try)-7 b(,)27
b(although)f(these)523 2607 y(don't)i(in)g(general)e(app)r(ear)h(as)f
(explicit)i(constan)n(ts.)648 2707 y(W)-7 b(e)34 b(then)g(dump)g(out)g
(all)f(the)h(:En)n(try)e(and)i(:Closure-En)n(try)d(ob)5
b(jects,)35 b(lea)n(ving)d(an)n(y)523 2806 y(constan)n(t-p)r(o)r(ol)21
b(p)r(oin)n(ters)g(uninitialized.)36 b(After)22 b(dumping)h(eac)n(h)e
(:En)n(try)-7 b(,)23 b(w)n(e)e(dump)i(some)523 2906 y(stu\013)33
b(to)g(let)f(genesis)g(kno)n(w)g(that)g(this)h(is)g(a)f(function)h
(de\014nition.)52 b(Then)32 b(w)n(e)h(dump)g(all)523
3005 y(the)26 b(constan)n(t)e(p)r(o)r(ols,)i(\014xing)f(up)g(an)n(y)g
(constan)n(t-p)r(o)r(ol)f(p)r(oin)n(ters)g(in)i(the)f(already-dump)r
(ed)523 3105 y(function)j(en)n(try)f(structures.)648
3205 y(The)34 b(debug-info)f(*is*)g(a)h(constan)n(t:)49
b(the)35 b(\014rst)f(constan)n(t)f(in)h(ev)n(ery)f(constan)n(t)g(p)r(o)
r(ol.)523 3304 y(But)27 b(the)h(creation)d(of)i(this)h(constan)n(t)e(m)
n(ust)h(b)r(e)g(deferred)g(un)n(til)g(after)f(the)i(comp)r(onen)n(t)e
(is)523 3404 y(compiled,)k(so)f(w)n(e)g(lea)n(v)n(e)f(a)h
(\(:debug-info\))g(placeholder.)41 b([Or)29 b(ma)n(yb)r(e)g(this)g(is)h
(implicitly)523 3504 y(added)d(in)h(b)n(y)g(the)g(dump)r(er,)g(b)r
(eing)f(supplied)h(in)g(a)f(VMR-comp)r(onen)n(t)h(slot.])648
3603 y(W)-7 b(ork)42 b(out)h(details)g(of)g(the)h(in)n(terface)e(b)r
(et)n(w)n(een)h(the)h(bac)n(k-end)e(and)h(the)h(assem-)523
3703 y(bler/dump)r(er.)648 3802 y(Supp)r(ort)27 b(for)g(m)n(ultiple)i
(assem)n(blers)c(concurren)n(tly)i(loaded?)36 b(\(for)27
b(b)n(yte)h(co)r(de\))648 3902 y(W)-7 b(e)28 b(need)f(v)-5
b(arious)27 b(mec)n(hanisms)f(for)i(getting)f(information)g(out)g(of)h
(the)g(assem)n(bler.)648 4002 y(W)-7 b(e)28 b(can)f(get)g(en)n(try)g
(PCs)g(and)h(similar)f(things)h(in)n(to)f(function)h(ob)5
b(jects)27 b(b)n(y)h(making)f(a)523 4101 y(Constan)n(t)g(leaf,)h(sp)r
(ecifying)g(that)g(it)h(go)r(es)e(in)h(the)g(closure,)f(and)h(then)g
(setting)g(the)g(v)-5 b(alue)523 4201 y(after)27 b(assem)n(bly)-7
b(.)648 4301 y(W)g(e)30 b(ha)n(v)n(e)f(an)g(op)r(eration)g(Lab)r(el-V)
-7 b(alue)30 b(whic)n(h)f(can)h(b)r(e)g(used)g(to)g(get)g(the)g(v)-5
b(alue)30 b(of)g(a)523 4400 y(lab)r(el)e(after)f(assem)n(bly)f(and)i(b)
r(efore)f(the)h(assem)n(bler)e(data)h(structures)g(are)g(deallo)r
(cated.)648 4500 y(The)38 b(function)h(map)f(can)g(b)r(e)h(constructed)
f(without)h(an)n(y)e(sp)r(ecial)h(help)h(from)f(the)523
4599 y(assem)n(bler.)33 b(Co)r(degen)20 b(just)h(has)f(to)h(note)f(the)
h(curren)n(t)f(lab)r(el)h(when)g(the)g(function)g(c)n(hanges)523
4699 y(from)26 b(one)f(blo)r(c)n(k)h(to)g(the)g(next,)h(and)f(then)g
(use)g(the)h(\014nal)e(v)-5 b(alue)26 b(of)g(these)g(lab)r(els)g(to)g
(mak)n(e)523 4799 y(the)i(function)g(map.)1914 5147 y(78)p
eop
%%Page: 79 80
79 79 bop 648 614 a Fk(Probably)32 b(w)n(e)h(w)n(an)n(t)g(to)g(do)h
(the)g(source)e(map)i(this)g(w)n(a)n(y)e(to)r(o.)55 b(Although)34
b(this)g(will)523 714 y(mak)n(e)27 b(zillions)g(of)h(spurious)e(lab)r
(els,)i(w)n(e)f(w)n(ould)g(ha)n(v)n(e)f(to)i(e\013ectiv)n(ely)f(do)h
(that)g(an)n(yw)n(a)n(y)-7 b(.)648 814 y(With)25 b(b)r(oth)g(the)g
(function)g(map)f(and)h(the)g(source)e(map,)i(getting)g(the)f(lo)r
(cations)g(righ)n(t)523 913 y(for)j(uses)g(of)g(Elsewhere)f(will)i(b)r
(e)f(a)g(bit)h(tric)n(ky)-7 b(.)36 b(Users)27 b(of)g(Elsewhere)f(will)i
(need)f(to)g(kno)n(w)523 1013 y(ab)r(out)34 b(ho)n(w)f(these)g(maps)h
(are)e(b)r(eing)i(built,)i(since)d(they)h(m)n(ust)g(record)e(the)i(lab)
r(els)g(and)523 1112 y(corresp)r(onding)f(information)i(for)g(the)h
(elsewhere)e(range.)59 b(It)36 b(w)n(ould)f(b)r(e)h(nice)f(to)h(ha)n(v)
n(e)523 1212 y(some)c(co)r(op)r(eration)g(from)h(Elsewhere)f(so)g(that)
h(this)h(isn't)f(necessary)-7 b(,)33 b(otherwise)f(some)523
1312 y(V)n(OP)27 b(writer)g(will)g(break)g(the)h(rules,)f(resulting)g
(in)h(co)r(de)f(that)h(is)g(no)n(where.)648 1411 y(The)c(Debug-Info)h
(and)f(related)g(structures)g(are)g(dump)r(ed)i(b)n(y)e(consing)g(up)h
(the)g(struc-)523 1511 y(ture)j(and)f(making)g(it)h(b)r(e)g(the)g(v)-5
b(alue)27 b(of)h(a)f(constan)n(t.)648 1611 y(Getting)d(the)g(co)r(de)g
(v)n(ector)f(and)h(\014xups)g(dump)r(ed)h(ma)n(y)e(b)r(e)i(a)e(bit)i
(more)e(in)n(teresting.)35 b(I)523 1710 y(guess)25 b(w)n(e)g(w)n(an)n
(t)h(a)f(Dump-Co)r(de-V)-7 b(ector)25 b(function)i(whic)n(h)f(dumps)g
(the)g(co)r(de)g(and)f(\014xups)523 1810 y(accum)n(ulated)c(b)n(y)g
(the)i(curren)n(t)d(assem)n(bly)-7 b(,)22 b(returning)f(a)g(magic)g(ob)
5 b(ject)22 b(that)g(will)f(b)r(ecome)523 1910 y(the)28
b(co)r(de)f(v)n(ector)g(when)h(it)g(is)f(dump)r(ed)i(as)e(a)g(constan)n
(t.)36 b(])1914 5147 y(79)p eop
%%Page: 80 81
80 80 bop 523 1237 a Fg(Chapter)65 b(25)523 1652 y Fi(User)77
b(In)-6 b(terface)523 2134 y Ff(25.1)136 b(Error)45 b(Message)h
(Utilities)523 2365 y(25.2)136 b(Source)44 b(P)l(aths)1914
5147 y Fk(80)p eop
%%Page: 81 82
81 81 bop 1622 2029 a Fg(P)-5 b(art)65 b(I)5 b(I)g(I)848
2444 y Fi(Compiler)76 b(Retargeting)1914 5147 y Fk(81)p
eop
%%Page: 82 83
82 82 bop 648 614 a Fk([###)648 714 y(In)33 b(general,)f(it)i(is)e(a)h
(danger)e(sign)i(if)g(a)f(generator)f(references)h(a)g(TN)h(that)g
(isn't)h(an)523 814 y(op)r(erand)24 b(or)f(temp)r(orary)-7
b(,)24 b(since)g(lifetime)i(analysis)d(hasn't)h(b)r(een)h(done)f(for)g
(that)g(use.)36 b(W)-7 b(e)523 913 y(are)32 b(doing)h(w)n(eird)f
(stu\013)i(for)e(the)i(old-con)n(t)e(and)h(return-p)r(c)f(passing)g(lo)
r(cations,)i(hoping)523 1013 y(that)h(the)g(con\015icts)g(at)f(the)h
(called)g(function)g(ha)n(v)n(e)f(the)h(desired)f(e\013ect.)59
b(Other)34 b(stu\013)6 b(?)523 1112 y(When)20 b(a)g(function)g(returns)
g(unkno)n(wn)f(v)-5 b(alues,)21 b(w)n(e)f(don't)g(reference)f(the)h(v)
-5 b(alues)19 b(lo)r(cations)523 1212 y(when)k(a)f(single-v)-5
b(alue)21 b(return)h(is)h(done.)35 b(But)22 b(nothing)h(is)f(liv)n(e)g
(at)h(a)f(return)g(p)r(oin)n(t)g(an)n(yw)n(a)n(y)-7 b(.)648
1312 y(Ha)n(v)n(e)18 b(a)g(w)n(a)n(y)g(for)h(template)g(con)n(v)n
(ersion)e(to)i(sp)r(ecial-case)f(constan)n(t)g(argumen)n(ts?)33
b(Ho)n(w)523 1411 y(ab)r(out:)45 b(If)32 b(an)f(arg)g(restriction)f(is)
i(\(:satis\014es)f([<predicate)g(function>]\),)j(and)d(the)h(corre-)523
1511 y(sp)r(onding)22 b(argumen)n(t)f(is)i(constan)n(t,)f(with)h(the)g
(constan)n(t)e(v)-5 b(alue)23 b(satisfying)e(the)i(predicate,)523
1611 y(then)30 b(\(if)h(an)n(y)d(other)h(restrictions)g(are)f
(satis\014ed\),)j(the)f(template)g(will)f(b)r(e)h(emitted)h(with)523
1710 y(the)h(literal)e(v)-5 b(alue)31 b(passed)g(as)f(an)h(info)h
(argumen)n(t.)46 b(If)32 b(the)g(predicate)e(is)h(omitted,)i(then)523
1810 y(an)n(y)27 b(constan)n(t)g(will)h(do.)648 1910
y(W)-7 b(e)28 b(could)h(sugar)e(this)i(up)f(a)g(bit)h(b)n(y)g(allo)n
(wing)e(\(:mem)n(b)r(er)i(<ob)5 b(ject>*\))28 b(for)g(\(:satis\014es)
523 2009 y(\(lam)n(b)r(da)g(\(x\))g(\(mem)n(b)r(er)f(x)h('\(<ob)5
b(ject>*\)\)\)\))648 2109 y(W)-7 b(e)26 b(could)h(allo)n(w)e(this)i(to)
f(b)r(e)h(translated)f(in)n(to)g(a)g(Lisp)g(t)n(yp)r(e)h(b)n(y)f
(adding)g(a)g(new)h(Con-)523 2208 y(stan)n(t)f(t)n(yp)r(e)g(sp)r
(eci\014er.)36 b(This)26 b(could)f(only)h(app)r(ear)f(as)g(an)h
(argumen)n(t)e(to)i(a)g(function)g(t)n(yp)r(e.)523 2308
y(T)-7 b(o)26 b(satisfy)h(\(Constan)n(t)f(<t)n(yp)r(e>\),)i(the)f
(argumen)n(t)f(m)n(ust)g(b)r(e)h(a)g(compile-time)f(constan)n(t)g(of)
523 2408 y(the)h(sp)r(eci\014ed)f(t)n(yp)r(e.)37 b(Just)26
b(Constan)n(t)g(means)g(an)n(y)f(constan)n(t)h(\(i.e.)37
b(\(Constan)n(t)26 b(*\)\).)36 b(This)523 2507 y(w)n(ould)27
b(b)r(e)h(useful)g(for)f(the)h(t)n(yp)r(e)g(constrain)n(ts)e(on)i(ICR)f
(transforms.)648 2607 y(Constan)n(t)f(TNs:)36 b(w)n(e)26
b(coun)n(t)h(on)f(b)r(eing)h(able)f(to)g(indirect)h(to)g(the)g(leaf,)f
(and)h(don't)g(try)523 2707 y(to)35 b(w)n(edge)g(the)h(information)f
(in)n(to)g(the)h(o\013set.)61 b(W)-7 b(e)36 b(set)g(the)f(FSC)h(to)g
(an)f(appropriate)523 2806 y(immediate)28 b(SC.)648 2906
y(Allo)n(w)c("more)g(op)r(erands")g(to)h(V)n(OPs)f(in)h(de\014ne-v)n
(op.)35 b(Y)-7 b(ou)25 b(can't)h(do)e(m)n(uc)n(h)h(with)h(the)523
3005 y(more)36 b(op)r(erands:)53 b(de\014ne-v)n(op)36
b(just)h(\014lls)f(in)h(the)f(cost)g(information)g(according)f(to)h
(the)523 3105 y(loading)29 b(costs)h(for)g(a)g(SC)g(y)n(ou)g(sp)r
(ecify)-7 b(.)46 b(Y)-7 b(ou)30 b(can't)h(restrict)e(more)h(op)r
(erands,)g(and)g(y)n(ou)523 3205 y(can't)e(mak)n(e)g(lo)r(cal)f
(preferences.)38 b(In)29 b(the)f(generator,)f(the)h(named)g(v)-5
b(ariable)28 b(is)g(b)r(ound)h(to)523 3304 y(the)i(TN-ref)f(for)g(the)h
(\014rst)f(extra)g(op)r(erand.)45 b(This)30 b(should)g(b)r(e)h(go)r(o)r
(d)f(enough)g(to)g(handle)523 3404 y(all)j(the)h(v)-5
b(ariable)33 b(arg)f(V)n(OPs)g(\(primarily)h(function)h(call)f(and)h
(return\).)54 b(Usually)33 b(more)523 3504 y(op)r(erands)28
b(are)g(used)i(just)g(to)f(get)g(TN)g(lifetimes)h(to)f(w)n(ork)f(out;)i
(the)g(generator)d(actually)523 3603 y(ignores)f(them.)648
3703 y(V)-7 b(ariable-arg)18 b(V)n(OPs)i(can't)i(b)r(e)g(used)f(with)h
(the)g(V)n(OP)e(macro.)34 b(Y)-7 b(ou)21 b(m)n(ust)g(use)h(V)n(OP*.)523
3802 y(V)n(OP*)29 b(do)r(esn't)h(do)g(an)n(ything)f(with)i(these)f
(extra)f(op)r(erand)g(except)h(stic)n(k)g(them)g(on)g(the)523
3902 y(ends)c(of)g(the)g(op)r(erand)f(lists)h(passed)f(in)n(to)h(the)g
(template.)37 b(V)n(OP*)24 b(is)i(often)g(useful)h(within)523
4002 y(the)e(con)n(v)n(ert)e(functions)i(for)f(non-V)n(OP)f(templates,)
i(since)g(it)g(can)f(emit)h(a)f(V)n(OP)f(using)i(an)523
4101 y(already)h(prepared)h(TN-Ref)g(list.)648 4201 y(It)37
b(is)h(prett)n(y)f(basic)g(to)h(the)f(whole)h(primitiv)n(e-t)n(yp)r(e)f
(idea)g(that)h(there)f(is)h(only)f(one)523 4301 y(primitiv)n(e-t)n(yp)r
(e)27 b(for)g(a)h(giv)n(en)e(lisp)i(t)n(yp)r(e.)37 b(This)28
b(is)g(really)e(the)i(same)f(as)g(sa)n(ying)g(primitiv)n(e)523
4400 y(t)n(yp)r(es)e(are)f(disjoin)n(t.)36 b(A)25 b(primitiv)n(e)f(t)n
(yp)r(e)h(serv)n(es)f(t)n(w)n(o)g(somewhat)g(unrelated)g(purp)r(oses:)
35 b({)523 4500 y(It)21 b(is)f(an)g(abstraction)f(a)h(Lisp)h(t)n(yp)r
(e)g(used)f(to)g(select)h(t)n(yp)r(e)f(sp)r(eci\014c)h(op)r(erations.)
33 b(Originally)523 4599 y(kind)c(of)g(an)f(e\016ciency)h(hac)n(k,)f
(but)h(it)g(lets)g(a)g(template's)g(t)n(yp)r(e)f(signature)g(b)r(e)h
(used)g(b)r(oth)523 4699 y(for)34 b(selection)h(and)f(op)r(erand)g
(represen)n(tation)f(determination.)58 b({)35 b(It)g(represen)n(ts)e(a)
h(set)523 4799 y(of)k(p)r(ossible)g(represen)n(tations)e(for)i(a)g(v)-5
b(alue)38 b(\(SCs\).)69 b(The)38 b(primitiv)n(e)g(t)n(yp)r(e)g(is)g
(used)h(to)523 4898 y(determine)34 b(the)h(legal)e(SCs)h(for)f(a)h(TN,)
g(and)g(is)g(also)f(used)h(to)f(determine)i(whic)n(h)e(t)n(yp)r(e-)1914
5147 y(82)p eop
%%Page: 83 84
83 83 bop 523 614 a Fk(co)r(ercion/mo)n(v)n(e)25 b(V)n(OP)h(to)i(use.)
648 714 y(])648 814 y(There)f(are)f(basically)h(three)g(lev)n(els)g(of)
h(target)e(dep)r(endence:)648 913 y({)35 b(Co)r(de)g(in)h(the)g("fron)n
(t)e(end")h(\(b)r(efore)h(VMR)g(con)n(v)n(ersion\))d(deals)i(only)g
(with)h(Lisp)523 1013 y(seman)n(tics,)27 b(and)g(is)h(totally)f(target)
g(indep)r(enden)n(t.)648 1112 y({)33 b(Co)r(de)h(after)f(VMR)i(con)n(v)
n(ersion)c(and)j(b)r(efore)f(co)r(de)h(generation)e(dep)r(ends)i(on)g
(the)523 1212 y(VM,)e(but)g(should)f(w)n(ork)f(with)i(little)h(mo)r
(di\014cation)e(across)e(a)i(wide)h(range)e(of)h("con)n(v)n(en-)523
1312 y(tional")c(arc)n(hitectures.)648 1411 y({)21 b(Co)r(de)g
(generation)g(dep)r(ends)h(on)f(the)h(mac)n(hine's)f(instruction)h(set)
g(and)f(other)g(imple-)523 1511 y(men)n(tation)31 b(details,)g(so)f(it)
i(will)f(ha)n(v)n(e)e(to)i(b)r(e)g(redone)f(for)h(eac)n(h)f(implemen)n
(tation.)47 b(Most)523 1611 y(of)38 b(the)h(w)n(ork)e(here)h(is)g(in)g
(de\014ning)h(the)f(translation)f(in)n(to)h(assem)n(bly)g(co)r(de)g(of)
g(all)g(the)523 1710 y(supp)r(orted)27 b(V)n(OPs.)1914
5147 y(83)p eop
%%Page: 84 85
84 84 bop 523 1237 a Fg(Chapter)65 b(26)523 1652 y Fi(Storage)78
b(bases)f(and)h(classes)523 2084 y Fk(New)19 b(in)n(terface:)31
b(instead)18 b(of)h(CURRENT-FRAME-SIZE,)e(ha)n(v)n(e)g(CURRENT-SB-SIZE)
523 2183 y(<name>)28 b(whic)n(h)f(returns)g(the)h(curren)n(t)f(elemen)n
(t)h(size)f(of)g(the)h(named)g(SB.)648 2283 y(Ho)n(w)23
b(can)g(w)n(e)g(ha)n(v)n(e)g(primitiv)n(e)g(t)n(yp)r(es)h(that)g(o)n(v)
n(erlap,)e(i.e.)36 b(\(UNSIGNED-BYTE)24 b(32\),)523 2383
y(\(SIGNED-BYTE)i(32\),)g(FIXNUM?)h(Primitiv)n(e)e(t)n(yp)r(es)h(are)f
(used)h(for)f(t)n(w)n(o)g(things:)36 b(Rep-)523 2482
y(resen)n(tation)29 b(selection:)42 b(whic)n(h)30 b(SCs)g(can)g(b)r(e)h
(used)f(to)h(represen)n(t)e(this)h(v)-5 b(alue?)45 b(F)-7
b(or)30 b(this)523 2582 y(purp)r(ose,)f(it)h(isn't)f(necessary)f(that)h
(primitiv)n(e)g(t)n(yp)r(es)h(b)r(e)f(disjoin)n(t,)h(since)f(an)n(y)g
(primitiv)n(e)523 2682 y(t)n(yp)r(e)21 b(can)g(c)n(ho)r(ose)e(an)i
(arbitrary)d(set)j(of)g(represen)n(tations.)33 b(F)-7
b(or)20 b(mo)n(v)n(es)f(b)r(et)n(w)n(een)i(the)g(o)n(v)n(er-)523
2781 y(lapping)29 b(represen)n(tations,)e(the)j(mo)n(v)n(e/load)c(op)r
(erations)i(can)h(just)h(b)r(e)f(no)r(ops)g(when)g(the)523
2881 y(lo)r(cations)e(are)f(the)j(same)e(\(v)-5 b(anilla)27
b(MO)n(VE\),)g(since)h(an)n(y)f(bad)g(mo)n(v)n(es)g(should)g(b)r(e)h
(caugh)n(t)523 2980 y(out)c(b)n(y)f(t)n(yp)r(e)g(c)n(hec)n(king.)35
b(V)n(OP)22 b(selection:)35 b(Is)23 b(this)h(op)r(erand)f(legal)f(for)h
(this)h(V)n(OP?)f(When)523 3080 y(pt)n(yp)r(es)e(o)n(v)n(erlap)e(in)i
(in)n(teresting)f(w)n(a)n(ys,)h(there)f(is)h(a)f(problem)h(with)g(allo)
n(wing)e(just)j(a)e(simple)523 3180 y(pt)n(yp)r(e)29
b(restriction,)e(since)h(w)n(e)g(migh)n(t)g(w)n(an)n(t)g(to)g(allo)n(w)
f(m)n(ultiple)i(pt)n(yp)r(es.)39 b(This)28 b(could)g(b)r(e)523
3279 y(handled)g(b)n(y)g(allo)n(wing)e("union)i(primitiv)n(e)f(t)n(yp)r
(es",)h(or)f(b)n(y)h(allo)n(wing)e(m)n(ultiple)j(primitiv)n(e)523
3379 y(t)n(yp)r(es)24 b(to)g(b)r(e)g(sp)r(eci\014ed)g(\(only)g(in)g
(the)g(op)r(erand)f(restriction.\))35 b(The)24 b(latter)f(w)n(ould)h(b)
r(e)g(long)523 3479 y(the)g(lines)f(of)g(other)f(more)h(\015exible)g(V)
n(OP)f(op)r(erand)g(restriction)g(mec)n(hanisms,)i(\(constan)n(t,)523
3578 y(etc.\))648 3678 y(Ensure)i(that)i(load/sa)n(v)n(e-op)r(erand)c
(nev)n(er)i(need)i(to)f(do)h(represen)n(tation)e(con)n(v)n(ersion.)648
3778 y(The)21 b(PRIMITIVE-TYPE)e(more/co)r(erce)f(info)j(w)n(ould)g(b)r
(e)g(mo)n(v)n(ed)f(in)n(to)h(the)g(SC.)g(This)523 3877
y(could)30 b(p)r(erhaps)h(go)e(along)h(with)h(\015ushing)f(the)h
(TN-COSTS.)g(W)-7 b(e)31 b(w)n(ould)f(annotate)g(the)523
3977 y(TN)35 b(with)h(b)r(est)f(SC,)h(whic)n(h)f(implies)g(the)h
(represen)n(tation)d(\(b)r(o)n(xed)i(or)f(un)n(b)r(o)n(xed\).)59
b(W)-7 b(e)523 4076 y(w)n(ould)31 b(still)h(need)g(represen)n(t)e(the)i
(legal)f(SCs)g(for)g(restricted)g(TNs)h(someho)n(w,)f(and)g(also)523
4176 y(w)n(ould)i(ha)n(v)n(e)f(to)h(come)g(up)h(with)g(some)f(other)f
(w)n(a)n(y)h(for)f(pac)n(k)h(to)g(k)n(eep)g(trac)n(k)f(of)h(whic)n(h)
523 4276 y(SCs)28 b(w)n(e)f(ha)n(v)n(e)f(already)g(tried.)648
4375 y(A)d(SC)h(w)n(ould)f(ha)n(v)n(e)g(a)g(list)h(of)f("alternate")f
(SCs)h(and)h(a)f(b)r(o)r(olean)g(SA)-9 b(VE-P)23 b(v)-5
b(alue)23 b(that)523 4475 y(indicates)34 b(it)g(needs)g(to)g(b)r(e)h
(sa)n(v)n(ed)d(across)g(calls)i(in)g(some)g(non-SA)-9
b(VE-P)32 b(SC.)j(A)f(TN)g(is)523 4575 y(initially)27
b(giv)n(en)f(its)h("b)r(est")f(SC.)h(The)g(SC)g(is)g(annotated)f(with)h
(V)n(OPs)f(that)h(are)f(used)h(for)523 4674 y(mo)n(ving)f(b)r(et)n(w)n
(een)i(the)f(SC)h(and)f(its)g(alternate)g(SCs)g(\(load/sa)n(v)n(e)d(op)
r(erand,)j(sa)n(v)n(e/restore)523 4774 y(register\).)36
b(It)28 b(is)f(also)g(annotated)g(with)h(the)g("mo)n(v)n(e")e(V)n(OPs)g
(used)i(for)f(mo)n(ving)f(b)r(et)n(w)n(een)523 4873 y(this)f(SC)f(and)g
(all)g(other)g(SCs)g(it)g(is)h(p)r(ossible)f(to)g(mo)n(v)n(e)f(b)r(et)n
(w)n(een.)35 b(W)-7 b(e)25 b(\015ush)g(the)f(idea)g(that)1914
5147 y(84)p eop
%%Page: 85 86
85 85 bop 523 614 a Fk(there)27 b(is)h(only)f(c-to-t)g(and)h(c-from-t.)
648 714 y(But)34 b(ho)n(w)g(do)r(es)h(this)g(mesh)f(with)i(the)f(idea)f
(of)g(putting)i(op)r(erand)d(load/sa)n(v)n(e)f(bac)n(k)523
814 y(in)n(to)23 b(the)h(generator?)33 b(Ma)n(yb)r(e)23
b(w)n(e)g(should)g(instead)g(sp)r(ecify)h(a)f(load/sa)n(v)n(e)d
(function?)36 b(The)523 913 y(load/sa)n(v)n(e)28 b(functions)j(w)n
(ould)f(also)g(di\013er)h(from)f(the)i(mo)n(v)n(e)d(V)n(OPs)h(in)h
(that)g(they)g(w)n(ould)523 1013 y(only)e(b)r(e)h(called)f(when)h(the)f
(TN)h(is)g(in)f(fact)h(in)g(that)f(particular)f(alternate)h(SC,)h
(whereas)523 1112 y(the)35 b(mo)n(v)n(e)e(V)n(OPs)g(will)i(b)r(e)f
(asso)r(ciated)f(with)i(the)g(primary)e(SC,)h(and)g(will)h(b)r(e)g
(emitted)523 1212 y(b)r(efore)i(it)h(is)g(kno)n(wn)f(whether)g(the)h
(TN)g(will)g(b)r(e)g(pac)n(k)n(ed)f(in)h(the)g(primary)e(SC)i(or)f(an)
523 1312 y(alternate.)648 1411 y(I)32 b(guess)f(a)h(pac)n(k)n(ed)e(SC)j
(could)f(also)f(ha)n(v)n(e)f(immediate)j(SCs)f(as)f(alternate)g(SCs,)j
(and)523 1511 y(constan)n(t)26 b(loading)g(functions)i(could)e(b)r(e)i
(asso)r(ciated)d(with)j(SCs)f(using)g(this)g(mec)n(hanism.)648
1611 y(So)40 b(giv)n(en)f(a)i(TN)f(pac)n(k)n(ed)g(in)g(SC)h(X)g(and)f
(a)g(SC)h(restriction)e(for)h(Y)h(and)g(Z,)f(ho)n(w)523
1710 y(do)32 b(w)n(e)h(kno)n(w)f(whic)n(h)g(load)g(function)i(to)e
(call?)53 b(There)32 b(w)n(ould)g(b)r(e)h(am)n(biguit)n(y)f(if)h(X)g(w)
n(as)523 1810 y(an)28 b(alternate)e(for)i(b)r(oth)g(Y)g(and)g(Z)f(and)h
(they)g(sp)r(eci\014ed)g(di\013eren)n(t)g(load)f(functions.)37
b(This)523 1910 y(seems)21 b(unlik)n(ely)g(to)g(arise)f(in)h(practice,)
h(though,)g(so)f(w)n(e)f(could)h(just)h(detect)g(the)f(am)n(biguit)n(y)
523 2009 y(and)26 b(giv)n(e)e(an)i(error)e(at)h(de\014ne-v)n(op)g
(time.)37 b(If)26 b(they)g(are)f(doing)g(something)h(totally)f(w)n
(eird,)523 2109 y(they)j(can)f(alw)n(a)n(ys)f(inhibit)i(loading)f(and)g
(roll)g(their)h(o)n(wn.)648 2208 y(Note)g(that)h(loading)e(costs)h(can)
g(b)r(e)h(sp)r(eci\014ed)f(at)h(the)f(same)g(time)h(\(same)f(syn)n
(tax\))g(as)523 2308 y(asso)r(ciation)19 b(of)i(loading)f(functions)h
(with)g(SCs.)35 b(It)21 b(seems)f(that)h(ma)n(yb)r(e)g(w)n(e)f(will)h
(b)r(e)g(rolling)523 2408 y(DEFINE-SA)-9 b(VE-SCS)34
b(and)g(DEFINE-MO)n(VE-COSTS)f(in)n(to)h(DEFINE-STORA)n(GE-)523
2507 y(CLASS.)648 2607 y(F)-7 b(ortunately)g(,)27 b(these)g(c)n(hanges)
g(will)g(a\013ect)h(most)g(V)n(OP)e(de\014nitions)i(v)n(ery)e(little.)
648 2707 y(A)i(Storage)f(Base)g(represen)n(ts)f(a)i(ph)n(ysical)f
(storage)f(resource)h(suc)n(h)h(as)f(a)h(register)e(set)523
2806 y(or)35 b(stac)n(k)h(frame.)62 b(Storage)35 b(bases)g(for)h
(non-global)f(resources)f(suc)n(h)i(as)f(the)i(stac)n(k)e(are)523
2906 y(relativized)g(b)n(y)h(the)h(en)n(vironmen)n(t)e(that)h(the)h(TN)
f(is)g(allo)r(cated)g(in.)62 b(P)n(ac)n(king)34 b(con\015ict)523
3005 y(information)29 b(is)g(k)n(ept)h(in)f(the)h(storage)e(base,)h
(but)h(non-pac)n(k)n(ed)e(storage)f(resources)h(suc)n(h)523
3105 y(as)i(closure)g(en)n(vironmen)n(ts)f(also)h(ha)n(v)n(e)f(storage)
g(bases.)45 b(Some)30 b(storage)f(bases:)42 b(General)523
3205 y(purp)r(ose)c(registers)f(Floating)h(p)r(oin)n(t)h(registers)d
(Bo)n(xed)i(\(con)n(trol\))g(stac)n(k)f(en)n(vironmen)n(t)523
3304 y(Un)n(b)r(o)n(xed)27 b(\(n)n(um)n(b)r(er\))h(stac)n(k)f(en)n
(vironmen)n(t)f(Closure)h(en)n(vironmen)n(t)648 3404
y(A)36 b(storage)f(class)g(is)h(a)g(p)r(oten)n(tially)g(arbitrary)e
(set)j(of)f(the)h(elemen)n(ts)f(in)g(a)g(storage)523
3504 y(base.)f(Although)24 b(conceptually)f(there)g(ma)n(y)g(b)r(e)h(a)
f(hierarc)n(h)n(y)e(of)j(storage)e(classes)g(suc)n(h)h(as)523
3603 y("all)f(registers",)g("b)r(o)n(xed)f(registers",)h("b)r(o)n(xed)g
(scratc)n(h)f(registers",)h(this)h(do)r(esn't)g(exist)f(at)523
3703 y(the)j(implemen)n(tation)g(lev)n(el.)35 b(Suc)n(h)25
b(things)f(can)h(b)r(e)g(done)f(b)n(y)g(sp)r(ecifying)h(storage)e
(classes)523 3802 y(whose)k(lo)r(cations)f(o)n(v)n(erlap.)35
b(A)28 b(TN)g(shouldn't)g(ha)n(v)n(e)e(lots)h(of)h(o)n(v)n(erlapping)d
(SC's)i(as)g(legal)523 3902 y(SC's,)36 b(since)e(time)g(w)n(ould)g(b)r
(e)g(w)n(asted)f(rep)r(eatedly)h(attempting)g(to)g(pac)n(k)f(in)i(the)f
(same)523 4002 y(lo)r(cations.)648 4101 y(There)29 b(will)i(b)r(e)f
(some)g(SC's)g(whose)f(lo)r(cations)h(o)n(v)n(erlap)e(a)h(great)g
(deal,)i(since)f(w)n(e)g(get)523 4201 y(P)n(ac)n(k)j(to)h(do)g(our)f
(represen)n(tation)g(analysis)g(b)n(y)h(ha)n(ving)f(lots)h(of)h(SC's.)
57 b(A)34 b(SC)h(is)f(basi-)523 4301 y(cally)28 b(a)g(w)n(a)n(y)f(of)i
(lo)r(oking)e(at)i(a)f(storage)e(resource.)38 b(Although)29
b(w)n(e)f(could)g(k)n(eep)g(a)g(\014xn)n(um)523 4400
y(and)j(an)f(un)n(b)r(o)n(xed)g(represen)n(tation)f(of)i(the)g(same)f
(n)n(um)n(b)r(er)h(in)g(the)g(same)f(register,)g(they)523
4500 y(corresp)r(ond)c(to)h(di\013eren)n(t)h(SC's)g(since)f(they)h(are)
f(di\013eren)n(t)g(represen)n(tation)f(c)n(hoices.)648
4599 y(TNs)37 b(are)f(annotated)h(with)h(the)g(primitiv)n(e)f(t)n(yp)r
(e)g(of)g(the)h(ob)5 b(ject)37 b(that)h(they)f(hold:)523
4699 y(T:)28 b(random)f(b)r(o)n(xed)h(ob)5 b(ject)28
b(with)h(only)e(one)h(represen)n(tation.)37 b(Fixn)n(um,)29
b(In)n(teger,)e(XXX-)523 4799 y(Float:)45 b(Ob)5 b(ject)31
b(is)h(alw)n(a)n(ys)d(of)j(the)g(sp)r(eci\014ed)g(n)n(umeric)f(t)n(yp)r
(e.)50 b(String-Char:)43 b(Ob)5 b(ject)31 b(is)523 4898
y(alw)n(a)n(ys)26 b(a)h(string-c)n(har.)1914 5147 y(85)p
eop
%%Page: 86 87
86 86 bop 648 614 a Fk(When)28 b(a)g(TN)h(is)f(pac)n(k)n(ed,)g(it)g(is)
h(annotated)e(with)i(the)g(SC)f(it)h(w)n(as)e(pac)n(k)n(ed)h(in)n(to.)
38 b(The)523 714 y(co)r(de)21 b(generator)e(for)h(a)h(V)n(OP)f(m)n(ust)
h(b)r(e)g(able)g(to)g(uniquely)g(determine)g(the)g(represen)n(tation)
523 814 y(of)28 b(its)f(op)r(erands)g(from)g(the)h(SC.)g(\(debugger)f
(also...\))648 913 y(Some)20 b(SCs:)33 b(Reg:)h(an)n(y)20
b(register)f(\(immediate)i(ob)5 b(jects\))21 b(Sa)n(v)n(e-Reg:)31
b(a)21 b(b)r(o)n(xed)f(register)523 1013 y(near)32 b(r15)f(\(registers)
g(easily)g(sa)n(v)n(ed)g(in)i(a)f(call\))g(Bo)n(xed-Reg:)45
b(an)n(y)32 b(b)r(o)n(xed)g(register)f(\(an)n(y)523 1112
y(b)r(o)n(xed)25 b(ob)5 b(ject\))25 b(Un)n(b)r(o)n(xed-Reg:)35
b(an)n(y)24 b(un)n(b)r(o)n(xed)h(register)f(\(an)n(y)h(un)n(b)r(o)n
(xed)g(ob)5 b(ject\))25 b(Float-)523 1212 y(Reg,)k(Double-Float-Reg:)38
b(\015oat)29 b(in)g(FP)g(register.)40 b(Stac)n(k:)f(b)r(o)n(xed)28
b(ob)5 b(ject)29 b(on)g(the)g(stac)n(k)523 1312 y(\(on)38
b(cstac)n(k\))g(W)-7 b(ord:)57 b(an)n(y)38 b(32bit)g(un)n(b)r(o)n(xed)f
(ob)5 b(ject)38 b(on)g(nstac)n(k.)68 b(Double:)58 b(an)n(y)38
b(64bit)523 1411 y(un)n(b)r(o)n(xed)27 b(ob)5 b(ject)27
b(on)h(nstac)n(k.)648 1511 y(W)-7 b(e)34 b(ha)n(v)n(e)g(a)f(n)n(um)n(b)
r(er)i(of)f(non-pac)n(k)n(ed)f(storage)f(classes)h(whic)n(h)h(serv)n(e)
f(to)i(represen)n(t)523 1611 y(access)j(costs)g(asso)r(ciated)g(with)i
(v)-5 b(alues)39 b(that)g(are)f(not)h(allo)r(cated)g(using)g
(con\015icts)f(in-)523 1710 y(formation.)61 b(Non-pac)n(k)n(ed)34
b(TNs)i(app)r(ear)f(to)h(already)f(b)r(e)h(pac)n(k)n(ed)f(in)h(the)g
(appropriate)523 1810 y(storage)28 b(base)i(so)f(that)i(P)n(ac)n(k)d
(do)r(esn't)j(get)f(confused.)44 b(Costs)30 b(for)g(relev)-5
b(an)n(t)29 b(non-pac)n(k)n(ed)523 1910 y(SC's)c(app)r(ear)f(in)h(the)g
(TN-Ref)g(cost)g(information,)f(but)i(need)f(not)g(ev)n(er)e(b)r(e)i
(summed)h(in)n(to)523 2009 y(the)i(TN)g(cost)f(v)n(ectors,)f(since)i
(TNs)f(cannot)g(b)r(e)h(pac)n(k)n(ed)f(in)n(to)g(them.)648
2109 y(There)g(are)h(SCs)g(for)g(non-immediate)g(constan)n(ts)g(and)g
(for)g(eac)n(h)f(signi\014can)n(t)h(kind)g(of)523 2208
y(immediate)f(op)r(erand)e(in)i(the)g(arc)n(hitecture.)35
b(On)26 b(the)h(R)-7 b(T,)26 b(4,)h(8)f(and)g(20)f(bit)i(in)n(teger)e
(SCs)523 2308 y(are)i(probably)f(w)n(orth)h(ha)n(ving.)648
2408 y(Non-pac)n(k)n(ed)16 b(SCs:)33 b(Constan)n(t)17
b(Immediate)i(constan)n(t)e(SCs:)33 b(Signed-Byte-<N>,)20
b(Unsigned-)523 2507 y(Byte-<N>,)35 b(for)d(v)-5 b(arious)32
b(arc)n(hitecture)g(dep)r(enden)n(t)i(v)-5 b(alues)33
b(of)g(<N>)h(String-Char)e(XXX-)523 2607 y(Float)27 b(Magic)g(v)-5
b(alues:)37 b(T,)27 b(NIL,)h(0.)1914 5147 y(86)p eop
%%Page: 87 88
87 87 bop 523 1237 a Fg(Chapter)65 b(27)523 1652 y Fi(T)-6
b(yp)6 b(e)77 b(system)523 1901 y(parameterization)523
2333 y Fk(The)33 b(main)g(asp)r(ect)f(of)h(the)g(VM)g(that)g(is)g(lik)n
(ely)f(to)h(v)-5 b(ary)32 b(for)g(go)r(o)r(d)g(reason)f(is)i(the)g(t)n
(yp)r(e)523 2433 y(system:)648 2532 y({)i(Di\013eren)n(t)h(systems)g
(will)g(ha)n(v)n(e)f(di\013eren)n(t)h(w)n(a)n(ys)e(of)i(represen)n
(ting)e(dynamic)i(t)n(yp)r(e)523 2632 y(information.)j(The)28
b(primary)g(e\013ect)h(this)f(has)g(on)h(the)f(compiler)g(is)h(causing)
e(VMR)i(con-)523 2731 y(v)n(ersion)19 b(of)i(t)n(yp)r(e)g(tests)g(and)f
(c)n(hec)n(ks)g(to)g(b)r(e)i(implemen)n(tation)e(dep)r(enden)n(t.)36
b(Rewriting)20 b(this)523 2831 y(co)r(de)k(for)g(eac)n(h)f(implemen)n
(tation)i(shouldn't)f(b)r(e)h(a)f(big)g(problem,)g(since)h(the)f(p)r
(ortable)g(se-)523 2931 y(man)n(tics)j(of)h(t)n(yp)r(es)f(has)g
(already)f(b)r(een)j(dealt)e(with.)648 3030 y({)j(Di\013eren)n(t)h
(systems)g(will)g(ha)n(v)n(e)e(di\013eren)n(t)i(sp)r(ecialized)g(n)n
(um)n(b)r(er)f(and)h(arra)n(y)d(t)n(yp)r(es,)523 3130
y(and)41 b(di\013eren)n(t)f(V)n(OPs)g(sp)r(ecialized)g(for)g(these)h(t)
n(yp)r(es.)76 b(It)41 b(is)f(easy)g(add)h(this)g(kind)f(of)523
3230 y(kno)n(wledge)c(without)i(a\013ecting)g(the)g(rest)f(of)h(the)g
(compiler.)66 b(All)38 b(y)n(ou)f(ha)n(v)n(e)g(to)g(do)g(is)523
3329 y(de\014ne)28 b(the)g(V)n(OPs)e(and)i(translations.)648
3429 y({)i(Di\013eren)n(t)g(systems)g(will)h(o\013er)f(di\013eren)n(t)g
(sp)r(ecialized)g(storage)f(resources)f(suc)n(h)i(as)523
3528 y(\015oating-p)r(oin)n(t)f(registers,)g(and)i(will)f(ha)n(v)n(e)f
(additional)h(kinds)g(of)g(primitiv)n(e-t)n(yp)r(es.)44
b(The)523 3628 y(storage)32 b(class)h(mec)n(hanism)h(handles)g(a)f
(large)g(part)g(of)i(this,)h(but)e(there)g(ma)n(y)f(b)r(e)i(some)523
3728 y(problem)d(in)i(getting)e(VMR)i(con)n(v)n(ersion)c(to)j(realize)f
(the)h(p)r(ossibly)f(large)g(hidden)h(costs)523 3827
y(in)26 b(implicit)h(mo)n(v)n(es)d(to)i(and)f(from)h(these)g(sp)r
(ecialized)f(storage)f(resources.)34 b(Probably)24 b(the)523
3927 y(answ)n(er)d(is)i(to)g(ha)n(v)n(e)f(some)g(sort)g(of)h(general)e
(mec)n(hanism)i(for)f(determining)h(the)g(primitiv)n(e-)523
4027 y(t)n(yp)r(e)32 b(for)g(a)f(TN)i(giv)n(en)e(the)i(Lisp)e(t)n(yp)r
(e,)j(and)e(then)g(to)g(ha)n(v)n(e)f(some)h(sort)f(of)h(mec)n(hanism)
523 4126 y(for)27 b(automatically)g(using)h(sp)r(ecialized)f(Mo)n(v)n
(e)g(V)n(OPs)g(when)h(the)g(source)f(or)g(destination)523
4226 y(has)g(some)g(particular)f(primitiv)n(e-t)n(yp)r(e.)648
4325 y(#|)35 b(Ho)n(w)g(to)g(deal)g(with)h(list/n)n(ull\(sym)n(b)r
(ol\)/cons)e(in)i(primitiv)n(e-t)n(yp)r(e)f(structure?)523
4425 y(Since)c(cons)g(and)f(sym)n(b)r(ol)h(aren't)f(used)h(for)g(t)n
(yp)r(e-sp)r(eci\014c)g(template)g(selection,)h(it)f(isn't)523
4525 y(really)20 b(all)g(that)h(critical.)34 b(Probably)19
b(Primitiv)n(e-T)n(yp)r(e)h(should)g(return)h(the)g(List)g(primitiv)n
(e)523 4624 y(t)n(yp)r(e)34 b(for)g(all)g(of)g(Cons,)i(List)e(and)g
(Null)h(\(indicating)f(when)g(it)h(is)f(exact\).)57 b(This)34
b(w)n(ould)523 4724 y(allo)n(w)d(t)n(yp)r(e-dispatc)n(h)h(for)g(simple)
g(sequence)g(functions)h(\(suc)n(h)f(as)g(length\))h(to)f(b)r(e)h(done)
523 4824 y(using)k(the)h(standard)e(template-selection)h(mec)n(hanism.)
66 b([Not)38 b(a)f(wired)g(assumption])1914 5147 y(87)p
eop
%%Page: 88 89
88 88 bop 523 614 a Fk(|#)1914 5147 y(88)p eop
%%Page: 89 90
89 89 bop 523 1237 a Fg(Chapter)65 b(28)523 1652 y Fi(V)-6
b(OP)77 b(De\014nition)523 2084 y Fk(Before)27 b(the)g(op)r(erand)g
(TN-refs)g(are)g(passed)f(to)i(the)f(emit)h(function,)g(the)g(follo)n
(wing)f(stu\013)523 2183 y(is)j(done:)40 b({)30 b(The)f(refs)h(in)f
(the)i(op)r(erand)d(and)i(result)f(lists)h(are)f(link)n(ed)g(together)g
(in)h(order)523 2283 y(using)h(the)g(Across)e(slot.)47
b(This)31 b(list)g(is)f(prop)r(erly)g(NIL)h(terminated.)47
b({)30 b(The)h(TN)h(slot)e(in)523 2383 y(eac)n(h)g(ref)h(is)f(set,)i
(and)e(the)i(ref)e(is)h(link)n(ed)f(in)n(to)h(that)g(TN's)g(refs)f
(using)h(the)g(Next)g(slot.)46 b({)523 2482 y(The)29
b(W)-7 b(rite-P)27 b(slot)h(is)h(set)f(dep)r(ending)h(on)f(whether)g
(the)h(ref)f(is)h(an)f(argumen)n(t)f(or)h(result.)523
2582 y({)f(The)h(other)f(slots)g(ha)n(v)n(e)f(the)i(default)g(v)-5
b(alues.)648 2682 y(The)43 b(template)i(emit)f(function)g(\014lls)g(in)
g(the)h(V)-7 b(op,)48 b(Costs,)f(Cost-F)-7 b(unction,)48
b(SC-)523 2781 y(Restriction)31 b(and)g(Preference)e(slots,)j(and)f
(links)g(together)f(the)h(Next-Ref)h(c)n(hain)f(as)f(ap-)523
2881 y(propriate.)523 3155 y Ff(28.1)136 b(Lifetime)46
b(mo)t(del)523 3337 y Fk(#|)31 b(Note)g(in)g(do)r(c)g(that)h(the)f
(same)f(TN)h(ma)n(y)g(not)g(b)r(e)g(used)g(as)f(b)r(oth)i(a)e(more)g
(op)r(erand)523 3437 y(and)37 b(as)e(an)n(y)h(other)g(op)r(erand)g(to)h
(the)g(same)f(V)n(OP)-7 b(,)36 b(to)g(simplify)h(more)f(op)r(erand)g(L)
-7 b(TN)523 3537 y(n)n(um)n(b)r(er)27 b(coalescing.)36
b(|#)648 3636 y(It)c(seems)g(w)n(e)g(need)g(a)g(fairly)g(elab)r(orate)f
(mo)r(del)h(for)g(in)n(tra-V)n(OP)e(con\015icts)i(in)h(order)523
3736 y(to)38 b(allo)r(cate)f(temp)r(oraries)f(without)j(in)n(tro)r
(ducing)e(spurious)g(con\015icts.)67 b(Consider)37 b(the)523
3835 y(imp)r(ortan)n(t)28 b(case)g(of)g(a)g(V)n(OP)g(suc)n(h)g(as)f(a)h
(miscop)g(that)h(m)n(ust)g(ha)n(v)n(e)e(op)r(erands)g(in)i(certain)523
3935 y(registers.)40 b(W)-7 b(e)29 b(allo)r(cate)g(a)f(wired)h(temp)r
(orary)-7 b(,)29 b(create)f(a)h(lo)r(cal)f(preference)h(for)f(the)i
(cor-)523 4035 y(resp)r(onding)h(op)r(erand,)h(and)g(mo)n(v)n(e)f(to)h
(\(or)f(from\))h(the)g(temp)r(orary)-7 b(.)49 b(If)32
b(all)g(temp)r(oraries)523 4134 y(con\015ict)21 b(with)h(all)f(argumen)
n(ts,)g(the)h(result)f(will)g(b)r(e)h(correct,)f(but)g(argumen)n(ts)f
(could)h(nev)n(er)523 4234 y(b)r(e)26 b(pac)n(k)n(ed)e(in)i(the)g
(actual)f(passing)f(register.)35 b(If)26 b(temp)r(oraries)e(didn't)j
(con\015ict)e(with)h(an)n(y)523 4334 y(argumen)n(ts,)e(then)i(the)f
(temp)r(orary)e(for)i(an)f(earlier)g(argumen)n(t)g(migh)n(t)g(get)h
(pac)n(k)n(ed)f(in)h(the)523 4433 y(same)i(lo)r(cation)h(as)f(the)h(op)
r(erand)f(for)h(a)f(later)h(argumen)n(t;)f(loading)g(w)n(ould)g(then)i
(destro)n(y)523 4533 y(an)e(argumen)n(t)g(b)r(efore)g(it)h(w)n(as)f
(read.)648 4632 y(A)32 b(temp)r(orary's)e(in)n(tra-V)n(OP)g(lifetime)j
(is)f(represen)n(ted)f(b)n(y)h(the)g(times)g(at)g(whic)n(h)g(its)523
4732 y(life)26 b(starts)g(and)f(ends.)37 b(There)25 b(are)g(v)-5
b(arious)25 b(instan)n(ts)g(during)h(the)g(ev)-5 b(aluation)26
b(that)g(start)523 4832 y(and)e(end)g(V)n(OP)e(lifetimes.)37
b(Tw)n(o)22 b(TNs)i(con\015ict)g(if)g(the)g(liv)n(e)g(in)n(terv)-5
b(als)22 b(o)n(v)n(erlap.)34 b(Lifetimes)1914 5147 y(89)p
eop
%%Page: 90 91
90 90 bop 523 614 a Fk(are)27 b(op)r(en)g(in)n(terv)-5
b(als:)36 b(if)28 b(one)f(TN's)h(lifetime)g(b)r(egins)g(at)f(a)g(p)r
(oin)n(t)h(where)f(another's)f(ends,)523 714 y(then)i(the)g(TNs)g
(don't)g(con\015ict.)648 814 y(The)f(times)h(within)g(a)g(V)n(OP)e(are)
h(the)h(follo)n(wing:)648 913 y(:Load)e(This)i(is)f(the)h(b)r(eginning)
f(of)g(the)h(argumen)n(t's)e(liv)n(es,)h(as)g(far)g(as)g(in)n(tra-v)n
(op)e(con-)523 1013 y(\015icts)36 b(are)g(concerned.)61
b(If)37 b(load-TNs)e(are)g(allo)r(cated,)j(then)e(this)h(is)f(the)g(b)r
(eginning)g(of)523 1112 y(their)28 b(liv)n(es.)648 1212
y(\(:Argumen)n(t)h(<n>\))h(The)g(p)r(oin)n(t)f(at)h(whic)n(h)f(the)h
(N'th)g(argumen)n(t)e(is)h(read)g(for)g(the)h(last)523
1312 y(time)c(\(b)n(y)f(this)g(V)n(OP\).)f(If)i(the)f(argumen)n(t)f(is)
h(dead)f(after)h(this)g(V)n(OP)-7 b(,)25 b(then)g(the)g(argumen)n(t)523
1411 y(b)r(ecomes)c(dead)g(at)g(this)g(time,)i(and)e(ma)n(y)g(b)r(e)g
(reused)g(as)f(a)h(temp)r(orary)f(or)g(result)h(load-TN.)648
1511 y(\(:Ev)-5 b(al)18 b(<n>\))i(The)f(N'th)g(ev)-5
b(aluation)19 b(step.)34 b(There)18 b(ma)n(y)g(b)r(e)h(an)n(y)g(n)n(um)
n(b)r(er)f(of)h(ev)-5 b(aluation)523 1611 y(steps,)28
b(but)g(it)g(is)f(unlik)n(ely)h(that)g(more)e(than)i(t)n(w)n(o)f(are)f
(needed.)648 1710 y(\(:Result)g(<n>\))g(The)g(p)r(oin)n(t)f(at)h(whic)n
(h)f(the)h(N'th)g(result)g(is)f(\014rst)g(written)h(in)n(to.)36
b(This)25 b(is)523 1810 y(the)j(p)r(oin)n(t)g(at)f(whic)n(h)h(that)g
(result)f(b)r(ecomes)g(liv)n(e.)648 1910 y(:Sa)n(v)n(e)j(Similar)h(to)h
(:Load,)g(but)g(marks)f(the)h(end)g(of)f(time.)50 b(This)31
b(is)h(p)r(oin)n(t)g(at)f(whic)n(h)523 2009 y(result)c(load-TNs)g(are)f
(stored)h(bac)n(k)g(to)g(the)h(actual)f(lo)r(cation.)648
2109 y(In)k(an)n(y)f(of)i(the)f(list-st)n(yle)g(time)h(sp)r
(eci\014cations,)f(the)h(k)n(eyw)n(ord)d(b)n(y)i(itself)h(stands)f(for)
523 2208 y(the)d(\014rst)f(suc)n(h)h(time,)g(i.e.)37
b(:argumen)n(t)26 b(<==>)h(\(:argumen)n(t)g(0\))648 2308
y(Note)37 b(that)h(argumen)n(t/result)e(read/write)g(times)j(don't)f
(actually)f(ha)n(v)n(e)f(to)i(b)r(e)g(in)523 2408 y(the)32
b(order)e(sp)r(eci\014ed,)i(but)g(they)f(m)n(ust)h(*app)r(ear*)d(to)i
(happ)r(en)h(in)f(that)h(order)e(as)g(far)h(as)523 2507
y(con\015ict)f(analysis)f(is)h(concerned.)44 b(F)-7 b(or)30
b(example,)g(the)h(argumen)n(ts)e(can)h(b)r(e)g(read)g(in)g(an)n(y)523
2607 y(order)c(as)g(long)h(no)f(TN)i(is)f(written)g(that)h(has)e(a)h
(life)g(b)r(eginning)g(at)g(or)g(after)f(\(:Argumen)n(t)523
2707 y(<n>\),)i(where)g(N)f(is)h(the)g(n)n(um)n(b)r(er)f(of)h(an)f
(argumen)n(t)g(whose)g(reading)f(w)n(as)h(p)r(ostp)r(oned.)648
2806 y([###)h(\(???\))648 2906 y(W)-7 b(e)19 b(probably)e(also)h(w)n
(an)n(t)g(some)h(syn)n(tactic)f(sugar)f(in)i(De\014ne-V)n(OP)f(for)g
(automatically)523 3005 y(mo)n(ving)31 b(op)r(erands)g(to/from)g
(explicitly)h(allo)r(cated)f(temp)r(oraries)g(so)g(that)h(this)g(kind)g
(of)523 3105 y(thing)24 b(is)f(somewhat)g(easy)-7 b(.)34
b(There)23 b(isn't)h(really)e(an)n(y)h(reason)e(to)j(consider)e(the)i
(temp)r(orary)523 3205 y(to)30 b(b)r(e)h(a)f(load-TN,)g(but)h(w)n(e)f
(w)n(an)n(t)f(to)i(compute)f(costs)g(as)f(though)h(it)h(w)n(as)f(and)g
(w)n(an)n(t)f(to)523 3304 y(use)e(the)h(same)f(op)r(erand)g(loading)g
(routines.)648 3404 y(W)-7 b(e)36 b(also)e(migh)n(t)i(consider)f(allo)n
(wing)f(the)i(lifetime)h(of)f(an)f(argumen)n(t/result)f(to)i(b)r(e)523
3504 y(extended)30 b(forw)n(ard/bac)n(kw)n(ard.)40 b(This)30
b(w)n(ould)g(in)g(man)n(y)g(cases)f(eliminate)h(the)h(need)f(for)523
3603 y(temp)r(oraries)c(when)i(op)r(erands)f(are)f(read/written)h(out)g
(of)h(order.)35 b(])523 3878 y Ff(28.2)136 b(V)l(OP)44
b(Cost)i(mo)t(del)523 4060 y Fk(Note)31 b(that)g(in)h(this)f(mo)r(del,)
h(if)g(a)f(op)r(erand)f(has)g(no)h(restrictions,)g(it)g(has)g(no)g
(cost.)46 b(This)523 4159 y(mak)n(es)24 b(mak)n(e)h(sense,)h(since)f
(the)h(purp)r(ose)f(of)g(the)h(cost)f(is)g(to)h(indicate)f(the)h
(relativ)n(e)e(v)-5 b(alue)523 4259 y(of)33 b(pac)n(king)f(in)i
(di\013eren)n(t)f(SCs.)53 b(If)34 b(the)g(op)r(erand)e(isn't)i
(required)e(to)h(b)r(e)g(in)h(a)f(go)r(o)r(d)f(SC)523
4358 y(\(i.e.)44 b(a)30 b(register\),)f(then)i(w)n(e)f(migh)n(t)g(as)f
(w)n(ell)h(lea)n(v)n(e)e(it)j(in)f(memory)-7 b(.)43 b(The)30
b(SC)g(restriction)523 4458 y(mec)n(hanism)k(can)g(b)r(e)h(used)f(ev)n
(en)g(when)h(doing)f(a)g(mo)n(v)n(e)f(in)n(to)h(the)h(SC)f(is)h(to)r(o)
f(complex)523 4558 y(to)k(b)r(e)g(generated)e(automatically)h(\(p)r
(erhaps)h(requiring)e(temp)r(orary)h(registers\),)i(since)523
4657 y(De\014ne-V)n(OP)27 b(allo)n(ws)f(op)r(erand)h(loading)f(to)i(b)r
(e)g(done)f(explicitly)-7 b(.)1914 5147 y(90)p eop
%%Page: 91 92
91 91 bop 523 614 a Ff(28.3)136 b(E\016ciency)45 b(notes)523
796 y Fk(In)24 b(addition)g(to)g(b)r(eing)g(used)g(to)f(tell)i(whether)
f(a)f(particular)g(unsafe)g(template)i(migh)n(t)f(get)523
896 y(emitted,)j(w)n(e)e(can)h(also)f(use)g(it)h(to)g(giv)n(e)f(b)r
(etter)h(e\016ciency)g(notes:)35 b({)26 b(W)-7 b(e)26
b(can)f(sa)n(y)g(what)g(is)523 995 y(wrong)f(with)i(the)g(call)f(t)n
(yp)r(es,)g(rather)g(than)g(just)h(sa)n(ying)e(w)n(e)h(failed)g(to)g
(op)r(en-co)r(de.)36 b({)25 b(W)-7 b(e)523 1095 y(can)29
b(tell)g(whether)g(an)n(y)f(of)h(the)g("b)r(etter")g(templates)g(could)
f(p)r(ossibly)h(apply)-7 b(,)29 b(i.e.)41 b(is)29 b(the)523
1195 y(inapplicabilit)n(y)24 b(of)h(a)f(template)g(b)r(ecause)g(of)h
(inadequate)f(t)n(yp)r(e)g(information)g(or)g(b)r(ecause)523
1294 y(the)31 b(t)n(yp)r(e)g(is)f(just)h(plain)g(wrong.)44
b(W)-7 b(e)31 b(don't)g(w)n(an)n(t)f(to)g(\015ame)h(p)r(eople)f(when)h
(a)f(template)523 1394 y(that)25 b(couldn't)h(p)r(ossibly)f(matc)n(h)f
(do)r(esn't)i(matc)n(h,)f(e.g.)36 b(complaining)24 b(that)i(w)n(e)e
(can't)i(use)523 1494 y(\014xn)n(um+)h(when)h(the)g(argumen)n(ts)e(are)
h(kno)n(wn)g(to)g(b)r(e)h(\015oats.)648 1593 y(This)f(is)h(ho)n(w)f(w)n
(e)g(giv)n(e)f(b)r(etter)i(e\016ciency)g(notes:)648 1693
y(The)18 b(T)-7 b(emplate-Note)19 b(is)f(a)g(short)g(noun-lik)n(e)g
(string)g(without)h(capitalization)f(or)f(punc-)523 1792
y(tuation)27 b(that)f(describ)r(es)g(what)h(the)g(template)g("do)r
(es",)e(i.e.)37 b(w)n(e)26 b(sa)n(y)f("Unable)i(to)f(do)53
b(A,)523 1892 y(doing)i(A)28 b(instead.")648 1992 y(The)c(Cost)f(is)h
(mo)n(v)n(ed)f(from)g(the)i(V)-7 b(op-Info)23 b(to)h(the)h(T)-7
b(emplate)24 b(structure,)g(and)g(is)f(used)523 2091
y(to)40 b(determine)h(the)g("go)r(o)r(dness")d(of)j(p)r(ossibly)f
(applicable)g(templates.)76 b([Could)40 b(\015ush)523
2191 y(T)-7 b(emplate/V)g(op-Info)31 b(distinction])i(The)f(cost)f(is)h
(used)g(to)g(c)n(ho)r(ose)e(the)j(b)r(est)f(applicable)523
2291 y(template)e(to)g(emit,)i(and)e(also)f(to)h(determine)g(what)g(b)r
(etter)h(templates)f(w)n(e)g(migh)n(t)g(ha)n(v)n(e)523
2390 y(b)r(een)e(able)f(to)h(use.)648 2490 y(A)22 b(template)h(is)f(p)r
(ossibly)g(applicable)f(if)i(there)f(is)g(an)g(in)n(tersection)g(b)r
(et)n(w)n(een)g(all)g(of)g(the)523 2589 y(arg/result)g(t)n(yp)r(es)i
(and)g(the)h(corresp)r(onding)d(arg/result)g(restrictions,)i(i.e.)35
b(the)25 b(template)523 2689 y(is)j(not)f(clearly)g(imp)r(ossible:)36
b(more)27 b(declarations)f(migh)n(t)i(allo)n(w)e(it)i(to)g(b)r(e)g
(emitted.)1914 5147 y(91)p eop
%%Page: 92 93
92 92 bop 523 1237 a Fg(Chapter)65 b(29)523 1652 y Fi(Assem)-6
b(bler)76 b(Retargeting)1914 5147 y Fk(92)p eop
%%Page: 93 94
93 93 bop 523 1237 a Fg(Chapter)65 b(30)523 1652 y Fi(W)-19
b(riting)77 b(Assem)-6 b(bly)76 b(Co)6 b(de)523 2095
y Fk(V)n(OP)28 b(writers)h(exp)r(ect:)40 b(MO)n(VE)29
b(Y)-7 b(ou)29 b(write)g(when)h(y)n(ou)e(p)r(ort)i(the)f(assem)n
(bler.\))41 b(EMIT-)523 2195 y(LABEL)26 b(Assem)n(bler)h(in)n(terface)f
(lik)n(e)g(INST.)i(T)-7 b(ak)n(es)26 b(a)g(lab)r(el)h(y)n(ou)f(made)h
(and)g(sa)n(ys)e("stic)n(k)523 2294 y(it)f(here.")f(GEN-LABEL)g
(Returns)h(a)g(new)f(lab)r(el)h(suitable)g(for)g(use)f(with)i
(EMIT-LABEL)523 2394 y(exactly)34 b(once)g(and)g(for)g(referencing)g
(as)g(often)g(as)g(necessary)-7 b(.)56 b(INST)35 b(Recognizes)f(and)523
2493 y(dispatc)n(hes)i(to)h(instructions)g(y)n(ou)f(de\014ned)i(for)e
(assem)n(bler.)64 b(ALIGN)38 b(This)f(tak)n(es)f(the)523
2593 y(n)n(um)n(b)r(er)27 b(of)f(zero)g(bits)h(y)n(ou)f(w)n(an)n(t)h
(in)g(the)g(lo)n(w)f(end)h(of)g(the)g(address)f(of)h(the)g(next)g
(instruc-)523 2693 y(tion.)43 b(ASSEMBLE)29 b(ASSEMBLE-ELSEWHERE)f(Get)
i(ready)e(for)h(assem)n(bling)g(stu\013.)523 2792 y(T)-7
b(ak)n(es)22 b(a)h(V)n(OP)g(and)g(arbitrary)e(PR)n(OGN-st)n(yle)h(b)r
(o)r(dy)-7 b(.)36 b(W)-7 b(rap)23 b(these)g(around)g(instruction)523
2892 y(emission)h(co)r(de)h(announcing)f(the)h(\014rst)f(pass)g(of)h
(our)f(assem)n(bler.)35 b(CURRENT-NFP-TN)523 2992 y(This)28
b(returns)g(a)g(TN)h(for)e(the)i(NFP)f(if)h(the)g(caller)e(uses)h(the)h
(n)n(um)n(b)r(er)f(stac)n(k,)g(or)f(nil.)40 b(SB-)523
3091 y(ALLOCA)-7 b(TED-SIZE)34 b(This)h(returns)f(the)i(size)f(of)g
(some)f(storage)g(based)g(used)h(b)n(y)g(the)523 3191
y(curren)n(tly)27 b(compiling)g(comp)r(onen)n(t.)36 b(...)648
3290 y(;;;)27 b(;;;)h(V)n(OP)f(idioms)g(;;;)648 3390
y(STORE-ST)-7 b(A)n(CK-TN)21 b(LO)n(AD-ST)-7 b(A)n(CK-TN)22
b(These)g(mo)n(v)n(e)g(a)g(v)-5 b(alue)23 b(from)f(a)h(register)523
3490 y(to)30 b(the)g(con)n(trol)e(stac)n(k,)h(or)g(from)h(the)g(con)n
(trol)e(stac)n(k)h(to)g(a)h(register.)41 b(They)30 b(tak)n(e)f(care)f
(of)523 3589 y(c)n(hec)n(king)36 b(the)i(TN)g(t)n(yp)r(es,)i(mo)r
(difying)e(o\013sets)f(according)f(to)h(the)h(address)e(units)i(p)r(er)
523 3689 y(w)n(ord,)27 b(etc.)1914 5147 y(93)p eop
%%Page: 94 95
94 94 bop 523 1237 a Fg(Chapter)65 b(31)523 1652 y Fi(Required)77
b(V)-6 b(OPS)523 2095 y Fk(Note:)50 b(the)35 b(mo)n(v)n(e)e(V)n(OP)g
(cannot)h(ha)n(v)n(e)e(an)n(y)i(wired)g(temps.)56 b(\(Mo)n(v)n
(e-Argumen)n(t)33 b(also?\))523 2195 y(This)28 b(is)f(so)g(w)n(e)g(can)
g(mo)n(v)n(e)g(stu\013)h(in)n(to)g(wired)f(TNs)g(without)h(stepping)g
(on)f(our)g(to)r(es.)648 2294 y(W)-7 b(e)20 b(create)f(set)h(closure)f
(v)-5 b(ariables)18 b(using)i(the)g(V)-7 b(alue-Cell)20
b(V)n(OP)-7 b(,)19 b(whic)n(h)h(tak)n(es)f(a)g(v)-5 b(alue)523
2394 y(and)27 b(returns)f(a)h(v)-5 b(alue)27 b(cell)g(con)n(taining)f
(the)h(v)-5 b(alue.)37 b(W)-7 b(e)27 b(can)g(basically)e(use)i(this)h
(instead)523 2493 y(of)k(a)f(Mo)n(v)n(e)g(V)n(OP)f(when)i(initializing)
g(the)g(v)-5 b(ariable.)48 b(V)-7 b(alue-Cell-Set)31
b(and)h(V)-7 b(alue-Cell-)523 2593 y(Ref)26 b(are)e(used)h(to)g(access)
f(the)h(v)-5 b(alue)25 b(cell.)36 b(W)-7 b(e)25 b(can)g(ha)n(v)n(e)f(a)
h(sp)r(ecial)g(e\013ect)g(for)g(v)-5 b(alue)25 b(cells)523
2693 y(so)f(that)g(v)-5 b(alue)24 b(cells)h(references)e(can)h(b)r(e)g
(disco)n(v)n(ered)f(to)h(b)r(e)h(common)e(sub)r(expressions)g(or)523
2792 y(lo)r(op)k(in)n(v)-5 b(arian)n(ts.)648 2892 y(Represen)n(t)26
b(unkno)n(wn-v)-5 b(alues)26 b(con)n(tin)n(uations)g(as)h(\(start,)g
(coun)n(t\).)37 b(Unkno)n(wn)27 b(v)-5 b(alues)523 2992
y(con)n(tin)n(uations)27 b(are)g(alw)n(a)n(ys)f(outside)h(of)h(the)g
(curren)n(t)g(frame)f(\(on)h(stac)n(k)f(top\).)38 b(Within)29
b(a)523 3091 y(function,)e(w)n(e)e(alw)n(a)n(ys)e(set)j(up)g(and)f
(receiv)n(e)f(v)-5 b(alues)26 b(in)f(the)h(standard)f(passing)f(lo)r
(cations.)523 3191 y(If)35 b(w)n(e)f(receiv)n(e)f(stac)n(k)h(v)-5
b(alues,)36 b(then)f(w)n(e)f(m)n(ust)h(BL)-7 b(T)34 b(them)h(do)n(wn)f
(to)h(the)g(start)f(of)g(our)523 3290 y(frame,)41 b(\014lling)e(in)f
(an)n(y)g(unsupplied)h(v)-5 b(alues.)70 b(If)39 b(w)n(e)f(generate)g
(unkno)n(wn)g(v)-5 b(alues)38 b(\(i.e.)523 3390 y(PUSH-V)-9
b(ALUES\),)39 b(then)g(w)n(e)f(set)h(the)g(v)-5 b(alues)38
b(up)h(in)g(the)g(standard)e(lo)r(cations,)k(then)523
3490 y(BL)-7 b(T)27 b(them)g(to)g(stac)n(k)f(top.)37
b(When)27 b(doing)g(a)f(tail-return)g(of)h(MVs,)g(w)n(e)g(just)h(set)f
(them)g(up)523 3589 y(in)h(the)g(standard)e(lo)r(cations)h(and)h
(decremen)n(t)f(SP:)g(no)g(BL)-7 b(T)28 b(is)f(necessary)-7
b(.)648 3689 y(Unkno)n(wn)33 b(argumen)n(t)g(call)h(\(MV-CALL\))h(tak)n
(es)e(its)h(argumen)n(ts)e(on)i(stac)n(k)f(top)h(\(is)523
3789 y(giv)n(en)28 b(a)h(base)f(p)r(oin)n(ter\).)41 b(If)29
b(not)g(a)f(tail)h(call,)g(then)h(w)n(e)e(just)i(set)f(the)g(arg)f(p)r
(oin)n(ter)g(to)h(the)523 3888 y(base)i(p)r(oin)n(ter)g(and)h(call.)48
b(If)32 b(a)g(tail)f(call,)i(w)n(e)e(m)n(ust)h(BL)-7
b(T)31 b(the)h(argumen)n(ts)e(do)n(wn)h(to)h(the)523
3988 y(b)r(eginning)c(of)f(the)h(curren)n(t)f(frame.)648
4087 y(Implemen)n(t)38 b(more)g(args)f(b)n(y)h(BL)-7
b(T'ing)38 b(the)g(more)g(args)f(*on)g(top*)h(of)g(the)h(curren)n(t)523
4187 y(frame.)g(This)29 b(solv)n(es)e(t)n(w)n(o)h(problems:)38
b({)28 b(An)n(y)g(register)g(more)f(argumen)n(ts)g(can)i(b)r(e)g(made)
523 4287 y(uniformly)21 b(accessibly)g(b)n(y)g(cop)n(ying)f(them)i(in)n
(to)f(memory)-7 b(.)34 b([W)-7 b(e)22 b(can't)g(store)e(the)i
(registers)523 4386 y(in)33 b(place,)g(since)f(the)g(b)r(eginning)h(of)
f(the)g(frame)g(gets)g(double)g(use)g(for)g(storing)f(the)i(old-)523
4486 y(con)n(t,)e(return-p)r(c)g(and)f(en)n(v.])47 b({)30
b(It)h(solv)n(es)f(the)h(deallo)r(cation)f(problem:)42
b(the)32 b(argumen)n(ts)523 4586 y(will)h(b)r(e)g(deallo)r(cated)f
(when)h(the)h(frame)e(is)h(returned)f(from)h(or)f(a)g(tail)h(full)g
(call)g(is)g(done)523 4685 y(out)h(of)f(it.)55 b(So)33
b(k)n(eyw)n(ord)f(args)g(will)h(b)r(e)h(prop)r(erly)f(tail-recursiv)n
(e)e(without)j(an)n(y)f(sp)r(ecial)523 4785 y(mec)n(hanism)28
b(for)f(squeezing)g(out)h(the)h(more)e(arg)g(once)g(the)i(parsing)d(is)
i(done.)38 b(Note)28 b(that)523 4884 y(a)e(tail)h(lo)r(cal)f(call)g(w)n
(on't)g(blast)h(the)g(more)e(arg,)h(since)g(in)h(lo)r(cal)f(call)g(the)
h(callee)f(just)h(tak)n(es)1914 5147 y(94)p eop
%%Page: 95 96
95 95 bop 523 614 a Fk(the)28 b(frame)f(it)h(is)g(giv)n(en)e(\(in)j
(this)e(case)g(con)n(taining)g(the)h(more)f(arg\).)648
714 y(More)f(args)g(in)i(lo)r(cal)f(call???)37 b(P)n(erhaps)25
b(w)n(e)j(should)f(not)g(attempt)h(lo)r(cal)f(call)g(con)n(v)n(er-)523
814 y(sion)k(in)h(this)f(case.)48 b(W)-7 b(e)32 b(already)e(sp)r
(ecial-case)f(k)n(eyw)n(ord)h(args)g(in)h(lo)r(cal)g(call.)48
b(It)32 b(seems)523 913 y(that)k(the)h(main)f(imp)r(ortance)f(of)h
(more)f(args)g(is)h(primarily)f(related)g(to)h(full)h(call:)53
b(it)36 b(is)523 1013 y(used)29 b(for)g(de\014ning)h(v)-5
b(arious)28 b(kinds)h(of)g(frobs)g(that)h(need)f(to)h(tak)n(e)e
(arbitrary)g(argumen)n(ts:)523 1112 y({)33 b(Keyw)n(ord)e(argumen)n(ts)
h({)h(In)n(terpreter)f(stubs)h({)g("P)n(ass)e(through")h(applications)h
(suc)n(h)523 1212 y(as)27 b(dispatc)n(h)g(functions)648
1312 y(Giv)n(en)h(the)g(marginal)f(imp)r(ortance)h(of)g(more)g(args)e
(in)j(lo)r(cal)f(call,)g(it)g(seems)g(un)n(w)n(orth)523
1411 y(going)34 b(to)i(an)n(y)e(implemen)n(tation)i(di\016cult)n(y)-7
b(.)61 b(In)35 b(fact,)j(it)e(seems)f(that)g(it)h(w)n(ould)f(cause)523
1511 y(complications)24 b(b)r(oth)h(at)g(the)g(VMR)g(lev)n(el)f(and)h
(also)f(in)h(the)g(VM)g(de\014nition.)37 b(This)24 b(b)r(eing)523
1611 y(the)k(case,)f(w)n(e)g(should)g(\015ush)h(it.)523
1885 y Ff(31.1)136 b(F)-11 b(unction)44 b(Call)523 2084
y Fh(31.1.1)113 b(Registers)36 b(and)i(frame)g(format)523
2237 y Fk(These)27 b(registers)f(are)h(used)g(in)h(function)g(call)g
(and)f(return:)648 2336 y(A0..A)p Fc(n)d Fk(In)h(full)g(call,)g(the)g
(\014rst)f(three)h(argumen)n(ts.)34 b(In)25 b(unkno)n(wn)f(v)-5
b(alues)24 b(return,)h(the)523 2436 y(\014rst)i(three)h(return)f(v)-5
b(alues.)648 2536 y(CFP)25 b(The)h(curren)n(t)f(frame)g(p)r(oin)n(ter.)
36 b(In)26 b(full)g(call,)g(this)g(initially)g(p)r(oin)n(ts)f(to)h(a)f
(partial)523 2635 y(frame)i(large)f(enough)h(to)h(hold)f(the)h(passed)f
(stac)n(k)g(argumen)n(ts)f(\(zero-length)g(if)j(none\).)648
2735 y(CSP)e(The)g(curren)n(t)g(con)n(trol)f(stac)n(k)h(top)h(p)r(oin)n
(ter.)648 2835 y(OCFP)e(In)i(full)h(call,)e(the)h(passing)e(lo)r
(cation)h(for)g(the)h(frame)f(to)h(return)f(to.)648 2934
y(In)k(unkno)n(wn-v)-5 b(alues)31 b(return)g(of)g(other)g(than)h(one)f
(v)-5 b(alue,)32 b(the)g(p)r(oin)n(ter)f(to)h(returned)523
3034 y(stac)n(k)25 b(v)-5 b(alues.)35 b(In)26 b(suc)n(h)f(a)g(return,)h
(OCFP)e(is)i(alw)n(a)n(ys)d(initialized)j(to)f(p)r(oin)n(t)h(to)f(the)h
(frame)523 3134 y(returned)k(from,)i(ev)n(en)e(when)h(no)f(stac)n(k)g
(v)-5 b(alues)31 b(are)e(returned.)46 b(This)31 b(allo)n(ws)e(OCFP)h
(to)523 3233 y(b)r(e)e(used)g(to)f(restore)f(CSP)-7 b(.)648
3333 y(LRA)28 b(In)f(full)i(call,)e(the)h(passing)e(lo)r(cation)h(for)g
(the)h(return)f(PC.)648 3432 y(NAR)n(GS)34 b(In)g(full)g(call,)h(the)f
(n)n(um)n(b)r(er)f(of)h(argumen)n(ts)e(passed.)55 b(In)34
b(unkno)n(wn-v)-5 b(alues)523 3532 y(return)27 b(of)h(other)f(than)g
(one)h(v)-5 b(alue,)27 b(the)h(n)n(um)n(b)r(er)g(of)f(v)-5
b(alues)27 b(returned.)523 3764 y Fh(31.1.2)113 b(F)-9
b(ull)36 b(call)523 3918 y Fk(What)28 b(is)f(our)g(usage)g(of)g(CFP)-7
b(,)28 b(OCFP)f(and)g(CSP?)648 4017 y(It)36 b(is)g(an)g(in)n(v)-5
b(arian)n(t)35 b(that)h(CSP)g(alw)n(a)n(ys)e(p)r(oin)n(ts)i(after)g(an)
n(y)f(useful)i(information)e(so)523 4117 y(that)28 b(at)f(an)n(y)g
(time)h(an)g(in)n(terrupt)f(can)g(come)g(and)h(allo)r(cate)e(stu\013)j
(in)f(the)g(stac)n(k.)648 4217 y(TR)c(call)g(is)g(also)f(a)h(constrain)
n(t:)34 b(w)n(e)24 b(can't)h(deallo)r(cate)e(the)i(caller's)e(frame)h
(b)r(efore)g(the)523 4316 y(call,)j(since)h(it)g(holds)f(the)h(stac)n
(k)f(argumen)n(ts)f(for)h(the)h(call.)648 4416 y(What)j(w)n(e)f(do)g
(is)h(ha)n(v)n(e)f(the)h(caller)f(set)g(up)h(CFP)-7 b(,)31
b(and)g(ha)n(v)n(e)e(the)i(callee)f(set)h(CSP)f(to)523
4515 y(CFP)24 b(plus)h(the)g(frame)g(size.)35 b(The)25
b(caller)f(lea)n(v)n(es)f(CSP)h(alone:)35 b(the)25 b(callee)f(is)g(the)
h(one)g(who)523 4615 y(do)r(es)i(an)n(y)g(necessary)f(stac)n(k)h
(deallo)r(cation.)648 4715 y(In)g(a)f(TR)i(call,)e(w)n(e)h(don't)g(do)g
(an)n(ything:)36 b(CFP)27 b(is)g(left)h(as)e(CFP)-7 b(,)27
b(and)g(CSP)g(p)r(oin)n(ts)g(to)523 4814 y(the)h(end)g(of)f(the)h
(frame,)g(k)n(eeping)e(the)i(stac)n(k)f(argumen)n(ts)f(from)i(b)r(eing)
f(trashed.)1914 5147 y(95)p eop
%%Page: 96 97
96 96 bop 648 614 a Fk(In)20 b(a)h(normal)e(call,)j(CFP)e(is)h(set)g
(to)f(CSP)-7 b(,)21 b(causing)e(the)i(callee's)f(frame)h(to)f(b)r(e)h
(allo)r(cated)523 714 y(after)27 b(the)h(curren)n(t)f(frame.)523
946 y Fh(31.1.3)113 b(Unkno)m(wn)38 b(v)-6 b(alues)37
b(return)523 1100 y Fk(The)25 b(unkno)n(wn)f(v)-5 b(alues)25
b(return)f(con)n(v)n(en)n(tion)g(is)g(alw)n(a)n(ys)f(used)i(in)g(full)h
(call,)f(and)g(is)f(used)h(in)523 1199 y(lo)r(cal)e(call)h(when)g(the)g
(compiler)f(either)h(can't)g(pro)n(v)n(e)e(that)i(a)g(\014xed)f(n)n(um)
n(b)r(er)h(of)g(v)-5 b(alues)23 b(are)523 1299 y(returned,)g(or)e
(decides)h(not)g(to)g(use)g(the)g(\014xed)g(v)-5 b(alues)22
b(con)n(v)n(en)n(tion)f(to)h(allo)n(w)f(tail-recursiv)n(e)523
1399 y(XEP)27 b(calls.)648 1498 y(The)j(unkno)n(wn-v)-5
b(alues)30 b(return)g(con)n(v)n(en)n(tion)g(has)g(v)-5
b(arian)n(ts:)42 b(single)30 b(v)-5 b(alue)31 b(and)f(v)-5
b(ari-)523 1598 y(able)41 b(v)-5 b(alues.)78 b(W)-7 b(e)41
b(mak)n(e)g(this)g(distinction)h(to)f(optimize)g(the)h(imp)r(ortan)n(t)
f(case)g(of)g(a)523 1697 y(returner)28 b(whose)g(kno)n(ws)g(exactly)g
(one)h(v)-5 b(alue)29 b(is)f(b)r(eing)h(returned.)41
b(Note)29 b(that)g(it)g(is)g(p)r(os-)523 1797 y(sible)f(to)g(return)f
(a)g(single)h(v)-5 b(alue)27 b(using)h(the)g(v)-5 b(ariable-v)g(alues)
26 b(con)n(v)n(en)n(tion,)g(but)j(it)f(is)g(less)523
1897 y(e\016cien)n(t.)648 1996 y(W)-7 b(e)36 b(indicate)g(single-v)-5
b(alue)35 b(return)g(b)n(y)h(returning)f(at)g(the)i(return-p)r(c+4;)h
(v)-5 b(ariable)523 2096 y(v)g(alue)28 b(return)f(is)g(indicated)h(b)n
(y)f(returning)g(at)h(the)f(return)h(PC.)648 2196 y(Single-v)-5
b(alue)24 b(return)h(mak)n(es)f(only)h(the)g(follo)n(wing)f(guaran)n
(tees:)34 b(A0)25 b(holds)g(the)g(v)-5 b(alue)523 2295
y(returned.)36 b(CSP)28 b(has)f(b)r(een)h(reset:)36 b(there)28
b(is)f(no)g(garbage)f(on)h(the)h(stac)n(k.)648 2395 y(In)h(v)-5
b(ariable)28 b(v)-5 b(alue)29 b(return,)h(more)e(information)h(is)g
(passed)f(bac)n(k:)40 b(A0..A2)29 b(hold)g(the)523 2494
y(\014rst)20 b(three)g(return)g(v)-5 b(alues.)34 b(If)21
b(few)n(er)e(than)i(three)f(v)-5 b(alues)20 b(are)f(returned,)i(then)g
(the)f(un)n(used)523 2594 y(registers)26 b(are)g(initialized)i(to)g
(NIL.)648 2694 y(OCFP)34 b(p)r(oin)n(ts)h(to)g(the)h(frame)f(returned)f
(from.)60 b(Note)35 b(that)g(b)r(ecause)g(of)g(our)g(tail-)523
2793 y(recursiv)n(e)d(implemen)n(tation)i(of)g(call,)h(the)g(frame)e
(receiving)g(the)h(v)-5 b(alues)34 b(is)f(alw)n(a)n(ys)f(im-)523
2893 y(mediately)h(under)f(the)h(frame)f(returning)g(the)h(v)-5
b(alues.)52 b(This)33 b(means)f(that)h(w)n(e)f(can)h(use)523
2993 y(OCFP)c(to)g(index)h(the)g(v)-5 b(alues)29 b(when)h(w)n(e)f
(access)g(them,)i(and)e(to)h(restore)e(CSP)h(when)h(w)n(e)523
3092 y(w)n(an)n(t)d(to)g(discard)g(them.)648 3192 y(NAR)n(GS)h(holds)f
(the)h(n)n(um)n(b)r(er)f(of)h(v)-5 b(alues)27 b(returned.)648
3291 y(CSP)35 b(is)h(alw)n(a)n(ys)e(\(+)i(OCFP)f(\(*)h(NAR)n(GS)h
(4\)\),)h(i.e.)62 b(there)36 b(is)f(ro)r(om)g(on)h(the)g(stac)n(k)523
3391 y(allo)r(cated)23 b(for)h(all)g(returned)f(v)-5
b(alues,)25 b(ev)n(en)e(if)i(they)f(are)f(all)h(actually)f(passed)h(in)
g(registers.)523 3623 y Fh(31.1.4)113 b(External)36 b(En)m(try)h(P)m
(oin)m(ts)523 3777 y Fk(Things)23 b(that)h(need)g(to)g(b)r(e)g(done)f
(on)h(XEP)f(en)n(try:)34 b(1])23 b(Allo)r(cate)h(frame)f(2])g(Mo)n(v)n
(e)g(more)g(arg)523 3876 y(ab)r(o)n(v)n(e)k(the)h(frame,)g(sa)n(ving)f
(con)n(text)g(3])h(Set)g(up)h(en)n(v,)f(sa)n(ving)e(closure)h(p)r(oin)n
(ter)h(if)h(closure)523 3976 y(4])f(Mo)n(v)n(e)f(argumen)n(ts)g(from)h
(closure)g(to)g(lo)r(cal)g(home)g(Mo)n(v)n(e)f(old-con)n(t)g(and)i
(return-p)r(c)f(to)523 4076 y(the)g(sa)n(v)n(e)e(lo)r(cations)h(5])g
(Argumen)n(t)g(coun)n(t)h(c)n(hec)n(king)e(and)h(dispatc)n(hing)648
4175 y(XEP)g(V)n(OPs:)648 4275 y(Allo)r(cate-F)-7 b(rame)22
b(Cop)n(y-More-Arg)e(<nargs-tn>)i('\014xed)h(in)g(a3)f(=>)h(<con)n
(text>,)h(<coun)n(t>)523 4374 y(Setup-En)n(vironmen)n(t)g
(Setup-Closure-En)n(vironmen)n(t)f(=>)i(<closure>)f(V)-7
b(erify-Argumen)n(t-)523 4474 y(Coun)n(t)19 b(<nargs-tn>)f('coun)n(t)i
(for)e(\014xed-arg)g(lam)n(b)r(das)h(Argumen)n(t-Coun)n(t-Error)d
(<nargs-tn>)523 4574 y(Drop-thru)k(on)h(hairy)e(arg)h(dispatc)n(hing)g
(Use)h(fast-if-=/\014xn)n(um)e(and)i(fast-if-</\014xn)n(um)f(for)523
4673 y(dispatc)n(hing.)648 4773 y(Closure)j(v)n(ops:)35
b(mak)n(e-closure)23 b(<fun)i(en)n(try>)g(<slot)g(coun)n(t>)f(=>)h
(<closure>)f(closure-init)523 4873 y(<closure>)j(<v)-5
b(alues>)27 b('slot)1914 5147 y(96)p eop
%%Page: 97 98
97 97 bop 648 614 a Fk(Things)24 b(that)h(need)f(to)h(b)r(e)g(done)f
(on)g(all)h(function)g(en)n(try:)35 b({)24 b(Mo)n(v)n(e)f(argumen)n(ts)
h(to)g(the)523 714 y(v)-5 b(ariable)28 b(home)h(\(consing)g(v)-5
b(alue)29 b(cells)g(as)f(necessary\))g({)h(Mo)n(v)n(e)f(en)n(vironmen)n
(t)g(v)-5 b(alues)29 b(to)523 814 y(the)f(lo)r(cal)f(home)g({)h(Mo)n(v)
n(e)e(old-con)n(t)h(and)g(return-p)r(c)g(to)h(the)g(sa)n(v)n(e)e(lo)r
(cations)523 1088 y Ff(31.2)136 b(Calls)523 1270 y Fk(Calling)34
b(V)n(OP's)g(are)g(a)g(cross)g(pro)r(duct)g(of)h(the)g(follo)n(wing)f
(sets)h(\(with)g(some)g(mem)n(b)r(ers)523 1370 y(missing\):)46
b(Return)32 b(v)-5 b(alues)32 b(m)n(ultiple)g(\(all)h(v)-5
b(alues\))32 b(\014xed)g(\(calling)g(with)g(unkno)n(wn)g(v)-5
b(al-)523 1469 y(ues)34 b(con)n(v)n(en)n(tions,)g(w)n(an)n(ting)g(a)g
(certain)f(n)n(um)n(b)r(er.\))57 b(kno)n(wn)34 b(\(only)g(in)g(lo)r
(cal)g(call)g(where)523 1569 y(caller/callee)25 b(agree)h(on)h(n)n(um)n
(b)r(er)f(of)i(v)-5 b(alues.\))36 b(tail)27 b(\(do)r(esn't)h(return)f
(but)g(do)r(es)g(tail)g(call\))523 1669 y(What)e(function)g(lo)r(cal)g
(named)f(\(going)g(through)g(sym)n(b)r(ol,)h(lik)n(e)f(full)i(but)f
(stash)f(fun)i(name)523 1768 y(for)34 b(error)e(sys\))h(full)i(\(ha)n
(v)n(e)e(a)h(function\))h(Args)e(\014xed)h(\(n)n(um)n(b)r(er)h(of)f
(args)e(are)h(kno)n(wn)h(at)523 1868 y(compile-time\))28
b(v)-5 b(ariable)26 b(\(MUL)-7 b(TIPLE-V)e(ALUE-CALL)27
b(and)g(APPL)-7 b(Y\))648 1967 y(Note)23 b(on)g(all)g(jumps)h(for)f
(calls)g(and)g(returns)g(that)h(w)n(e)f(w)n(an)n(t)f(to)i(put)g(some)f
(instruction)523 2067 y(in)28 b(the)g(jump's)g(dela)n(y)f(slot\(s\).)
648 2167 y(Register)f(usage)h(at)g(the)h(time)g(of)g(the)g(call:)648
2266 y(LEXENV)g(This)h(holds)g(the)g(lexical)f(en)n(vironmen)n(t)g(to)h
(use)g(during)f(the)i(call)e(if)i(it's)f(a)523 2366 y(closure,)e(and)g
(it)h(is)f(unde\014ned)i(otherwise.)648 2466 y(CNAME)e(This)h(holds)f
(the)h(sym)n(b)r(ol)f(for)g(a)h(named)f(call)g(and)h(garbage)d
(otherwise.)648 2565 y(OCFP)e(This)h(holds)g(the)h(frame)f(p)r(oin)n
(ter,)g(whic)n(h)g(the)h(system)f(restores)e(up)r(on)j(return.)523
2665 y(The)j(callee)f(sa)n(v)n(es)e(this)j(if)g(necessary;)e(this)i(is)
g(passed)f(as)g(a)g(pseudo-argumen)n(t.)648 2764 y(A0)g(...)37
b(An)28 b(These)f(holds)h(the)g(\014rst)f(n+1)g(argumen)n(ts.)648
2864 y(NAR)n(GS)h(This)f(holds)h(the)g(n)n(um)n(b)r(er)f(of)h(argumen)n
(ts,)e(as)h(a)g(\014xn)n(um.)648 2964 y(LRA)i(This)f(holds)g(the)h
(lisp-return-address)d(ob)5 b(ject)29 b(whic)n(h)f(indicates)h(where)f
(to)g(re-)523 3063 y(turn.)70 b(F)-7 b(or)38 b(a)h(tail)f(call,)k(this)
d(retains)e(its)i(curren)n(t)f(v)-5 b(alue.)70 b(The)39
b(callee)f(sa)n(v)n(es)f(this)i(if)523 3163 y(necessary;)26
b(this)i(is)f(passed)g(as)g(a)g(pseudo-argumen)n(t.)648
3263 y(CODE)g(This)g(holds)h(the)f(function)i(ob)5 b(ject)27
b(b)r(eing)h(called.)648 3362 y(CSP)f(The)g(caller)g(ignores)f(this.)37
b(The)28 b(callee)f(sets)g(it)h(as)f(necessary)f(based)h(on)h(CFP)-7
b(.)648 3462 y(CFP)24 b(This)h(holds)g(the)h(callee's)e(frame)g(p)r
(oin)n(ter.)36 b(Caller)24 b(sets)h(this)g(to)g(the)h(new)f(frame)523
3561 y(p)r(oin)n(ter,)d(whic)n(h)g(it)g(remem)n(b)r(ered)e(when)i(it)g
(started)f(computing)g(argumen)n(ts;)i(this)e(is)h(CSP)523
3661 y(if)28 b(there)g(w)n(ere)e(no)h(stac)n(k)g(argumen)n(ts.)36
b(F)-7 b(or)27 b(a)g(tail)g(call)h(CFP)f(retains)g(its)h(curren)n(t)e
(v)-5 b(alue.)648 3761 y(NSP)31 b(The)g(system)g(uses)g(this)g(within)h
(a)f(single)f(function.)48 b(A)32 b(function)g(using)e(NSP)523
3860 y(m)n(ust)e(allo)r(cate)e(and)i(deallo)r(cate)f(b)r(efore)g
(returning)g(or)f(making)h(a)h(tail)f(call.)648 3960
y(Register)h(usage)g(at)h(the)h(time)f(of)g(the)h(return)f(for)f
(single)h(v)-5 b(alue)29 b(return,)g(whic)n(h)g(go)r(es)523
4060 y(with)f(the)g(unkno)n(wn-v)-5 b(alues)26 b(con)n(v)n(en)n(tion)h
(the)h(caller)e(used.)648 4159 y(A0)h(The)h(holds)f(the)h(v)-5
b(alue.)648 4259 y(CODE)40 b(This)h(holds)g(the)g(lisp-return-address)d
(at)j(whic)n(h)g(the)g(system)g(con)n(tin)n(ues)523 4358
y(executing.)648 4458 y(CSP)28 b(This)h(holds)g(the)h(CFP)-7
b(.)29 b(That)g(is,)g(the)h(stac)n(k)e(is)h(guaran)n(teed)e(to)i(b)r(e)
g(clean,)h(and)523 4558 y(there)d(is)h(no)f(co)r(de)h(at)f(the)h
(return)f(site)h(to)f(adjust)h(the)g(CSP)-7 b(.)648 4657
y(CFP)27 b(This)g(holds)h(the)g(OCFP)-7 b(.)648 4757
y(Additional)27 b(register)f(usage)h(for)g(m)n(ultiple)h(v)-5
b(alue)28 b(return:)648 4857 y(NAR)n(GS)g(This)f(holds)h(the)g(n)n(um)n
(b)r(er)f(of)h(v)-5 b(alues)27 b(returned.)1914 5147
y(97)p eop
%%Page: 98 99
98 98 bop 648 614 a Fk(A0)23 b(...)36 b(An)25 b(These)e(holds)h(the)g
(\014rst)g(n+1)f(v)-5 b(alues,)24 b(or)f(NIL)i(if)f(there)g(are)f(less)
g(than)h(n+1)523 714 y(v)-5 b(alues.)648 814 y(CSP)30
b(Returner)g(stores)g(CSP)g(to)h(hold)g(its)g(CFP)f(+)h(NAR)n(GS)g(*)g
(<address)e(units)i(p)r(er)523 913 y(w)n(ord>)648 1013
y(OCFP)20 b(Returner)h(stores)f(this)i(as)f(its)h(CFP)-7
b(,)21 b(so)g(the)g(returnee)g(has)g(a)g(handle)g(on)h(either)523
1112 y(the)28 b(start)f(of)h(the)g(returned)f(v)-5 b(alues)27
b(on)g(the)h(stac)n(k.)648 1212 y(ALLOCA)-7 b(TE)27 b(FULL)h(CALL)f
(FRAME.)648 1312 y(If)32 b(the)g(n)n(um)n(b)r(er)f(of)h(call)f(argumen)
n(ts)g(\(passed)g(to)h(the)g(V)n(OP)f(as)g(an)g(info)h(argumen)n(t\))
523 1411 y(indicates)g(that)h(there)f(are)g(stac)n(k)f(argumen)n(ts,)h
(then)h(it)g(mak)n(es)e(some)h(callee)g(frame)g(for)523
1511 y(argumen)n(ts:)57 b(V)n(OP-result)37 b(<-)h(CSP)f(CSP)h(<-)g(CSP)
g(+)g(v)-5 b(alue)38 b(of)h(V)n(OP)e(info)h(arg)f(times)523
1611 y(address)26 b(units)i(p)r(er)g(w)n(ord.)648 1710
y(In)f(a)h(call)f(sequence,)g(mo)n(v)n(e)f(some)h(argumen)n(ts)g(to)g
(the)h(righ)n(t)f(places.)648 1810 y(There's)f(a)i(v)-5
b(ariet)n(y)26 b(of)i(MO)n(VE-AR)n(GUMENT)f(V)n(OP's.)648
1910 y(FULL)34 b(CALL)h(V)n(OP'S)e(\(v)-5 b(ariations)34
b(determined)g(b)n(y)g(whether)h(it's)f(named,)i(it's)f(a)523
2009 y(tail)28 b(call,)f(there)g(is)h(a)f(v)-5 b(ariable)27
b(arg)f(coun)n(t,)h(etc.\))648 2109 y(if)f(v)-5 b(ariable)25
b(n)n(um)n(b)r(er)g(of)h(argumen)n(ts)e(NAR)n(GS)j(<-)f(\(CSP)f(-)h(v)
-5 b(alue)25 b(of)h(V)n(OP)f(argumen)n(t\))523 2208 y(shift)19
b(righ)n(t)f(b)n(y)g(address)f(units)i(p)r(er)f(w)n(ord.)33
b(A0...An)19 b(<-)f(v)-5 b(alues)18 b(o\013)g(of)h(V)n(OP)e(argumen)n
(t)g(\(just)523 2308 y(\014ll)28 b(them)g(all\))g(else)f(NAR)n(GS)h(<-)
g(v)-5 b(alue)27 b(of)h(V)n(OP)e(info)i(argumen)n(t)f(\(alw)n(a)n(ys)f
(a)h(constan)n(t\))648 2408 y(if)40 b(tail)g(call)f(OCFP)g(<-)h(v)-5
b(alue)39 b(from)h(V)n(OP)f(argumen)n(t)f(LRA)j(<-)e(v)-5
b(alue)40 b(from)f(V)n(OP)523 2507 y(argumen)n(t)23 b(CFP)i(sta)n(ys)e
(the)i(same)f(since)g(w)n(e)g(reuse)g(the)h(frame)f(NSP)g(<-)g(NFP)h
(else)f(OCFP)523 2607 y(<-)i(CFP)h(LRA)g(<-)f(compute)h(LRA)g(b)n(y)f
(adding)g(an)h(assem)n(ble-time)e(determined)i(constan)n(t)523
2707 y(to)33 b(CODE.)g(CFP)g(<-)f(new)i(frame)e(p)r(oin)n(ter)h
(\(remem)n(b)r(ered)g(when)g(starting)f(to)h(compute)523
2806 y(args\))38 b(This)i(is)g(CSP)f(if)i(no)e(stac)n(k)g(args.)72
b(when)39 b(\(curren)n(t-nfp-tn)h(V)n(OP-self-p)r(oin)n(ter\))523
2906 y(stac)n(k-temp)27 b(<-)g(NFP)648 3005 y(if)f(named)h(CNAME)f(<-)g
(function)h(sym)n(b)r(ol)f(name)g(the-fun)h(<-)f(function)h(ob)5
b(ject)26 b(out)g(of)523 3105 y(sym)n(b)r(ol)648 3205
y(LEXENV)18 b(<-)g(the-fun)h(\(from)f(previous)g(line)g(or)g(V)n(OP)f
(argumen)n(t\))h(CODE)g(<-)g(function-)523 3304 y(en)n(try)28
b(\(the)h(\014rst)g(w)n(ord)e(after)h(the-fun\))i(LIP)e(<-)g(calc)h
(\014rst)f(instruction)g(addr)g(\(CODE)h(+)523 3404 y(constan)n
(t-o\013set\))e(jump)h(and)g(run)f(o\013)h(temp)648 3504
y(<emit)k(Lisp)g(return)f(address)g(data-blo)r(c)n(k>)g(<default)h(and)
g(mo)n(v)n(e)f(return)g(v)-5 b(alues)32 b(OR)523 3603
y(receiv)n(e)39 b(return)g(v)-5 b(alues>)40 b(when)g(\(curren)n
(t-nfp-tn)f(V)n(OP-self-p)r(oin)n(ter\))f(NFP)i(<-)g(stac)n(k-)523
3703 y(temp)648 3802 y(Callee:)648 3902 y(XEP-ALLOCA)-7
b(TE-FRAME)37 b(emit)i(function)h(header)e(\(ma)n(yb)r(e)h(initializes)
f(o\013set)523 4002 y(bac)n(k)31 b(to)h(comp)r(onen)n(t)g(start,)g(but)
h(other)f(p)r(oin)n(ters)f(are)g(set)h(up)g(at)g(load-time.)50
b(P)n(ads)31 b(to)523 4101 y(dual-w)n(ord)24 b(b)r(oundary)-7
b(.\))36 b(CSP)25 b(<-)h(CFP)f(+)g(compile-time)h(determined)g(constan)
n(t)f(\(frame)523 4201 y(size\))g(if)h(the)g(function)f(uses)g(the)h(n)
n(um)n(b)r(er)f(stac)n(k)f(NFP)h(<-)g(NSP)h(NSP)f(<-)g(NSP)g(+)g
(compile-)523 4301 y(time)j(determined)g(constan)n(t)f(\(n)n(um)n(b)r
(er)g(stac)n(k)g(frame)g(size\))648 4400 y(SETUP-ENVIR)n(ONMENT)f
(\(either)i(use)f(this)h(or)f(the)h(next)f(one\))648
4500 y(CODE)20 b(<-)g(CODE)g(-)h(assem)n(bler-time)e(determined)i
(o\013set)g(from)f(function-en)n(try)g(bac)n(k)523 4599
y(to)28 b(the)f(co)r(de)h(data-blo)r(c)n(k)e(address.)648
4699 y(SETUP-CLOSURE-ENVIR)n(ONMENT)h(\(either)j(use)g(this)g(or)f(the)
i(previous)d(one\))523 4799 y(After)g(this)g(the)g(CLOSURE-REF)f(V)n
(OP)f(can)h(reference)g(closure)g(v)-5 b(ariables.)1914
5147 y(98)p eop
%%Page: 99 100
99 99 bop 648 614 a Fk(V)n(OP-result)22 b(<-)j(LEXENV)f(CODE)g(<-)g
(CODE)g(-)h(assem)n(bler-time)e(determined)h(o\013set)523
714 y(from)j(function-en)n(try)g(bac)n(k)g(to)h(the)g(co)r(de)f
(data-blo)r(c)n(k)f(address.)648 814 y(Return)k(V)n(OP's)f(RETURN)h
(and)g(RETURN-MUL)-7 b(TIPLE)29 b(are)g(for)h(the)g(unkno)n(wn-)523
913 y(v)-5 b(alues)20 b(return)g(con)n(v)n(en)n(tion.)33
b(F)-7 b(or)20 b(some)g(previous)g(caller)f(this)i(is)g(either)f(it)h
(w)n(an)n(ts)f(n)h(v)-5 b(alues)523 1013 y(\(and)25 b(it)h(do)r(esn't)f
(kno)n(w)g(ho)n(w)g(man)n(y)f(are)g(coming\),)i(or)e(it)i(w)n(an)n(ts)e
(all)h(the)h(v)-5 b(alues)25 b(returned)523 1112 y(\(and)j(it)g(do)r
(esn't)g(kno)n(w)e(ho)n(w)h(man)n(y)g(are)g(coming\).)648
1212 y(RETURN)37 b(\(kno)n(wn)g(\014xed)g(n)n(um)n(b)r(er)g(of)h(v)-5
b(alues,)39 b(used)e(with)h(the)g(unkno)n(wn-v)-5 b(alues)523
1312 y(con)n(v)n(en)n(tion)31 b(in)i(the)g(caller.\))51
b(When)33 b(compiler)f(in)n(v)n(ok)n(es)e(V)n(OP)-7 b(,)32
b(all)g(v)-5 b(alues)32 b(are)g(already)523 1411 y(where)27
b(they)h(should)f(b)r(e;)h(just)h(get)e(bac)n(k)g(to)g(caller.)648
1511 y(when)g(\(curren)n(t-nfp-tn)g(V)n(OP-self-p)r(oin)n(ter\))e(;;)j
(The)f(n)n(um)n(b)r(er)g(stac)n(k)f(gro)n(ws)f(do)n(wn)i(in)523
1611 y(memory)-7 b(.)38 b(NSP)28 b(<-)g(NFP)g(+)g(n)n(um)n(b)r(er)f
(stac)n(k)h(frame)f(size)h(for)g(calls)f(within)i(the)f(curren)n(tly)
523 1710 y(compiling)40 b(comp)r(onen)n(t)h(times)g(address)e(units)i
(p)r(er)g(w)n(ord)e(CODE)i(<-)f(v)-5 b(alue)41 b(of)f(V)n(OP)523
1810 y(argumen)n(t)e(with)h(LRA)g(if)g(V)n(OP)e(info)i(arg)e(is)i(1)f
(\(n)n(um)n(b)r(er)h(of)f(v)-5 b(alues)38 b(w)n(e)g(kno)n(w)g(w)n(e're)
523 1910 y(returning\))24 b(CSP)h(<-)f(CFP)h(LIP)f(<-)h(calc)f(target)g
(addr)g(\(CODE)g(+)h(skip)f(o)n(v)n(er)f(LRA)i(header)523
2009 y(w)n(ord)h(+)g(skip)h(o)n(v)n(er)e(address)h(units)h(p)r(er)g
(branc)n(h\))f(\(The)h(branc)n(h)f(is)h(in)g(the)g(caller)f(to)h(skip)
523 2109 y(do)n(wn)c(to)g(the)h(MV)f(co)r(de.\))36 b(else)23
b(NAR)n(GS)h(<-)f(v)-5 b(alue)23 b(of)g(V)n(OP)f(info)i(arg)e(nil)h
(out)h(un)n(used)f(arg)523 2208 y(regs)28 b(OCFP)h(<-)h(CFP)f(\(This)h
(indicates)f(the)h(start)f(of)h(return)f(v)-5 b(alues)29
b(on)h(the)g(stac)n(k,)f(but)523 2308 y(y)n(ou)22 b(lea)n(v)n(e)g
(space)h(for)f(those)h(in)h(registers)d(for)i(con)n(v)n(enience.\))34
b(CSP)23 b(<-)g(CFP)g(+)g(NAR)n(GS)h(*)523 2408 y(address-units-p)r
(er-w)n(ord)e(LIP)i(<-)g(calc)h(target)e(addr)i(\(CODE)f(+)h(skip)f(o)n
(v)n(er)f(LRA)i(header)523 2507 y(w)n(ord\))i(CFP)g(<-)h(v)-5
b(alue)27 b(of)h(V)n(OP)e(argumen)n(t)h(with)h(OCFP)f(jump)h(and)g(run)
f(o\013)h(LIP)648 2607 y(RETURN-MUL)-7 b(TIPLE)20 b(\(unkno)n(wn)h(n)n
(um)n(b)r(er)g(of)h(v)-5 b(alues,)22 b(used)f(with)h(the)g(unkno)n(wn-)
523 2707 y(v)-5 b(alues)39 b(con)n(v)n(en)n(tion)f(in)h(the)h
(caller.\))71 b(When)40 b(compiler)e(in)n(v)n(ok)n(es)f(V)n(OP)-7
b(,)39 b(it)h(gets)e(TN's)523 2806 y(represen)n(ting)c(a)i(p)r(oin)n
(ter)f(to)g(the)i(v)-5 b(alues)35 b(on)g(the)h(stac)n(k)f(and)h(ho)n(w)
f(man)n(y)g(v)-5 b(alues)35 b(w)n(ere)523 2906 y(computed.)648
3005 y(when)j(\(curren)n(t-nfp-tn)h(V)n(OP-self-p)r(oin)n(ter\))e(;;)44
b(The)38 b(n)n(um)n(b)r(er)h(stac)n(k)e(gro)n(ws)g(do)n(wn)523
3105 y(in)d(memory)-7 b(.)54 b(NSP)33 b(<-)h(NFP)f(+)h(n)n(um)n(b)r(er)
f(stac)n(k)g(frame)g(size)g(for)g(calls)g(within)h(the)g(cur-)523
3205 y(ren)n(tly)f(compiling)g(comp)r(onen)n(t)g(times)g(address)f
(units)i(p)r(er)f(w)n(ord)f(NAR)n(GS)i(<-)f(v)-5 b(alue)33
b(of)523 3304 y(V)n(OP)22 b(argumen)n(t)h(cop)n(y)f(the)i(args)d(to)i
(the)h(b)r(eginning)f(of)g(the)h(curren)n(t)e(\(returner's\))h(frame.)
523 3404 y(Actually)35 b(some)g(go)f(in)n(to)h(the)h(argumen)n(t)e
(registers.)57 b(When)36 b(putting)g(the)f(rest)g(at)g(the)523
3504 y(b)r(eginning)28 b(of)h(the)f(frame,)h(lea)n(v)n(e)e(ro)r(om)g
(for)h(those)g(in)h(the)g(argumen)n(t)e(registers.)38
b(CSP)28 b(<-)523 3603 y(CFP)23 b(+)h(NAR)n(GS)g(*)g(address-units-p)r
(er-w)n(ord)c(nil)k(out)g(un)n(used)f(arg)g(regs)f(OCFP)h(<-)h(CFP)523
3703 y(\(This)30 b(indicates)f(the)h(start)f(of)h(return)f(v)-5
b(alues)29 b(on)h(the)g(stac)n(k,)f(but)h(y)n(ou)f(lea)n(v)n(e)f(space)
h(for)523 3802 y(those)d(in)g(registers)f(for)h(con)n(v)n(enience.\))35
b(CFP)26 b(<-)g(v)-5 b(alue)26 b(of)h(V)n(OP)e(argumen)n(t)g(with)i
(OCFP)523 3902 y(CODE)h(<-)h(v)-5 b(alue)28 b(of)h(V)n(OP)e(argumen)n
(t)h(with)h(LRA)g(LIP)f(<-)h(calc)f(target)f(addr)h(\(CODE)h(+)523
4002 y(skip)e(o)n(v)n(er)f(LRA)i(header)f(w)n(ord\))g(jump)h(and)g(run)
f(o\013)h(LIP)648 4101 y(Returnee)18 b(The)g(call)g(V)n(OP's)g(call)g
(DEF)-9 b(A)n(UL)i(T-UNKNO)n(WN-V)e(ALUES)18 b(or)f(RECEIVE-)523
4201 y(UNKNO)n(WN-V)-9 b(ALUES)32 b(after)f(spitting)h(out)g(transfer)f
(con)n(trol)f(to)i(get)f(stu\013)i(from)e(the)523 4301
y(returner.)648 4400 y(DEF)-9 b(A)n(UL)i(T-UNKNO)n(WN-V)e(ALUES)18
b(\(W)-7 b(e)19 b(kno)n(w)e(what)i(w)n(e)f(w)n(an)n(t)f(and)i(w)n(e)f
(got)f(some-)523 4500 y(thing.\))36 b(If)25 b(returnee)f(w)n(an)n(ts)g
(one)g(v)-5 b(alue,)25 b(it)g(nev)n(er)f(do)r(es)g(an)n(ything)g(to)h
(deal)f(with)h(a)f(short-)523 4599 y(age)32 b(of)g(return)g(v)-5
b(alues.)52 b(Ho)n(w)n(ev)n(er,)31 b(if)j(start)e(at)g(PC,)g(then)h(it)
g(has)f(to)h(adjust)f(the)h(stac)n(k)523 4699 y(p)r(oin)n(ter)h(to)h
(dump)g(extra)e(v)-5 b(alues)35 b(\(mo)n(v)n(e)e(OCFP)h(in)n(to)g
(CSP\).)h(If)g(it)g(starts)f(at)g(PC+N,)523 4799 y(then)d(it)h(just)f
(go)r(es)f(along)g(with)h(the)g("w)n(an)n(t)f(one)g(v)-5
b(alue,)32 b(got)e(it")h(case.)46 b(If)31 b(the)g(returnee)523
4898 y(w)n(an)n(ts)k(m)n(ultiple)h(v)-5 b(alues,)38 b(and)d(there's)h
(a)f(shortage)f(of)i(return)f(v)-5 b(alues,)38 b(there)d(are)g(t)n(w)n
(o)1914 5147 y(99)p eop
%%Page: 100 101
100 100 bop 523 614 a Fk(cases)29 b(to)h(handle.)44 b(One,)31
b(if)f(the)h(returnee)e(w)n(an)n(ts)g(few)n(er)h(v)-5
b(alues)30 b(than)g(there)g(are)f(return)523 714 y(registers,)h(and)h
(w)n(e)f(start)g(at)h(PC+N,)g(then)g(it)g(\014lls)g(in)g(return)g
(registers)e(A1..A<desired)523 814 y(v)-5 b(alues)23
b(necessary>;)g(if)g(w)n(e)g(start)f(at)h(PC,)g(then)g(the)h(returnee)e
(is)h(\014ne)g(since)g(the)g(returning)523 913 y(con)n(v)n(en)n(tions)i
(ha)n(v)n(e)h(\014lled)h(in)g(the)h(un)n(used)f(return)f(registers)f
(with)j(nil,)f(but)h(the)f(returnee)523 1013 y(m)n(ust)21
b(adjust)g(the)h(stac)n(k)e(p)r(oin)n(ter)g(to)h(dump)g(p)r(ossible)g
(stac)n(k)f(return)g(v)-5 b(alues)21 b(\(mo)n(v)n(e)f(OCFP)523
1112 y(to)j(CSP\).)h(Tw)n(o,)f(if)h(the)g(returnee)f(w)n(an)n(ts)g
(more)f(v)-5 b(alues)24 b(than)f(the)h(n)n(um)n(b)r(er)f(of)h(return)f
(reg-)523 1212 y(isters,)37 b(and)f(it)g(starts)f(at)h(PC+N)f(\(got)h
(one)f(v)-5 b(alue\),)38 b(then)e(it)h(sets)e(up)h(returnee)g(state)523
1312 y(as)d(if)h(an)f(unkno)n(wn)f(n)n(um)n(b)r(er)i(of)f(v)-5
b(alues)33 b(came)g(bac)n(k:)47 b(A0)33 b(has)g(the)h(one)f(v)-5
b(alue)33 b(A1..An)523 1411 y(get)i(nil)g(NAR)n(GS)h(gets)e(1)h(OCFP)f
(gets)h(CSP)-7 b(,)35 b(so)f(general)g(co)r(de)g(describ)r(ed)h(b)r
(elo)n(w)g(can)523 1511 y(mo)n(v)n(e)26 b(OCFP)f(in)n(to)i(CSP)f(If)h
(w)n(e)f(start)g(at)h(PC,)f(then)h(branc)n(h)f(do)n(wn)g(to)g(the)h
(general)e("got)523 1611 y(k)31 b(v)-5 b(alues,)31 b(w)n(an)n(ted)f(n")
h(co)r(de)g(whic)n(h)g(tak)n(es)e(care)h(of)h(the)g(follo)n(wing)f
(issues:)43 b(If)31 b(k)g(<)g(n,)h(\014ll)523 1710 y(in)c(stac)n(k)f
(return)g(v)-5 b(alues)28 b(of)g(nil)g(for)f(shortage)f(of)i(return)g
(v)-5 b(alues)27 b(and)h(mo)n(v)n(e)e(OCFP)i(in)n(to)523
1810 y(CSP)i(If)g(k)g(>=)f(n,)i(mo)n(v)n(e)e(OCFP)g(in)n(to)g(CSP)h
(This)g(also)f(restores)f(CODE)h(from)g(LRA)i(b)n(y)523
1910 y(subtracting)c(an)g(assem)n(ble-time)g(constan)n(t.)648
2009 y(RECEIVE-UKNO)n(WN-V)-9 b(ALUES)26 b(\(I)i(w)n(an)n(t)f(whatev)n
(er)f(I)i(get.\))38 b(W)-7 b(e)28 b(w)n(an)n(t)f(these)h(at)523
2109 y(the)22 b(end)g(of)f(our)g(frame.)34 b(When)22
b(the)g(returnee)f(starts)f(starts)h(at)g(PC,)g(it)h(mo)n(v)n(es)e(the)
i(return)523 2208 y(v)-5 b(alue)27 b(registers)f(to)h(OCFP)-7
b(..OCFP[An])27 b(ignoring)f(where)g(the)i(end)g(of)f(the)h(stac)n(k)e
(is)i(and)523 2308 y(whether)d(all)f(the)h(return)f(v)-5
b(alue)25 b(registers)e(had)h(v)-5 b(alues.)36 b(The)25
b(returner)e(left)j(ro)r(om)e(on)g(the)523 2408 y(stac)n(k)33
b(b)r(efore)h(the)g(stac)n(k)f(return)g(v)-5 b(alues)34
b(for)f(the)h(register)f(return)g(v)-5 b(alues.)56 b(When)34
b(the)523 2507 y(returnee)22 b(starts)g(at)g(PC+N,)g(bump)i(CSP)e(b)n
(y)g(1)g(and)h(cop)n(y)f(A0)g(there.)35 b(This)23 b(also)e(restores)523
2607 y(CODE)27 b(from)g(LRA)h(b)n(y)g(subtracting)f(an)g(assem)n
(ble-time)f(constan)n(t.)648 2707 y(Lo)r(cal)g(call)648
2806 y(There)33 b(are)h(three)g(\015a)n(v)n(ors:)48 b(1])34
b(KNO)n(WN-CALL-LOCAL)f(Uses)h(kno)n(wn)f(call)h(con-)523
2906 y(v)n(en)n(tion)22 b(where)f(caller)h(and)g(callee)f(agree)g
(where)h(all)g(the)g(v)-5 b(alues)22 b(are,)h(and)f(there's)f(a)h
(\014xed)523 3005 y(n)n(um)n(b)r(er)33 b(of)f(return)h(v)-5
b(alues.)52 b(2])32 b(CALL-LOCAL)h(Uses)f(the)h(unkno)n(wn-v)-5
b(alues)32 b(con)n(v)n(en-)523 3105 y(tion,)k(but)f(w)n(e)f(exp)r(ect)g
(a)g(particular)f(n)n(um)n(b)r(er)h(of)h(v)-5 b(alues)34
b(in)g(return.)57 b(3])33 b(MUL)-7 b(TIPLE-)523 3205
y(CALL-LOCAL)38 b(Uses)h(the)g(unkno)n(wn-v)-5 b(alues)38
b(con)n(v)n(en)n(tion,)i(but)f(w)n(e)g(w)n(an)n(t)f(all)h(v)-5
b(alues)523 3304 y(returned.)648 3404 y(ALLOCA)e(TE-FRAME)648
3504 y(If)32 b(the)g(n)n(um)n(b)r(er)f(of)h(call)f(argumen)n(ts)g
(\(passed)g(to)h(the)g(V)n(OP)f(as)g(an)g(info)h(argumen)n(t\))523
3603 y(indicates)g(that)h(there)f(are)g(stac)n(k)f(argumen)n(ts,)h
(then)h(it)g(mak)n(es)e(some)h(callee)g(frame)g(for)523
3703 y(argumen)n(ts:)i(V)n(OP-result1)22 b(<-)i(CSP)g(CSP)h(<-)f(CSP)g
(+)g(con)n(trol)f(stac)n(k)g(frame)h(size)g(for)g(calls)523
3802 y(within)29 b(the)f(curren)n(tly)f(compiling)h(comp)r(onen)n(t)g
(times)g(address)f(units)i(p)r(er)f(w)n(ord.)37 b(when)523
3902 y(\(callee-nfp-tn)29 b(<V)n(OP)f(info)h(arg)f(holding)g(callee>\))
h(;;)h(The)f(n)n(um)n(b)r(er)g(stac)n(k)f(gro)n(ws)f(do)n(wn.)523
4002 y(;;)d(Ma)n(y)d(ha)n(v)n(e)f(to)i(round)f(to)g(dual-w)n(ord)g(b)r
(oundary)f(if)j(mac)n(hines)e(C)g(calling)g(;;)j(con)n(v)n(en)n(tions)
523 4101 y(demand)19 b(this.)35 b(NSP)19 b(<-)h(NSP)f(-)g(n)n(um)n(b)r
(er)g(stac)n(k)g(frame)g(size)g(for)g(calls)f(within)j(the)e(curren)n
(tly)523 4201 y(compiling)27 b(comp)r(onen)n(t)h(times)f(address)g
(units)h(p)r(er)f(w)n(ord)g(V)n(OP-result2)e(<-)j(NSP)648
4301 y(KNO)n(WN-CALL-LOCAL,)17 b(CALL-LOCAL,)g(MUL)-7
b(TIPLE-CALL-LOCAL)17 b(KNO)n(WN-)523 4400 y(CALL-LOCAL)34
b(has)f(no)h(need)g(to)g(a\013ect)h(CODE)e(since)h(CODE)g(is)g(the)h
(same)e(for)h(the)523 4500 y(caller/returnee)28 b(and)j(the)f
(returner.)45 b(This)30 b(uses)g(KNO)n(WN-RETURN.)g(With)i(CALL-)523
4599 y(LOCAL)21 b(and)h(MUL)-7 b(TIPLE-CALL-LOCAL,)19
b(the)j(caller/returnee)d(m)n(ust)j(\014xup)g(CODE)523
4699 y(since)34 b(the)h(callee)e(ma)n(y)h(do)f(a)h(tail)g(full)h(call.)
56 b(This)35 b(happ)r(ens)f(in)g(the)h(co)r(de)f(emitted)h(b)n(y)523
4799 y(DEF)-9 b(A)n(UL)i(T-UNKNO)n(WN-V)e(ALUES)40 b(and)f
(RECEIVE-UNKNO)n(WN-V)-9 b(ALUES.)39 b(W)-7 b(e)523 4898
y(use)33 b(these)g(return)g(con)n(v)n(en)n(tions)e(since)i(w)n(e)f
(don't)i(kno)n(w)e(what)h(kind)g(of)g(v)-5 b(alues)33
b(the)g(re-)1893 5147 y(100)p eop
%%Page: 101 102
101 101 bop 523 614 a Fk(turner)34 b(will)h(giv)n(e)f(us.)59
b(This)35 b(could)f(happ)r(en)i(due)f(to)f(a)h(tail)g(full)g(call)g(to)
f(an)h(unkno)n(wn)523 714 y(function,)26 b(or)e(b)r(ecause)h(the)g
(callee)g(had)f(di\013eren)n(t)h(return)g(p)r(oin)n(ts)g(that)g
(returned)g(v)-5 b(arious)523 814 y(n)n(um)n(b)r(ers)27
b(of)h(v)-5 b(alues.)648 913 y(when)18 b(\(curren)n(t-nfp-tn)g(V)n
(OP-self-p)r(oin)n(ter\))f(;Get)i(V)n(OP)e(self-p)r(oin)n(ter)h(with)h
(;DEFINE-)523 1013 y(V)n(OP)i(switc)n(h)h(:v)n(op-v)-5
b(ar.)33 b(stac)n(k-temp)21 b(<-)h(NFP)g(CFP)f(<-)h(v)-5
b(alue)22 b(of)f(V)n(OP)g(arg)g(when)h(\(callee-)523
1112 y(nfp-tn)34 b(<V)n(OP)f(info)g(arg)f(holding)h(callee>\))g
(<where-callee-w)n(an)n(ts-NFP-tn>)d(<-)j(v)-5 b(alue)33
b(of)523 1212 y(V)n(OP)24 b(arg)f(<where-callee-w)n(an)n(ts-LRA-tn>)f
(<-)j(compute)g(LRA)g(b)n(y)f(adding)g(an)h(assem)n(ble-)523
1312 y(time)35 b(determined)f(constan)n(t)g(to)g(CODE.)g(jump)h(and)f
(run)h(o\013)f(V)n(OP)f(info)i(arg)e(holding)523 1411
y(start)27 b(instruction)g(for)h(callee)648 1511 y(<emit)d(Lisp)h
(return)e(address)g(data-blo)r(c)n(k>)g(<case)h(call)g(con)n(v)n(en)n
(tion)f(kno)n(wn:)35 b(do)25 b(noth-)523 1611 y(ing)i(call:)37
b(default)27 b(and)h(mo)n(v)n(e)e(return)h(v)-5 b(alues)27
b(m)n(ultiple:)37 b(receiv)n(e)27 b(return)f(v)-5 b(alues)28
b(>)f(when)523 1710 y(\(curren)n(t-nfp-tn)g(V)n(OP-self-p)r(oin)n
(ter\))f(NFP)i(<-)f(stac)n(k-temp)648 1810 y(KNO)n(WN-RETURN)648
1910 y(CSP)i(<-)g(CFP)g(when)g(\(curren)n(t-nfp-tn)g(V)n(OP-self-p)r
(oin)n(ter\))f(;;)i(n)n(um)n(b)r(er)f(stac)n(k)f(gro)n(ws)523
2009 y(do)n(wn)i(in)h(memory)-7 b(.)45 b(NSP)30 b(<-)h(NFP)f(+)h(n)n
(um)n(b)r(er)f(stac)n(k)f(frame)i(size)f(for)g(calls)g(within)h(the)523
2109 y(curren)n(tly)c(compiling)g(comp)r(onen)n(t)h(times)g(address)e
(units)i(p)r(er)g(w)n(ord)e(LIP)i(<-)f(calc)g(target)523
2208 y(addr)k(\(v)-5 b(alue)32 b(of)f(V)n(OP)g(arg)f(+)h(skip)g(o)n(v)n
(er)f(LRA)i(header)e(w)n(ord\))h(CFP)g(<-)g(v)-5 b(alue)32
b(of)f(V)n(OP)523 2308 y(arg)26 b(jump)j(and)e(run)h(o\013)f(LIP)1893
5147 y(101)p eop
%%Page: 102 103
102 102 bop 523 1237 a Fg(Chapter)65 b(32)523 1652 y
Fi(Standard)78 b(Primitiv)-6 b(es)1893 5147 y Fk(102)p
eop
%%Page: 103 104
103 103 bop 523 1237 a Fg(Chapter)65 b(33)523 1652 y
Fi(Customizing)77 b(VMR)523 1901 y(Con)-6 b(v)g(ersion)523
2333 y Fk(Another)28 b(w)n(a)n(y)g(in)h(whic)n(h)f(di\013eren)n(t)h
(implemen)n(tations)f(di\013er)h(is)f(in)h(the)g(relativ)n(e)e(cost)h
(of)523 2433 y(op)r(erations.)62 b(On)36 b(mac)n(hines)g(without)h(an)f
(in)n(teger)g(m)n(ultiply)h(instruction,)h(it)f(ma)n(y)f(b)r(e)523
2532 y(desirable)h(to)h(con)n(v)n(ert)e(m)n(ultiplication)i(b)n(y)f(a)h
(constan)n(t)f(in)n(to)g(shifts)i(and)e(adds,)j(while)523
2632 y(this)26 b(is)h(surely)e(a)h(bad)g(idea)f(on)h(mac)n(hines)g
(with)g(hardw)n(are)f(supp)r(ort)h(for)f(m)n(ultiplication.)523
2731 y(P)n(art)c(of)i(the)g(tuning)f(pro)r(cess)g(for)g(an)g(implemen)n
(tation)h(will)f(b)r(e)h(adding)f(implemen)n(tation)523
2831 y(dep)r(enden)n(t)28 b(transforms)f(and)g(disabling)g(undesirable)
g(standard)f(transforms.)648 2931 y(When)e(practical,)h(ICR)f
(transforms)f(should)h(b)r(e)h(used)f(instead)g(of)h(VMR)g(generators,)
523 3030 y(since)36 b(transforms)f(are)g(more)g(p)r(ortable)h(and)g
(less)g(error-prone.)59 b(Note)36 b(that)h(the)f(Lisp)523
3130 y(co)r(de)28 b(need)g(not)g(b)r(e)g(implemen)n(tation)g(indep)r
(enden)n(t:)39 b(it)28 b(ma)n(y)g(con)n(tain)f(all)h(sorts)f(of)h(sub-)
523 3230 y(primitiv)n(es)f(and)f(similar)h(stu\013.)37
b(Generally)26 b(a)h(function)g(should)g(b)r(e)g(implemen)n(ted)h
(using)523 3329 y(a)i(transform)e(instead)i(of)g(an)f(VMR)i(translator)
d(unless)i(it)g(cannot)f(b)r(e)i(implemen)n(ted)f(as)523
3429 y(a)36 b(transform)f(due)i(to)f(b)r(eing)h(totally)f(evil)g(or)g
(it)h(is)f(just)h(as)f(easy)g(to)g(implemen)n(t)h(as)f(a)523
3528 y(translator)26 b(b)r(ecause)h(it)h(is)f(so)g(simple.)523
3803 y Ff(33.1)136 b(Constan)l(t)46 b(Op)t(erands)523
3985 y Fk(If)32 b(the)f(co)r(de)g(emitted)h(for)f(a)f(V)n(OP)h(when)g
(an)g(argumen)n(t)f(is)h(constan)n(t)f(is)h(v)n(ery)f(di\013eren)n(t)
523 4084 y(than)e(the)g(non-constan)n(t)e(case,)h(then)i(it)f(ma)n(y)f
(b)r(e)h(desirable)f(to)g(sp)r(ecial-case)g(the)h(op)r(era-)523
4184 y(tion)j(in)h(VMR)g(con)n(v)n(ersion)d(b)n(y)i(emitting)h
(di\013eren)n(t)f(V)n(OPs.)47 b(An)31 b(example)g(w)n(ould)g(b)r(e)h
(if)523 4284 y(SVREF)27 b(is)g(only)f(op)r(en-co)r(ded)h(when)g(the)g
(index)g(is)g(a)f(constan)n(t,)g(and)h(turns)g(in)n(to)f(a)h(mis-)523
4383 y(cop)e(call)f(otherwise.)35 b(W)-7 b(e)26 b(w)n(ouldn't)f(w)n(an)
n(t)f(constan)n(t)h(references)e(to)i(spuriously)f(allo)r(cate)523
4483 y(all)32 b(the)g(miscop)g(link)-5 b(age)31 b(registers)g(on)g(the)
i(o\013)f(c)n(hance)f(that)i(the)f(o\013set)g(migh)n(t)g(not)g(b)r(e)
523 4583 y(constan)n(t.)k(See)28 b(the)g(:constan)n(t)f(feature)g(of)h
(V)n(OP)e(primitiv)n(e)i(t)n(yp)r(e)f(restrictions.)1893
5147 y(103)p eop
%%Page: 104 105
104 104 bop 523 614 a Ff(33.2)136 b(Supp)t(orting)44
b(Multiple)i(Hardw)l(are)g(Con\014gura-)897 764 y(tions)523
946 y Fk(A)32 b(winning)f(w)n(a)n(y)f(to)h(c)n(hange)f(emitted)j(co)r
(de)e(dep)r(ending)g(on)g(the)h(hardw)n(are)d(con\014gura-)523
1045 y(tion,)36 b(i.e.)55 b(what)34 b(FP)-7 b(A)34 b(is)g(presen)n(t)f
(is)h(to)g(do)f(this)h(using)g(primitiv)n(e)g(t)n(yp)r(es.)55
b(Note)34 b(that)523 1145 y(the)e(Primitiv)n(e-T)n(yp)r(e)e(function)i
(is)f(VM)h(supplied,)h(and)e(can)g(lo)r(ok)g(at)g(an)n(y)g(appropriate)
523 1245 y(hardw)n(are)39 b(con\014guration)h(switc)n(hes.)77
b(Short-Float)40 b(can)h(b)r(ecome)g(6881-Short-Float,)523
1344 y(AFP)-7 b(A-Short-Float,)25 b(etc.)37 b(There)25
b(w)n(ould)h(b)r(e)h(separate)d(SBs)i(and)g(SCs)g(for)g(the)g
(registers)523 1444 y(of)36 b(eac)n(h)f(kind)h(of)g(FP)f(hardw)n(are,)h
(with)h(the)f(eac)n(h)f(hardw)n(are-sp)r(eci\014c)f(primitiv)n(e)h(t)n
(yp)r(e)523 1543 y(using)d(the)i(appropriate)d(\015oat)h(register)f
(SC.)i(Then)g(the)h(hardw)n(are)c(sp)r(eci\014c)j(templates)523
1643 y(w)n(ould)27 b(pro)n(vide)g(AFP)-7 b(A-Short-Float)26
b(as)h(the)h(argumen)n(t)f(t)n(yp)r(e)g(restriction.)648
1743 y(Primitiv)n(e)f(t)n(yp)r(e)i(c)n(hanges:)648 1842
y(The)j(primitiv)n(e-t)n(yp)r(e)g(structure)g(is)h(giv)n(en)e(a)h(new)h
(structure)f(that)h(is)f(equiv)-5 b(alen)n(t)31 b(to)523
1942 y(this)j(t)n(yp)r(e.)57 b(There)33 b(is)h(also)f(a)g(Guard)h
(slot,)h(with,)h(if)f(true)e(is)h(a)g(function)g(that)h(con)n(trol)523
2042 y(whether)28 b(this)f(primitiv)n(e)h(t)n(yp)r(e)g(is)f(allo)n(w)n
(ed)f(\(due)i(to)g(hardw)n(are)d(con\014guration,)h(etc.\))648
2141 y(W)-7 b(e)35 b(add)f(new)h(:T)n(yp)r(e)g(and)f(:Guard)g(k)n(eyw)n
(ords)f(to)i(Def-Primitiv)n(e-T)n(yp)r(e.)57 b(T)n(yp)r(e)34
b(is)523 2241 y(the)e(t)n(yp)r(e)g(sp)r(eci\014er)g(that)g(is)f(equiv)
-5 b(alen)n(t)32 b(\(default)g(to)g(the)g(primitiv)n(e-t)n(yp)r(e)g
(name\),)h(and)523 2340 y(Guard)25 b(is)f(an)h(expression)f(ev)-5
b(aluated)24 b(in)h(the)h(n)n(ull)f(en)n(vironmen)n(t)f(that)h(con)n
(trols)e(whether)523 2440 y(this)28 b(t)n(yp)r(e)g(applies)f(\(default)
h(to)g(none,)f(i.e.)37 b(constan)n(t)27 b(T\).)648 2540
y(The)22 b(Primitiv)n(e-T)n(yp)r(e-T)n(yp)r(e)e(function)j(returns)e
(the)h(Lisp)g(CT)n(yp)r(e)g(corresp)r(onding)f(to)523
2639 y(a)27 b(primitiv)n(e)h(t)n(yp)r(e.)37 b(This)27
b(is)h(the)g(in)g(whic)n(h)f(case)g(it)h(is)f(the)h(empt)n(y)g(t)n(yp)r
(e)g(\(i.e.)37 b(NIL\).)648 2739 y([But)k(this)h(do)r(esn't)f(do)g
(what)h(w)n(e)f(w)n(an)n(t)f(it)i(to)f(do,)k(since)c(w)n(e)g(will)h
(compute)f(the)523 2839 y(function)30 b(t)n(yp)r(e)f(for)g(a)f
(template)i(at)f(load-time,)g(so)f(they)i(will)f(corresp)r(ond)f(to)h
(whatev)n(er)523 2938 y(con\014guration)23 b(w)n(as)h(in)h(e\013ect)g
(then.)36 b(Ma)n(yb)r(e)24 b(w)n(e)h(don't)g(w)n(an)n(t)f(to)g(dic)n(k)
g(with)i(guards)d(here)523 3038 y(\(if)k(at)f(all\).)36
b(I)26 b(guess)g(w)n(e)f(can)h(defer)g(this)g(issue)g(un)n(til)g(w)n(e)
g(actually)g(supp)r(ort)f(di\013eren)n(t)i(FP)523 3137
y(con\014gurations.)52 b(But)34 b(it)g(w)n(ould)f(seem)g(prett)n(y)g
(losing)f(to)h(separately)f(\015ame)h(ab)r(out)h(all)523
3237 y(the)26 b(di\013eren)n(t)f(FP)g(con\014gurations)e(that)i(could)g
(b)r(e)h(used)f(to)g(op)r(en-co)r(de)g(+)g(whenev)n(er)f(w)n(e)523
3337 y(are)j(forced)g(to)g(closed-co)r(de)f(+.)648 3436
y(If)40 b(w)n(e)f(separately)g(rep)r(ort)g(eac)n(h)g(b)r(etter)h(p)r
(ossibly)f(applicable)g(template)i(that)f(w)n(e)523 3536
y(couldn't)35 b(use,)i(then)f(it)f(w)n(ould)g(b)r(e)g(reasonable)e(to)i
(rep)r(ort)f(an)n(y)h(conditional)f(template)523 3636
y(allo)n(w)n(ed)26 b(b)n(y)i(the)g(con\014guration.)648
3735 y(But)i(it)h(w)n(ould)f(probably)g(also)f(b)r(e)i(go)r(o)r(d)f(to)
g(giv)n(e)f(some)h(sort)g(of)g(hin)n(t)h(that)g(p)r(erhaps)523
3835 y(it)e(w)n(ould)f(b)r(e)g(a)g(go)r(o)r(d)g(time)g(to)h(mak)n(e)e
(sure)h(y)n(ou)f(understand)h(ho)n(w)g(to)g(tell)g(the)h(compiler)523
3934 y(to)34 b(compile)f(for)h(a)f(particular)f(con\014guration.)54
b(P)n(erhaps)32 b(if)i(there)g(is)g(a)f(template)h(that)523
4034 y(applies)e(*but)h(for)e(the)i(guard*,)f(then)h(w)n(e)f(could)g
(giv)n(e)g(a)g(note.)51 b(This)32 b(w)n(a)n(y)-7 b(,)33
b(if)f(someone)523 4134 y(thinks)j(they)g(are)e(b)r(eing)i(e\016cien)n
(t)g(b)n(y)f(thro)n(wing)f(in)i(lots)f(of)h(declarations,)g(w)n(e)f
(can)g(let)523 4233 y(them)28 b(kno)n(w)f(that)h(they)g(ma)n(y)f(ha)n
(v)n(e)f(to)h(do)h(more.)648 4333 y(I)34 b(guess)f(the)h(guard)f
(should)h(b)r(e)h(asso)r(ciated)d(with)j(the)f(template)h(rather)e
(than)h(the)523 4433 y(primitiv)n(e)27 b(t)n(yp)r(e.)36
b(This)27 b(w)n(ould)f(allo)n(w)g(L)-7 b(TN)27 b(and)g(friends)f(to)h
(easily)f(tell)h(whether)g(a)f(tem-)523 4532 y(plate)19
b(applies)f(in)h(this)g(con\014guration.)33 b(It)19 b(is)g(also)e
(probably)h(more)g(natural)g(for)g(some)g(sorts)523 4632
y(of)25 b(things:)35 b(with)25 b(some)g(hardw)n(are)d(v)-5
b(arian)n(ts,)25 b(it)g(ma)n(y)f(b)r(e)h(that)g(the)g(SBs)g(and)f
(represen)n(ta-)523 4731 y(tions)i(\(SCs\))g(are)f(really)g(the)h
(same,)g(but)g(there)g(some)f(di\013eren)n(t)h(allo)n(w)n(ed)e(op)r
(erations.)35 b(In)523 4831 y(this)30 b(case,)g(w)n(e)g(could)g(easily)
g(conditionalize)f(V)n(OPs)g(without)i(the)f(increased)f(complex-)1893
5147 y(104)p eop
%%Page: 105 106
105 105 bop 523 614 a Fk(it)n(y)34 b(due)f(to)h(b)r(ogus)f(SCs.)54
b(If)34 b(there)g(are)e(di\013eren)n(t)i(storage)e(resources,)h(then)h
(w)n(e)f(w)n(ould)523 714 y(conditionalize)27 b(Primitiv)n(e-T)n(yp)r
(e)f(as)h(w)n(ell.)523 989 y Ff(33.3)136 b(Sp)t(ecial-case)45
b(VMR)g(con)l(v)l(ert)g(metho)t(ds)523 1170 y Fk(\(defun)32
b(con)n(tin)n(uation-tn)e(\(con)n(t)g(&optional)g(\(c)n(hec)n(k-p)g
(t\)\))i(...\))46 b(Return)31 b(the)g(TN)g(whic)n(h)523
1270 y(holds)i(Con)n(tin)n(uation's)e(\014rst)i(result)f(v)-5
b(alue.)53 b(In)33 b(general)e(this)i(ma)n(y)f(emit)i(co)r(de)e(to)h
(load)523 1370 y(the)24 b(v)-5 b(alue)24 b(in)n(to)g(a)g(TN.)g(If)g
(Chec)n(k-P)f(is)h(true,)h(then)f(when)g(p)r(olicy)g(indicates,)h(co)r
(de)f(should)523 1469 y(b)r(e)k(emitted)g(to)g(c)n(hec)n(k)f(that)h
(the)f(v)-5 b(alue)28 b(satis\014es)f(the)h(con)n(tin)n(uation)e
(asserted)h(t)n(yp)r(e.)648 1569 y(\(defun)h(result-tn)g(\(con)n(t\))g
(...\))37 b(Return)28 b(the)g(TN)g(that)g(Con)n(tin)n(uation's)f
(\014rst)g(v)-5 b(alue)27 b(is)523 1669 y(deliv)n(ered)d(in.)36
b(In)25 b(general,)f(ma)n(y)g(emit)h(co)r(de)g(to)g(default)g(an)n(y)f
(additional)g(v)-5 b(alues)24 b(to)h(NIL.)648 1768 y(\(defun)h
(result-tns)f(\(con)n(t)h(n\))g(...\))37 b(Similar)25
b(to)g(Result-TN,)h(except)g(that)g(it)g(returns)f(a)523
1868 y(list)j(of)f(N)h(result)g(TNs,)f(one)h(for)f(eac)n(h)f(of)i(the)g
(\014rst)f(N)h(v)-5 b(alues.)648 1967 y(Nearly)25 b(all)h(op)r(en-co)r
(ded)g(functions)h(should)f(b)r(e)g(handled)h(using)f(standard)f
(template)523 2067 y(selection.)78 b(Some)41 b(\(all?\))78
b(exceptions:)64 b({)41 b(List,)k(List*)c(and)g(V)-7
b(ector)41 b(tak)n(e)f(arbitrary)523 2167 y(n)n(um)n(b)r(ers)29
b(of)g(argumen)n(ts.)42 b(Could)29 b(implemen)n(t)h(V)-7
b(ector)29 b(as)g(a)g(source)f(transform.)42 b(Could)523
2266 y(ev)n(en)37 b(do)g(List)h(in)f(a)g(transform)g(if)h(w)n(e)f
(explicitly)g(represen)n(t)g(the)g(stac)n(k)g(args)f(using)h({)523
2366 y(transform)f(it,)k(since)e(w)n(e)e(w)n(an)n(t)h(t)n(yp)r(e)h
(optimizations.)65 b({)37 b(Apply)h(is)f(w)n(eird.)65
b({)37 b(F)-7 b(unn)n(y)523 2466 y(functions)28 b(emitted)g(b)n(y)g
(the)g(compiler:)1893 5147 y(105)p eop
%%Page: 106 107
106 106 bop 1626 2029 a Fg(P)-5 b(art)65 b(IV)1051 2444
y Fi(Run-Time)77 b(system)1893 5147 y Fk(106)p eop
%%Page: 107 108
107 107 bop 523 1237 a Fg(Chapter)65 b(34)523 1652 y
Fi(The)77 b(T)-6 b(yp)6 b(e)77 b(System)1893 5147 y Fk(107)p
eop
%%Page: 108 109
108 108 bop 523 1237 a Fg(Chapter)65 b(35)523 1652 y
Fi(The)77 b(Info)h(Database)523 2084 y Fk(Ma)n(y)22 b(b)r(e)h(w)n(orth)
e(ha)n(ving)h(a)g(b)n(yte-co)r(de)f(represen)n(tation)g(for)h(in)n
(terpreted)g(co)r(de.)35 b(This)22 b(w)n(a)n(y)-7 b(,)523
2183 y(an)32 b(en)n(tire)f(system)h(could)f(b)r(e)i(compiled)e(in)n(to)
h(b)n(yte-co)r(de)f(for)h(debugging)f(\(the)h("c)n(hec)n(k-)523
2283 y(out")27 b(compiler?\).)648 2383 y(Giv)n(en)h(our)h(curren)n(t)f
(inclination)h(for)f(using)h(a)f(stac)n(k)g(mac)n(hine)h(to)f(in)n
(terpret)h(IR1,)g(it)523 2482 y(w)n(ould)e(b)r(e)h(straigh)n(tforw)n
(ard)d(to)i(la)n(y)n(er)f(a)h(b)n(yte-co)r(de)g(in)n(terpreter)g(on)g
(top)h(of)f(this.)648 2582 y(In)n(terpreter:)648 2682
y(Instead)h(of)h(ha)n(ving)e(no)i(in)n(terpreter,)f(or)g(a)g
(more-or-less)e(con)n(v)n(en)n(tional)g(in)n(terpreter,)523
2781 y(or)h(b)n(yte-co)r(de)g(in)n(terpreter,)f(ho)n(w)h(ab)r(out)h
(directly)f(executing)g(IR1?)648 2881 y(W)-7 b(e)35 b(run)f(through)g
(the)i(IR1)e(passes,)i(p)r(ossibly)e(skipping)g(optional)h(ones,)h(un)n
(til)f(w)n(e)523 2980 y(get)25 b(through)f(en)n(vironmen)n(t)h
(analysis.)34 b(Then)26 b(w)n(e)e(run)h(a)g(p)r(ost-pass)f(that)h
(annotates)g(IR1)523 3080 y(with)j(information)f(ab)r(out)h(where)f(v)
-5 b(alues)27 b(are)g(k)n(ept,)g(i.e.)37 b(the)28 b(stac)n(k)f(slot.)
648 3180 y(W)-7 b(e)25 b(can)g(lazily)g(con)n(v)n(ert)f(functions)h(b)n
(y)g(ha)n(ving)g(FUNCTION)g(mak)n(e)g(an)g(in)n(terpreted)523
3279 y(function)k(ob)5 b(ject)28 b(that)g(holds)g(the)g(co)r(de)g
(\(really)f(a)h(closure)f(o)n(v)n(er)f(the)j(in)n(terpreter\).)37
b(The)523 3379 y(\014rst)26 b(time)g(that)h(w)n(e)e(try)h(to)g(call)g
(the)g(function,)h(w)n(e)f(do)g(the)g(con)n(v)n(ersion)e(and)i(pro)r
(cessing.)523 3479 y(Also,)g(w)n(e)f(can)g(easily)f(k)n(eep)h(trac)n(k)
g(of)g(whic)n(h)h(in)n(terpreted)f(functions)g(w)n(e)g(ha)n(v)n(e)g
(expanded)523 3578 y(macros)k(in,)k(so)d(that)h(macro)f(rede\014nition)
h(automatically)f(in)n(v)-5 b(alidates)30 b(the)h(old)g(expan-)523
3678 y(sion,)c(causing)g(lazy)g(recon)n(v)n(ersion.)648
3778 y(Probably)20 b(the)j(in)n(terpreter)e(will)i(w)n(an)n(t)f(to)g
(represen)n(t)f(MVs)i(b)n(y)f(a)g(recognizable)e(struc-)523
3877 y(ture)31 b(that)g(is)f(alw)n(a)n(ys)f(heap-allo)r(cated.)45
b(This)30 b(w)n(a)n(y)-7 b(,)31 b(w)n(e)f(can)g(pun)n(t)i(the)f(stac)n
(k)e(issues)h(in-)523 3977 y(v)n(olv)n(ed)d(in)h(trying)f(to)g(spread)g
(MVs.)38 b(So)27 b(a)h(con)n(tin)n(uation)e(v)-5 b(alue)28
b(can)f(alw)n(a)n(ys)f(b)r(e)i(k)n(ept)g(in)523 4076
y(a)f(single)g(cell.)648 4176 y(The)20 b(compiler)h(can)f(ha)n(v)n(e)g
(some)g(sp)r(ecial)h(frobs)f(for)g(making)g(the)h(in)n(terpreter)f
(e\016cien)n(t,)523 4276 y(suc)n(h)k(as)f(a)g(call)h(op)r(eration)f
(that)h(extracts)f(argumen)n(ts)g(from)g(the)i(stac)n(k)e(slots)g
(designated)523 4375 y(b)n(y)36 b(a)f(con)n(tin)n(uation)g(list.)62
b(P)n(erhaps)34 b(\(v)-5 b(alues-map)r(car)34 b(fun)j(.)61
b(lists\))36 b(<==>)g(\(v)-5 b(alues-list)523 4475 y(\(map)r(car)27
b(fun)h(.)37 b(lists\)\))28 b(This)g(w)n(ould)f(b)r(e)h(used)g(with)g
(MV-CALL.)648 4575 y(This)f(sc)n(heme)f(seems)h(to)g(pro)n(vide)f
(nearly)h(all)f(of)i(the)f(adv)-5 b(an)n(tages)26 b(of)h(b)r(oth)g(the)
h(com-)523 4674 y(piler)34 b(and)h(con)n(v)n(en)n(tional)d(in)n
(terpretation.)57 b(The)35 b(only)f(signi\014can)n(t)g(disadv)-5
b(an)n(tage)33 b(with)523 4774 y(resp)r(ect)f(to)g(a)g(con)n(v)n(en)n
(tional)f(in)n(terpreter)g(is)h(that)h(there)f(is)g(the)h(one-time)f(o)
n(v)n(erhead)e(of)523 4873 y(con)n(v)n(ersion,)25 b(but)k(doing)e(this)
g(lazily)h(should)f(mak)n(e)g(this)h(quite)f(acceptable.)1893
5147 y(108)p eop
%%Page: 109 110
109 109 bop 648 614 a Fk(With)19 b(resp)r(ect)g(to)f(a)h(con)n(v)n(en)n
(tional)e(in)n(terpreter,)i(w)n(e)g(ha)n(v)n(e)e(ma)5
b(jor)18 b(adv)-5 b(an)n(tages:)30 b(+)19 b(F)-7 b(ull)523
714 y(syn)n(tax)30 b(c)n(hec)n(king:)43 b(safet)n(y)31
b(comparable)e(to)i(compiled)g(co)r(de.)48 b(+)30 b(Seman)n(tics)h
(similar)g(to)523 814 y(compiled)23 b(co)r(de)f(due)h(to)g(co)r(de)g
(sharing.)34 b(Similar)22 b(diagnostic)g(messages,)g(etc.)35
b(Reduction)523 913 y(of)g(error-prone)d(co)r(de)j(duplication.)59
b(+)35 b(P)n(oten)n(tial)f(for)g(full)i(t)n(yp)r(e)f(c)n(hec)n(king)f
(according)523 1013 y(to)g(declarations)d(\(w)n(ould)j(require)e
(running)i(IR1)f(optimize?\))55 b(+)34 b(Simpli\014es)g(debugger)523
1112 y(in)n(terface,)22 b(since)g(in)n(terpreted)f(co)r(de)h(can)f(lo)r
(ok)g(more)g(lik)n(e)g(compiled)h(co)r(de:)34 b(source)20
b(paths,)523 1212 y(edit)28 b(de\014nition,)g(etc.)648
1312 y(F)-7 b(or)34 b(all)h(non-run-time)f(sym)n(b)r(ol)h(annotations)f
(\(an)n(ything)g(other)h(than)g(SYMBOL-)523 1411 y(FUNCTION)j(and)f
(SYMBOL-V)-9 b(ALUE\),)36 b(w)n(e)h(use)g(the)g(compiler's)g(global)f
(database.)523 1511 y(MA)n(CR)n(O-FUNCTION)27 b(will)h(use)g(INF)n(O,)f
(rather)f(than)i(vice-v)n(ersa.)648 1611 y(When)33 b(doing)g(the)h(IR1)
f(phases)f(for)h(the)h(in)n(terpreter,)g(w)n(e)f(probably)f(w)n(an)n(t)
g(to)i(sup-)523 1710 y(press)24 b(optimizations)g(that)h(c)n(hange)f
(user-visible)f(function)j(calls:)35 b({)24 b(Don't)h(do)g(lo)r(cal)f
(call)523 1810 y(con)n(v)n(ersion)32 b(of)j(an)n(y)f(named)h(functions)
g(\(ev)n(en)g(lexical)f(ones\).)58 b(This)35 b(is)f(so)g(that)h(a)g
(call)523 1910 y(will)26 b(app)r(ear)f(on)h(the)g(stac)n(k)f(that)h(lo)
r(oks)f(lik)n(e)g(the)h(call)g(in)g(the)g(original)e(source.)35
b(The)26 b(k)n(ey-)523 2009 y(w)n(ord)k(and)h(optional)f(argumen)n(t)g
(transformations)f(done)i(b)n(y)g(lo)r(cal)f(call)h(mangle)f(things)523
2109 y(quite)35 b(a)g(bit.)59 b(Also,)37 b(note)e(lo)r(cal-call)e(con)n
(v)n(erting)g(prev)n(en)n(ts)h(unreferenced)h(argumen)n(ts)523
2208 y(from)29 b(b)r(eing)h(deleted,)g(whic)n(h)f(is)g(another)g
(non-ob)n(vious)e(transformation.)41 b({)29 b(Don't)h(run)523
2308 y(source-transforms,)c(IR1)i(transforms)f(and)h(IR1)g(optimizers.)
39 b(This)28 b(w)n(a)n(y)-7 b(,)28 b(TRA)n(CE)g(and)523
2408 y(BA)n(CKTRA)n(CE)21 b(will)i(sho)n(w)f(calls)g(with)h(the)g
(original)e(argumen)n(ts,)h(rather)g(than)h(the)f("op-)523
2507 y(timized")k(form,)g(etc.)37 b(Also,)26 b(for)g(the)g(in)n
(terpreter)g(it)g(will)g(actually)g(b)r(e)h(faster)e(to)h(call)g(the)
523 2607 y(original)37 b(function)j(\(whic)n(h)f(is)g(compiled\))g
(than)g(to)g("inline)g(expand")f(it.)72 b(Also,)41 b(this)523
2707 y(allo)n(ws)26 b(implemen)n(tation-dep)r(enden)n(t)i(transforms)e
(to)i(expand)f(in)n(to)648 2806 y(There)c(are)g(some)g(problems)h(with)
g(stepping,)h(due)f(to)g(our)f(non-syn)n(tactic)g(IR1)h(repre-)523
2906 y(sen)n(tation.)38 b(The)28 b(source)f(path)h(information)f(is)h
(the)h(k)n(ey)e(that)i(mak)n(es)e(this)h(conceiv)-5 b(able.)523
3005 y(W)e(e)29 b(can)g(skip)f(o)n(v)n(er)f(the)i(stepping)g(of)g(a)f
(subform)h(b)n(y)f(quietly)h(ev)-5 b(aluating)28 b(no)r(des)h(whose)523
3105 y(source)d(path)i(lies)g(within)g(the)g(form)f(b)r(eing)h(skipp)r
(ed.)648 3205 y(One)37 b(problem)g(with)h(determining)g(what)g(v)-5
b(alue)37 b(has)g(b)r(een)i(returned)e(b)n(y)g(a)h(form.)523
3304 y(With)23 b(a)e(function)i(call,)g(it)f(is)g(theoretically)f(p)r
(ossible)g(to)h(precisely)f(determine)h(this,)i(since)523
3404 y(if)j(w)n(e)g(complete)g(ev)-5 b(aluation)26 b(of)h(the)g
(argumen)n(ts,)f(then)i(w)n(e)e(arriv)n(e)f(at)i(the)g(Com)n(bination)
523 3504 y(no)r(de)c(whose)f(v)-5 b(alue)22 b(is)h(synon)n(ymous)e
(with)i(the)g(v)-5 b(alue)22 b(of)h(the)g(form.)35 b(W)-7
b(e)23 b(can)f(ev)n(en)g(detect)523 3603 y(this)h(case,)h(since)f(the)g
(No)r(de-Source)f(will)h(b)r(e)h(EQ)e(to)h(the)h(form.)35
b(And)23 b(w)n(e)g(can)g(also)f(detect)523 3703 y(when)37
b(w)n(e)f(un)n(wind)g(out)h(of)f(the)h(ev)-5 b(aluation,)38
b(since)e(w)n(e)g(will)h(lea)n(v)n(e)e(the)i(form)f(without)523
3802 y(ha)n(ving)27 b(ev)n(er)f(reac)n(hed)g(this)i(no)r(de.)648
3902 y(But)22 b(with)h(macros)e(and)i(sp)r(ecial-forms,)f(there)h(is)f
(no)g(no)r(de)h(whose)f(v)-5 b(alue)22 b(is)h(the)f(v)-5
b(alue)523 4002 y(of)33 b(the)g(form,)g(and)g(no)f(no)r(de)h(whose)f
(source)f(is)i(the)g(macro)e(call)h(or)g(sp)r(ecial)g(form.)52
b(W)-7 b(e)523 4101 y(can)28 b(still)h(detect)f(when)h(w)n(e)f(lea)n(v)
n(e)f(the)i(form,)f(but)h(w)n(e)f(can't)g(b)r(e)h(sure)f(whether)g
(this)g(w)n(as)523 4201 y(a)f(normal)g(ev)-5 b(aluation)27
b(result)g(or)g(an)g(explicit)h(RETURN-FR)n(OM.)648 4301
y(But)h(do)r(es)g(this)g(really)f(matter?)42 b(It)29
b(seems)g(that)h(w)n(e)e(can)h(prin)n(t)g(the)h(v)-5
b(alue)29 b(returned)523 4400 y(\(if)k(an)n(y\),)f(then)h(just)f(prin)n
(t)g(the)g(next)g(form)g(to)g(step.)49 b(In)32 b(the)h(rare)d(case)h
(where)g(w)n(e)h(did)523 4500 y(un)n(wind,)c(the)g(user)f(should)g(b)r
(e)h(able)g(to)f(\014gure)g(it)h(out.)648 4599 y([W)-7
b(e)20 b(can)g(lo)r(ok)f(at)h(this)h(as)e(a)h(side-e\013ect)g(of)g
(CPS:)g(there)g(isn't)g(an)n(y)f(di\013erence)h(b)r(et)n(w)n(een)523
4699 y(a)27 b("normal")f(return)h(and)g(a)h(non-lo)r(cal)e(one.])648
4799 y([Note)33 b(that)h(in)g(an)n(y)e(con)n(trol)h(transfer)f
(\(normal)h(or)f(otherwise\),)j(the)f(stepp)r(er)f(ma)n(y)523
4898 y(need)23 b(to)f(un)n(wind)h(out)g(of)g(an)f(arbitrary)f(n)n(um)n
(b)r(er)h(of)h(lev)n(els)f(of)g(stepping.)36 b(This)22
b(is)h(b)r(ecause)1893 5147 y(109)p eop
%%Page: 110 111
110 110 bop 523 614 a Fk(a)27 b(form)g(in)h(a)g(TR)f(p)r(osition)h(ma)n
(y)f(yield)g(its)h(to)f(a)h(no)r(de)f(arbitrarily)f(far)h(our.])648
714 y(Another)35 b(problem)g(is)h(with)g(deciding)f(what)h(form)f(is)g
(b)r(eing)h(stepp)r(ed.)62 b(When)36 b(w)n(e)523 814
y(start)23 b(ev)-5 b(aluating)23 b(a)g(no)r(de,)h(w)n(e)f(div)n(e)g(in)
n(to)g(co)r(de)h(that)f(is)h(nested)f(somewhere)f(do)n(wn)h(inside)523
913 y(that)32 b(form.)49 b(So)31 b(w)n(e)h(actually)f(ha)n(v)n(e)f(to)i
(do)f(a)g(lo)r(op)h(of)f(asking)g(questions)g(b)r(efore)g(w)n(e)h(do)
523 1013 y(an)n(y)27 b(ev)-5 b(aluation.)36 b(But)28
b(what)g(do)f(w)n(e)g(ask)g(ab)r(out?)648 1112 y(If)32
b(w)n(e)f(ask)g(ab)r(out)g(the)h(outermost)f(enclosing)g(form)g(that)h
(is)g(a)f(subform)g(of)h(the)g(the)523 1212 y(last)h(form)f(that)h(the)
g(user)g(said)f(to)h(execute,)h(then)f(w)n(e)g(migh)n(t)g(o\013er)f(a)g
(form)h(that)g(isn't)523 1312 y(really)27 b(ev)-5 b(aluated,)27
b(suc)n(h)g(as)g(a)g(LET)g(binding)h(list.)648 1411 y(But)37
b(once)f(again,)j(is)e(this)g(really)f(a)h(problem?)64
b(It)38 b(is)f(certainly)f(di\013eren)n(t)h(from)g(a)523
1511 y(con)n(v)n(en)n(tional)h(stepp)r(er,)43 b(but)d(a)f(prett)n(y)h
(go)r(o)r(d)f(argumen)n(t)f(could)i(b)r(e)g(made)f(that)h(it)g(is)523
1611 y(sup)r(erior.)33 b(Ha)n(v)n(en't)18 b(y)n(ou)g(ev)n(er)f(w)n(an)n
(ted)h(to)h(skip)f(the)h(ev)-5 b(aluation)18 b(of)h(all)f(the)h(LET)f
(bindings,)523 1710 y(but)27 b(not)g(the)g(b)r(o)r(dy?)37
b(W)-7 b(ouldn't)27 b(it)g(b)r(e)g(useful)g(to)g(b)r(e)g(able)f(to)h
(skip)f(the)h(DO)g(step)g(forms?)648 1810 y(All)34 b(of)g(this)g
(assumes)f(that)h(nob)r(o)r(dy)g(ev)n(er)f(w)n(an)n(ts)g(to)h(step)g
(through)f(the)h(guts)g(of)g(a)523 1910 y(macro)r(expansion.)65
b(This)38 b(seems)f(reasonable,)i(since)e(stepp)r(ers)h(are)f(for)g(w)n
(eenies,)j(and)523 2009 y(w)n(eenies)26 b(don't)h(de\014ne)g(macros)e
(\(hence)i(don't)g(debug)f(them\).)37 b(But)27 b(there)g(are)f
(probably)523 2109 y(some)h(w)n(eenies)g(who)g(don't)h(kno)n(w)f(that)h
(they)g(shouldn't)f(b)r(e)h(writing)g(macros.)648 2208
y(W)-7 b(e)25 b(could)g(handle)g(this)g(b)n(y)g(\014nding)h(the)f
("source)f(paths")g(in)h(the)h(expansion)e(of)h(eac)n(h)523
2308 y(macro)e(b)n(y)i(stic)n(king)f(some)g(sp)r(ecial)g(frob)h(in)g
(the)g(source)e(path)i(marking)f(the)h(place)f(where)523
2408 y(the)h(expansion)e(happ)r(ened.)36 b(When)25 b(w)n(e)f(hit)h(co)r
(de)f(again)f(that)i(is)f(in)g(the)h(source,)f(then)h(w)n(e)523
2507 y(rev)n(ert)g(to)i(the)g(normal)f(source)f(path.)37
b(Something)26 b(along)g(these)g(lines)h(migh)n(t)g(b)r(e)g(a)f(go)r(o)
r(d)523 2607 y(idea)h(an)n(yw)n(a)n(y)f(\(for)h(compiler)g(error)f
(messages,)g(for)h(example\).)648 2707 y(The)34 b(source)f(path)i(hac)n
(k)f(isn't)h(guaran)n(teed)d(to)j(w)n(ork)e(quite)i(so)e(w)n(ell)i(in)g
(generated)523 2806 y(co)r(de,)28 b(though,)g(since)f(macros)g(return)g
(stu\013)i(that)f(isn't)g(freshly)g(consed.)37 b(But)28
b(w)n(e)g(could)523 2906 y(probably)e(arrange)f(to)i(win)g(as)g(long)f
(as)g(an)n(y)h(giv)n(en)f(expansion)g(do)r(esn't)h(return)g(t)n(w)n(o)f
(EQ)523 3005 y(forms.)648 3105 y(It)h(migh)n(t)g(b)r(e)g(nice)g(to)f
(ha)n(v)n(e)g(a)h(command)f(that)h(skipp)r(ed)g(stepping)g(of)g(the)g
(form,)g(but)523 3205 y(prin)n(ted)35 b(the)h(results)f(of)g(eac)n(h)g
(outermost)f(enclosed)h(ev)-5 b(aluated)35 b(subform,)i(i.e.)60
b(if)36 b(y)n(ou)523 3304 y(used)27 b(this)h(on)f(the)h(DO)g
(step-list,)f(it)h(w)n(ould)f(prin)n(t)h(the)f(result)h(of)f(eac)n(h)g
(new-v)-5 b(alue)27 b(form.)523 3404 y(I)34 b(think)g(this)f(is)h
(implemen)n(table.)54 b(I)34 b(guess)f(what)g(y)n(ou)g(w)n(ould)g(do)g
(is)g(prin)n(t)h(eac)n(h)e(v)-5 b(alue)523 3504 y(deliv)n(ered)36
b(to)g(a)g(DEST)g(whose)g(source)f(form)h(is)g(the)h(curren)n(t)f(or)f
(an)h(enclosing)g(form.)523 3603 y(Along)i(with)g(the)g(v)-5
b(alue,)41 b(y)n(ou)c(w)n(ould)h(prin)n(t)g(the)g(source)f(form)g(for)h
(the)g(no)r(de)g(that)g(is)523 3703 y(computing)28 b(the)g(v)-5
b(alue.)648 3802 y(The)27 b(stepp)r(er)h(can)f(also)f(ha)n(v)n(e)h(a)g
("bac)n(k")e(command)i(that)h("unskips")f(or)f("unsteps".)523
3902 y(This)g(w)n(ould)f(allo)n(w)f(the)i(ev)-5 b(aluation)25
b(of)g(forms)g(that)h(are)f(pure)g(\(mo)r(dulo)g(lexical)g(v)-5
b(ariable)523 4002 y(setting\))31 b(to)f(b)r(e)h(undone.)46
b(This)30 b(is)h(useful,)g(since)g(in)g(stepping)f(it)h(is)f(common)g
(that)h(y)n(ou)523 4101 y(skip)36 b(a)g(form)g(that)g(y)n(ou)f
(shouldn't)i(ha)n(v)n(e,)g(or)e(get)h(confused)g(and)g(w)n(an)n(t)g(to)
g(restart)e(at)523 4201 y(some)27 b(earlier)f(p)r(oin)n(t.)648
4301 y(What)h(w)n(e)g(w)n(ould)f(do)h(is)g(remem)n(b)r(er)g(the)g
(curren)n(t)g(no)r(de)g(and)g(the)g(v)-5 b(alues)27 b(of)g(all)g(lo)r
(cal)523 4400 y(v)-5 b(ariables.)58 b(heap)34 b(b)r(efore)h(doing)f
(eac)n(h)g(step)i(or)e(skip)g(action.)59 b(W)-7 b(e)35
b(can)g(then)g(bac)n(k)f(up)523 4500 y(the)27 b(state)e(of)h(all)g
(lexical)g(v)-5 b(ariables)24 b(and)i(the)h("program)c(coun)n(ter".)35
b(T)-7 b(o)26 b(mak)n(e)f(this)i(w)n(ork)523 4599 y(righ)n(t)g(with)h
(set)f(closure)g(v)-5 b(ariables,)26 b(w)n(e)h(w)n(ould)g(cop)n(y)g
(the)h(cell's)f(v)-5 b(alue,)28 b(rather)e(than)i(the)523
4699 y(v)-5 b(alue)28 b(cell)f(itself.)648 4799 y([T)-7
b(o)26 b(b)r(e)h(fair,)f(note)g(that)h(this)g(could)f(easily)g(b)r(e)h
(done)f(with)h(our)f(curren)n(t)f(in)n(terpreter:)523
4898 y(the)j(stepp)r(er)g(could)f(cop)n(y)g(the)h(en)n(vironmen)n(t)e
(alists.])1893 5147 y(110)p eop
%%Page: 111 112
111 111 bop 648 614 a Fk(W)-7 b(e)27 b(can't)g(bac)n(k)f(up)h(the)h
("program)c(coun)n(ter")i(when)h(a)g(con)n(trol)f(transfer)g(lea)n(v)n
(es)f(the)523 714 y(curren)n(t)35 b(function,)j(since)d(this)h(state)f
(is)h(implicitly)g(represen)n(ted)e(in)i(the)g(in)n(terpreter's)523
814 y(state,)25 b(and)f(is)h(discarded)e(when)i(w)n(e)f(exit.)36
b(W)-7 b(e)25 b(probably)f(w)n(an)n(t)f(to)i(ask)e(for)h
(con\014rmation)523 913 y(b)r(efore)33 b(lea)n(ving)g(the)h(function)g
(to)g(giv)n(e)e(users)h(a)g(c)n(hance)g(to)h("unskip")f(the)h(forms)f
(in)h(a)523 1013 y(TR)28 b(p)r(osition.)648 1112 y(Another)e(question)h
(is)g(whether)f(the)i(con)n(v)n(en)n(tional)d(stepp)r(er)i(is)g(really)
e(a)i(go)r(o)r(d)f(thing)523 1212 y(to)38 b(imitate...)67
b(Ho)n(w)38 b(ab)r(out)f(an)h(editor-based)e(mouse-driv)n(en)g(in)n
(terface?)67 b(Instead)37 b(of)523 1312 y("skipping")d(and)h
("stepping",)i(y)n(ou)d(w)n(ould)h(just)h(designate)f(the)h(next)f
(form)g(that)h(y)n(ou)523 1411 y(w)n(an)n(ted)30 b(to)h(stop)g(at.)48
b(Instead)30 b(of)h(displa)n(ying)f(return)h(v)-5 b(alues,)32
b(y)n(ou)e(replace)g(the)i(source)523 1511 y(text)c(with)g(the)g(prin)n
(ted)g(represen)n(tation)d(of)j(the)g(v)-5 b(alue.)648
1611 y(It)26 b(w)n(ould)g(sho)n(w)g(the)h("program)d(coun)n(ter")h(b)n
(y)h(highligh)n(ting)g(the)h(*innermost*)e(form)523 1710
y(that)35 b(w)n(e)f(are)f(ab)r(out)h(to)g(ev)-5 b(aluate,)36
b(i.e.)57 b(the)35 b(source)e(form)h(for)g(the)g(no)r(de)h(that)f(w)n
(e)g(are)523 1810 y(stopp)r(ed)f(at.)54 b(It)33 b(w)n(ould)g(probably)f
(also)g(b)r(e)i(useful)f(to)g(displa)n(y)g(the)g(start)g(of)g(the)h
(form)523 1910 y(that)27 b(w)n(as)e(used)i(to)f(designate)g(the)g(next)
h(stopping)f(p)r(oin)n(t,)h(although)f(I)g(guess)g(this)h(could)523
2009 y(b)r(e)h(implied)g(b)n(y)g(the)g(mouse)f(p)r(osition.)648
2109 y(Suc)n(h)20 b(an)g(in)n(terface)g(w)n(ould)g(b)r(e)h(a)f(little)h
(harder)e(to)h(implemen)n(t)h(than)g(a)f(dum)n(b)g(stepp)r(er,)523
2208 y(but)35 b(it)g(w)n(ould)g(b)r(e)g(m)n(uc)n(h)f(easier)f(to)i
(use.)58 b([It)35 b(w)n(ould)f(b)r(e)h(imp)r(ossible)g(for)f(an)g(ev)-5
b(alho)r(ok)523 2308 y(stepp)r(er)28 b(to)f(do)g(this.])648
2408 y(Note:)56 b(compiler,)40 b(not)d(a)g(general)f(syn)n(tax)h(for)g
(accessing)f("sub-primitiv)n(es".)64 b(It's)523 2507
y(main)30 b(use)h(is)f(in)g(implemen)n(tation-dep)r(enden)n(t)h
(compiler)f(transforms.)43 b(It)31 b(sa)n(v)n(es)e(us)h(the)523
2607 y(e\013ort)23 b(of)h(de\014ning)g(a)f("phon)n(y)g(function")g
(\(that)i(is)e(not)h(really)e(de\014ned\),)k(and)d(also)g(allo)n(ws)523
2707 y(direct)g(comm)n(unication)f(with)i(the)f(co)r(de)g(generator)e
(through)h(co)r(degen-info)h(argumen)n(ts.)648 2806 y(Some)h(primitiv)n
(es)g(ma)n(y)g(b)r(e)g(exp)r(orted)g(from)h(the)f(VM)h(so)f(that)h(mak)
n(e)e(it)i(explicit)g(that)523 2906 y(an)k(escap)r(e)h(routine)f(or)g
(in)n(terpreter)f(stub)j(is)e(assuming)g(an)g(op)r(eration)g(is)h
(implemen)n(ted)523 3005 y(b)n(y)d(the)h(compiler.)648
3105 y(#|)1893 5147 y(111)p eop
%%Page: 112 113
112 112 bop 523 1237 a Fg(Chapter)65 b(36)523 1652 y
Fi(Debugger)78 b(Information)523 2084 y Fk(Although)22
b(the)g(compiler's)f(great)g(freedom)g(in)h(c)n(hoice)f(of)h(function)g
(call)f(con)n(v)n(en)n(tions)g(and)523 2183 y(v)-5 b(ariable)22
b(represen)n(tations)e(has)j(ma)5 b(jor)21 b(e\016ciency)i(adv)-5
b(an)n(tages,)22 b(it)h(also)e(has)h(unfortunate)523
2283 y(consequences)34 b(for)h(the)g(debugger.)59 b(The)35
b(debug)g(information)g(that)h(w)n(e)e(need)i(is)f(ev)n(en)523
2383 y(more)h(elab)r(orate)g(than)h(for)g(con)n(v)n(en)n(tional)e
("compiled")h(languages,)i(since)f(w)n(e)g(cannot)523
2482 y(ev)n(en)e(do)g(a)g(simple)g(bac)n(ktrace)f(without)i(some)f
(debug)g(information.)59 b(Ho)n(w)n(ev)n(er,)36 b(once)523
2582 y(ha)n(ving)23 b(gone)g(this)h(far,)h(it)f(is)g(not)g(that)g
(di\016cult)h(to)f(go)f(the)h(extra)f(distance,)i(and)f(pro)n(vide)523
2682 y(full)k(source)f(lev)n(el)g(debugging)f(of)i(compiled)g(co)r(de.)
648 2781 y(F)-7 b(ull)24 b(debug)h(information)e(has)h(a)g(substan)n
(tial)f(space)h(p)r(enalt)n(y)-7 b(,)25 b(so)e(w)n(e)h(allo)n(w)f
(di\013eren)n(t)523 2881 y(lev)n(els)k(of)g(debug)g(information)g(to)h
(b)r(e)f(sp)r(eci\014ed.)37 b(In)28 b(the)g(extreme)f(case,)g(w)n(e)g
(can)g(totally)523 2980 y(omit)h(debug)f(information.)523
3255 y Ff(36.1)136 b(The)44 b(Debug-Info)h(Structure)523
3437 y Fk(The)21 b(Debug-Info)g(structure)f(directly)h(represen)n(ts)e
(information)i(ab)r(out)f(the)i(source)d(co)r(de,)523
3537 y(and)29 b(p)r(oin)n(ts)g(to)g(other)f(structures)g(that)i
(describ)r(e)e(the)i(la)n(y)n(out)e(of)h(run-time)g(data)f(struc-)523
3636 y(tures.)648 3736 y(Mak)n(e)j(some)g(sort)g(of)h(minimal)g
(debug-info)g(format)f(that)i(w)n(ould)e(supp)r(ort)h(at)g(least)523
3835 y(the)27 b(common)f(cases)g(of)h(lev)n(el)f(1)g(\(since)h(that)g
(is)f(what)h(w)n(e)f(w)n(ould)h(release\),)e(and)i(p)r(erhaps)523
3935 y(lev)n(el)c(0.)36 b(Actually)-7 b(,)25 b(it)f(seems)f(it)i(w)n
(ouldn't)f(b)r(e)g(hard)f(to)h(crunc)n(h)f(nearly)g(all)h(of)g(the)g
(debug-)523 4035 y(function)33 b(structure)e(and)h(debug-info)g
(function)g(map)g(in)n(to)g(a)g(single)f(b)n(yte-v)n(ector.)49
b(W)-7 b(e)523 4134 y(could)28 b(ha)n(v)n(e)g(an)g(uncrunc)n(h)g
(function)h(that)g(restored)e(the)i(curren)n(t)e(format.)39
b(This)29 b(w)n(ould)523 4234 y(b)r(e)c(used)f(b)n(y)g(the)h(debugger,)
f(and)g(also)f(could)i(b)r(e)f(used)h(b)n(y)f(purify)g(to)g(delete)h
(parts)f(of)g(the)523 4334 y(debug-info)j(ev)n(en)h(when)g(the)g
(compiler)f(dumps)h(it)h(in)f(crunc)n(hed)f(form.)37
b([Note)28 b(that)g(this)523 4433 y(isn't)g(terribly)f(imp)r(ortan)n(t)
g(if)h(purify)g(is)g(smart)e(ab)r(out)i(debug-info...])37
b(|#)648 4533 y(Compiled)27 b(source)g(map)g(represen)n(tation:)648
4632 y([###)32 b(store)f(in)h(debug-function)g(PC)f(at)h(whic)n(h)g(en)
n(v)f(is)h(prop)r(erly)f(initialized,)i(i.e.)523 4732
y(args)27 b(\(and)i(return-p)r(c,)g(etc.\))41 b(in)29
b(in)n(ternal)g(lo)r(cations.)39 b(This)29 b(is)g(where)f(a)h
(:function-start)523 4832 y(breakp)r(oin)n(t)e(w)n(ould)g(break.])1893
5147 y(112)p eop
%%Page: 113 114
113 113 bop 648 614 a Fk([###)28 b(Note)g(that)g(that)g(w)n(e)f(can)g
(easily)g(cac)n(he)g(the)h(form-n)n(um)n(b)r(er)e(=>)i(source-path)523
714 y(or)k(form-n)n(um)n(b)r(er)f(=>)i(form)f(translation)f(using)h(a)h
(v)n(ector)e(indexed)h(b)n(y)h(form)f(n)n(um)n(b)r(ers)523
814 y(that)c(w)n(e)f(build)h(during)f(a)h(w)n(alk.])648
913 y(Instead)j(of)g(using)g(source)f(paths)h(in)h(the)g(debug-info,)g
(use)f("form)f(n)n(um)n(b)r(ers".)47 b(The)523 1013 y(form)27
b(n)n(um)n(b)r(er)f(of)h(a)f(form)h(is)g(the)g(n)n(um)n(b)r(er)g(of)f
(forms)h(that)g(w)n(e)f(w)n(alk)g(to)h(reac)n(h)f(that)h(form)523
1112 y(when)22 b(doing)f(a)g(pre-order)f(w)n(alk)h(of)g(the)h(source)f
(form.)34 b([Migh)n(t)22 b(w)n(an)n(t)f(to)g(use)h(a)f(p)r(ost-order)
523 1212 y(w)n(alk,)27 b(as)g(that)h(w)n(ould)f(more)g(closely)f(appro)
n(ximate)g(ev)-5 b(aluation)27 b(order.])648 1312 y(W)-7
b(e)23 b(probably)f(w)n(an)n(t)g(to)h(con)n(tin)n(ue)g(using)g
(source-paths)e(in)i(the)h(compiler,)f(since)g(they)523
1411 y(are)k(quic)n(k)g(to)g(compute)h(and)f(to)h(get)f(y)n(ou)g(to)h
(a)f(particular)f(form.)37 b([###)28 b(But)g(actually)-7
b(,)523 1511 y(I)26 b(guess)f(w)n(e)h(don't)g(ha)n(v)n(e)f(to)g
(precompute)h(the)g(source)f(paths)h(and)g(annotate)f(no)r(des)h(with)
523 1611 y(them:)64 b(instead)41 b(w)n(e)f(could)h(annotate)f(the)i(no)
r(des)e(with)i(the)f(actual)f(original)g(source)523 1710
y(form.)47 b(Then)32 b(if)f(w)n(e)g(w)n(an)n(ted)g(to)g(\014nd)g(the)h
(lo)r(cation)f(of)g(that)g(form,)h(w)n(e)f(could)g(w)n(alk)f(the)523
1810 y(ro)r(ot)g(source)g(form,)h(lo)r(oking)f(that)h(original)e(form.)
47 b(But)31 b(w)n(e)f(migh)n(t)h(still)g(need)g(to)g(en)n(ter)523
1910 y(all)i(the)h(forms)g(in)f(a)h(hash)n(table)e(so)h(that)h(w)n(e)g
(can)f(tell)h(during)f(IR1)h(con)n(v)n(ersion)d(that)j(a)523
2009 y(giv)n(en)27 b(form)g(app)r(eared)g(in)h(the)g(original)e
(source.])648 2109 y(Note)g(that)g(form)g(n)n(um)n(b)r(ers)g(ha)n(v)n
(e)f(an)h(in)n(teresting)f(prop)r(ert)n(y:)35 b(it)27
b(is)f(quite)g(e\016cien)n(t)g(to)523 2208 y(determine)f(whether)f(an)g
(arbitrary)f(form)h(is)h(a)f(subform)g(of)h(some)f(other)g(form,)h
(since)f(the)523 2308 y(form)h(n)n(um)n(b)r(er)h(of)f(B)h(will)g(b)r(e)
g(>)g(than)f(A's)h(n)n(um)n(b)r(er)f(and)h(<)g(A's)f(next)h(sibling's)f
(n)n(um)n(b)r(er)h(i\013)523 2408 y(B)i(is)f(a)g(subform)g(of)h(A.)648
2507 y(This)35 b(should)g(b)r(e)h(quite)g(useful)g(for)f(doing)g(the)g
(source=>p)r(c)g(mapping)g(in)h(the)g(de-)523 2607 y(bugger,)24
b(since)h(that)g(problem)g(reduces)f(to)h(\014nding)g(the)h(subset)f
(of)g(the)g(kno)n(wn)f(lo)r(cations)523 2707 y(that)k(are)f(for)g
(subforms)g(of)g(the)h(sp)r(eci\014ed)g(form.)648 2806
y(Assume)d(a)h(b)n(yte)g(v)n(ector)e(with)j(a)e(standard)g(v)-5
b(ariable-length)25 b(in)n(teger)g(format,)g(some-)523
2906 y(thing)g(lik)n(e)f(this:)36 b(0..253)23 b(=>)h(the)h(in)n(teger)f
(254)f(=>)h(read)g(next)h(t)n(w)n(o)f(b)n(ytes)g(for)g(in)n(teger)g
(255)523 3005 y(=>)j(read)g(next)h(four)f(b)n(ytes)g(for)h(in)n(teger)
648 3105 y(Then)j(a)g(compiled)g(debug)g(blo)r(c)n(k)f(is)h(just)h(a)f
(sequence)g(of)g(v)-5 b(ariable-length)30 b(in)n(tegers)523
3205 y(in)25 b(a)g(particular)e(order,)h(something)h(lik)n(e)f(this:)36
b(n)n(um)n(b)r(er)25 b(of)g(successors)e(...o\013sets)h(of)h(eac)n(h)
523 3304 y(successor)f(in)i(the)g(function's)g(blo)r(c)n(ks)f(v)n
(ector...)35 b(\014rst)25 b(PC)g([o\013set)h(of)g(\014rst)f(top-lev)n
(el)g(form)523 3404 y(\(in)36 b(forms\))e(\(only)h(if)h(not)f(comp)r
(onen)n(t)g(default\)])h(form)e(n)n(um)n(b)r(er)h(of)g(\014rst)g
(source)f(form)523 3504 y(\014rst)26 b(liv)n(e)g(mask)g(\(length)h(in)g
(b)n(ytes)f(determined)h(b)n(y)f(n)n(um)n(b)r(er)h(of)f(V)-9
b(ARIABLES\))27 b(...more)523 3603 y(<PC,)g(top-lev)n(el)g(form)g
(o\013set,)h(form-n)n(um)n(b)r(er,)f(liv)n(e-set>)g(tuples...)648
3703 y(W)-7 b(e)24 b(determine)f(the)h(n)n(um)n(b)r(er)g(of)f(lo)r
(cations)g(recorded)f(in)i(a)f(blo)r(c)n(k)g(b)n(y)g(the)h(\014nding)g
(the)523 3802 y(start)j(of)h(the)g(next)f(compiled)h(debug)f(blo)r(c)n
(k)g(in)h(the)g(blo)r(c)n(ks)f(v)n(ector.)648 3902 y([###)j(Actually)-7
b(,)30 b(only)f(need)g(2)g(bits)h(for)e(n)n(um)n(b)r(er)h(of)h
(successors)d(0,1,2.)41 b(W)-7 b(e)29 b(migh)n(t)523
4002 y(w)n(an)n(t)e(to)h(use)f(other)g(bits)h(in)g(the)g(\014rst)f(b)n
(yte)h(to)f(indicate)h(the)g(kind)g(of)f(lo)r(cation.])37
b([###)523 4101 y(W)-7 b(e)34 b(could)f(supp)r(ort)g(lo)r(cal)g(pac)n
(king)g(b)n(y)g(ha)n(ving)f(a)h(general)f(concept)h(of)h("alternate)e
(lo-)523 4201 y(cations")i(instead)h(of)h(just)g(regular)d(and)i(sa)n
(v)n(e)f(lo)r(cations.)60 b(The)35 b(lo)r(cation)g(w)n(ould)g(ha)n(v)n
(e)523 4301 y(a)f(bit)h(indicating)g(that)g(there)f(are)g(alternate)f
(lo)r(cations,)j(in)f(whic)n(h)f(case)g(w)n(e)g(read)g(the)523
4400 y(n)n(um)n(b)r(er)29 b(of)g(alternate)g(lo)r(cations)f(and)i(then)
f(that)h(man)n(y)f(more)f(SC-OFFSETs.)41 b(In)30 b(the)523
4500 y(debug-blo)r(c)n(k,)25 b(w)n(e)f(w)n(ould)h(ha)n(v)n(e)f(a)g
(second)h(bit)h(mask)e(with)i(bits)f(set)g(for)g(TNs)g(that)g(are)f(in)
523 4599 y(an)h(alternate)f(lo)r(cation.)36 b(W)-7 b(e)25
b(then)h(read)f(a)f(n)n(um)n(b)r(er)h(for)g(eac)n(h)g(suc)n(h)g(TN,)g
(with)h(the)f(v)-5 b(alue)523 4699 y(b)r(eing)28 b(in)n(terpreted)f(as)
g(an)g(index)h(in)n(to)f(the)h(Lo)r(cation's)f(alternate)f(lo)r
(cations.])648 4799 y(It)41 b(lo)r(oks)e(lik)n(e)i(using)f(structures)g
(for)g(the)h(compiled-lo)r(cation-info)e(is)i(to)r(o)f(bulky)-7
b(.)523 4898 y(Instead)27 b(w)n(e)h(need)f(some)g(pac)n(k)n(ed)g
(binary)g(represen)n(tation.)1893 5147 y(113)p eop
%%Page: 114 115
114 114 bop 648 614 a Fk(First,)20 b(let's)g(represen)n(t)e(a)h
(SC/o\013set)f(pair)h(with)g(an)g("SC-O\013set",)h(whic)n(h)f(is)g(an)g
(in)n(teger)523 714 y(with)34 b(the)h(SC)f(in)g(the)g(lo)n(w)f(5)g
(bits)i(and)e(the)i(o\013set)e(in)h(the)h(remaining)e(bits:)49
b(||||)523 814 y(|||||||||||||-)31 b(|)g(O\013set)g(\(as)g(man)n(y)f
(bits)h(as)g(necessary\))e(|)i(SC)h(\(5)523 913 y(bits\))e(|)f
(|||||||||||||||||-)g(Probably)f(the)h(result)g(should)g(b)r(e)523
1013 y(constrained)22 b(to)i(\014t)f(in)h(a)f(\014xn)n(um,)i(since)e
(it)h(will)f(b)r(e)h(more)f(e\016cien)n(t)g(and)g(giv)n(es)g(more)f
(than)523 1112 y(enough)27 b(p)r(ossible)g(o\013sets.)648
1212 y(W)-7 b(e)33 b(can)f(the)i(represen)n(t)e(a)g(compiled)h(lo)r
(cation)f(lik)n(e)h(this:)48 b(single)32 b(b)n(yte)h(of)g(b)r(o)r
(olean)523 1312 y(\015ags:)j(unin)n(terned)27 b(name)g(pac)n(k)-5
b(aged)26 b(name)h(en)n(vironmen)n(t-liv)n(e)f(has)h(distinct)h(sa)n(v)
n(e)d(lo)r(ca-)523 1411 y(tion)30 b(has)f(ID)h(\(name)f(not)h(unique)f
(in)h(this)g(fun\))g(name)g(length)f(in)h(b)n(ytes)f(\(as)g(v)-5
b(ar-length)523 1511 y(in)n(teger\))32 b(...name)g(b)n(ytes...)51
b([if)33 b(pac)n(k)-5 b(aged,)32 b(v)-5 b(ar-length)31
b(in)n(teger)h(that)h(is)f(pac)n(k)-5 b(age)31 b(name)523
1611 y(length])d(...pac)n(k)-5 b(age)27 b(name)h(b)n(ytes...])38
b([If)29 b(has)e(ID,)i(ID)g(as)e(v)-5 b(ar-length)27
b(in)n(teger])h(SC-O\013set)523 1710 y(of)35 b(primary)f(lo)r(cation)h
(\(as)g(v)-5 b(ar-length)34 b(in)n(teger\))g([If)i(has)f(sa)n(v)n(e)e
(SC,)j(SC-O\013set)f(of)g(sa)n(v)n(e)523 1810 y(lo)r(cation)27
b(\(as)g(v)-5 b(ar-length)27 b(in)n(teger\)])648 1910
y(But)34 b(for)f(a)h(whizzy)g(breakp)r(oin)n(t)f(facilit)n(y)-7
b(,)35 b(w)n(e)f(w)n(ould)f(need)h(a)g(go)r(o)r(d)f(source=>co)r(de)523
2009 y(map.)44 b(Dumping)30 b(a)g(complete)f(co)r(de=>source)g(map)g
(migh)n(t)h(b)r(e)g(as)g(go)r(o)r(d)f(a)g(w)n(a)n(y)g(as)g(an)n(y)523
2109 y(to)d(represen)n(t)f(this,)i(due)g(to)f(the)g(one-to-man)n(y)f
(relationship)g(b)r(et)n(w)n(een)h(source)f(and)i(co)r(de)523
2208 y(lo)r(cations.)648 2308 y(W)-7 b(e)28 b(migh)n(t)g(b)r(e)g(able)g
(to)f(get)h(a)n(w)n(a)n(y)e(with)i(just)h(storing)e(the)h(source)f(lo)r
(cations)g(for)g(the)523 2408 y(b)r(eginnings)34 b(of)h(blo)r(c)n(ks)f
(and)h(main)n(taining)f(a)g(mapping)g(from)h(co)r(de)f(ranges)f(to)i
(blo)r(c)n(ks.)523 2507 y(This)28 b(w)n(ould)f(b)r(e)i(\014ne)f(b)r
(oth)g(for)g(the)g(pro\014ler)f(and)h(for)f(the)h("where)f(am)h(I)g
(running)f(no)n(w")523 2607 y(indication.)36 b(Users)26
b(migh)n(t)g(also)f(b)r(e)h(con)n(vinced)f(that)i(it)f(w)n(as)f(most)h
(in)n(teresting)f(to)h(break)523 2707 y(at)39 b(blo)r(c)n(k)f(starts,)i
(but)f(I)g(don't)g(really)e(kno)n(w)h(ho)n(w)g(easily)g(p)r(eople)g
(could)h(dev)n(elop)f(an)523 2806 y(understanding)27
b(of)h(basic)f(blo)r(c)n(ks.)648 2906 y(It)40 b(could)f(also)g(b)r(e)h
(a)f(bit)h(tric)n(ky)f(to)g(map)h(an)f(arbitrary)f(user-designated)g
(source)523 3005 y(lo)r(cation)i(to)g(some)f("closest")g(source)g(lo)r
(cation)g(actually)h(in)g(the)h(debug)f(info.)74 b(This)523
3105 y(problem)24 b(probably)f(exists)h(to)g(some)g(degree)f(ev)n(en)g
(with)i(a)f(full)h(source)e(map,)i(since)f(some)523 3205
y(forms)34 b(will)h(nev)n(er)f(app)r(ear)g(as)g(the)h(source)e(of)i(an)
n(y)f(no)r(de.)59 b(It)35 b(seems)f(y)n(ou)g(migh)n(t)h(ha)n(v)n(e)523
3304 y(to)f(negotiate)g(with)h(the)g(user.)57 b(He)34
b(w)n(ould)g(mouse)g(something,)i(and)e(then)h(y)n(ou)f(w)n(ould)523
3404 y(highligh)n(t)h(some)g(source)f(form)h(that)h(has)e(a)h(common)g
(pre\014x)g(\(i.e.)61 b(is)35 b(a)g(pre\014x)g(of)g(the)523
3504 y(user)c(path,)i(or)d(vice-v)n(ersa.\))47 b(If)32
b(they)g(aren't)f(happ)n(y)g(with)h(the)g(result,)h(they)e(could)h(try)
523 3603 y(something)27 b(else.)36 b(In)27 b(some)g(cases,)f(the)i
(designated)e(path)h(migh)n(t)g(b)r(e)h(a)e(pre\014x)h(of)g(sev)n(eral)
523 3703 y(paths.)36 b(This)24 b(am)n(biguit)n(y)g(migh)n(t)h(b)r(e)g
(resolv)n(ed)e(b)n(y)h(pic)n(king)h(the)g(shortest)e(path)i(or)f
(letting)523 3802 y(the)k(user)f(c)n(ho)r(ose.)648 3902
y(A)n(t)41 b(the)h(primitiv)n(e)f(lev)n(el,)j(I)d(guess)g(what)g(this)h
(means)e(is)h(that)h(the)g(structure)e(of)523 4002 y(source)g(lo)r
(cations)h(\(i.e.)79 b(source)40 b(paths\))h(m)n(ust)h(b)r(e)g(kno)n
(wn,)i(and)d(the)h(source=>co)r(de)523 4101 y(op)r(eration)31
b(should)h(return)g(a)f(list)i(of)f(<source,co)r(de>)f(pairs,)h(rather)
f(than)i(just)f(a)g(list)g(of)523 4201 y(co)r(de)h(lo)r(cations.)54
b(This)33 b(allo)n(ws)f(the)i(debugger)e(to)i(resolv)n(e)d(the)j(am)n
(biguit)n(y)f(ho)n(w)n(ev)n(er)e(it)523 4301 y(w)n(an)n(ts.)648
4400 y(I)f(guess)f(the)i(formal)e(de\014nition)i(of)f(whic)n(h)g
(source)f(paths)h(w)n(e)g(w)n(ould)f(return)h(is:)42
b(All)523 4500 y(source)33 b(paths)h(in)h(the)f(debug)g(info)h(that)f
(ha)n(v)n(e)f(a)h(maximal)g(common)f(pre\014x)h(with)h(the)523
4599 y(sp)r(eci\014ed)25 b(path.)37 b(i.e.)f(if)26 b(sev)n(eral)d
(paths)i(ha)n(v)n(e)f(the)i(complete)f(sp)r(eci\014ed)g(path)g(as)g(a)g
(pre\014x,)523 4699 y(w)n(e)30 b(return)g(them)h(all.)45
b(Otherwise,)30 b(all)g(paths)g(with)h(an)f(equally)g(large)f(common)h
(pre\014x)523 4799 y(are)25 b(returned:)35 b(if)27 b(the)f(path)g(with)
h(the)f(most)f(in)i(common)e(matc)n(hes)g(only)h(the)g(\014rst)g(three)
523 4898 y(elemen)n(ts,)34 b(then)e(w)n(e)g(return)g(all)g(paths)h
(that)f(matc)n(h)g(in)h(the)g(\014rst)f(three)g(elemen)n(ts.)51
b(As)1893 5147 y(114)p eop
%%Page: 115 116
115 115 bop 523 614 a Fk(a)30 b(degenerate)e(case)i(\(whic)n(h)g
(probably)f(shouldn't)h(happ)r(en\),)i(if)e(there)g(is)g(no)g(path)g
(with)523 714 y(an)n(ything)d(in)h(common,)f(then)h(w)n(e)f(return)g
(*all*)g(of)g(the)h(paths.)648 814 y(In)f(the)g(DEBUG-SOUR)n(CE)g
(structure)f(w)n(e)h(ma)n(y)f(ultimately)i(w)n(an)n(t)e(a)h(v)n(ector)f
(of)h(the)523 913 y(start)39 b(p)r(ositions)h(of)f(eac)n(h)h(source)e
(form,)43 b(since)c(that)h(w)n(ould)g(mak)n(e)f(it)h(easier)f(for)g
(the)523 1013 y(debugger)28 b(to)h(lo)r(cate)g(the)h(source.)40
b(It)30 b(could)f(just)h(op)r(en)f(the)h(\014le,)g(FILE-POSITION)d(to)
523 1112 y(the)e(form,)f(do)g(a)g(READ,)h(then)f(lo)r(op)g(do)n(wn)g
(the)h(source)e(path.)36 b(Of)24 b(course,)g(it)g(could)g(read)523
1212 y(eac)n(h)j(form)g(starting)g(from)g(the)h(b)r(eginning,)g(but)g
(that)g(migh)n(t)f(b)r(e)h(to)r(o)g(slo)n(w.)648 1312
y(Do)34 b(XEPs)f(really)g(need)h(Debug-F)-7 b(unctions?)56
b(The)34 b(only)f(time)i(that)f(w)n(e)g(will)g(com-)523
1411 y(monly)23 b(end)h(up)g(in)g(the)g(debugger)f(on)g(an)h(XEP)f(is)g
(when)h(an)f(argumen)n(t)g(t)n(yp)r(e)h(c)n(hec)n(k)e(fails.)523
1511 y(But)28 b(I)g(supp)r(ose)f(it)h(w)n(ould)f(b)r(e)h(nice)g(to)f(b)
r(e)h(able)f(to)h(prin)n(t)f(the)h(argumen)n(ts)f(passed...)648
1611 y(Note)33 b(that)g(assem)n(bler-lev)n(el)e(co)r(de)i(motion)g(suc)
n(h)g(as)f(pip)r(eline)i(reorganization)d(can)523 1710
y(cause)h(problems)f(with)i(our)f(PC)g(maps.)51 b(The)32
b(assem)n(bler)f(needs)h(to)g(kno)n(w)g(that)h(debug)523
1810 y(info)28 b(mark)n(ers)d(are)i(di\013eren)n(t)g(from)g(real)g(lab)
r(els)g(an)n(yw)n(a)n(y)-7 b(,)26 b(so)h(I)g(supp)r(ose)g(it)h(could)f
(inhibit)523 1910 y(motion)32 b(across)d(debug)j(mark)n(ers)e
(conditional)h(on)g(p)r(olicy)-7 b(.)49 b(It)33 b(seems)e(un)n(w)n
(orth)n(while)g(to)523 2009 y(remem)n(b)r(er)c(the)h(no)r(de)g(for)f
(eac)n(h)f(individual)i(instruction.)648 2109 y(F)-7
b(or)26 b(tracing)g(blo)r(c)n(k-compiled)g(calls:)35
b(Info)27 b(ab)r(out)g(return)g(v)-5 b(alue)26 b(passing)g(lo)r
(cations?)523 2208 y(Info)i(ab)r(out)f(where)g(all)h(the)g(returns)e
(are?)648 2308 y(W)-7 b(e)26 b(de\014nitely)h(need)f(the)h(return-v)-5
b(alue)25 b(passing)g(lo)r(cations)g(for)h(debug-return.)35
b(The)523 2408 y(question)25 b(is)h(what)f(the)h(in)n(terface)f(should)
g(b)r(e.)37 b(W)-7 b(e)26 b(don't)f(really)g(w)n(an)n(t)g(to)g(ha)n(v)n
(e)f(a)i(visible)523 2507 y(debug-function-return-lo)r(cations)d(op)r
(eration,)h(since)g(there)h(are)e(v)-5 b(arious)24 b(v)-5
b(alue)24 b(passing)523 2607 y(con)n(v)n(en)n(tions,)i(and)h(w)n(e)h(w)
n(an)n(t)f(to)g(pap)r(er)g(o)n(v)n(er)f(the)i(di\013erences.)648
2707 y(Probably)h(should)i(b)r(e)h(a)e(compiler)h(option)g(to)g
(initialize)g(stac)n(k)f(frame)h(to)g(a)g(sp)r(ecial)523
2806 y(uninitialized)25 b(ob)5 b(ject)24 b(\(some)g(random)g(immediate)
g(t)n(yp)r(e\).)37 b(This)24 b(w)n(ould)g(aid)g(debugging,)523
2906 y(and)k(w)n(ould)g(also)f(help)h(GC)h(problems.)38
b(F)-7 b(or)27 b(the)i(latter)f(reason)e(esp)r(ecially)-7
b(,)28 b(this)h(should)523 3005 y(b)r(e)f(lo)r(cally-turn-onable)e
(\(o\013)h(of)h(p)r(olicy?)37 b(the)28 b(new)g(debug-info)f(qualit)n
(y?\).)648 3105 y(What)37 b(ab)r(out)h(the)f(in)n(terface)g(b)r(et)n(w)
n(een)g(the)h(ev)-5 b(aluator)36 b(and)h(the)h(debugger?)65
b(\(i.e.)523 3205 y(what)30 b(happ)r(ens)f(on)h(an)f(error,)f(etc.\))44
b(Compiler)29 b(error)f(handling)h(should)g(b)r(e)h(in)n(tegrated)523
3304 y(with)e(run-time)f(error)e(handling.)37 b(Ideally)26
b(the)i(error)d(messages)h(should)h(lo)r(ok)f(the)i(same.)523
3404 y(Practically)-7 b(,)33 b(in)g(some)g(cases)f(the)i(run-time)f
(errors)e(will)i(ha)n(v)n(e)f(less)h(information.)53
b(But)523 3504 y(the)28 b(error)e(should)h(lo)r(ok)g(the)h(same)f(to)g
(the)h(debugger)f(\(or)g(at)g(least)g(similar\).)648
3603 y(;;;;)g(Debugger)g(in)n(terface:)648 3703 y(Ho)n(w)36
b(do)r(es)g(the)g(debugger)g(in)n(terface)f(to)i(the)g("ev)-5
b(aluator")34 b(\(where)i(the)h(ev)-5 b(aluator)523 3802
y(means)21 b(all)h(of)f(nativ)n(e)g(co)r(de,)i(b)n(yte-co)r(de)e(and)g
(in)n(terpreted)h(IR1\)?)35 b(It)22 b(seems)f(that)h(it)g(w)n(ould)523
3902 y(b)r(e)d(m)n(uc)n(h)f(more)g(straigh)n(tforw)n(ard)d(to)k(ha)n(v)
n(e)e(a)h(consisten)n(t)g(user)g(in)n(terface)g(to)g(debugging)g(all)
523 4002 y(co)r(de)23 b(represen)n(tations)d(if)k(there)e(w)n(as)g(a)g
(uniform)h(debugger)e(in)n(terface)h(to)h(the)g(underlying)523
4101 y(stu\013,)28 b(and)g(vice-v)n(ersa.)648 4201 y(Of)22
b(course,)g(some)g(op)r(erations)f(migh)n(t)i(not)f(b)r(e)h(supp)r
(orted)f(b)n(y)g(some)g(represen)n(tations,)523 4301
y(etc.)35 b(F)-7 b(or)22 b(example,)i(\014ne-con)n(trol)d(stepping)h
(migh)n(t)h(not)f(b)r(e)h(a)n(v)-5 b(ailable)21 b(in)i(nativ)n(e)f(co)r
(de.)35 b(In)523 4400 y(other)27 b(cases,)g(w)n(e)g(migh)n(t)g(reduce)g
(an)h(op)r(eration)e(to)i(the)g(lo)n(w)n(est)e(common)h(denominator,)
523 4500 y(for)g(example)g(fetc)n(hing)g(lexical)g(v)-5
b(ariables)26 b(b)n(y)h(string)g(and)g(admitting)h(the)f(p)r(ossibilit)
n(y)g(of)523 4599 y(am)n(biguous)k(matc)n(hes.)51 b([Actually)-7
b(,)33 b(it)g(w)n(ould)f(probably)f(b)r(e)i(a)f(go)r(o)r(d)f(idea)h(to)
h(store)e(the)523 4699 y(pac)n(k)-5 b(age)26 b(if)i(w)n(e)f(are)g
(going)f(to)i(allo)n(w)e(v)-5 b(ariables)27 b(to)g(b)r(e)h(closed)f(o)n
(v)n(er.])648 4799 y(Some)22 b(ob)5 b(jects)23 b(w)n(e)f(w)n(ould)h
(need:)35 b(Lo)r(cation:)e(The)24 b(constan)n(t)e(information)g(ab)r
(out)h(the)523 4898 y(place)35 b(where)f(a)h(v)-5 b(alue)35
b(is)g(stored,)h(ev)n(erything)e(but)h(whic)n(h)g(particular)f(frame)h
(it)g(is)g(in.)1893 5147 y(115)p eop
%%Page: 116 117
116 116 bop 523 614 a Fk(Op)r(erations:)39 b(lo)r(cation)29
b(name,)g(t)n(yp)r(e,)h(etc.)43 b(lo)r(cation-v)-5 b(alue)28
b(frame)h(lo)r(cation)f(\(setf)6 b('able\))523 714 y(monitor-lo)r
(cation)33 b(lo)r(cation)g(function)i(F)-7 b(unction)35
b(is)g(called)f(whenev)n(er)f(lo)r(cation)h(is)g(set)523
814 y(with)20 b(the)g(lo)r(cation,)h(frame)e(and)h(old)f(v)-5
b(alue.)35 b(If)20 b(activ)n(e)f(v)-5 b(alues)19 b(aren't)g(supp)r
(orted,)j(then)e(w)n(e)523 913 y(dumm)n(y)26 b(the)g(e\013ect)h(using)e
(breakp)r(oin)n(ts,)g(in)i(whic)n(h)e(case)g(the)i(c)n(hange)d(w)n
(on't)i(b)r(e)g(noticed)523 1013 y(un)n(til)k(the)h(end)f(of)f(the)i
(blo)r(c)n(k)e(\(and)h(in)n(termediate)f(c)n(hanges)g(will)h(b)r(e)g
(lost.\))43 b(debug)30 b(info:)523 1112 y(All)35 b(the)g(debug)f
(information)g(for)g(a)g(comp)r(onen)n(t.)57 b(F)-7 b(rame:)51
b(frame-c)n(hanged-lo)r(cations)523 1212 y(frame)33 b(=>)g(lo)r
(cation*)e(Return)j(a)e(list)i(of)f(the)g(lo)r(cations)f(in)h(frame)g
(that)g(w)n(ere)f(c)n(hanged)523 1312 y(since)22 b(the)h(last)f(time)h
(this)f(function)h(w)n(as)e(called.)35 b(Or)22 b(something.)34
b(This)23 b(is)f(for)f(displa)n(ying)523 1411 y(in)n(teresting)i(state)
h(c)n(hanges)e(at)i(breakp)r(oin)n(ts.)34 b(sa)n(v)n(e-frame-state)21
b(frame)j(=>)f(frame-state)523 1511 y(restore-frame-state)31
b(frame)j(frame-state)g(These)g(op)r(erations)f(allo)n(w)g(the)h
(debugger)g(to)523 1611 y(bac)n(k)g(up)h(ev)-5 b(aluation,)36
b(mo)r(dulo)e(side-e\013ects)h(and)f(non-lo)r(cal)g(con)n(trol)f
(transfers.)57 b(This)523 1710 y(copies)30 b(and)g(restores)f(all)h(v)
-5 b(ariables,)30 b(temp)r(oraries,)g(etc,)h(lo)r(cal)f(to)g(the)h
(frame,)g(and)f(also)523 1810 y(the)e(curren)n(t)f(PC)g(and)g(dynamic)h
(en)n(vironmen)n(t)e(\(curren)n(t)h(catc)n(h,)g(etc.\))648
1910 y(A)n(t)34 b(the)h(time)g(of)g(the)f(sa)n(v)n(e,)h(the)g(frame)f
(m)n(ust)g(b)r(e)h(for)f(the)h(running)f(function)h(\(not)523
2009 y(w)n(aiting)21 b(for)h(a)f(call)g(to)h(return.\))35
b(When)22 b(w)n(e)g(restore,)f(the)i(frame)e(b)r(ecomes)h(curren)n(t)f
(again,)523 2109 y(e\013ectiv)n(ely)28 b(exiting)g(from)g(an)n(y)g
(frames)f(on)h(top.)39 b(\(Of)28 b(course,)g(frame)f(m)n(ust)i(not)f
(already)523 2208 y(b)r(e)g(exited.\))648 2308 y(Thread:)52
b(Represen)n(tation)35 b(of)h(whic)n(h)g(stac)n(k)f(to)h(use,)i(etc.)62
b(Blo)r(c)n(k:)53 b(What)36 b(succes-)523 2408 y(sors)h(the)i(blo)r(c)n
(k)f(has,)j(what)e(calls)f(there)g(are)g(in)g(the)h(blo)r(c)n(k.)70
b(\(Don't)39 b(need)g(to)f(kno)n(w)523 2507 y(where)27
b(calls)h(are)f(as)g(long)g(as)g(w)n(e)h(kno)n(w)f(called)g(function,)i
(since)f(can)f(breakp)r(oin)n(t)g(at)h(the)523 2607 y(function.\))52
b(Whether)32 b(co)r(de)g(in)h(this)f(blo)r(c)n(k)g(is)g(wildly)h(out)f
(of)g(order)f(due)i(to)f(b)r(eing)g(the)523 2707 y(result)j(of)f(lo)r
(op-in)n(v)-5 b(arian)n(t)33 b(optimization,)k(etc.)59
b(Op)r(erations:)50 b(blo)r(c)n(k-successors)32 b(blo)r(c)n(k)523
2806 y(=>)38 b(co)r(de-lo)r(cation*)f(blo)r(c)n(k-forms)g(blo)r(c)n(k)h
(=>)g(\(source-lo)r(cation)f(co)r(de-lo)r(cation\)*)g(Re-)523
2906 y(turn)c(the)h(corresp)r(onding)d(source)h(lo)r(cations)g(and)h
(co)r(de)g(lo)r(cations)f(for)h(all)g(forms)f(\(and)523
3005 y(form)27 b(fragmen)n(ts\))g(in)h(the)g(blo)r(c)n(k.)648
3105 y(V)-7 b(ariable)26 b(maps:)648 3205 y(There)h(are)g(ab)r(out)h
(\014v)n(e)g(things)g(that)g(the)g(debugger)f(migh)n(t)h(w)n(an)n(t)g
(to)g(kno)n(w)f(ab)r(out)h(a)523 3304 y(v)-5 b(ariable:)648
3404 y(Name)27 b(Although)g(a)g(lexical)g(v)-5 b(ariable's)26
b(name)i(is)f("really")e(a)i(sym)n(b)r(ol)g(\(pac)n(k)-5
b(age)27 b(and)523 3504 y(all\),)k(in)f(practice)f(it)i(do)r(esn't)f
(seem)f(w)n(orth)n(while)g(to)h(require)f(all)h(the)g(sym)n(b)r(ols)f
(for)h(lo)r(cal)523 3603 y(v)-5 b(ariable)29 b(names)g(to)g(b)r(e)i
(retained.)42 b(There)29 b(is)h(m)n(uc)n(h)f(less)h(VM)g(and)f(GC)h(o)n
(v)n(erhead)e(for)h(a)523 3703 y(constan)n(t)22 b(string)f(than)i(for)e
(a)h(sym)n(b)r(ol.)35 b(\(Also)22 b(it)h(is)f(useful)g(to)h(b)r(e)f
(able)g(to)g(access)f(gensyms)523 3802 y(in)28 b(the)g(debugger,)e(ev)n
(en)h(though)h(they)g(are)e(theoretically)h(ine\013able\).)648
3902 y(ID)35 b(Whic)n(h)g(v)-5 b(ariable)34 b(with)i(the)f(sp)r
(eci\014ed)h(name)e(is)h(this?)60 b(It)35 b(is)g(p)r(ossible)g(to)g(ha)
n(v)n(e)523 4002 y(m)n(ultiple)24 b(v)-5 b(ariables)22
b(with)i(the)g(same)f(name)g(in)h(a)f(giv)n(en)f(function.)36
b(The)24 b(ID)g(is)f(something)523 4101 y(that)41 b(mak)n(es)f(Name)h
(unique,)k(probably)40 b(a)g(small)h(in)n(teger.)76 b(When)41
b(v)-5 b(ariables)40 b(aren't)523 4201 y(unique,)35 b(w)n(e)f(could)f
(mak)n(e)g(this)h(b)r(e)g(part)f(of)h(the)g(name,)h(e.g.)54
b("F)n(OO#1",)33 b("F)n(OO#2".)523 4301 y(But)28 b(there)g(are)f(adv)-5
b(an)n(tages)26 b(to)i(k)n(eeping)f(this)i(separate,)d(since)i(in)g
(man)n(y)g(cases)e(lifetime)523 4400 y(information)h(can)g(b)r(e)h
(used)g(to)f(disam)n(biguate,)g(making)g(quali\014cation)f(unnecessary)
-7 b(.)648 4500 y(SC)20 b(When)i(un)n(b)r(o)n(xed)e(represen)n(tations)
f(are)g(in)i(use,)h(w)n(e)f(m)n(ust)g(ha)n(v)n(e)e(t)n(yp)r(e)i
(information)523 4599 y(to)31 b(prop)r(erly)f(read)g(and)g(write)h(a)g
(lo)r(cation.)46 b(W)-7 b(e)31 b(only)f(need)h(to)g(kno)n(w)f(the)i(SC)
f(for)f(this,)523 4699 y(whic)n(h)e(w)n(ould)f(b)r(e)h(amenable)f(to)g
(a)g(space-sa)n(ving)e(n)n(umeric)j(enco)r(ding.)648
4799 y(Lo)r(cation)d(Simple:)36 b(the)27 b(o\013set)f(in)g(SC.)g
([Actually)-7 b(,)27 b(w)n(e)e(need)h(the)h(sa)n(v)n(e)d(lo)r(cation)i
(to)r(o.])648 4898 y(Lifetime)i(In)h(what)f(parts)f(of)h(the)h(program)
d(do)r(es)h(this)i(v)-5 b(ariable)27 b(hold)h(a)f(meaningful)1893
5147 y(116)p eop
%%Page: 117 118
117 117 bop 523 614 a Fk(v)-5 b(alue?)36 b(It)25 b(seems)f(prohibitiv)n
(e)g(to)g(record)f(precise)h(lifetime)i(information,)e(b)r(oth)h(in)g
(space)523 714 y(and)i(compiler)g(e\013ort,)h(so)f(w)n(e)g(will)h(ha)n
(v)n(e)e(to)i(settle)f(for)h(some)f(sort)f(of)i(appro)n(ximation.)648
814 y(The)35 b(\014nest)h(gran)n(ularit)n(y)c(at)k(whic)n(h)f(it)h(is)f
(easy)f(to)h(determine)h(liv)n(eness)e(is)h(the)h(the)523
913 y(blo)r(c)n(k:)g(w)n(e)28 b(can)f(regard)f(the)i(v)-5
b(ariable)26 b(lifetime)j(as)e(the)h(set)f(of)h(blo)r(c)n(ks)f(that)g
(the)h(v)-5 b(ariable)523 1013 y(is)31 b(liv)n(e)h(in.)48
b(Of)32 b(course,)f(the)h(v)-5 b(ariable)31 b(ma)n(y)f(b)r(e)i(dead)f
(\(and)h(th)n(us)g(con)n(tain)e(meaningless)523 1112
y(garbage\))c(during)h(arbitrarily)e(large)i(p)r(ortions)f(of)i(the)g
(blo)r(c)n(k.)648 1212 y(Note)f(that)g(this)g(subsumes)g(the)g(notion)g
(of)g(whic)n(h)g(function)h(a)e(v)-5 b(ariable)26 b(b)r(elongs)g(to.)
523 1312 y(A)i(giv)n(en)f(blo)r(c)n(k)g(is)g(only)h(in)f(one)h
(function,)g(so)f(the)h(function)g(is)f(implicit.)648
1411 y(The)18 b(v)-5 b(ariable)18 b(map)h(should)g(represen)n(t)e(this)
i(information)g(space-e\016cien)n(tly)e(and)i(with)523
1511 y(adequate)27 b(computational)g(e\016ciency)-7 b(.)648
1611 y(The)29 b(SC)h(and)g(ID)g(can)f(b)r(e)i(represen)n(ted)d(as)h
(small)h(in)n(tegers.)42 b(Although)29 b(the)i(ID)f(can)523
1710 y(in)e(principle)f(b)r(e)h(arbitrarily)d(large,)i(it)g(should)h(b)
r(e)g(<100)e(in)h(practice.)36 b(The)28 b(lo)r(cation)f(can)523
1810 y(b)r(e)32 b(represen)n(ted)e(b)n(y)h(just)h(the)g(o\013set)f(\(a)
h(mo)r(derately)e(small)h(in)n(teger\),)h(since)f(the)h(SB)f(is)523
1910 y(implicit)d(in)g(the)g(SC.)648 2009 y(The)f(lifetime)i(info)f
(can)g(b)r(e)g(represen)n(ted)e(either)i(as)f(a)h(bit-v)n(ector)e
(indexed)i(b)n(y)g(blo)r(c)n(k)523 2109 y(n)n(um)n(b)r(ers,)h(or)f(b)n
(y)h(a)g(list)h(of)f(blo)r(c)n(k)f(n)n(um)n(b)r(ers.)42
b(Whic)n(h)29 b(is)g(more)g(compact)f(dep)r(ends)i(b)r(oth)523
2208 y(on)h(the)h(size)f(of)g(the)h(comp)r(onen)n(t)f(and)g(on)g(the)h
(n)n(um)n(b)r(er)f(of)g(blo)r(c)n(ks)g(the)g(v)-5 b(ariable)31
b(is)g(liv)n(e)523 2308 y(in.)38 b(In)27 b(the)h(limit)h(of)f(large)e
(comp)r(onen)n(t)h(size,)h(the)g(sparse)e(represen)n(tation)g(will)i(b)
r(e)g(more)523 2408 y(compact,)i(but)h(it)g(isn't)f(clear)f(where)h
(this)g(crosso)n(v)n(er)d(o)r(ccurs.)44 b(Of)30 b(course,)g(it)g(w)n
(ould)g(b)r(e)523 2507 y(p)r(ossible)e(to)g(use)h(b)r(oth)g(represen)n
(tations,)d(c)n(ho)r(osing)h(the)i(more)f(compact)g(one)g(on)g(a)g(p)r
(er-)523 2607 y(v)-5 b(ariable)32 b(basis.)53 b(Another)32
b(in)n(teresting)h(sp)r(ecial)g(case)f(is)h(when)g(the)g(v)-5
b(ariable)32 b(is)h(liv)n(e)g(in)523 2707 y(only)28 b(one)g(blo)r(c)n
(k:)37 b(this)29 b(ma)n(y)e(b)r(e)i(common)e(enough)h(to)g(b)r(e)h(w)n
(orth)e(pic)n(king)h(o\013,)g(although)523 2806 y(it)g(is)g(probably)e
(rarer)g(for)h(named)g(v)-5 b(ariables)27 b(than)g(for)g(TNs)h(in)g
(general.)648 2906 y(If)35 b(w)n(e)g(dump)h(the)g(t)n(yp)r(e,)i(then)d
(a)g(normal)g(list-st)n(yle)f(t)n(yp)r(e)i(descriptor)e(is)h(\014ne:)53
b(the)523 3005 y(space)27 b(o)n(v)n(erhead)e(is)j(small,)f(since)h(the)
g(shareabilit)n(y)e(is)h(high.)648 3105 y(W)-7 b(e)28
b(could)h(probably)e(sa)n(v)n(e)g(some)h(space)g(b)n(y)g(clev)n(erly)g
(represen)n(ting)f(the)h(v)-5 b(ar-info)28 b(as)523 3205
y(parallel)18 b(v)n(ectors)g(of)i(di\013eren)n(t)g(t)n(yp)r(es,)h(but)f
(this)g(w)n(ould)f(b)r(e)h(more)f(painful)h(in)g(use.)34
b(It)20 b(seems)523 3304 y(b)r(etter)34 b(to)f(just)h(use)f(a)g
(structure,)h(enco)r(ding)f(the)h(un)n(b)r(o)n(xed)e(\014elds)i(in)f(a)
g(\014xn)n(um.)54 b(This)523 3404 y(w)n(a)n(y)-7 b(,)25
b(w)n(e)g(can)h(pass)f(around)f(the)i(structure)g(in)g(the)g(debugger,)
f(p)r(erhaps)g(ev)n(en)g(exp)r(orting)523 3504 y(it)j(from)f(the)h(the)
g(lo)n(w-lev)n(el)e(debugger)h(in)n(terface.)648 3603
y([###)33 b(W)-7 b(e)33 b(need)g(the)g(sa)n(v)n(e)e(lo)r(cation)g(to)r
(o.)52 b(This)33 b(probably)e(means)h(that)h(w)n(e)f(need)523
3703 y(t)n(w)n(o)c(slots)g(of)g(bits,)h(since)f(w)n(e)g(need)h(the)g
(sa)n(v)n(e)d(o\013set)j(and)f(sa)n(v)n(e)f(SC.)i(Actually)-7
b(,)29 b(w)n(e)f(could)523 3802 y(let)d(the)g(sa)n(v)n(e)e(SC)h(b)r(e)h
(implied)g(b)n(y)f(the)h(normal)f(SC,)g(since)h(at)f(least)g(curren)n
(tly)-7 b(,)24 b(w)n(e)g(alw)n(a)n(ys)523 3902 y(c)n(ho)r(ose)j(the)j
(same)e(sa)n(v)n(e)f(SC)i(for)f(a)g(giv)n(en)g(SC.)h(But)g(ev)n(en)f
(so,)g(w)n(e)g(probably)g(can't)h(\014t)g(all)523 4002
y(that)g(stu\013)h(in)g(one)e(\014xn)n(um)i(without)f(squeezing)f(a)h
(lot,)h(so)e(w)n(e)h(migh)n(t)g(as)f(w)n(ell)h(split)h(and)523
4101 y(record)c(b)r(oth)i(SCs.)648 4201 y(In)j(a)h(lo)r(calized)f(pac)n
(king)f(sc)n(heme,)i(w)n(e)g(w)n(ould)f(ha)n(v)n(e)f(to)i(dump)g(a)g
(di\013eren)n(t)f(v)-5 b(ar-info)523 4301 y(whenev)n(er)28
b(either)g(the)h(main)g(lo)r(cation)f(or)f(the)i(sa)n(v)n(e)e(lo)r
(cation)h(c)n(hanges.)39 b(As)28 b(a)g(practical)523
4400 y(matter,)35 b(the)f(sa)n(v)n(e)f(lo)r(cation)g(is)g(less)h(lik)n
(ely)f(to)g(c)n(hange)g(than)h(the)g(main)g(lo)r(cation,)h(and)523
4500 y(should)27 b(nev)n(er)g(c)n(hange)f(without)i(the)g(main)g(lo)r
(cation)f(c)n(hanging.)648 4599 y(One)18 b(can)h(conceiv)n(e)f(of)i(lo)
r(calized)e(pac)n(king)g(sc)n(hemes)h(that)g(do)g(sa)n(ving)f(as)h(a)f
(sp)r(ecial)h(case)523 4699 y(of)31 b(lo)r(calized)g(pac)n(king.)46
b(If)31 b(w)n(e)g(did)g(this,)i(then)e(the)h(concept)f(of)g(a)f(sa)n(v)
n(e)g(lo)r(cation)g(migh)n(t)523 4799 y(b)r(e)g(eliminated,)g(but)g
(this)g(w)n(ould)f(require)g(ma)5 b(jor)28 b(c)n(hanges)g(in)i(the)g
(IR2)f(represen)n(tation)523 4898 y(for)34 b(call)g(and/or)e(lifetime)j
(info.)57 b(Probably)33 b(w)n(e)g(will)i(w)n(an)n(t)e(sa)n(ving)g(to)h
(con)n(tin)n(ue)g(to)g(b)r(e)1893 5147 y(117)p eop
%%Page: 118 119
118 118 bop 523 614 a Fk(somewhat)27 b(magical.])648
714 y(Ho)n(w)g(ab)r(out:)648 814 y(\(defstruct)j(v)-5
b(ar-info)29 b(;;)j(;;)f(This)f(v)-5 b(ariable's)29 b(name.)44
b(\(sym)n(b)r(ol-name)29 b(of)h(the)h(sym)n(b)r(ol\))523
913 y(\(name)c(nil)h(:t)n(yp)r(e)f(simple-string\))f(;;)i(;;)f(The)h
(SC,)f(ID)g(and)g(o\013set,)h(enco)r(ded)f(as)f(bit-\014elds.)523
1013 y(\(bits)34 b(nil)g(:t)n(yp)r(e)g(\014xn)n(um\))g(;;)i(;;)h(The)c
(set)h(of)f(blo)r(c)n(ks)g(this)h(v)-5 b(ariable)32 b(is)h(liv)n(e)g
(in.)55 b(If)34 b(a)f(bit-)523 1112 y(v)n(ector,)28 b(then)h(it)g(has)f
(;;)i(a)e(1)h(when)g(indexed)g(b)n(y)f(the)h(n)n(um)n(b)r(er)g(of)f(a)h
(blo)r(c)n(k)f(that)h(it)g(is)g(liv)n(e)523 1212 y(in.)39
b(If)29 b(an)f(;;)h(I-v)n(ector,)e(then)h(it)h(lists)f(the)h(liv)n(e)f
(blo)r(c)n(k)g(n)n(um)n(b)r(ers.)38 b(If)29 b(a)f(\014xn)n(um,)g(then)h
(that)523 1312 y(is)g(;;)h(the)g(n)n(um)n(b)r(er)f(of)g(the)h(sole)e
(liv)n(e)h(blo)r(c)n(k.)41 b(\(lifetime)31 b(nil)e(:t)n(yp)r(e)h(\(or)e
(v)n(ector)g(\014xn)n(um\)\))i(;;)523 1411 y(;;)e(The)f(v)-5
b(ariable's)27 b(t)n(yp)r(e,)h(represen)n(ted)e(as)h(list-st)n(yle)g(t)
n(yp)r(e)h(descriptor.)36 b(t)n(yp)r(e\))648 1511 y(Then)30
b(the)h(debug-info)f(holds)g(a)g(simple-v)n(ector)f(of)i(all)f(the)h(v)
-5 b(ar-info)29 b(structures)h(for)523 1611 y(that)i(comp)r(onen)n(t.)
49 b(W)-7 b(e)32 b(migh)n(t)g(as)f(w)n(ell)g(mak)n(e)g(it)h(sorted)f
(alphab)r(etically)g(b)n(y)g(name,)i(so)523 1710 y(that)38
b(w)n(e)g(can)g(binary-searc)n(h)d(to)j(\014nd)h(the)f(v)-5
b(ariable)37 b(corresp)r(onding)f(to)i(a)g(particular)523
1810 y(name.)648 1910 y(W)-7 b(e)32 b(need)h(to)f(b)r(e)g(able)g(to)h
(translate)e(PCs)g(to)i(blo)r(c)n(k)e(n)n(um)n(b)r(ers.)51
b(This)32 b(can)g(b)r(e)h(done)523 2009 y(b)n(y)27 b(an)f(I-V)-7
b(ector)26 b(in)h(the)g(comp)r(onen)n(t)g(that)g(con)n(tains)f(the)h
(start)f(lo)r(cation)g(of)h(eac)n(h)f(blo)r(c)n(k.)523
2109 y(The)35 b(blo)r(c)n(k)f(n)n(um)n(b)r(er)g(is)g(the)h(index)g(at)f
(whic)n(h)g(w)n(e)g(\014nd)h(the)g(correct)e(PC)h(range.)56
b(This)523 2208 y(requires)19 b(that)i(w)n(e)f(use)g(an)g(emit-order)f
(blo)r(c)n(k)h(n)n(um)n(b)r(ering)g(distinct)h(from)f(the)h(IR2-Blo)r
(c)n(k-)523 2308 y(Num)n(b)r(er,)33 b(but)g(that)f(isn't)h(an)n(y)e
(big)g(deal.)50 b(This)32 b(seems)g(space-exp)r(ensiv)n(e,)f(but)i(it)f
(isn't)523 2408 y(to)r(o)e(bad,)g(since)g(it)h(w)n(ould)e(only)h(b)r(e)
g(a)g(fraction)g(of)g(the)g(co)r(de)g(size)g(if)g(the)h(a)n(v)n(erage)c
(blo)r(c)n(k)523 2507 y(length)h(is)f(a)g(few)h(w)n(ords)f(or)f(more.)
648 2607 y(An)e(adv)-5 b(an)n(tage)23 b(of)h(our)g(p)r(er-blo)r(c)n(k)f
(lifetime)i(represen)n(tation)d(is)j(that)f(it)h(directly)f(sup-)523
2707 y(p)r(orts)c(k)n(eeping)f(a)h(v)-5 b(ariable)19
b(in)h(di\013eren)n(t)h(lo)r(cations)e(when)h(in)h(di\013eren)n(t)f
(blo)r(c)n(ks,)h(i.e.)34 b(m)n(ulti-)523 2806 y(lo)r(cation)f(pac)n
(king.)53 b(W)-7 b(e)34 b(use)g(a)f(di\013eren)n(t)h(v)-5
b(ar-info)32 b(for)h(eac)n(h)g(di\013eren)n(t)h(pac)n(king,)g(since)523
2906 y(the)i(SC)f(and)g(o\013set)g(are)g(p)r(oten)n(tially)g
(di\013eren)n(t.)60 b(The)35 b(Name)g(and)g(ID)h(are)e(the)i(same,)523
3005 y(represen)n(ting)i(the)h(fact)g(that)g(it)h(is)f(the)g(same)f(v)
-5 b(ariable.)71 b(It)39 b(is)g(here)f(that)i(the)f(ID)g(is)523
3105 y(most)26 b(signi\014can)n(t,)g(since)g(the)g(debugger)f(could)h
(otherwise)f(mak)n(e)h(same-name)f(v)-5 b(ariables)523
3205 y(unique)28 b(all)f(b)n(y)g(itself.)648 3304 y(Stac)n(k)g
(parsing:)648 3404 y([###)41 b(Probably)d(not)i(w)n(orth)g(trying)g(to)
g(mak)n(e)f(the)i(stac)n(k)e(parseable)g(from)h(the)523
3504 y(b)r(ottom)32 b(up.)51 b(There)32 b(are)f(to)r(o)g(man)n(y)h
(complications)f(when)h(w)n(e)g(start)f(ha)n(ving)g(v)-5
b(ariable)523 3603 y(sized)28 b(stu\013)h(on)f(the)h(stac)n(k.)38
b(It)29 b(seems)f(more)f(pro\014table)h(to)g(w)n(ork)f(on)h(making)f
(top-do)n(wn)523 3703 y(parsing)g(robust.)40 b(Since)28
b(w)n(e)h(are)e(no)n(w)h(planning)h(to)f(wire)g(the)h(b)r(ottom-up)g
(link)-5 b(age)28 b(info,)523 3802 y(scanning)20 b(from)h(the)g(b)r
(ottom)h(to)e(\014nd)i(the)f(top)g(frame)g(shouldn't)g(b)r(e)g(to)r(o)g
(ine\016cien)n(t,)i(ev)n(en)523 3902 y(when)f(there)f(w)n(as)g(a)g
(runa)n(w)n(a)n(y)e(recursion.)33 b(If)22 b(w)n(e)f(someho)n(w)g(jump)h
(in)n(to)f(h)n(yp)r(erspace,)h(then)523 4002 y(the)28
b(debugger)f(ma)n(y)g(get)h(confused,)g(but)g(w)n(e)g(can)f(debug)h
(this)g(sort)f(of)h(lo)n(w-lev)n(el)f(system)523 4101
y(lossage)f(using)h(ADB.])648 4201 y(There)f(are)g(curren)n(tly)g
(three)h(relev)-5 b(an)n(t)26 b(con)n(text)h(p)r(oin)n(ters:)36
b({)26 b(The)i(PC.)e(The)h(curren)n(t)523 4301 y(PC)36
b(is)g(wired)g(\(implicit)h(in)g(the)f(mac)n(hine\).)63
b(A)37 b(sa)n(v)n(ed)d(PC)i(\(RETURN-PC\))g(ma)n(y)g(b)r(e)523
4400 y(an)n(ywhere)j(in)h(the)g(curren)n(t)f(frame.)73
b({)40 b(The)g(curren)n(t)f(stac)n(k)g(con)n(text)g(\(CONT\).)h(The)523
4500 y(curren)n(t)22 b(CONT)h(is)g(wired.)35 b(A)24 b(sa)n(v)n(ed)e
(CONT)h(\(OLD-CONT\))g(ma)n(y)f(b)r(e)i(an)n(ywhere)e(in)h(the)523
4599 y(curren)n(t)32 b(frame.)51 b({)32 b(The)h(curren)n(t)e(co)r(de)i
(ob)5 b(ject)32 b(\(ENV\).)h(The)g(curren)n(t)f(ENV)g(is)h(wired.)523
4699 y(When)23 b(sa)n(v)n(ed,)g(this)g(is)f(extra-di\016cult)g(to)h(lo)
r(cate,)g(since)g(it)g(is)f(sa)n(v)n(ed)g(b)n(y)g(the)h(caller,)g(and)f
(is)523 4799 y(th)n(us)k(at)f(an)g(unkno)n(wn)g(o\013set)h(in)f
(OLD-CONT,)g(rather)g(than)g(an)n(ywhere)g(in)g(the)h(curren)n(t)523
4898 y(frame.)1893 5147 y(118)p eop
%%Page: 119 120
119 119 bop 648 614 a Fk(W)-7 b(e)28 b(m)n(ust)f(ha)n(v)n(e)g(all)g(of)
h(these)f(to)h(parse)e(the)i(stac)n(k.)648 714 y(With)d(the)f(prop)r
(osed)f(Debug-F)-7 b(unction,)25 b(w)n(e)f(parse)f(the)i(stac)n(k)e
(\(starting)h(at)g(the)g(top\))523 814 y(lik)n(e)31 b(this:)44
b(1])31 b(Use)g(ENV)g(to)g(lo)r(cate)g(the)h(curren)n(t)e(Debug-Info)h
(2])g(Use)g(the)h(Debug-Info)523 913 y(and)d(PC)g(to)g(determine)h(the)
f(curren)n(t)g(Debug-F)-7 b(unction.)42 b(3])29 b(Use)g(the)h(Debug-F)
-7 b(unction)523 1013 y(to)29 b(\014nd)h(the)g(OLD-CONT)f(and)g
(RETURN-PC.)g(4])g(Find)h(the)g(old)f(ENV)h(b)n(y)f(searc)n(hing)523
1112 y(up)24 b(the)h(stac)n(k)d(for)i(a)f(sa)n(v)n(ed)g(co)r(de)g(ob)5
b(ject)24 b(con)n(taining)f(the)h(RETURN-PC.)g(5])f(Assign)h(old)523
1212 y(ENV)k(to)f(ENV,)h(OLD-CONT)f(to)g(CONT,)h(RETURN-PC)f(to)g(PC)h
(and)f(goto)g(1.)648 1312 y(If)e(w)n(e)g(c)n(hanged)g(the)g(function)h
(represen)n(tation)e(so)h(that)g(the)h(co)r(de)f(and)g(en)n(vironmen)n
(t)523 1411 y(w)n(ere)f(a)h(single)f(ob)5 b(ject,)26
b(then)f(the)h(lo)r(cation)e(of)h(the)h(old)e(ENV)i(w)n(ould)e(b)r(e)i
(simpli\014ed.)36 b(But)523 1511 y(w)n(e)25 b(still)g(need)g(to)f
(represen)n(t)g(ENV)h(as)f(separate)g(from)g(PC,)h(since)g(in)n
(terrupts)f(and)h(errors)523 1611 y(can)i(happ)r(en)h(when)g(the)g
(curren)n(t)f(PC)g(isn't)h(p)r(ositioned)f(at)h(a)f(v)-5
b(alid)27 b(return)h(PC.)648 1710 y(It)35 b(seems)f(lik)n(e)h(it)g
(migh)n(t)g(b)r(e)h(a)e(go)r(o)r(d)h(idea)f(to)h(sa)n(v)n(e)f
(OLD-CONT,)g(RETURN-PC)523 1810 y(and)25 b(ENV)g(at)g(the)g(b)r
(eginning)g(of)g(the)g(frame)g(\(b)r(efore)g(an)n(y)f(stac)n(k)g
(argumen)n(ts\).)35 b(Then)25 b(w)n(e)523 1910 y(w)n(ouldn't)i(ha)n(v)n
(e)e(to)i(searc)n(h)e(to)i(lo)r(cate)f(ENV,)h(and)g(w)n(e)f(also)g(ha)n
(v)n(e)g(a)g(hop)r(e)h(of)g(parsing)e(the)523 2009 y(stac)n(k)k(ev)n
(en)h(if)g(it)g(is)g(damaged.)43 b(As)30 b(long)g(as)f(w)n(e)h(can)f
(lo)r(cate)h(the)g(start)f(of)h(some)g(frame,)523 2109
y(w)n(e)i(can)g(trace)g(the)h(stac)n(k)f(ab)r(o)n(v)n(e)f(that)i
(frame.)51 b(W)-7 b(e)33 b(can)f(recognize)f(a)h(probable)g(frame)523
2208 y(start)27 b(b)n(y)g(scanning)g(the)h(stac)n(k)f(for)g(a)g(co)r
(de)g(ob)5 b(ject)28 b(\(presumably)f(a)g(sa)n(v)n(ed)f(ENV\).)648
2308 y(Probably)i(w)n(e)j(w)n(an)n(t)f(some)g(fairly)g(general)f(mec)n
(hanism)h(for)g(sp)r(ecifying)h(that)g(a)f(TN)523 2408
y(should)g(b)r(e)g(considered)f(to)h(b)r(e)h(liv)n(e)e(for)h(the)g
(duration)g(of)g(a)f(sp)r(eci\014ed)i(en)n(vironmen)n(t.)43
b(It)523 2507 y(w)n(ould)31 b(b)r(e)i(somewhat)e(easier)f(to)i(sp)r
(ecify)g(that)g(the)g(TN)g(is)g(liv)n(e)f(for)h(all)f(time,)j(but)e
(this)523 2607 y(w)n(ould)27 b(b)r(ecome)h(v)n(ery)e(space-ine\016cien)
n(t)h(in)h(large)e(blo)r(c)n(k)h(compilations.)648 2707
y(This)c(mec)n(hanism)g(could)g(b)r(e)h(quite)g(useful)g(for)f(other)f
(debugger-related)g(things.)35 b(F)-7 b(or)523 2806 y(example,)27
b(when)h(debuggabilit)n(y)f(is)g(imp)r(ortan)n(t,)h(w)n(e)f(could)h
(mak)n(e)f(the)h(TNs)f(holding)h(ar-)523 2906 y(gumen)n(ts)c(liv)n(e)f
(for)g(the)h(en)n(tire)g(en)n(vironmen)n(t.)34 b(This)24
b(w)n(ould)g(guaran)n(tee)e(that)i(a)f(bac)n(ktrace)523
3005 y(w)n(ould)k(alw)n(a)n(ys)f(get)h(the)h(righ)n(t)f(v)-5
b(alue)28 b(\(mo)r(dulo)f(setqs\).)648 3105 y(Note)g(that)h(in)g(this)f
(con)n(text,)g("en)n(vironmen)n(t")f(means)h(the)h(En)n(vironmen)n(t)e
(structure)523 3205 y(\(one)31 b(p)r(er)f(non-let)h(function\).)47
b(A)n(t)31 b(least)f(according)f(to)i(curren)n(t)e(plans,)j(ev)n(en)e
(when)h(w)n(e)523 3304 y(do)37 b(in)n(ter-routine)f(register)g(allo)r
(cation,)j(the)f(di\013eren)n(t)f(functions)h(will)f(ha)n(v)n(e)f
(di\013eren)n(t)523 3404 y(en)n(vironmen)n(ts:)43 b(w)n(e)30
b(just)i("equate")e(the)h(en)n(vironmen)n(ts.)46 b(So)31
b(the)g(n)n(um)n(b)r(er)g(of)g(liv)n(e)g(p)r(er-)523
3504 y(en)n(vironmen)n(t)e(TNs)h(is)g(b)r(ounded)h(b)n(y)e(the)i(size)f
(of)g(a)f("function",)i(and)e(do)r(esn't)i(blo)n(w)e(up)523
3603 y(in)f(blo)r(c)n(k)f(compilation.)648 3703 y(The)c(implemen)n
(tation)h(is)g(simple:)35 b(p)r(er-en)n(vironmen)n(t)23
b(TNs)h(are)f(\015agged)f(b)n(y)i(the)g(:En-)523 3802
y(vironmen)n(t)33 b(kind.)55 b(:En)n(vironmen)n(t)32
b(TNs)h(are)g(treated)g(the)h(same)f(as)f(:Normal)h(TNs)h(b)n(y)523
3902 y(ev)n(ery)n(one)d(except)i(for)f(lifetime/con\015ict)i(analysis.)
51 b(An)34 b(en)n(vironmen)n(t's)d(TNs)i(are)f(also)523
4002 y(stashed)38 b(in)g(a)g(list)h(in)f(the)h(IR2-En)n(vironmen)n(t)d
(structure.)69 b(During)38 b(during)f(the)i(con-)523
4101 y(\015ict)30 b(analysis)e(p)r(ost-pass,)h(w)n(e)g(lo)r(ok)g(at)h
(eac)n(h)f(blo)r(c)n(k's)f(en)n(vironmen)n(t,)i(and)f(mak)n(e)g(all)g
(the)523 4201 y(en)n(vironmen)n(t's)d(TNs)i(alw)n(a)n(ys-liv)n(e)d(in)j
(that)g(blo)r(c)n(k.)648 4301 y(W)-7 b(e)30 b(can)g(implemen)n(t)h(the)
g("\014xed)e(sa)n(v)n(e)g(lo)r(cation")g(concept)h(needed)h(for)e(lazy)
h(frame)523 4400 y(creation)f(b)n(y)g(allo)r(cating)g(the)h(sa)n(v)n(e)
e(TNs)i(as)f(wired)h(TNs)f(at)h(IR2)g(con)n(v)n(ersion)d(time.)44
b(W)-7 b(e)523 4500 y(w)n(ould)35 b(use)g(the)h(new)g("en)n(vironmen)n
(t)d(lifetime")j(concept)g(to)f(sp)r(ecify)h(the)f(lifetimes)h(of)523
4599 y(the)e(sa)n(v)n(e)d(lo)r(cations.)53 b(There)33
b(isn't)g(an)n(y)g(run-time)g(o)n(v)n(erhead)e(if)i(w)n(e)g(nev)n(er)f
(get)h(around)523 4699 y(to)27 b(using)h(the)f(sa)n(v)n(e)f(TNs.)37
b([P)n(ac)n(k)26 b(w)n(ould)h(also)f(ha)n(v)n(e)h(to)g(notice)g(TNs)h
(with)g(pre-allo)r(cated)523 4799 y(sa)n(v)n(e)d(TNs,)h(pac)n(king)f
(the)h(original)f(TN)h(in)h(the)f(stac)n(k)f(lo)r(cation)h(if)g(its)g
(FSC)h(is)f(the)g(stac)n(k.])648 4898 y(W)-7 b(e)28 b(w)n(an)n(t)e(a)i
(standard)e(\(recognizable\))g(format)h(for)h(an)f("escap)r(e")f
(frame.)36 b(W)-7 b(e)28 b(m)n(ust)1893 5147 y(119)p
eop
%%Page: 120 121
120 120 bop 523 614 a Fk(mak)n(e)26 b(an)g(escap)r(e)g(frame)g(whenev)n
(er)g(w)n(e)g(start)g(running)g(another)g(function)h(without)g(the)523
714 y(curren)n(t)21 b(function)i(getting)e(a)h(c)n(hance)f(to)h(sa)n(v)
n(e)e(its)j(registers.)33 b(This)22 b(ma)n(y)f(b)r(e)h(due)h(either)e
(to)523 814 y(a)28 b(truly)f(async)n(hronous)f(ev)n(en)n(t)h(suc)n(h)h
(as)f(a)h(soft)n(w)n(are)e(in)n(terrupt,)i(or)f(due)h(to)g(an)g("escap)
r(e")523 913 y(from)39 b(a)g(miscop.)73 b(An)39 b(escap)r(e)g(frame)h
(marks)e(a)h(brief)h(con)n(v)n(ersion)d(to)i(a)g(callee-sa)n(v)n(es)523
1013 y(con)n(v)n(en)n(tion.)648 1112 y(Whenev)n(er)32
b(a)h(miscop)g(sa)n(v)n(es)e(registers,)i(it)g(should)g(mak)n(e)g(an)g
(escap)r(e)f(frame.)53 b(This)523 1212 y(ensures)32 b(that)i(the)f
("curren)n(t")e(register)h(con)n(ten)n(ts)g(can)h(alw)n(a)n(ys)e(b)r(e)
j(lo)r(cated)e(b)n(y)h(the)h(de-)523 1312 y(bugger.)h(In)25
b(this)h(case,)f(it)g(ma)n(y)g(b)r(e)g(desirable)f(to)h(b)r(e)h(able)f
(to)g(indicate)g(that)g(only)g(partial)523 1411 y(sa)n(ving)k(has)i(b)r
(een)g(done.)46 b(F)-7 b(or)30 b(example,)h(w)n(e)g(don't)g(w)n(an)n(t)
f(to)g(ha)n(v)n(e)g(to)h(sa)n(v)n(e)e(all)h(the)i(FP)523
1511 y(registers)26 b(just)i(so)f(that)h(w)n(e)f(can)g(use)h(a)f
(couple)g(extra)g(general)f(registers.)648 1611 y(When)h(when)f(the)h
(debugger)f(see)g(an)g(escap)r(e)g(frame,)g(it)h(kno)n(ws)f(that)h
(register)e(v)-5 b(alues)523 1710 y(are)23 b(lo)r(cated)g(in)h(the)g
(escap)r(e)f(frame's)g("register)f(sa)n(v)n(e")g(area,)h(rather)g(than)
g(in)h(the)g(normal)523 1810 y(sa)n(v)n(e)i(lo)r(cations.)648
1910 y(It)g(w)n(ould)f(b)r(e)h(nice)f(if)h(there)g(w)n(as)e(a)i(b)r
(etter)f(solution)h(to)f(this)h(in)n(ternal)f(error)e(concept.)523
2009 y(One)31 b(problem)f(is)h(that)g(it)h(seems)e(there)h(is)g(a)g
(substan)n(tial)f(space)g(p)r(enalt)n(y)h(for)g(emitting)523
2109 y(all)23 b(that)g(error)f(co)r(de,)h(esp)r(ecially)g(no)n(w)g
(that)g(w)n(e)g(don't)g(share)f(error)f(co)r(de)i(b)r(et)n(w)n(een)h
(errors)523 2208 y(b)r(ecause)32 b(w)n(e)g(w)n(an)n(t)f(to)h(preserv)n
(e)f(the)h(source)f(con)n(text)h(in)g(the)h(PC.)f(But)g(this)h
(probably)523 2308 y(isn't)25 b(really)f(all)g(that)h(bad)g(when)g
(considered)f(as)g(a)g(fraction)g(of)h(the)g(co)r(de.)36
b(F)-7 b(or)24 b(example,)523 2408 y(the)h(c)n(hec)n(k)e(part)g(of)i(a)
e(t)n(yp)r(e)i(c)n(hec)n(k)e(is)h(12)f(b)n(ytes,)i(whereas)e(the)h
(error)e(part)i(is)g(usually)g(only)523 2507 y(6.)55
b(In)34 b(this)g(case,)g(w)n(e)f(could)h(nev)n(er)e(reduce)i(the)g
(space)f(o)n(v)n(erhead)e(for)i(t)n(yp)r(e)h(c)n(hec)n(ks)f(b)n(y)523
2607 y(more)27 b(than)i(1/3,)e(th)n(us)h(the)g(total)g(co)r(de)g(size)g
(reduction)g(w)n(ould)g(b)r(e)g(small.)38 b(This)29 b(will)f(b)r(e)523
2707 y(made)j(ev)n(en)g(less)g(imp)r(ortan)n(t)g(when)h(w)n(e)f(do)g(t)
n(yp)r(e)h(c)n(hec)n(k)f(optimizations)g(to)g(reduce)g(the)523
2806 y(n)n(um)n(b)r(er)c(of)h(t)n(yp)r(e)g(c)n(hec)n(ks.)648
2906 y(Probably)38 b(w)n(e)j(should)f(stic)n(k)g(to)g(the)h(same)f
(general)f(in)n(ternal)h(error)f(mec)n(hanism,)523 3005
y(but)e(mak)n(e)e(it)i(in)n(teract)e(with)i(the)g(debugger)e(b)r(etter)
h(b)n(y)g(allo)r(cating)f(link)-5 b(age)36 b(registers)523
3105 y(and)28 b(allo)n(wing)f(pro)r(ceedable)g(errors.)36
b(W)-7 b(e)29 b(could)f(supp)r(ort)g(shared)f(error)f(calls)i(and)g
(non-)523 3205 y(pro)r(ceedable)i(errors)f(when)j(space)f(is)g(more)f
(imp)r(ortan)n(t)h(than)h(debuggabilit)n(y)-7 b(,)31
b(but)h(this)523 3304 y(is)c(probably)e(more)h(complexit)n(y)g(than)h
(is)f(w)n(orth)n(while.)648 3404 y(W)-7 b(e)37 b(jump)h(or)f(trap)f(to)
h(a)g(routine)g(that)g(sa)n(v)n(es)f(the)h(con)n(text)g(\(allo)r
(cating)f(at)i(most)523 3504 y(the)g(return)f(PC)g(register\).)66
b(W)-7 b(e)37 b(then)i(enco)r(de)e(the)h(error)d(and)j(con)n(text)f(in)
h(the)g(co)r(de)523 3603 y(immediately)e(follo)n(wing)f(the)h
(jump/trap.)62 b(\(On)36 b(the)h(MIPS,)e(the)i(error)d(co)r(de)h(can)h
(b)r(e)523 3703 y(enco)r(ded)k(in)f(the)h(trap)g(itself.\))73
b(The)40 b(error)e(argumen)n(ts)g(w)n(ould)h(b)r(e)h(enco)r(ded)g(as)f
(SC-)523 3802 y(o\013sets)e(relativ)n(e)f(to)i(the)g(sa)n(v)n(ed)e(con)
n(text.)66 b(This)37 b(could)g(solv)n(e)g(b)r(oth)g(the)h(arg-trashing)
523 3902 y(problem)24 b(and)h(sa)n(v)n(e)e(space,)i(since)f(w)n(e)h
(could)f(enco)r(de)h(the)g(SC-o\013sets)f(more)g(tersely)g(than)523
4002 y(the)k(corresp)r(onding)e(mo)n(v)n(e)g(instructions.)1893
5147 y(120)p eop
%%Page: 121 122
121 121 bop 523 1237 a Fg(Chapter)65 b(37)523 1652 y
Fi(Ob)13 b(ject)78 b(F)-19 b(ormat)523 2134 y Ff(37.1)136
b(T)-11 b(agging)523 2316 y Fk(The)28 b(follo)n(wing)e(is)i(a)f(k)n(ey)
g(of)g(the)h(three)g(bit)g(lo)n(w-tagging)d(sc)n(heme:)523
2481 y Fj(000)41 b Fk(ev)n(en)27 b(\014xn)n(um)523 2646
y Fj(001)41 b Fk(function)28 b(p)r(oin)n(ter)523 2812
y Fj(010)41 b Fk(ev)n(en)27 b(other-immediate)g(\(header-w)n(ords,)e(c)
n(haracters,)g(sym)n(b)r(ol-v)-5 b(alue)26 b(trap)h(v)-5
b(alue,)731 2911 y(etc.\))523 3077 y Fj(011)41 b Fk(list)28
b(p)r(oin)n(ter)523 3242 y Fj(100)41 b Fk(o)r(dd)28 b(\014xn)n(um)523
3408 y Fj(101)41 b Fk(structure)27 b(p)r(oin)n(ter)523
3573 y Fj(110)41 b Fk(o)r(dd)28 b(other)f(immediate)523
3739 y Fj(111)41 b Fk(other-p)r(oin)n(ter)23 b(to)h(data-blo)r(c)n(ks)f
(\(other)i(than)g(conses,)f(structures,)g(and)h(functions\))648
3904 y(This)40 b(tagging)f(sc)n(heme)g(forces)h(a)g(dual-w)n(ord)e
(alignmen)n(t)i(of)g(data-blo)r(c)n(ks)f(on)h(the)523
4004 y(heap,)27 b(but)i(this)f(can)f(b)r(e)h(prett)n(y)f(negligible:)
648 4169 y Fe(\017)41 b Fk(RA)-7 b(TIOS)23 b(and)g(COMPLEX)f(m)n(ust)i
(ha)n(v)n(e)e(a)h(header-w)n(ord)e(an)n(yw)n(a)n(y)g(since)i(they)g
(are)731 4268 y(not)29 b(a)g(ma)5 b(jor)28 b(t)n(yp)r(e.)42
b(This)29 b(w)n(astes)g(one)f(w)n(ord)h(for)f(these)i(infrequen)n(t)f
(data-blo)r(c)n(ks)731 4368 y(since)e(they)h(require)e(t)n(w)n(o)h(w)n
(ords)f(for)h(the)h(data.)648 4534 y Fe(\017)41 b Fk(BIGNUMS)24
b(m)n(ust)g(ha)n(v)n(e)f(a)g(header-w)n(ord)f(and)h(probably)g(con)n
(tain)g(only)h(one)f(other)731 4633 y(w)n(ord)j(an)n(yw)n(a)n(y)-7
b(,)26 b(so)g(w)n(e)i(probably)e(don't)i(w)n(aste)e(an)n(y)h(w)n(ords)f
(here.)36 b(Most)28 b(bign)n(ums)731 4733 y(just)g(barely)e(o)n(v)n
(er\015o)n(w)f(\014xn)n(ums,)j(that)g(is)f(b)n(y)h(a)f(bit)h(or)f(t)n
(w)n(o.)648 4898 y Fe(\017)41 b Fk(Single)27 b(and)g(double)h(FLO)n(A)
-7 b(TS?)28 b(no)f(w)n(aste,)g(or)g(one)g(w)n(ord)f(w)n(asted)1893
5147 y(121)p eop
%%Page: 122 123
122 122 bop 648 614 a Fe(\017)41 b Fk(SYMBOLS)25 b(ha)n(v)n(e)g(a)h
(pad)g(slot)f(\(curren)n(t)g(called)h(the)g(setf)h(function,)g(but)f
(un)n(used.\))523 780 y(Ev)n(erything)c(else)i(is)g(v)n(ector-lik)n(e)e
(including)i(co)r(de,)g(so)g(these)f(probably)g(tak)n(e)g(up)i(so)e
(man)n(y)523 880 y(w)n(ords)j(that)i(one)f(extra)g(one)g(do)r(esn't)h
(matter.)523 1155 y Ff(37.2)136 b(GC)44 b(Commen)l(ts)523
1336 y Fk(Data-Blo)r(c)n(ks)21 b(comprise)h(only)g(descriptors,)g(or)g
(they)g(con)n(tain)g(immediate)h(data)f(and)h(ra)n(w)523
1436 y(bits)e(in)n(terpreted)f(b)n(y)g(the)h(system.)34
b(GC)21 b(m)n(ust)g(skip)f(the)h(latter)f(when)h(scanning)f(the)h
(heap,)523 1536 y(so)j(it)g(do)r(es)g(not)g(lo)r(ok)g(at)g(a)g(w)n(ord)
f(of)h(ra)n(w)f(bits)i(and)f(in)n(terpret)g(it)g(as)g(a)g(p)r(oin)n
(ter)g(descriptor.)523 1635 y(These)h(data-blo)r(c)n(ks)f(require)g
(headers)h(for)g(GC)g(as)g(w)n(ell)g(as)g(for)g(op)r(erations)f(that)i
(need)g(to)523 1735 y(kno)n(w)d(ho)n(w)f(to)i(in)n(terpret)f(the)g(ra)n
(w)g(bits.)35 b(When)24 b(GC)g(is)f(scanning,)h(and)f(it)h(sees)f(a)g
(header-)523 1835 y(w)n(ord,)30 b(then)g(it)h(can)e(determine)h(ho)n(w)
g(to)g(skip)f(that)i(data-blo)r(c)n(k)d(if)j(necessary)-7
b(.)42 b(Header-)523 1934 y(W)-7 b(ords)34 b(are)f(tagged)g(as)h
(other-immediates.)56 b(See)35 b(the)g(sections)e("Other-Immediates")
523 2034 y(and)c("Data-Blo)r(c)n(ks)e(and)i(Header-W)-7
b(ords")27 b(for)i(commen)n(ts)g(on)g(distinguishing)g(header-)523
2133 y(w)n(ords)h(from)i(other-immediate)f(data.)49 b(This)32
b(distinction)g(is)g(necessary)e(since)i(w)n(e)f(scan)523
2233 y(through)37 b(data-blo)r(c)n(ks)f(con)n(taining)g(only)i
(descriptors)e(just)i(as)f(w)n(e)g(scan)g(through)g(the)523
2333 y(heap)27 b(lo)r(oking)g(for)g(header-w)n(ords)e(in)n(tro)r
(ducing)i(data-blo)r(c)n(ks.)648 2432 y(Data-Blo)r(c)n(ks)21
b(con)n(taining)h(only)h(descriptors)f(do)h(not)h(require)e(header-w)n
(ords)e(for)j(GC)523 2532 y(since)38 b(the)g(en)n(tire)f(data-blo)r(c)n
(k)f(can)h(b)r(e)h(scanned)f(b)n(y)h(GC)g(a)f(w)n(ord)f(at)i(a)f(time,)
k(taking)523 2632 y(whatev)n(er)31 b(action)i(is)f(necessary)f(or)h
(appropriate)f(for)h(the)h(data)f(in)h(that)g(slot.)52
b(F)-7 b(or)32 b(ex-)523 2731 y(ample,)e(a)f(cons)g(is)g(referenced)g
(b)n(y)g(a)g(descriptor)f(with)i(a)f(sp)r(eci\014c)g(tag,)h(and)f(the)h
(system)523 2831 y(alw)n(a)n(ys)f(kno)n(ws)g(the)i(size)g(of)f(this)h
(data-blo)r(c)n(k.)44 b(When)32 b(GC)e(encoun)n(ters)g(a)g(p)r(oin)n
(ter)g(to)h(a)523 2930 y(cons,)e(it)h(can)f(transp)r(ort)g(it)h(in)n
(to)f(the)h(new)f(space,)g(and)h(when)f(scanning,)g(it)h(can)f(simply)
523 3030 y(scan)24 b(the)h(t)n(w)n(o)f(w)n(ords)g(manifesting)g(the)h
(cons)g(in)n(terpreting)f(eac)n(h)f(w)n(ord)h(as)g(a)h(descriptor.)523
3130 y(Actually)h(there)g(is)g(no)f(cons)h(tag,)f(but)i(a)e(list)i
(tag,)e(so)h(w)n(e)f(mak)n(e)g(sure)h(the)g(cons)f(is)h(not)g(nil)523
3229 y(when)d(appropriate.)34 b(A)23 b(header)f(ma)n(y)g(still)i(b)r(e)
f(desired)f(if)i(the)f(p)r(oin)n(ter)g(to)f(the)i(data-blo)r(c)n(k)523
3329 y(do)r(es)d(not)g(con)n(tain)f(enough)h(information)f(to)h
(adequately)f(main)n(tain)h(the)h(data-blo)r(c)n(k.)33
b(An)523 3429 y(example)e(of)h(this)g(is)f(a)h(simple-v)n(ector)e(con)n
(taining)g(only)i(descriptor)e(slots,)i(and)g(w)n(e)f(at-)523
3528 y(tac)n(h)21 b(a)h(header-w)n(ord)d(b)r(ecause)j(the)g(descriptor)
e(p)r(oin)n(ting)i(to)g(the)g(v)n(ector)f(lac)n(ks)f(necessary)523
3628 y(information)27 b({)g(the)h(t)n(yp)r(e)g(of)f(the)h(v)n(ector's)f
(elemen)n(ts,)g(its)h(length,)g(etc.)648 3727 y(There)f(is)h(no)f(need)
h(for)f(a)h(ma)5 b(jor)26 b(tag)i(for)f(GC)h(forw)n(arding)e(p)r(oin)n
(ters.)37 b(Since)28 b(the)g(tag)523 3827 y(bits)j(are)e(in)i(the)g(lo)
n(w)e(end)i(of)f(the)h(w)n(ord,)f(a)g(range)f(c)n(hec)n(k)h(on)g(the)h
(start)e(and)i(end)f(of)h(old)523 3927 y(space)c(tells)h(y)n(ou)e(if)j
(y)n(ou)d(need)i(to)g(mo)n(v)n(e)e(the)i(thing.)37 b(This)28
b(is)f(all)g(GC)h(o)n(v)n(erhead.)523 4201 y Ff(37.3)136
b(Structures)523 4383 y Fk(A)27 b(structure)f(descriptor)f(has)g(the)i
(structure)f(lo)n(wtag)f(t)n(yp)r(e)h(co)r(de,)h(making)e
Fd(structurep)523 4483 y Fk(a)i(fast)h(op)r(eration.)36
b(A)28 b(structure)f(data-blo)r(c)n(k)f(has)h(the)h(follo)n(wing)e
(format:)697 4649 y Fd(-----------------)o(---)o(--)o(--)o(---)o(--)o
(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(--)697
4748 y(|)131 b(length)41 b(\(24)h(bits\))g(|)h(Structure)d(header)h
(type)h(\(8)h(bits\))e(|)697 4848 y(-----------------)o(---)o(--)o(--)o
(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(--)
1893 5147 y Fk(122)p eop
%%Page: 123 124
123 123 bop 697 614 a Fd(|)131 b(structure)40 b(type)i(name)f(\(a)i
(symbol\))869 b(|)697 714 y(-----------------)o(---)o(--)o(--)o(---)o
(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(--)697
814 y(|)131 b(structure)40 b(slot)i(0)1481 b(|)697 913
y(-----------------)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o
(--)o(---)o(--)o(---)o(--)o(--)o(--)697 1013 y(|)131
b(...)42 b(structure)e(slot)i(length)f(-)i(2)915 b(|)697
1112 y(-----------------)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(--)o
(---)o(--)o(---)o(--)o(---)o(--)o(--)o(--)648 1279 y
Fk(The)21 b(header)f(w)n(ord)g(con)n(tains)g(the)h(structure)g(length,)
h(whic)n(h)f(is)g(the)h(n)n(um)n(b)r(er)f(of)g(w)n(ords)523
1378 y(\(other)28 b(than)g(the)g(header)f(w)n(ord.\))37
b(The)28 b(length)g(is)g(alw)n(a)n(ys)e(at)i(least)g(one,)f(since)h
(the)h(\014rst)523 1478 y(w)n(ord)e(of)g(the)h(structure)f(data)g(is)h
(the)g(structure)f(t)n(yp)r(e)h(name.)523 1752 y Ff(37.4)136
b(Fixn)l(ums)523 1934 y Fk(A)28 b(\014xn)n(um)g(has)f(one)g(of)h(the)g
(follo)n(wing)e(formats)h(in)h(32)e(bits:)697 2100 y
Fd(-----------------)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o
(--)o(---)o(--)o(---)o(--)o(--)o(--)697 2200 y(|)349
b(30)42 b(bit)h(2's)f(complement)e(even)h(integer)128
b(|)44 b(0)f(0)g(0)g(|)697 2299 y(-----------------)o(---)o(--)o(--)o
(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(--)
523 2466 y Fk(or)697 2632 y Fd(-----------------)o(---)o(--)o(--)o(---)
o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(--)697
2731 y(|)349 b(30)42 b(bit)h(2's)f(complement)e(odd)i(integer)171
b(|)44 b(1)f(0)g(0)g(|)697 2831 y(-----------------)o(---)o(--)o(--)o
(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(--)
648 2997 y Fk(E\013ectiv)n(ely)-7 b(,)23 b(there)h(is)f(one)g(tag)g
(for)g(immediate)g(in)n(tegers,)g(t)n(w)n(o)g(zeros.)34
b(This)23 b(buys)h(one)523 3096 y(more)g(bit)h(for)e(\014xn)n(ums,)i
(and)g(no)n(w)e(when)i(these)f(n)n(um)n(b)r(ers)g(index)h(in)n(to)f
(simple-v)n(ectors)e(or)523 3196 y(o\013set)30 b(in)n(to)g(memory)-7
b(,)30 b(they)h(p)r(oin)n(t)f(to)g(w)n(ord)f(b)r(oundaries)g(on)h
(32-bit,)h(b)n(yte-addressable)523 3296 y(mac)n(hines.)65
b(That)37 b(is,)j(no)d(shifting)g(need)h(o)r(ccur)e(to)h(use)h(the)f(n)
n(um)n(b)r(er)g(directly)g(as)g(an)523 3395 y(o\013set.)648
3495 y(This)18 b(format)g(has)g(another)f(adv)-5 b(an)n(tage)17
b(on)h(b)n(yte-addressable)e(mac)n(hines)i(when)g(\014xn)n(ums)523
3595 y(are)33 b(o\013sets)h(in)n(to)g(v)n(ector-lik)n(e)e(data-blo)r(c)
n(ks,)i(including)h(structures.)56 b(Ev)n(en)33 b(though)h(w)n(e)523
3694 y(previously)21 b(men)n(tioned)i(data-blo)r(c)n(ks)e(are)g(dual-w)
n(ord)g(aligned,)i(most)g(indexing)f(and)h(slot)523 3794
y(accessing)j(is)i(w)n(ord)e(aligned,)h(and)h(so)e(are)h(\014xn)n(ums)h
(with)g(e\013ectiv)n(ely)f(t)n(w)n(o)g(tag)g(bits.)648
3894 y(Tw)n(o)k(tags)g(also)h(allo)n(w)f(b)r(etter)h(usage)f(of)i(sp)r
(ecial)f(instructions)f(on)h(some)g(mac)n(hines)523 3993
y(that)c(can)f(deal)g(with)i(t)n(w)n(o)d(lo)n(w-tag)g(bits)i(but)g(not)
g(three.)648 4093 y(Since)f(the)h(t)n(w)n(o)f(bits)g(are)g(zeros,)f(w)n
(e)h(a)n(v)n(oid)f(ha)n(ving)g(to)h(mask)g(them)h(o\013)g(b)r(efore)f
(using)523 4192 y(the)21 b(w)n(ords)f(for)g(arithmetic,)j(but)e
(division)g(and)f(m)n(ultiplication)h(require)f(sp)r(ecial)h(shifting.)
523 4467 y Ff(37.5)136 b(Other-immediates)523 4649 y
Fk(As)19 b(for)e(\014xn)n(ums,)k(there)d(are)f(t)n(w)n(o)h(di\013eren)n
(t)g(three-bit)g(lo)n(wtag)f(co)r(des)h(for)g(other-immediate,)523
4748 y(allo)n(wing)26 b(64)h(other-immediate)g(t)n(yp)r(es:)1893
5147 y(123)p eop
%%Page: 124 125
124 124 bop 523 614 a Fd(----------------)o(---)o(--)o(---)o(--)o(--)o
(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o
(--)o(--)523 714 y(|)130 b(Data)42 b(\(24)h(bits\))346
b(|)43 b(Type)f(\(8)h(bits)f(with)g(low-tag\))127 b(|)44
b(1)f(0)g(|)523 814 y(----------------)o(---)o(--)o(---)o(--)o(--)o
(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o
(--)o(--)648 980 y Fk(The)26 b(t)n(yp)r(e-co)r(de)g(for)h(an)f
(other-immediate)g(t)n(yp)r(e)h(is)f(considered)g(to)g(include)h(the)g
(t)n(w)n(o)523 1079 y(lo)n(wtag)21 b(bits.)36 b(This)23
b(supp)r(orts)f(the)i(concept)e(of)h(a)f(single)h("t)n(yp)r(e)f(co)r
(de")h(namespace)e(for)i(all)523 1179 y(descriptors,)e(since)f(the)i
(normal)e(lo)n(wtag)f(co)r(des)i(are)e(disjoin)n(t)i(from)g(the)g
(other-immediate)523 1279 y(co)r(des.)648 1378 y(F)-7
b(or)37 b(other-p)r(oin)n(ter)g(ob)5 b(jects,)41 b(the)d(full)h(eigh)n
(t)f(bits)h(of)f(the)g(header)g(t)n(yp)r(e)g(co)r(de)g(are)523
1478 y(used)32 b(as)e(the)i(t)n(yp)r(e)g(co)r(de)g(for)f(that)g(kind)h
(of)g(ob)5 b(ject.)48 b(This)32 b(is)f(wh)n(y)g(w)n(e)h(use)f(t)n(w)n
(o)g(lo)n(wtag)523 1577 y(co)r(des)40 b(for)g(other-immediate)g(t)n(yp)
r(es:)62 b(eac)n(h)40 b(other-p)r(oin)n(ter)f(ob)5 b(ject)40
b(needs)h(a)f(distinct)523 1677 y(other-immediate)27
b(t)n(yp)r(e)h(to)f(mark)g(its)h(header.)648 1777 y(The)18
b(system)g(uses)g(the)h(other-immediate)f(format)f(for)h(c)n
(haracters,)g(the)h Fd(symbol-value)523 1876 y Fk(un)n(b)r(ound)31
b(trap)g(v)-5 b(alue,)32 b(and)f(header-w)n(ords)d(for)j(data-blo)r(c)n
(ks)f(on)g(the)i(heap.)47 b(The)31 b(t)n(yp)r(e)523 1976
y(co)r(des)k(are)e(laid)i(out)g(to)g(facilitate)g(range)f(c)n(hec)n(ks)
f(for)i(common)f(subt)n(yp)r(es;)39 b(for)34 b(exam-)523
2076 y(ple,)k(all)d(n)n(um)n(b)r(ers)g(will)h(ha)n(v)n(e)e(con)n
(tiguous)g(t)n(yp)r(e)i(co)r(des)f(whic)n(h)g(are)g(distinct)h(from)f
(the)523 2175 y(con)n(tiguous)26 b(arra)n(y)g(t)n(yp)r(e)h(co)r(des.)37
b(See)27 b(section)h(37.7)e(for)h(details.)523 2450 y
Ff(37.6)136 b(Data-Blo)t(c)l(ks)45 b(and)g(Header-W)-11
b(ord)45 b(F)-11 b(ormat)523 2632 y Fk(P)n(oin)n(ters)26
b(to)h(data-blo)r(c)n(ks)f(ha)n(v)n(e)h(the)h(follo)n(wing)e(format:)
523 2798 y Fd(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o
(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(--)
523 2897 y(|)261 b(Dual-word)40 b(address)h(of)h(data-block)e(\(29)i
(bits\))303 b(|)43 b(1)h(1)f(1)g(|)523 2997 y(----------------)o(---)o
(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o
(---)o(--)o(--)o(---)o(--)o(--)648 3163 y Fk(The)32 b(w)n(ord)g(p)r
(oin)n(ted)h(to)f(b)n(y)g(the)h(ab)r(o)n(v)n(e)f(descriptor)f(is)i(a)f
(header-w)n(ord,)f(and)i(it)g(has)523 3263 y(the)28 b(same)f(format)g
(as)g(an)g(other-immediate:)523 3429 y Fd(----------------)o(---)o(--)o
(---)o(--)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o
(--)o(--)o(---)o(--)o(--)523 3528 y(|)130 b(Data)42 b(\(24)h(bits\))346
b(|)43 b(Type)f(\(8)h(bits)f(with)g(low-tag\))e(|)j(0)h(1)f(0)g(|)523
3628 y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o
(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(--)523
3794 y Fk(This)31 b(is)g(con)n(v)n(enien)n(t)f(for)h(scanning)g(the)g
(heap)g(when)h(GC'ing,)g(but)g(it)f(do)r(es)g(mean)g(that)523
3894 y(whenev)n(er)e(GC)h(encoun)n(ters)f(an)g(other-immediate)g(w)n
(ord,)h(it)g(has)f(to)h(do)f(a)h(range)e(c)n(hec)n(k)523
3993 y(on)i(the)g(lo)n(w)g(b)n(yte)g(to)g(see)g(if)g(it)h(is)f(a)g
(header-w)n(ord)e(or)h(just)i(a)e(c)n(haracter)g(\(for)g(example\).)523
4093 y(This)f(is)f(easily)g(acceptable)g(p)r(erformance)f(hit)i(for)f
(scanning.)648 4192 y(The)34 b(system)h(in)n(terprets)f(the)h(data)f(p)
r(ortion)g(of)h(the)g(header-w)n(ord)d(for)i(non-v)n(ector)523
4292 y(data-blo)r(c)n(ks)f(as)h(the)h(w)n(ord)f(length)h(excluding)f
(the)h(header-w)n(ord.)56 b(F)-7 b(or)34 b(example,)i(the)523
4392 y(data)c(\014eld)g(of)g(the)g(header)f(for)h(ratio)f(and)g
(complex)h(n)n(um)n(b)r(ers)f(is)h(t)n(w)n(o,)h(one)e(w)n(ord)g(eac)n
(h)523 4491 y(for)c(the)h(n)n(umerator)e(and)i(denominator)e(or)h(for)g
(the)h(real)f(and)g(imaginary)f(parts.)648 4591 y(F)-7
b(or)21 b(v)n(ectors)g(and)h(data-blo)r(c)n(ks)f(represen)n(ting)g
(Lisp)h(ob)5 b(jects)22 b(stored)g(lik)n(e)g(v)n(ectors,)g(the)523
4691 y(system)27 b(ignores)f(the)i(data)g(p)r(ortion)f(of)g(the)h
(header-w)n(ord:)523 4857 y Fd(----------------)o(---)o(--)o(---)o(--)o
(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o
(---)o(--)o(--)1893 5147 y Fk(124)p eop
%%Page: 125 126
125 125 bop 523 614 a Fd(|)43 b(Unused)e(Data)h(\(24)h(bits\))128
b(|)43 b(Type)f(\(8)h(bits)f(with)g(low-tag\))e(|)j(0)h(1)f(0)g(|)523
714 y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o
(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(--)523
814 y(|)479 b(Element)41 b(Length)g(of)i(Vector)e(\(30)h(bits\))477
b(|)44 b(0)f(0)g(|)523 913 y(----------------)o(---)o(--)o(---)o(--)o
(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o
(---)o(--)o(--)648 1079 y Fk(Using)28 b(a)g(separate)g(w)n(ord)f(allo)n
(ws)h(for)g(m)n(uc)n(h)g(larger)f(v)n(ectors,)h(and)g(it)h(allo)n(ws)f
Fd(length)523 1179 y Fk(to)21 b(simply)g(access)f(a)h(single)f(w)n(ord)
g(without)i(masking)e(or)g(shifting.)35 b(Similarly)-7
b(,)22 b(the)f(header)523 1279 y(for)31 b(complex)g(arra)n(ys)e(and)i
(v)n(ectors)f(has)h(a)g(second)f(w)n(ord,)i(follo)n(wing)e(the)i
(header-w)n(ord,)523 1378 y(the)c(system)f(uses)f(for)h(the)h(\014ll)f
(p)r(oin)n(ter,)g(so)g(computing)g(the)g(length)h(of)f(an)n(y)f(arra)n
(y)f(is)i(the)523 1478 y(same)g(co)r(de)g(sequence.)523
1752 y Ff(37.7)136 b(Data-Blo)t(c)l(ks)31 b(and)e(Other-immediates)j(T)
l(yping)523 1934 y Fk(These)e(are)f(the)i(other-immediate)f(t)n(yp)r
(es.)45 b(W)-7 b(e)30 b(sp)r(ecify)h(them)g(including)f(all)g(lo)n(w)g
(eigh)n(t)523 2034 y(bits,)d(including)f(the)h(other-immediate)e(tag,)h
(so)f(w)n(e)h(can)g(think)g(of)g(the)h(t)n(yp)r(e)f(bits)g(as)g(one)523
2133 y(t)n(yp)r(e)f({)g(not)g(an)g(other-immediate)f(ma)5
b(jor)24 b(t)n(yp)r(e)h(and)g(a)f(subt)n(yp)r(e.)37 b(Also,)25
b(fetc)n(hing)g(a)f(b)n(yte)523 2233 y(and)i(comparing)f(it)h(against)f
(a)h(constan)n(t)f(is)h(more)g(e\016cien)n(t)g(than)g(w)n(asting)f(ev)n
(en)h(a)g(small)523 2333 y(amoun)n(t)i(of)g(time)h(shifting)g(out)g
(the)f(other-immediate)g(tag)g(to)g(compare)f(against)h(a)g(\014v)n(e)
523 2432 y(bit)g(constan)n(t.)523 2598 y Fd(Number)128
b(\(<)43 b(36\))610 2698 y(bignum)1872 b(10)697 2798
y(ratio)1829 b(14)697 2897 y(single-float)1521 b(18)697
2997 y(double-float)g(22)697 3096 y(complex)1741 b(26)697
3196 y(\(complex)41 b(single-float\))1084 b(30)697 3296
y(\(complex)41 b(double-float\))1084 b(34)523 3495 y(Array)129
b(\(>=)42 b(38)h(code)f(118\))654 3595 y(Simple-Array)126
b(\(>=)42 b(38)h(code)f(102\))915 3694 y(simple-array)1303
b(38)785 3794 y(Vector)84 b(\(>=)43 b(42)f(code)g(114\))915
3894 y(simple-string)1259 b(42)915 3993 y(simple-bit-vector)1083
b(46)915 4093 y(simple-vector)1259 b(50)915 4192 y(\(simple-array)39
b(\(unsigned-byte)e(2\))43 b(\(*\)\))260 b(54)915 4292
y(\(simple-array)39 b(\(unsigned-byte)e(4\))43 b(\(*\)\))260
b(58)915 4392 y(\(simple-array)39 b(\(unsigned-byte)e(8\))43
b(\(*\)\))260 b(62)915 4491 y(\(simple-array)39 b(\(unsigned-byte)e
(16\))43 b(\(*\)\))216 b(66)915 4591 y(\(simple-array)39
b(\(unsigned-byte)e(32\))43 b(\(*\)\))216 b(70)915 4691
y(\(simple-array)39 b(\(signed-byte)f(8\))43 b(\(*\)\))347
b(74)915 4790 y(\(simple-array)39 b(\(signed-byte)f(16\))k(\(*\)\))304
b(78)915 4890 y(\(simple-array)39 b(\(signed-byte)f(30\))k(\(*\)\))304
b(82)1893 5147 y Fk(125)p eop
%%Page: 126 127
126 126 bop 915 614 a Fd(\(simple-array)39 b(\(signed-byte)f(32\))k
(\(*\)\))304 b(86)915 714 y(\(simple-array)39 b(single-float)f(\(*\)\))
478 b(90)915 814 y(\(simple-array)39 b(double-float)f(\(*\)\))478
b(94)915 913 y(\(simple-array)39 b(\(complex)h(single-float\))e(\(*\))
86 b(98)915 1013 y(\(simple-array)39 b(\(complex)h(double-float\))e
(\(*\))86 b(102)785 1112 y(complex-string)1345 b(106)785
1212 y(complex-bit-vec)o(tor)1170 b(110)785 1312 y(\(array)41
b(*)i(\(*\)\))129 b(--)43 b(general)d(complex)h(vector.)128
b(114)654 1411 y(complex-array)1520 b(118)523 1611 y(code-header-type)f
(122)523 1710 y(function-header-)o(typ)o(e)1345 b(126)523
1810 y(closure-header-t)o(ype)1388 b(130)523 1910 y(funcallable-inst)o
(anc)o(e-)o(hea)o(de)o(r-)o(typ)o(e)822 b(134)523 2009
y(unused-function-)o(hea)o(de)o(r-1)o(-t)o(yp)o(e)953
b(138)523 2109 y(unused-function-)o(hea)o(de)o(r-2)o(-t)o(yp)o(e)g(142)
523 2208 y(unused-function-)o(hea)o(de)o(r-3)o(-t)o(yp)o(e)g(146)523
2308 y(closure-function)o(-he)o(ad)o(er-)o(ty)o(pe)996
b(150)523 2408 y(return-pc-header)o(-ty)o(pe)37 b(\(a.k.a)k(LRA\))783
b(154)523 2507 y(value-cell-heade)o(r-t)o(yp)o(e)1258
b(158)523 2607 y(symbol-header-ty)o(pe)1432 b(162)523
2707 y(base-character-t)o(ype)1388 b(166)523 2806 y(system-area-poin)o
(ter)o(-t)o(ype)37 b(\(header)j(type\))565 b(170)523
2906 y(unbound-marker)1607 b(174)523 3005 y(weak-pointer-typ)o(e)1476
b(178)523 3105 y(structure-header)o(-ty)o(pe)1301 b(182)523
3205 y(fdefn-type)1783 b(186)523 3479 y Ff(37.8)136 b(Strings)523
3661 y Fk(All)32 b(strings)f(in)i(the)f(system)f(are)g(C-n)n(ull)h
(terminated.)50 b(This)32 b(sa)n(v)n(es)e(cop)n(ying)g(the)j(b)n(ytes)
523 3761 y(when)h(calling)f(out)h(to)g(C.)g(The)f(only)h(time)g(this)g
(w)n(astes)f(memory)g(is)h(when)g(the)g(string)523 3860
y(con)n(tains)25 b(a)h(m)n(ultiple)g(of)g(eigh)n(t)g(c)n(haracters,)e
(and)i(then)g(the)g(system)g(allo)r(cates)f(t)n(w)n(o)g(more)523
3960 y(w)n(ords)h(\(since)g(Lisp)h(ob)5 b(jects)27 b(are)f(dual-w)n
(ord)f(aligned\))h(to)h(hold)g(the)g(C-n)n(ull)g(b)n(yte.)36
b(Since)523 4060 y(the)h(system)f(will)h(mak)n(e)f(hea)n(vy)g(use)g(of)
h(C)f(routines)g(for)g(systems)g(calls)g(and)h(libraries)523
4159 y(that)26 b(sa)n(v)n(e)e(reimplemen)n(tation)h(of)g(higher)g(lev)n
(el)g(op)r(erating)g(system)g(functionalit)n(y)g(\(suc)n(h)523
4259 y(as)34 b(pathname)g(resolution)f(or)g(curren)n(t)h(directory)f
(computation\),)j(sa)n(ving)d(on)h(cop)n(ying)523 4358
y(strings)27 b(for)g(C)g(should)h(mak)n(e)f(C)g(call)g(out)h(more)f
(e\016cien)n(t.)648 4458 y(The)k(length)h(w)n(ord)f(in)h(a)g(string)f
(header,)h(see)g(section)f("Data-Blo)r(c)n(ks)f(and)h(Header-)523
4558 y(W)-7 b(ord)35 b(F)-7 b(ormat",)36 b(coun)n(ts)f(only)g(the)h(c)n
(haracters)c(truly)k(in)f(the)h(Common)f(Lisp)g(string.)523
4657 y(Allo)r(cation)28 b(and)g(GC)h(will)f(ha)n(v)n(e)f(to)i(kno)n(w)e
(to)h(handle)g(the)h(extra)f(C-n)n(ull)g(b)n(yte,)g(and)g(GC)523
4757 y(already)e(has)h(to)h(deal)f(with)h(rounding)f(up)h(v)-5
b(arious)26 b(ob)5 b(jects)27 b(to)h(dual-w)n(ord)e(alignmen)n(t.)1893
5147 y(126)p eop
%%Page: 127 128
127 127 bop 523 614 a Ff(37.9)136 b(Sym)l(b)t(ols)45
b(and)f(NIL)523 796 y Fk(Sym)n(b)r(ol)28 b(data-blo)r(c)n(k)e(has)h
(the)h(follo)n(wing)e(format:)523 962 y Fd(----------------)o(---)o(--)
o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)
o(--)523 1062 y(|)218 b(7)43 b(\(data-block)c(words\))215
b(|)43 b(Symbol)e(Type)h(\(8)h(bits\))f(|)523 1162 y(----------------)o
(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o
(--)o(---)o(--)523 1261 y(|)653 b(Value)42 b(Descriptor)955
b(|)523 1361 y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o
(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)523 1460
y(|)1002 b(Function)40 b(Pointer)608 b(|)523 1560 y(----------------)o
(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o
(--)o(---)o(--)523 1660 y(|)915 b(Raw)42 b(Function)f(Address)520
b(|)523 1759 y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o
(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)523 1859
y(|)1046 b(Setf)42 b(Function)694 b(|)523 1959 y(----------------)o
(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o
(--)o(---)o(--)523 2058 y(|)1046 b(Property)40 b(List)696
b(|)523 2158 y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o
(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)523 2257
y(|)1133 b(Print)41 b(Name)740 b(|)523 2357 y(----------------)o(---)o
(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o
(---)o(--)523 2457 y(|)1176 b(Package)826 b(|)523 2556
y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o
(--)o(---)o(--)o(---)o(--)o(---)o(--)648 2722 y Fk(Most)21
b(of)h(these)g(slots)g(are)f(self-explanatory)f(giv)n(en)h(what)h(sym)n
(b)r(ols)g(m)n(ust)g(do)g(in)g(Com-)523 2822 y(mon)g(Lisp,)h(but)g(a)f
(couple)f(require)g(commen)n(ts.)35 b(W)-7 b(e)22 b(added)g(the)h(Ra)n
(w)e(F)-7 b(unction)23 b(Address)523 2922 y(slot)i(to)f(sp)r(eed)h(up)g
(named)g(call)f(whic)n(h)h(is)g(the)g(most)g(common)f(calling)g(con)n
(v)n(en)n(tion.)34 b(This)523 3021 y(is)d(a)g(non-descriptor)f(slot,)i
(but)f(since)h(ob)5 b(jects)30 b(are)h(dual)g(w)n(ord)f(aligned,)i(the)
f(v)-5 b(alue)31 b(in-)523 3121 y(heren)n(tly)h(has)f(\014xn)n(um)i(lo)
n(w-tag)d(bits.)51 b(The)32 b(GC)g(metho)r(d)h(for)f(sym)n(b)r(ols)f(m)
n(ust)h(kno)n(w)f(to)523 3220 y(up)r(date)c(this)g(slot.)37
b(The)26 b(Setf)i(F)-7 b(unction)27 b(slot)g(is)f(curren)n(tly)g(un)n
(used,)h(but)g(w)n(e)g(had)f(an)h(ex-)523 3320 y(tra)i(slot)g(due)h(to)
f(adding)g(Ra)n(w)g(F)-7 b(unction)30 b(Address)e(since)i(ob)5
b(jects)29 b(m)n(ust)g(b)r(e)h(dual-w)n(ord)523 3420
y(aligned.)648 3519 y(The)24 b(issues)g(with)g(nil)h(are)e(that)i(w)n
(e)f(w)n(an)n(t)f(it)i(to)f(act)g(lik)n(e)g(a)g(sym)n(b)r(ol,)h(and)f
(w)n(e)g(need)g(list)523 3619 y(op)r(erations)j(suc)n(h)h(as)f(CAR)i
(and)f(CDR)h(to)f(b)r(e)h(fast)f(on)g(it.)39 b(CMU)29
b(Common)f(Lisp)g(solv)n(es)523 3719 y(this)h(b)n(y)f(putting)i(nil)f
(as)f(the)h(\014rst)f(ob)5 b(ject)28 b(in)h(static)g(space,)f(where)g
(other)g(global)g(v)-5 b(alues)523 3818 y(reside,)27
b(so)g(it)h(has)f(a)g(kno)n(wn)g(address)f(in)i(the)g(system:)523
3984 y Fd(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)
o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)80 b(<--)43
b(space)523 4084 y(|)1351 b(0)915 b(|)261 b(start)523
4184 y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o
(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)523 4283 y(|)218
b(7)43 b(\(data-block)c(words\))215 b(|)43 b(Symbol)e(Type)h(\(8)h
(bits\))f(|)523 4383 y(----------------)o(---)o(--)o(---)o(--)o(--)o
(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)80
b(<--)43 b(nil)523 4482 y(|)1176 b(Value/CAR)738 b(|)523
4582 y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o
(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)523 4682 y(|)1089
b(Definition/CDR)605 b(|)523 4781 y(----------------)o(---)o(--)o(---)o
(--)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)
523 4881 y(|)959 b(Raw)42 b(Function)e(Address)477 b(|)1893
5147 y Fk(127)p eop
%%Page: 128 129
128 128 bop 523 614 a Fd(----------------)o(---)o(--)o(---)o(--)o(--)o
(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)523
714 y(|)1089 b(Setf)42 b(Function)651 b(|)523 814 y(----------------)o
(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o
(--)o(---)o(--)523 913 y(|)1089 b(Property)41 b(List)652
b(|)523 1013 y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o
(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)523 1112
y(|)1176 b(Print)42 b(Name)696 b(|)523 1212 y(----------------)o(---)o
(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o
(---)o(--)523 1312 y(|)1220 b(Package)782 b(|)523 1411
y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o
(--)o(---)o(--)o(---)o(--)o(---)o(--)523 1511 y(|)1307
b(...)871 b(|)523 1611 y(----------------)o(---)o(--)o(---)o(--)o(--)o
(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)523
1760 y Fk(In)24 b(addition,)h(w)n(e)f(mak)n(e)f(the)i(list)f(t)n(yp)r
(ed)h(p)r(oin)n(ter)e(to)h(nil)h(actually)e(p)r(oin)n(t)i(past)f(the)g
(header)523 1860 y(w)n(ord)31 b(of)i(the)f(nil)h(sym)n(b)r(ol)f
(data-blo)r(c)n(k.)49 b(This)33 b(has)e(usefulness)i(explained)f(b)r
(elo)n(w.)50 b(The)523 1959 y(v)-5 b(alue)28 b(and)h(de\014nition)g(of)
f(nil)h(are)f(nil.)40 b(Therefore,)27 b(an)n(y)h(reference)f(to)i(nil)g
(used)f(as)g(a)g(list)523 2059 y(has)f(quic)n(k)h(list)g(t)n(yp)r(e)g
(c)n(hec)n(king,)f(and)g(CAR)i(and)e(CDR)i(can)e(go)g(righ)n(t)g
(through)g(the)i(\014rst)523 2159 y(and)e(second)g(w)n(ords)g(as)g(if)h
(nil)g(w)n(ere)e(a)h(cons)g(ob)5 b(ject.)648 2258 y(When)25
b(there)f(is)h(a)f(reference)g(to)g(nil)h(used)g(as)f(a)g(sym)n(b)r
(ol,)h(the)g(system)f(adds)g(o\013sets)g(to)523 2358
y(the)d(address)f(the)h(same)f(as)h(it)g(do)r(es)f(for)h(an)n(y)f(sym)n
(b)r(ol.)34 b(This)21 b(w)n(orks)e(due)i(to)g(a)f(com)n(bination)523
2457 y(of)f(nil)g(p)r(oin)n(ting)g(past)g(the)g(sym)n(b)r(ol)f
(header-w)n(ord)f(and)i(the)g(c)n(hosen)f(list)h(and)g(other-p)r(oin)n
(ter)523 2557 y(t)n(yp)r(e)27 b(tags.)35 b(The)27 b(list)f(t)n(yp)r(e)h
(tag)f(is)g(four)g(less)g(than)h(the)f(other-p)r(oin)n(ter)f(t)n(yp)r
(e)i(tag,)f(but)h(nil)523 2657 y(p)r(oin)n(ts)h(four)f(additional)g(b)n
(ytes)g(in)n(to)g(its)h(sym)n(b)r(ol)f(data-blo)r(c)n(k.)648
2756 y(;;;;)g(Arra)n(y)f(Headers.)648 2856 y(The)h(arra)n(y-header)d
(data-blo)r(c)n(k)i(has)h(the)h(follo)n(wing)f(format:)523
3005 y Fd(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)
o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(--)523
3105 y(|)43 b(Header)e(Len)i(\(24)f(bits\))g(=)h(Array)e(Rank)h(+5)130
b(|)43 b(Array)f(Type)g(\(8)g(bits\))g(|)523 3205 y(----------------)o
(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o
(--)o(---)o(--)o(--)o(---)o(--)o(--)523 3304 y(|)653
b(Fill)42 b(Pointer)f(\(30)h(bits\))826 b(|)44 b(0)f(0)g(|)523
3404 y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o
(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(--)523
3504 y(|)653 b(Fill)42 b(Pointer)f(p)i(\(29)g(bits\))e(--)i(t)g(or)g
(nil)129 b(|)43 b(1)h(1)f(1)g(|)523 3603 y(----------------)o(---)o(--)
o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)
o(--)o(--)o(---)o(--)o(--)523 3703 y(|)653 b(Available)40
b(Elements)h(\(30)h(bits\))564 b(|)44 b(0)f(0)g(|)523
3802 y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o
(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(--)523
3902 y(|)653 b(Data)42 b(Vector)f(\(29)i(bits\))782 b(|)43
b(1)h(1)f(1)g(|)523 4002 y(----------------)o(---)o(--)o(---)o(--)o(--)
o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(---)
o(--)o(--)523 4101 y(|)653 b(Displacement)39 b(\(30)j(bits\))826
b(|)44 b(0)f(0)g(|)523 4201 y(----------------)o(---)o(--)o(---)o(--)o
(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o
(---)o(--)o(--)523 4301 y(|)653 b(Displacedp)40 b(\(29)i(bits\))g(--)g
(t)i(or)e(nil)304 b(|)43 b(1)h(1)f(1)g(|)523 4400 y(----------------)o
(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o
(--)o(---)o(--)o(--)o(---)o(--)o(--)523 4500 y(|)653
b(Range)42 b(of)h(First)e(Index)h(\(30)g(bits\))477 b(|)44
b(0)f(0)g(|)523 4599 y(----------------)o(---)o(--)o(---)o(--)o(--)o
(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o
(--)o(--)1831 4699 y(.)1831 4799 y(.)1831 4898 y(.)1893
5147 y Fk(128)p eop
%%Page: 129 130
129 129 bop 523 780 a Fk(The)27 b(arra)n(y)e(t)n(yp)r(e)j(in)f(the)h
(header-w)n(ord)c(is)k(one)e(of)i(the)f(eigh)n(t-bit)g(patterns)g(from)
g(section)523 880 y("Data-Blo)r(c)n(ks)c(and)j(Other-immediates)e(T)n
(yping",)h(indicating)h(that)f(this)h(is)g(a)f(complex)523
980 y(string,)32 b(complex)f(v)n(ector,)h(complex)f(bit-v)n(ector,)h
(or)f(a)g(m)n(ulti-dimensional)g(arra)n(y)-7 b(.)47 b(The)523
1079 y(data)39 b(p)r(ortion)g(of)g(the)h(other-immediate)e(w)n(ord)h
(is)g(the)h(length)f(of)g(the)h(arra)n(y)d(header)523
1179 y(data-blo)r(c)n(k.)f(Due)29 b(to)f(its)g(format,)f(its)h(length)g
(is)g(alw)n(a)n(ys)e(\014v)n(e)h(greater)g(than)h(the)g(arra)n(y's)523
1279 y(n)n(um)n(b)r(er)i(of)h(dimensions.)45 b(The)30
b(follo)n(wing)g(w)n(ords)f(ha)n(v)n(e)g(the)i(follo)n(wing)f(in)n
(terpretations)523 1378 y(and)d(t)n(yp)r(es:)523 1544
y Fj(Fill)k(P)m(oin)m(ter:)41 b Fk(This)30 b(is)h(a)e(\014xn)n(um)i
(indicating)f(the)h(n)n(um)n(b)r(er)f(of)g(elemen)n(ts)h(in)f(the)h
(data)731 1644 y(v)n(ector)i(actually)i(in)g(use.)59
b(This)35 b(is)f(the)i(logical)d(length)i(of)g(the)h(arra)n(y)-7
b(,)34 b(and)h(it)g(is)731 1743 y(t)n(ypically)h(the)h(same)g(v)-5
b(alue)37 b(as)f(the)i(next)f(slot.)65 b(This)37 b(is)g(the)g(second)g
(w)n(ord,)h(so)731 1843 y(LENGTH)24 b(of)f(an)n(y)g(arra)n(y)-7
b(,)23 b(with)h(or)f(without)h(an)g(arra)n(y)d(header,)j(is)g(just)g
(four)g(b)n(ytes)731 1943 y(o\013)j(the)h(p)r(oin)n(ter)f(to)h(it.)523
2109 y Fj(Fill)j(P)m(oin)m(ter)h(P:)41 b Fk(This)29 b(is)g(either)g(T)g
(or)f(NIL)h(and)g(indicates)g(whether)g(the)g(arra)n(y)e(uses)731
2208 y(the)h(\014ll-p)r(oin)n(ter)f(or)f(not.)523 2374
y Fj(Av)-5 b(ailable)31 b(Elemen)m(ts:)39 b Fk(This)29
b(is)f(a)h(\014xn)n(um)g(indicating)g(the)g(n)n(um)n(b)r(er)f(of)h
(elemen)n(ts)g(for)731 2474 y(whic)n(h)h(there)g(is)h(space)f(in)h(the)
g(data)f(v)n(ector.)44 b(This)31 b(is)f(greater)f(than)i(or)e(equal)h
(to)731 2574 y(the)e(logical)e(length)i(of)f(the)h(arra)n(y)d(when)j
(it)g(is)g(a)f(v)n(ector)f(ha)n(ving)h(a)g(\014ll)h(p)r(oin)n(ter.)523
2740 y Fj(Data)33 b(V)-8 b(ector:)42 b Fk(This)33 b(is)g(a)g(p)r(oin)n
(ter)g(descriptor)f(referencing)g(the)h(actual)g(data)g(of)g(the)731
2839 y(arra)n(y)-7 b(.)35 b(This)28 b(a)g(data-blo)r(c)n(k)f(whose)g
(\014rst)h(w)n(ord)e(is)i(a)g(header-w)n(ord)e(with)i(an)g(arra)n(y)731
2939 y(t)n(yp)r(e)21 b(as)g(describ)r(ed)g(in)g(sections)g("Data-Blo)r
(c)n(ks)e(and)i(Header-W)-7 b(ord)19 b(F)-7 b(ormat")21
b(and)731 3039 y("Data-Blo)r(c)n(ks)k(and)i(Other-immediates)g(T)n
(yping")523 3205 y Fj(Displacemen)m(t:)39 b Fk(This)30
b(is)g(a)f(\014xn)n(um)h(added)f(to)h(the)g(computed)f(ro)n(w-ma)5
b(jor)27 b(index)j(for)731 3304 y(an)n(y)c(arra)n(y)-7
b(.)35 b(This)28 b(is)f(t)n(ypically)g(zero.)523 3470
y Fj(Displacedp:)41 b Fk(This)36 b(is)g(either)f(t)i(or)e(nil.)62
b(This)36 b(is)g(separate)f(from)g(the)i(displacemen)n(t)731
3570 y(slot,)26 b(so)g(most)h(arra)n(y)d(accesses)i(can)g(simply)h(add)
f(in)h(the)h(displacemen)n(t)e(slot.)36 b(The)731 3670
y(rare)30 b(need)i(to)f(kno)n(w)g(if)i(an)e(arra)n(y)f(is)h(displaced)h
(costs)f(one)g(extra)g(w)n(ord)g(in)h(arra)n(y)731 3769
y(headers)26 b(whic)n(h)i(probably)e(aren't)h(v)n(ery)g(frequen)n(t)g
(an)n(yw)n(a)n(y)-7 b(.)523 3935 y Fj(Range)31 b(of)h(First)g(Index:)41
b Fk(This)24 b(is)g(a)g(\014xn)n(um)g(indicating)g(the)h(n)n(um)n(b)r
(er)f(of)g(elemen)n(ts)g(in)731 4035 y(the)33 b(\014rst)g(dimension)g
(of)g(the)h(arra)n(y)-7 b(.)51 b(Legal)32 b(index)h(v)-5
b(alues)33 b(are)f(zero)g(to)h(one)g(less)731 4134 y(than)26
b(this)g(n)n(um)n(b)r(er)g(inclusiv)n(ely)-7 b(.)35 b(IF)27
b(the)f(arra)n(y)e(is)h(zero-dimensional,)g(this)h(slot)f(is)731
4234 y(non-existen)n(t.)523 4400 y Fj(...)41 b(\(remaining)30
b(slots\):)40 b Fk(There)33 b(is)g(an)g(additional)g(slot)g(in)h(the)g
(header)f(for)g(eac)n(h)f(di-)731 4500 y(mension)j(of)h(the)g(arra)n(y)
-7 b(.)60 b(These)35 b(are)g(the)h(same)f(as)h(the)g(Range)f(of)h
(First)f(Index)731 4599 y(slot.)1893 5147 y(129)p eop
%%Page: 130 131
130 130 bop 523 614 a Ff(37.10)136 b(Bign)l(ums)523 796
y Fk(Bign)n(um)27 b(data-blo)r(c)n(ks)f(ha)n(v)n(e)h(the)h(follo)n
(wing)e(format:)523 950 y Fd(----------------)o(---)o(--)o(---)o(--)o
(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)523
1049 y(|)261 b(Length)41 b(\(24)i(bits\))346 b(|)43 b(Bignum)e(Type)h
(\(8)h(bits\))f(|)523 1149 y(----------------)o(---)o(--)o(---)o(--)o
(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)523
1249 y(|)566 b(least)42 b(significant)d(bits)783 b(|)523
1348 y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o
(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)1743 1448 y(.)1743
1547 y(.)1743 1647 y(.)523 1801 y Fk(The)30 b(elemen)n(ts)g(con)n(tain)
g(the)g(t)n(w)n(o's)f(complemen)n(t)i(represen)n(tation)d(of)i(the)h
(in)n(teger)e(with)523 1900 y(the)j(least)f(signi\014can)n(t)f(bits)i
(in)g(the)g(\014rst)f(elemen)n(t)g(or)g(closer)f(to)h(the)h(header.)47
b(The)32 b(sign)523 2000 y(information)27 b(is)g(in)h(the)g(high)g(end)
g(of)f(the)h(last)f(elemen)n(t.)523 2272 y Ff(37.11)136
b(Co)t(de)45 b(Data-Blo)t(c)l(ks)523 2453 y Fk(A)35 b(co)r(de)g
(data-blo)r(c)n(k)f(is)g(the)i(run-time)f(represen)n(tation)e(of)i(a)f
("comp)r(onen)n(t".)58 b(A)35 b(com-)523 2553 y(p)r(onen)n(t)30
b(is)g(a)g(connected)g(p)r(ortion)g(of)g(a)g(program's)e(\015o)n(w)h
(graph)h(that)g(is)g(compiled)g(as)g(a)523 2653 y(single)22
b(unit,)h(and)f(it)h(con)n(tains)e(co)r(de)h(for)f(man)n(y)h
(functions.)35 b(Some)22 b(of)g(these)g(functions)g(are)523
2752 y(callable)27 b(from)g(outside)h(of)f(the)h(comp)r(onen)n(t,)f
(and)h(these)g(are)e(termed)i("en)n(try)e(p)r(oin)n(ts".)648
2852 y(Eac)n(h)f(en)n(try)h(p)r(oin)n(t)h(has)e(an)i(asso)r(ciated)e
(user-visible)g(function)i(data-blo)r(c)n(k)e(\(of)i(t)n(yp)r(e)523
2952 y Fd(function)p Fk(\).)33 b(The)24 b(full)h(call)f(con)n(v)n(en)n
(tion)f(pro)n(vides)g(for)g(calling)h(an)g(en)n(try)g(p)r(oin)n(t)g(sp)
r(eci\014ed)523 3051 y(b)n(y)j(a)h(function)g(ob)5 b(ject.)648
3151 y(Although)41 b(all)g(of)h(the)g(function)g(data-blo)r(c)n(ks)e
(for)g(a)i(comp)r(onen)n(t's)f(en)n(try)f(p)r(oin)n(ts)523
3250 y(app)r(ear)c(to)g(the)h(user)f(as)g(distinct)h(ob)5
b(jects,)39 b(the)e(system)f(k)n(eeps)g(all)g(of)h(the)g(co)r(de)f(in)h
(a)523 3350 y(single)e(co)r(de)g(data-blo)r(c)n(k.)59
b(The)36 b(user-visible)e(function)i(ob)5 b(ject)36 b(is)f(actually)g
(a)g(p)r(oin)n(ter)523 3450 y(in)n(to)28 b(the)g(middle)g(of)g(a)g(co)r
(de)g(data-blo)r(c)n(k.)36 b(This)28 b(allo)n(ws)e(an)n(y)i(con)n(trol)
e(transfer)h(within)i(a)523 3549 y(comp)r(onen)n(t)e(to)h(b)r(e)g(done)
f(using)g(a)h(relativ)n(e)e(branc)n(h.)648 3649 y(Besides)d(a)g
(function)i(ob)5 b(ject,)24 b(there)g(are)f(other)g(kinds)h(of)g
(references)f(in)n(to)h(the)g(middle)523 3749 y(of)h(a)h(co)r(de)f
(data-blo)r(c)n(k.)35 b(Con)n(trol)24 b(transfer)g(in)n(to)i(a)f
(function)h(also)e(o)r(ccurs)h(at)g(the)h(return-)523
3848 y(PC)39 b(for)g(a)g(call.)71 b(The)40 b(system)f(represen)n(ts)f
(a)h(return-PC)f(somewhat)g(similarly)h(to)g(a)523 3948
y(function,)32 b(so)e(GC)h(can)f(also)g(recognize)f(a)h(return-PC)g(as)
g(a)g(reference)g(to)g(a)h(co)r(de)f(data-)523 4047 y(blo)r(c)n(k.)36
b(This)28 b(represen)n(tation)e(is)h(kno)n(wn)g(as)g(a)g(Lisp)h(Return)
g(Address)f(\(LRA\).)648 4147 y(It)36 b(is)h(incorrect)e(to)i(think)g
(of)f(a)g(co)r(de)h(data-blo)r(c)n(k)e(as)h(a)g(concatenation)f(of)i
("func-)523 4247 y(tion)c(data-blo)r(c)n(ks".)53 b(Co)r(de)33
b(for)g(a)g(function)h(is)f(not)g(emitted)h(in)g(an)n(y)f(particular)f
(order)523 4346 y(with)g(resp)r(ect)f(to)h(that)g(function's)g
(function-header)f(\(if)h(an)n(y\).)48 b(The)32 b(co)r(de)f(follo)n
(wing)g(a)523 4446 y(function-header)g(ma)n(y)f(only)h(b)r(e)h(a)f
(branc)n(h)f(to)h(some)g(other)g(lo)r(cation)g(where)f(the)i(func-)523
4546 y(tion's)c("real")d(de\014nition)j(is.)648 4645
y(The)f(follo)n(wing)g(are)f(the)i(three)g(kinds)f(of)h(p)r(oin)n(ters)
f(to)g(co)r(de)h(data-blo)r(c)n(ks:)523 4799 y Fj(Co)s(de)j(p)s(oin)m
(ter)g(\(lab)s(eled)g(A)h(b)s(elo)m(w\):)40 b Fk(A)19
b(co)r(de)f(p)r(oin)n(ter)g(is)g(a)g(descriptor,)h(with)g(other-)731
4898 y(p)r(oin)n(ter)h(lo)n(w-tag)e(bits,)23 b(p)r(oin)n(ting)d(to)g
(the)h(b)r(eginning)g(of)f(the)h(co)r(de)f(data-blo)r(c)n(k.)33
b(The)1893 5147 y(130)p eop
%%Page: 131 132
131 131 bop 731 614 a Fk(co)r(de)23 b(p)r(oin)n(ter)g(for)g(the)h
(curren)n(tly)e(running)i(function)g(is)f(alw)n(a)n(ys)f(k)n(ept)h(in)h
(a)f(register)731 714 y(\(CODE\).)g(In)g(addition)h(to)f(allo)n(wing)e
(loading)i(of)g(non-immediate)g(constan)n(ts,)g(this)731
814 y(also)j(serv)n(es)g(to)i(represen)n(t)e(the)i(curren)n(tly)f
(running)g(function)h(to)f(the)h(debugger.)523 980 y
Fj(LRA)k(\(lab)s(eled)f(B)g(b)s(elo)m(w\):)41 b Fk(The)33
b(LRA)h(is)f(a)g(descriptor,)h(with)f(other-p)r(oin)n(ter)f(lo)n(w-)731
1079 y(tag)25 b(bits,)h(p)r(oin)n(ting)g(to)g(a)f(lo)r(cation)g(for)g
(a)h(function)g(call.)36 b(Note)26 b(that)g(this)g(lo)r(cation)731
1179 y(con)n(tains)21 b(no)i(descriptors)e(other)i(than)f(the)i(one)e
(w)n(ord)g(of)h(immediate)g(data,)g(so)f(GC)731 1279
y(can)27 b(treat)g(LRA)h(lo)r(cations)f(the)h(same)f(as)g
(instructions.)523 1445 y Fj(F)-8 b(unction)32 b(\(lab)s(eled)f(C)g(b)s
(elo)m(w\):)41 b Fk(A)29 b(function)h(is)g(a)f(descriptor,)f(with)i
(function)g(lo)n(w-)731 1544 y(tag)d(bits,)i(that)f(is)g(user)f
(callable.)38 b(When)28 b(a)g(function)g(header)g(is)f(referenced)h
(from)731 1644 y(a)c(closure)g(or)g(from)g(the)i(function)f(header's)f
(self-p)r(oin)n(ter,)h(the)g(p)r(oin)n(ter)g(has)f(other-)731
1743 y(p)r(oin)n(ter)32 b(lo)n(w-tag)f(bits,)k(instead)e(of)g(function)
g(lo)n(w-tag)f(bits.)53 b(This)33 b(ensures)f(that)731
1843 y(the)g(in)n(ternal)g(function)h(data-blo)r(c)n(k)e(asso)r(ciated)
g(with)i(a)f(closure)f(app)r(ears)h(to)g(b)r(e)731 1943
y(uncallable)27 b(\(although)g(users)g(should)g(nev)n(er)g(see)g(suc)n
(h)g(an)g(ob)5 b(ject)28 b(an)n(yw)n(a)n(y\).)731 2076
y(Information)34 b(ab)r(out)i(functions)g(that)f(is)h(only)f(useful)h
(for)f(en)n(try)g(p)r(oin)n(ts)g(is)g(k)n(ept)731 2175
y(in)28 b(some)f(descriptors)f(follo)n(wing)g(the)i(function's)g
(self-p)r(oin)n(ter)f(descriptor.)36 b(All)28 b(of)731
2275 y(these)22 b(together)f(with)h(the)h(function's)f(header-w)n(ord)e
(are)h(kno)n(wn)g(as)h(the)g("function)731 2374 y(header".)39
b(GC)29 b(m)n(ust)g(b)r(e)g(able)f(to)h(lo)r(cate)f(the)h(function)h
(header.)39 b(W)-7 b(e)29 b(pro)n(vide)f(for)731 2474
y(this)35 b(b)n(y)f(c)n(haining)g(together)g(the)i(function)f(headers)f
(in)h(a)f(NIL)h(terminated)g(list)731 2574 y(k)n(ept)27
b(in)h(a)f(kno)n(wn)g(slot)g(in)h(the)g(co)r(de)g(data-blo)r(c)n(k.)648
2740 y(A)g(co)r(de)f(data-blo)r(c)n(k)f(has)h(the)h(follo)n(wing)f
(format:)523 2906 y Fd(A)43 b(-->)523 3005 y(****************)o(***)o
(**)o(***)o(**)o(**)o(***)o(**)o(***)o(**)o(**)o(***)o(**)o(***)o(**)o
(***)o(**)o(**)o(***)o(**)o(**)523 3105 y(|)87 b(Header-Word)39
b(count)i(\(24)i(bits\))172 b(|)130 b(Code-Type)40 b(\(8)j(bits\))303
b(|)523 3205 y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o
(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(--)
523 3304 y(|)87 b(Number)41 b(of)i(code)f(words)f(\(fixnum)g(tag\))1175
b(|)523 3404 y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o
(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(--)
523 3504 y(|)87 b(Pointer)40 b(to)j(first)f(function)e(header)h
(\(other-pointer)d(tag\))347 b(|)523 3603 y(----------------)o(---)o
(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o
(---)o(--)o(--)o(---)o(--)o(--)523 3703 y(|)87 b(Debug)41
b(information)e(\(structure)h(tag\))1175 b(|)523 3802
y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o
(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(--)523
3902 y(|)87 b(First)41 b(constant)g(\(a)h(descriptor\))1347
b(|)523 4002 y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o
(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(--)
523 4101 y(|)87 b(...)2483 b(|)523 4201 y(----------------)o(---)o(--)o
(---)o(--)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o
(--)o(--)o(---)o(--)o(--)523 4301 y(|)87 b(Last)42 b(constant)e(\(and)i
(last)g(word)g(of)h(code)e(header\))695 b(|)523 4400
y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o
(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(--)523
4500 y(|)87 b(Some)42 b(instructions)c(\(non-descriptor\))1127
b(|)523 4599 y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o
(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(--)
523 4699 y(|)218 b(\(pad)41 b(to)i(dual-word)d(boundary)g(if)j
(necessary\))737 b(|)523 4898 y(B)43 b(-->)1893 5147
y Fk(131)p eop
%%Page: 132 133
132 132 bop 523 614 a Fd(****************)o(***)o(**)o(***)o(**)o(**)o
(***)o(**)o(***)o(**)o(**)o(***)o(**)o(***)o(**)o(***)o(**)o(**)o(***)o
(**)o(**)523 714 y(|)87 b(Word)42 b(offset)f(from)h(code)g(header)f
(\(24\))129 b(|)h(Return-PC-Type)38 b(\(8\))86 b(|)523
814 y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o
(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(--)523
913 y(|)h(First)41 b(instruction)e(after)j(return)1305
b(|)523 1013 y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o
(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(--)
523 1112 y(|)87 b(...)42 b(more)g(code)g(and)g(LRA)h(header-words)1128
b(|)523 1212 y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o
(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(--)
523 1312 y(|)218 b(\(pad)41 b(to)i(dual-word)d(boundary)g(if)j
(necessary\))737 b(|)523 1511 y(C)43 b(-->)523 1611 y(****************)
o(***)o(**)o(***)o(**)o(**)o(***)o(**)o(***)o(**)o(**)o(***)o(**)o(***)
o(**)o(***)o(**)o(**)o(***)o(**)o(**)523 1710 y(|)87
b(Offset)41 b(from)h(code)g(header)f(\(24\))85 b(|)131
b(Function-Header-)o(Ty)o(pe)37 b(\(8\))86 b(|)523 1810
y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o
(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(--)523
1910 y(|)h(Self-pointer)38 b(back)k(to)h(previous)d(word)i(\(with)g
(other-pointer)c(tag\))k(|)523 2009 y(----------------)o(---)o(--)o
(---)o(--)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o
(--)o(--)o(---)o(--)o(--)523 2109 y(|)87 b(Pointer)40
b(to)j(next)f(function)e(\(other-pointer)e(low-tag\))j(or)h(NIL)217
b(|)523 2208 y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o
(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(--)
523 2308 y(|)87 b(Function)40 b(name)i(\(a)h(string)e(or)i(a)g
(symbol\))1043 b(|)523 2408 y(----------------)o(---)o(--)o(---)o(--)o
(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o
(---)o(--)o(--)523 2507 y(|)87 b(Function)40 b(debug)i(arglist)e(\(a)j
(string\))1174 b(|)523 2607 y(----------------)o(---)o(--)o(---)o(--)o
(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o
(---)o(--)o(--)523 2707 y(|)87 b(Function)40 b(type)i(\(a)h(list-style)
c(function)h(type)i(specifier\))345 b(|)523 2806 y(----------------)o
(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o
(--)o(---)o(--)o(--)o(---)o(--)o(--)523 2906 y(|)87 b(Start)41
b(of)i(instructions)c(for)j(function)e(\(non-descriptor\))386
b(|)523 3005 y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o
(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(--)
523 3105 y(|)87 b(More)42 b(function)e(headers)h(and)h(instructions)d
(and)j(return)f(PCs,)260 b(|)523 3205 y(|)87 b(until)41
b(we)i(reach)f(the)g(total)f(size)h(of)h(header-words)c(+)k(code)347
b(|)523 3304 y(|)87 b(words.)2351 b(|)523 3404 y(----------------)o
(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o
(--)o(---)o(--)o(--)o(---)o(--)o(--)648 3570 y Fk(The)27
b(follo)n(wing)g(are)f(detailed)i(slot)f(descriptions:)523
3736 y Fj(Co)s(de)k(data-blo)s(c)m(k)i(header-w)m(ord:)41
b Fk(The)19 b(immediate)f(data)g(in)h(the)g(co)r(de)f(data-blo)r(c)n
(k's)731 3836 y(header-w)n(ord)27 b(is)i(the)h(n)n(um)n(b)r(er)f(of)g
(leading)g(descriptors)f(in)i(the)f(co)r(de)h(data-blo)r(c)n(k,)731
3935 y(the)36 b(\014xed)g(o)n(v)n(erhead)d(w)n(ords)i(plus)h(the)g(n)n
(um)n(b)r(er)g(of)g(constan)n(ts.)60 b(The)36 b(\014rst)g(non-)731
4035 y(descriptor)26 b(w)n(ord,)g(some)i(co)r(de,)f(app)r(ears)f(at)i
(this)g(w)n(ord)e(o\013set)i(from)f(the)h(header.)523
4201 y Fj(Num)m(b)s(er)i(of)i(co)s(de)f(w)m(ords:)42
b Fk(The)29 b(total)f(n)n(um)n(b)r(er)h(of)g(non-header-w)n(ords)d(in)j
(the)h(co)r(de)731 4301 y(data-blo)r(c)n(k.)38 b(The)29
b(total)g(w)n(ord)e(size)h(of)h(the)g(co)r(de)g(data-blo)r(c)n(k)e(is)i
(the)g(sum)f(of)h(this)731 4400 y(slot)35 b(and)h(the)h(immediate)f
(header-w)n(ord)e(data)h(of)h(the)h(previous)e(slot.)62
b(header-)731 4500 y(w)n(ord.)523 4666 y Fj(P)m(oin)m(ter)32
b(to)g(\014rst)g(function)g(header:)41 b Fk(A)19 b(NIL-terminated)f
(list)h(of)f(the)h(function)g(head-)731 4765 y(ers)26
b(for)i(all)f(en)n(try)g(p)r(oin)n(ts)g(to)h(this)g(comp)r(onen)n(t.)
1893 5147 y(132)p eop
%%Page: 133 134
133 133 bop 523 614 a Fj(Debug)32 b(information:)39 b
Fk(The)18 b(DEBUG-INF)n(O)g(structure)g(describing)g(this)g(comp)r
(onen)n(t.)731 714 y(All)32 b(information)f(that)h(the)g(debugger)e(w)n
(an)n(ts)h(to)g(get)h(from)f(a)g(running)h(function)731
814 y(is)c(k)n(ept)h(in)g(this)h(structure.)40 b(Since)29
b(there)g(are)f(man)n(y)g(functions,)h(the)h(curren)n(t)e(PC)731
913 y(is)34 b(used)g(to)h(lo)r(cate)f(the)h(appropriate)d(debug)j
(information.)56 b(The)35 b(system)f(k)n(eeps)731 1013
y(the)i(debug)g(information)f(separate)f(from)i(the)g(function)h
(data-blo)r(c)n(k,)f(since)g(the)731 1112 y(curren)n(tly)23
b(running)i(function)g(ma)n(y)f(not)g(b)r(e)h(an)g(en)n(try)f(p)r(oin)n
(t.)36 b(There)24 b(is)h(no)f(w)n(a)n(y)g(to)731 1212
y(reco)n(v)n(er)k(the)j(function)g(ob)5 b(ject)31 b(for)f(the)h(curren)
n(tly)f(running)g(function,)j(since)d(this)731 1312 y(data-blo)r(c)n(k)
c(ma)n(y)h(not)g(exist.)523 1478 y Fj(First)32 b(constan)m(t)g(...)41
b(last)32 b(constan)m(t:)42 b Fk(These)29 b(are)g(the)g(constan)n(ts)g
(referenced)g(b)n(y)g(the)731 1577 y(comp)r(onen)n(t,)e(if)h(there)f
(are)g(an)n(y)-7 b(.)523 1779 y Fj(LRA)32 b(header)g(w)m(ord:)42
b Fk(The)26 b(immediate)g(header-w)n(ord)d(data)j(is)g(the)g(w)n(ord)f
(o\013set)h(from)731 1879 y(the)e(enclosing)f(co)r(de)h(data-blo)r(c)n
(k's)e(header-w)n(ord)g(to)i(this)g(w)n(ord.)35 b(This)24
b(allo)n(ws)e(GC)731 1978 y(and)27 b(the)i(debugger)e(to)h(easily)f
(reco)n(v)n(er)f(the)i(co)r(de)g(data-blo)r(c)n(k)e(from)i(a)g(LRA.)g
(The)731 2078 y(co)r(de)23 b(at)g(the)g(return)g(p)r(oin)n(t)h
(restores)d(the)j(curren)n(t)e(co)r(de)h(p)r(oin)n(ter)g(using)g(a)g
(subtract)731 2178 y(immediate)k(of)h(the)g(o\013set,)g(whic)n(h)f(is)h
(kno)n(wn)f(at)g(compile)g(time.)523 2380 y Fj(F)-8 b(unction)32
b(en)m(try)h(p)s(oin)m(t)e(header-w)m(ord:)42 b Fk(The)18
b(immediate)h(header-w)n(ord)d(data)i(is)g(the)731 2479
y(w)n(ord)i(o\013set)i(from)g(the)g(enclosing)f(co)r(de)h(data-blo)r(c)
n(k's)f(header-w)n(ord)e(to)j(this)g(w)n(ord.)731 2579
y(This)27 b(is)h(the)g(same)f(as)g(for)g(the)h(retrun-PC)e(header-w)n
(ord.)523 2745 y Fj(Self-p)s(oin)m(ter)31 b(bac)m(k)i(to)f(header-w)m
(ord:)41 b Fk(In)19 b(a)f(non-closure)f(function,)j(this)f(self-p)r
(oin)n(ter)731 2844 y(to)35 b(the)h(previous)e(header-w)n(ord)f(allo)n
(ws)h(the)i(call)f(sequence)g(to)g(alw)n(a)n(ys)e(indirect)731
2944 y(through)25 b(the)i(second)f(w)n(ord)f(in)i(a)f(user)g(callable)f
(function.)37 b(See)27 b(section)f("Closure)731 3044
y(F)-7 b(ormat".)35 b(With)28 b(a)e(closure,)g(indirecting)g(through)h
(the)g(second)f(w)n(ord)f(gets)i(y)n(ou)f(a)731 3143
y(function)f(header-w)n(ord.)34 b(The)24 b(system)h(ignores)e(this)i
(slot)g(in)g(the)g(function)g(header)731 3243 y(for)30
b(a)h(closure,)f(since)h(it)g(has)g(already)e(indirected)i(once,)h(and)
e(this)i(slot)e(could)h(b)r(e)731 3343 y(some)g(random)f(thing)i(that)g
(causes)f(an)g(error)f(if)i(y)n(ou)f(jump)i(to)e(it.)50
b(This)32 b(p)r(oin)n(ter)731 3442 y(has)26 b(an)h(other-p)r(oin)n(ter)
e(tag)i(instead)g(of)g(a)f(function)i(p)r(oin)n(ter)f(tag,)f
(indicating)h(it)g(is)731 3542 y(not)g(a)g(user)g(callable)g(Lisp)h(ob)
5 b(ject.)523 3708 y Fj(P)m(oin)m(ter)32 b(to)g(next)g(function:)41
b Fk(This)29 b(is)g(the)g(next)g(link)g(in)g(the)g(thread)f(of)h(en)n
(try)f(p)r(oin)n(t)731 3807 y(functions)33 b(found)g(in)h(this)f(comp)r
(onen)n(t.)53 b(This)33 b(v)-5 b(alue)33 b(is)f(NIL)i(when)f(the)g
(curren)n(t)731 3907 y(header)26 b(is)i(the)g(last)f(en)n(try)g(p)r
(oin)n(t)h(in)g(the)g(comp)r(onen)n(t.)523 4073 y Fj(F)-8
b(unction)32 b(name:)40 b Fk(This)29 b(function's)h(name)g(\(for)f
(prin)n(ting\).)43 b(If)30 b(the)g(user)f(de\014ned)h(this)731
4173 y(function)h(with)h(DEFUN,)g(then)g(this)g(is)f(the)g(de\014ned)h
(sym)n(b)r(ol,)g(otherwise)e(it)i(is)f(a)731 4272 y(descriptiv)n(e)26
b(string.)523 4438 y Fj(F)-8 b(unction)32 b(debug)f(arglist:)41
b Fk(A)c(prin)n(ted)h(string)e(represen)n(ting)g(the)i(function's)g
(argu-)731 4538 y(men)n(t)28 b(list,)g(for)g(h)n(uman)f(readabilit)n(y)
-7 b(.)37 b(If)29 b(it)f(is)g(a)f(macro)r(expansion)f(function,)j(then)
731 4638 y(this)c(is)g(the)g(original)f(DEFMA)n(CR)n(O)g(arglist,)h
(not)g(the)g(actual)g(expander)f(function)731 4737 y(arglist.)1893
5147 y(133)p eop
%%Page: 134 135
134 134 bop 523 614 a Fj(F)-8 b(unction)32 b(t)m(yp)s(e:)41
b Fk(A)29 b(list-st)n(yle)e(function)i(t)n(yp)r(e)f(sp)r(eci\014er)g
(represen)n(ting)e(the)i(argumen)n(t)731 714 y(signature)e(and)h
(return)h(t)n(yp)r(es)f(for)g(this)h(function.)38 b(F)-7
b(or)27 b(example,)731 913 y Fd(\(function)39 b(\(fixnum)i(fixnum)g
(fixnum\))g(fixnum\))731 1212 y Fk(or)731 1411 y Fd(\(function)e
(\(string)i(&key)h(\(:start)f(unsigned-byte\)\))c(string\))731
1710 y Fk(This)26 b(information)g(is)g(in)n(tended)h(for)f(mac)n(hine)g
(readablilt)n(y)-7 b(,)26 b(suc)n(h)g(as)g(b)n(y)g(the)h(com-)731
1810 y(piler.)523 2084 y Ff(37.12)136 b(Closure)46 b(F)-11
b(ormat)523 2266 y Fk(A)28 b(closure)e(data-blo)r(c)n(k)h(has)g(the)h
(follo)n(wing)e(format:)523 2432 y Fd(----------------)o(---)o(--)o
(---)o(--)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o
(--)o(--)o(---)o(--)o(--)523 2532 y(|)87 b(Word)42 b(size)g(\(24)g
(bits\))477 b(|)87 b(Closure-Type)39 b(\(8)k(bits\))259
b(|)523 2632 y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o
(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(--)
523 2731 y(|)87 b(Pointer)40 b(to)j(function)e(header)g
(\(other-pointer)c(low-tag\))433 b(|)523 2831 y(----------------)o(---)
o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o
(---)o(--)o(--)o(---)o(--)o(--)523 2930 y(|)1438 b(.)1220
b(|)523 3030 y(|)959 b(Environment)39 b(information)736
b(|)523 3130 y(|)1438 b(.)1220 b(|)523 3229 y(----------------)o(---)o
(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o
(---)o(--)o(--)o(---)o(--)o(--)648 3395 y Fk(A)25 b(closure)e
(descriptor)h(has)g(function)h(lo)n(w-tag)e(bits.)36
b(This)25 b(means)f(that)h(a)g(descriptor)523 3495 y(with)g(function)g
(lo)n(w-tag)d(bits)j(ma)n(y)f(p)r(oin)n(t)g(to)g(either)h(a)f(function)
g(header)g(or)f(to)i(a)e(closure.)523 3595 y(The)31 b(idea)g(is)g(that)
h(an)n(y)e(callable)g(Lisp)h(ob)5 b(ject)31 b(has)g(function)h(lo)n
(w-tag)d(bits.)48 b(Insofar)30 b(as)523 3694 y(call)21
b(is)g(concerned,)h(w)n(e)f(mak)n(e)g(the)h(format)f(of)g(closures)f
(and)i(non-closure)d(functions)j(com-)523 3794 y(patible.)42
b(This)29 b(is)g(the)g(reason)f(for)g(the)i(self-p)r(oin)n(ter)e(in)i
(a)f(function)g(header.)41 b(Whenev)n(er)523 3894 y(y)n(ou)26
b(ha)n(v)n(e)f(a)h(callable)f(ob)5 b(ject,)27 b(y)n(ou)e(just)i(jump)g
(through)f(the)g(second)g(w)n(ord,)g(o\013set)g(some)523
3993 y(b)n(ytes,)h(and)h(go.)523 4268 y Ff(37.13)136
b(F)-11 b(unction)44 b(call)523 4450 y Fk(Due)35 b(to)g(alignmen)n(t)f
(requiremen)n(ts)g(and)g(lo)n(w-tag)f(co)r(des,)k(it)e(is)f(not)h(p)r
(ossible)g(to)f(use)h(a)523 4549 y(hardw)n(are)d(call)h(instruction)g
(to)h(compute)g(the)g(LRA.)g(Instead)f(the)h(LRA)g(for)f(a)g(call)g(is)
523 4649 y(computed)28 b(b)n(y)f(doing)g(an)g(add-immediate)h(to)f(the)
h(start)f(of)h(the)g(co)r(de)f(data-blo)r(c)n(k.)648
4748 y(An)k(adv)-5 b(an)n(tage)28 b(of)j(using)f(a)g(single)g(data-blo)
r(c)n(k)f(to)i(represen)n(t)e(b)r(oth)i(the)g(descriptor)523
4848 y(and)37 b(non-descriptor)f(parts)h(of)g(a)g(function)h(is)g(that)
f(b)r(oth)h(can)f(b)r(e)h(represen)n(ted)f(b)n(y)g(a)1893
5147 y(134)p eop
%%Page: 135 136
135 135 bop 523 614 a Fk(single)34 b(p)r(oin)n(ter.)57
b(This)34 b(reduces)g(the)h(n)n(um)n(b)r(er)f(of)g(memory)g(accesses)f
(that)h(ha)n(v)n(e)g(to)g(b)r(e)523 714 y(done)d(in)g(a)f(full)h(call.)
46 b(F)-7 b(or)31 b(example,)g(since)f(the)i(constan)n(t)e(p)r(o)r(ol)g
(is)h(implicit)h(in)f(a)f(LRA,)523 814 y(a)e(call)g(need)g(only)g(sa)n
(v)n(e)e(the)j(LRA,)f(rather)f(than)i(sa)n(ving)d(b)r(oth)j(the)g
(return)e(PC)h(and)g(the)523 913 y(constan)n(t)f(p)r(o)r(ol.)523
1187 y Ff(37.14)136 b(Memory)45 b(La)l(y)l(out)523 1369
y Fk(CMU)22 b(Common)g(Lisp)g(has)f(four)g(spaces,)i(read-only)-7
b(,)21 b(static,)i(dynamic-0,)f(and)g(dynamic-)523 1468
y(1.)63 b(Read-only)36 b(con)n(tains)f(ob)5 b(jects)36
b(that)h(the)g(system)f(nev)n(er)f(mo)r(di\014es,)k(mo)n(v)n(es,)f(or)d
(re-)523 1568 y(claims.)65 b(Static)37 b(space)f(con)n(tains)g(some)g
(global)g(ob)5 b(jects)37 b(necessary)e(for)h(the)i(system's)523
1667 y(run)n(time)25 b(or)g(p)r(erformance)f(\(since)i(they)g(are)e(lo)
r(cated)h(at)h(a)f(kno)n(wn)g(o\013set)g(at)g(a)g(kno)n(w)g(ad-)523
1767 y(dress\),)k(and)f(the)h(system)g(nev)n(er)f(mo)n(v)n(es)f(or)h
(reclaims)g(these.)41 b(Ho)n(w)n(ev)n(er,)27 b(GC)i(do)r(es)f(need)523
1867 y(to)e(scan)f(static)h(space)g(for)f(references)g(to)h(mo)n(v)n
(ed)f(ob)5 b(jects.)36 b(Dynamic-0)25 b(and)h(dynamic-1)523
1966 y(are)h(the)h(t)n(w)n(o)e(heap)i(areas)e(for)h(stop-and-cop)n(y)e
(GC)j(algorithms.)648 2066 y(What)f(global)g(ob)5 b(jects)27
b(are)g(at)g(the)h(head)f(of)h(static)f(space???)654
2227 y Fd(NIL)654 2327 y(eval::*top-of-st)o(ac)o(k*)654
2427 y(lisp::*current-c)o(at)o(ch-)o(bl)o(oc)o(k*)654
2526 y(lisp::*current-u)o(nw)o(ind)o(-p)o(ro)o(tec)o(t*)654
2626 y(FLAGS)41 b(\(RT)i(only\))654 2725 y(BSP)f(\(RT)g(only\))654
2825 y(HEAP)g(\(RT)g(only\))648 2986 y Fk(In)c(addition)f(to)h(the)g
(ab)r(o)n(v)n(e)f(spaces,)i(the)g(system)e(has)h(a)f(con)n(trol)g(stac)
n(k,)i(binding)523 3086 y(stac)n(k,)32 b(and)f(a)g(n)n(um)n(b)r(er)h
(stac)n(k.)48 b(The)31 b(binding)h(stac)n(k)f(con)n(tains)f(pairs)h(of)
h(descriptors,)f(a)523 3186 y(sym)n(b)r(ol)g(and)h(its)g(previous)e(v)
-5 b(alue.)49 b(The)32 b(n)n(um)n(b)r(er)f(stac)n(k)g(is)g(the)h(same)g
(as)f(the)h(C)f(stac)n(k,)523 3285 y(and)26 b(the)g(system)g(uses)f(it)
i(for)e(non-Lisp)g(ob)5 b(jects)26 b(suc)n(h)f(as)h(ra)n(w)e(system)i
(p)r(oin)n(ters,)g(sa)n(ving)523 3385 y(non-Lisp)h(registers,)f(parts)h
(of)g(bign)n(um)h(computations,)f(etc.)523 3658 y Ff(37.15)136
b(System)45 b(P)l(oin)l(ters)523 3840 y Fk(The)29 b(system)g(p)r(oin)n
(ters)f(reference)g(ra)n(w)f(allo)r(cated)h(memory)-7
b(,)29 b(data)f(returned)h(b)n(y)f(foreign)523 3940 y(function)22
b(calls,)g(etc.)36 b(The)21 b(system)h(uses)f(these)g(when)h(y)n(ou)f
(need)h(a)f(p)r(oin)n(ter)g(to)h(a)f(non-Lisp)523 4040
y(blo)r(c)n(k)30 b(of)g(memory)-7 b(,)30 b(using)g(an)g(other-p)r(oin)n
(ter.)43 b(This)30 b(pro)n(vides)f(the)h(greatest)f(\015exibilit)n(y)
523 4139 y(b)n(y)40 b(relieving)g(con)n(train)n(ts)f(placed)h(b)n(y)g
(ha)n(ving)f(more)h(direct)g(references)g(that)g(require)523
4239 y(descriptor)26 b(t)n(yp)r(e)i(tags.)648 4338 y(A)g(system)f(area)
f(p)r(oin)n(ter)h(data-blo)r(c)n(k)f(has)h(the)h(follo)n(wing)f
(format:)523 4500 y Fd(----------------)o(---)o(--)o(---)o(--)o(--)o
(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)523
4599 y(|)218 b(1)43 b(\(data-block)c(words\))346 b(|)43
b(SAP)f(Type)g(\(8)h(bits\))f(|)523 4699 y(----------------)o(---)o(--)
o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)
o(--)523 4799 y(|)566 b(system)41 b(area)h(pointer)913
b(|)523 4898 y(----------------)o(---)o(--)o(---)o(--)o(--)o(---)o(--)o
(---)o(--)o(--)o(---)o(--)o(---)o(--)o(---)o(--)1893
5147 y Fk(135)p eop
%%Page: 136 137
136 136 bop 648 614 a Fk("SAP")34 b(means)h("system)f(area)g(p)r(oin)n
(ter",)i(and)f(m)n(uc)n(h)g(of)g(our)g(co)r(de)g(con)n(tains)f(this)523
714 y(naming)39 b(sc)n(heme.)72 b(W)-7 b(e)40 b(don't)g(curren)n(tly)f
(restrict)g(system)g(p)r(oin)n(ters)g(to)g(one)g(area)f(of)523
814 y(memory)-7 b(,)23 b(but)h(if)g(they)f(do)g(p)r(oin)n(t)h(on)n(to)e
(the)i(heap,)f(it)h(is)f(up)h(to)f(the)g(user)g(to)g(prev)n(en)n(t)f(b)
r(eing)523 913 y(screw)n(ed)k(b)n(y)i(GC)g(or)e(whatev)n(er.)1893
5147 y(136)p eop
%%Page: 137 138
137 137 bop 523 1237 a Fg(Chapter)65 b(38)523 1652 y
Fi(Memory)77 b(Managemen)-6 b(t)523 2134 y Ff(38.1)136
b(Stac)l(ks)45 b(and)g(Globals)523 2365 y(38.2)136 b(Heap)45
b(La)l(y)l(out)523 2597 y(38.3)136 b(Garbage)45 b(Collection)1893
5147 y Fk(137)p eop
%%Page: 138 139
138 138 bop 523 1237 a Fg(Chapter)65 b(39)523 1652 y
Fi(In)-6 b(terface)77 b(to)h(C)g(and)523 1901 y(Assem)-6
b(bler)1893 5147 y Fk(138)p eop
%%Page: 139 140
139 139 bop 523 1237 a Fg(Chapter)65 b(40)523 1652 y
Fi(Lo)-6 b(w-lev)g(el)75 b(debugging)1893 5147 y Fk(139)p
eop
%%Page: 140 141
140 140 bop 523 1237 a Fg(Chapter)65 b(41)523 1652 y
Fi(Core)77 b(File)g(F)-19 b(ormat)1893 5147 y Fk(140)p
eop
%%Page: 141 142
141 141 bop 523 1237 a Fg(Chapter)65 b(42)523 1652 y
Fi(F)-19 b(asload)77 b(File)f(F)-19 b(ormat)523 2134
y Ff(42.1)136 b(General)523 2316 y Fk(The)23 b(purp)r(ose)f(of)h(F)-7
b(asload)22 b(\014les)h(is)f(to)h(allo)n(w)f(concise)g(storage)f(and)i
(rapid)f(loading)g(of)g(Lisp)523 2415 y(data,)27 b(particularly)g
(function)h(de\014nitions.)37 b(The)28 b(in)n(ten)n(t)g(is)g(that)g
(loading)e(a)i(F)-7 b(asload)26 b(\014le)523 2515 y(has)32
b(the)i(same)e(e\013ect)i(as)e(loading)g(the)h(ASCI)r(I)h(\014le)f
(from)f(whic)n(h)h(the)h(F)-7 b(asload)31 b(\014le)i(w)n(as)523
2614 y(compiled,)23 b(but)f(accomplishes)e(the)i(tasks)e(more)h
(e\016cien)n(tly)-7 b(.)35 b(One)21 b(noticeable)f(di\013erence,)523
2714 y(of)31 b(course,)g(is)g(that)h(function)g(de\014nitions)f(ma)n(y)
g(b)r(e)g(in)h(compiled)f(form)g(rather)f(than)i(S-)523
2814 y(expression)k(form.)67 b(Another)37 b(is)h(that)f(F)-7
b(asload)37 b(\014les)g(ma)n(y)g(sp)r(ecify)h(in)g(what)g(parts)e(of)
523 2913 y(memory)26 b(the)h(Lisp)f(data)g(should)g(b)r(e)h(allo)r
(cated.)36 b(F)-7 b(or)26 b(example,)g(constan)n(t)g(lists)g(used)h(b)n
(y)523 3013 y(compiled)h(co)r(de)f(ma)n(y)g(b)r(e)h(regarded)e(as)h
(read-only)-7 b(.)648 3113 y(In)37 b(some)f(Lisp)h(implemen)n(tations,)
i(F)-7 b(asload)36 b(\014le)h(formats)f(are)g(designed)h(to)f(allo)n(w)
523 3212 y(sharing)27 b(of)g(co)r(de)h(parts)f(of)h(the)g(\014le,)g(p)r
(ossibly)g(b)n(y)f(direct)h(mapping)g(of)f(pages)g(of)h(the)g(\014le)
523 3312 y(in)n(to)d(the)h(address)e(space)h(of)g(a)g(pro)r(cess.)35
b(This)25 b(tec)n(hnique)h(pro)r(duces)e(great)g(p)r(erformance)523
3411 y(impro)n(v)n(emen)n(ts)35 b(in)h(a)g(paged)g(time-sharing)f
(system.)62 b(Since)37 b(the)f(Mac)n(h)g(pro)5 b(ject)35
b(is)i(to)523 3511 y(pro)r(duce)d(a)g(distributed)h(p)r
(ersonal-computer)d(net)n(w)n(ork)h(system)h(rather)g(than)g(a)g(time-)
523 3611 y(sharing)e(system,)i(e\016ciencies)e(of)h(this)g(t)n(yp)r(e)g
(are)f(explicitly)h Fc(not)g Fk(a)f(goal)f(for)i(the)g(CMU)523
3710 y(Common)27 b(Lisp)h(F)-7 b(asload)26 b(\014le)i(format.)648
3810 y(On)34 b(the)i(other)e(hand,)j(CMU)f(Common)e(Lisp)h(is)g(in)n
(tended)h(to)f(b)r(e)g(p)r(ortable,)i(as)d(it)523 3910
y(will)29 b(ev)n(en)n(tually)f(run)h(on)f(a)h(v)-5 b(ariet)n(y)28
b(of)g(mac)n(hines.)40 b(Therefore)28 b(an)h(explicit)g(goal)e(is)i
(that)523 4009 y(F)-7 b(asload)30 b(\014les)g(shall)h(b)r(e)g(transp)r
(ortable)e(among)h(v)-5 b(arious)30 b(implemen)n(tations,)h(to)g(p)r
(ermit)523 4109 y(e\016cien)n(t)24 b(distribution)g(of)g(programs)e(in)
i(compiled)g(form.)36 b(The)24 b(represen)n(tations)e(of)i(data)523
4208 y(ob)5 b(jects)35 b(in)h(F)-7 b(asload)35 b(\014les)g(shall)g(b)r
(e)h(relativ)n(ely)f(indep)r(enden)n(t)h(of)g(suc)n(h)f(considerations)
523 4308 y(as)29 b(w)n(ord)g(length,)i(n)n(um)n(b)r(er)f(of)g(t)n(yp)r
(e)h(bits,)g(and)f(so)f(on.)44 b(If)31 b(t)n(w)n(o)e(implemen)n
(tations)h(in)n(ter-)523 4408 y(pret)f(the)h(same)e(macro)r(co)r(de)g
(\(compiled)h(co)r(de)g(format\),)h(then)f(F)-7 b(asload)28
b(\014les)h(should)g(b)r(e)523 4507 y(completely)f(compatible.)40
b(If)29 b(they)g(do)f(not,)h(then)g(\014les)g(not)f(con)n(taining)g
(compiled)h(co)r(de)523 4607 y(\(so-called)21 b("F)-7
b(asdump")21 b(data)g(\014les\))h(should)g(still)g(b)r(e)g(compatible.)
35 b(While)22 b(this)h(ma)n(y)e(lead)523 4707 y(to)34
b(a)g(format)g(whic)n(h)g(is)h(not)f(maximally)g(e\016cien)n(t)g(for)g
(a)g(particular)f(implemen)n(tation,)523 4806 y(the)28
b(sacri\014ce)e(of)i(a)f(small)g(amoun)n(t)g(of)h(p)r(erformance)e(is)i
(deemed)g(a)f(w)n(orth)n(while)f(price)h(to)1893 5147
y(141)p eop
%%Page: 142 143
142 142 bop 523 614 a Fk(pa)n(y)27 b(to)g(ac)n(hiev)n(e)g(p)r
(ortabilit)n(y)-7 b(.)648 714 y(The)28 b(primary)f(assumption)g(ab)r
(out)h(data)g(format)f(compatibilit)n(y)h(is)g(that)h(all)e(imple-)523
814 y(men)n(tations)f(can)f(supp)r(ort)h(I/O)f(on)h(\014nite)h(streams)
e(of)h(eigh)n(t-bit)f(b)n(ytes.)36 b(By)26 b("\014nite")g(w)n(e)523
913 y(mean)e(that)f(a)h(de\014nite)g(end-of-\014le)f(p)r(oin)n(t)h(can)
f(b)r(e)h(detected)h(irresp)r(ectiv)n(e)d(of)i(the)g(con)n(ten)n(t)523
1013 y(of)k(the)g(data)f(stream.)36 b(A)28 b(F)-7 b(asload)26
b(\014le)i(will)g(b)r(e)g(regarded)d(as)i(suc)n(h)h(a)f(b)n(yte)g
(stream.)523 1283 y Ff(42.2)136 b(Strategy)523 1465 y
Fk(A)28 b(F)-7 b(asload)26 b(\014le)h(ma)n(y)g(b)r(e)h(regarded)d(as)i
(a)g(h)n(uman-readable)f(pre\014x)h(follo)n(w)n(ed)f(b)n(y)h(co)r(de)g
(in)523 1565 y(a)d(funn)n(y)h(little)h(language.)34 b(When)25
b(in)n(terpreted,)g(this)g(co)r(de)f(will)h(cause)f(the)h(construction)
523 1664 y(of)i(the)g(enco)r(ded)f(data)g(structures.)36
b(The)27 b(virtual)f(mac)n(hine)g(whic)n(h)h(in)n(terprets)f(this)h(co)
r(de)523 1764 y(has)j(a)h Fc(stack)g Fk(and)g(a)f Fc(table)p
Fk(,)j(b)r(oth)e(initially)g(empt)n(y)-7 b(.)47 b(The)31
b(table)g(ma)n(y)f(b)r(e)i(though)n(t)e(of)h(as)523 1863
y(an)d(expandable)f(register)g(\014le;)h(it)h(is)f(used)g(to)g(remem)n
(b)r(er)f(quan)n(tities)h(whic)n(h)g(are)f(needed)523
1963 y(more)33 b(than)g(once.)54 b(The)33 b(elemen)n(ts)g(of)g(b)r(oth)
h(the)g(stac)n(k)e(and)h(the)h(table)f(are)g(Lisp)g(data)523
2063 y(ob)5 b(jects.)36 b(Op)r(erators)24 b(of)i(the)h(funn)n(y)f
(language)f(ma)n(y)g(tak)n(e)h(as)f(op)r(erands)h(follo)n(wing)f(b)n
(ytes)523 2162 y(of)34 b(the)h(data)e(stream,)i(or)e(items)i(p)r(opp)r
(ed)f(from)g(the)h(stac)n(k.)55 b(Results)34 b(ma)n(y)g(b)r(e)g(pushed)
523 2262 y(bac)n(k)29 b(on)n(to)h(the)g(stac)n(k)g(or)f(pushed)h(on)n
(to)g(the)g(table.)45 b(The)30 b(table)g(is)h(an)e(indexable)h(stac)n
(k)523 2362 y(that)e(is)g(nev)n(er)g(p)r(opp)r(ed;)h(it)f(is)g(indexed)
h(relativ)n(e)e(to)h(the)g(base,)g(not)g(the)g(top,)h(so)e(that)i(an)
523 2461 y(item)f(once)f(pushed)h(alw)n(a)n(ys)e(has)h(the)h(same)f
(index.)648 2561 y(More)e(precisely)-7 b(,)26 b(a)f(F)-7
b(asload)25 b(\014le)i(has)e(the)i(follo)n(wing)e(macroscopic)f
(organization.)34 b(It)523 2660 y(is)f(a)g(sequence)g(of)g(zero)f(or)h
(more)f(groups)g(concatenated)h(together.)53 b(End-of-\014le)32
b(m)n(ust)523 2760 y(o)r(ccur)26 b(at)g(the)g(end)h(of)f(the)g(last)g
(group.)35 b(Eac)n(h)25 b(group)g(b)r(egins)h(with)h(a)f(series)f(of)h
(sev)n(en-bit)523 2860 y(ASCI)r(I)d(c)n(haracters)c(terminated)j(b)n(y)
f(one)h(or)f(more)g(b)n(ytes)g(of)h(all)f(ones)h Fd(#xFF)p
Fk(;)e(this)i(is)g(called)523 2959 y(the)g Fc(he)l(ader)p
Fk(.)36 b(F)-7 b(ollo)n(wing)20 b(the)h(b)n(ytes)g(whic)n(h)g
(terminate)g(the)g(header)g(is)g(the)g Fc(b)l(o)l(dy)p
Fk(,)i(a)e(stream)523 3059 y(of)j(b)n(ytes)f(in)h(the)g(funn)n(y)g
(binary)f(language.)34 b(The)23 b(b)r(o)r(dy)h(of)g(necessit)n(y)f(b)r
(egins)g(with)h(a)f(b)n(yte)523 3159 y(other)k(than)h
Fd(#xFF)p Fk(.)e(The)i(b)r(o)r(dy)f(is)h(terminated)f(b)n(y)h(the)g(op)
r(eration)e Fd(FOP-END-GROUP)p Fk(.)648 3258 y(The)i(\014rst)h(nine)g
(c)n(haracters)d(of)j(the)g(header)f(m)n(ust)h(b)r(e)g(")p
Fd(FASL)42 b(FILE)p Fk(")26 b(in)j(upp)r(er-case)523
3358 y(letters.)63 b(The)36 b(rest)g(ma)n(y)g(b)r(e)h(an)n(y)e(ASCI)r
(I)j(text,)h(but)e(b)n(y)f(con)n(v)n(en)n(tion)f(it)h(is)h(formatted)
523 3457 y(in)k(a)f(certain)f(w)n(a)n(y)-7 b(.)74 b(The)41
b(header)e(is)h(divided)h(in)n(to)f(lines,)j(whic)n(h)e(are)e(group)r
(ed)h(in)n(to)523 3557 y(paragraphs.)34 b(A)28 b(paragraph)d(b)r(egins)
i(with)h(a)f(line)h(whic)n(h)f(do)r(es)g Fc(not)h Fk(b)r(egin)f(with)h
(a)f(space)523 3657 y(or)h(tab)h(c)n(haracter,)f(and)g(con)n(tains)g
(all)h(lines)g(up)h(to,)f(but)g(not)g(including,)h(the)f(next)h(suc)n
(h)523 3756 y(line.)72 b(The)39 b(\014rst)g(w)n(ord)f(of)h(a)f
(paragraph,)i(de\014ned)f(to)g(b)r(e)h(all)f(c)n(haracters)d(up)k(to)f
(but)523 3856 y(not)33 b(including)g(the)g(\014rst)g(space,)g(tab,)h
(or)e(end-of-line)h(c)n(haracter,)f(is)h(the)g Fc(name)g
Fk(of)g(the)523 3956 y(paragraph.)h(A)28 b(F)-7 b(asload)27
b(\014le)h(header)e(migh)n(t)i(lo)r(ok)f(something)g(lik)n(e)g(this:)
523 4101 y Fd(FASL)42 b(FILE)g(>SteelesPerq>Use)o(r>)o(Guy)o(>I)o(oHa)o
(ck)o(s>)o(Pre)o(tt)o(y-P)o(ri)o(nt.)o(Sl)o(is)o(p)523
4201 y(Package)f(Pretty-Print)523 4301 y(Compiled)f(31-Mar-1988)f
(09:01:32)i(by)h(some)g(random)f(luser)523 4400 y(Compiler)f(Version)h
(1.6,)h(Lisp)g(Version)f(3.0.)523 4500 y(Functions:)e(INITIALIZE)h
(DRIVER)h(HACK)h(HACK1)f(MUNGE)h(MUNGE1)f(GAZORCH)654
4599 y(MINGLE)g(MUDDLE)g(PERTURB)g(OVERDRIVE)f(GOBBLE-KEYBOARD)654
4699 y(FRY-USER)g(DROP-DEAD)g(HELP)i(CLEAR-MICROCODE)697
4799 y(\045AOS-TRIANGLE)d(\045HARASS-READTAB)o(LE-)o(MA)o(YB)o(E)523
4898 y(Macros:)171 b(PUSH)42 b(POP)h(FROB)f(TWIDDLE)1893
5147 y Fk(142)p eop
%%Page: 143 144
143 143 bop 523 614 a Fc(one)30 b(or)g(mor)l(e)g(bytes)g(of)h
Fd(#xFF)648 714 y Fk(The)25 b(particular)g(paragraph)e(names)i(and)h
(con)n(ten)n(ts)f(sho)n(wn)g(here)g(are)g(only)g(in)n(tended)523
814 y(as)i(suggestions.)523 1088 y Ff(42.3)136 b(F)-11
b(asload)45 b(Language)523 1270 y Fk(Eac)n(h)20 b(op)r(eration)g(in)h
(the)g(binary)g(F)-7 b(asload)19 b(language)h(is)g(an)h(eigh)n(t-bit)g
(\(one-b)n(yte\))g(op)r(co)r(de.)523 1370 y(Eac)n(h)37
b(has)g(a)h(name)g(b)r(eginning)g(with)h(")p Fd(FOP-)p
Fk(".)65 b(In)39 b(the)f(follo)n(wing)f(descriptions,)j(the)523
1469 y(name)f(is)g(follo)n(w)n(ed)g(b)n(y)f(op)r(erand)h(descriptors.)
70 b(Eac)n(h)38 b(descriptor)g(denotes)h(op)r(erands)523
1569 y(that)25 b(follo)n(w)f(the)i(op)r(co)r(de)f(in)g(the)g(input)h
(stream.)35 b(A)25 b(quan)n(tit)n(y)g(in)g(paren)n(theses)f(indicates)
523 1669 y(the)g(n)n(um)n(b)r(er)g(of)g(b)n(ytes)f(of)h(data)f(from)h
(the)g(stream)f(making)g(up)h(the)h(op)r(erand.)34 b(Op)r(erands)523
1768 y(whic)n(h)d(implicitly)h(come)e(from)h(the)g(stac)n(k)f(are)g
(noted)h(in)g(the)g(text.)47 b(The)31 b(notation)g(")p
Fe(\))523 1868 y Fk(stac)n(k")39 b(means)h(that)g(the)h(result)f(is)g
(pushed)g(on)n(to)g(the)g(stac)n(k;)46 b(")p Fe(\))40
b Fk(table")f(similarly)523 1967 y(means)24 b(that)i(the)f(result)f(is)
h(added)g(to)g(the)g(table.)36 b(A)25 b(construction)f(lik)n(e)h(")p
Fc(n)p Fk(\(1\))f Fc(value)p Fk(\()p Fc(n)p Fk(\)")523
2067 y(means)33 b(that)i(\014rst)e(a)g(single)h(b)n(yte)g
Fc(n)f Fk(is)h(read)f(from)g(the)h(input)h(stream,)g(and)e(this)h(b)n
(yte)523 2167 y(sp)r(eci\014es)j(ho)n(w)g(man)n(y)g(b)n(ytes)g(to)h
(read)e(as)h(the)h(op)r(erand)e(named)i Fc(value)p Fk(.)67
b(All)38 b(n)n(umeric)523 2266 y(v)-5 b(alues)25 b(are)f(unsigned)h
(binary)f(in)n(tegers)g(unless)g(otherwise)h(sp)r(eci\014ed.)36
b(V)-7 b(alues)25 b(describ)r(ed)523 2366 y(as)i("signed")g(are)g(in)h
(t)n(w)n(o's-complemen)n(t)f(form)h(unless)f(otherwise)h(sp)r
(eci\014ed.)38 b(When)29 b(an)523 2466 y(in)n(teger)h(read)g(from)h
(the)g(stream)g(o)r(ccupies)f(more)h(than)g(one)f(b)n(yte,)i(the)g
(\014rst)e(b)n(yte)h(read)523 2565 y(is)e(the)g(least)g(signi\014can)n
(t)f(b)n(yte,)h(and)g(the)g(last)g(b)n(yte)g(read)f(is)h(the)g(most)g
(signi\014can)n(t)f(\(and)523 2665 y(con)n(tains)f(the)h(sign)f(bit)h
(as)f(its)h(high-order)d(bit)j(if)h(the)f(en)n(tire)f(in)n(teger)f(is)i
(signed\).)648 2764 y(Some)g(of)h(the)h(op)r(erations)d(are)h(not)h
(necessary)-7 b(,)28 b(but)i(are)e(rather)g(sp)r(ecial)g(cases)g(of)h
(or)523 2864 y(com)n(binations)h(of)i(others.)47 b(These)31
b(are)f(included)i(to)f(reduce)g(the)h(size)f(of)g(the)h(\014le)f(or)g
(to)523 2964 y(sp)r(eed)g(up)g(imp)r(ortan)n(t)g(cases.)46
b(As)31 b(an)f(example,)i(nearly)e(all)g(strings)g(are)g(less)h(than)g
(256)523 3063 y(b)n(ytes)20 b(long,)g(and)g(so)f(a)h(sp)r(ecial)f(form)
h(of)g(string)f(op)r(eration)g(migh)n(t)h(tak)n(e)f(a)g(one-b)n(yte)g
(length)523 3163 y(rather)i(than)h(a)f(four-b)n(yte)g(length.)35
b(As)22 b(another)f(example,)h(some)f(implemen)n(tations)h(ma)n(y)523
3263 y(c)n(ho)r(ose)f(to)h(store)f(bits)i(in)f(an)g(arra)n(y)e(in)i(a)g
(left-to-righ)n(t)f(format)h(within)h(eac)n(h)e(w)n(ord,)h(rather)523
3362 y(than)27 b(righ)n(t-to-left.)36 b(The)26 b(F)-7
b(asload)26 b(\014le)h(format)f(ma)n(y)g(supp)r(ort)h(b)r(oth)g
(formats,)f(with)i(one)523 3462 y(b)r(eing)39 b(signi\014can)n(tly)e
(more)h(e\016cien)n(t)h(than)f(the)h(other)f(for)g(a)g(giv)n(en)g
(implemen)n(tation.)523 3561 y(The)29 b(compiler)f(for)h(an)n(y)f
(implemen)n(tation)h(ma)n(y)f(generate)g(the)h(more)f(e\016cien)n(t)h
(form)g(for)523 3661 y(that)g(implemen)n(tation,)g(and)f(y)n(et)g
(compatibilit)n(y)g(can)g(b)r(e)h(main)n(tained)f(b)n(y)h(requiring)e
(all)523 3761 y(implemen)n(tations)g(to)h(supp)r(ort)f(b)r(oth)h
(formats)f(in)h(F)-7 b(asload)26 b(\014les.)648 3860
y(Measuremen)n(ts)19 b(are)g(to)i(b)r(e)f(made)h(to)f(determine)g(whic)
n(h)h(op)r(eration)e(co)r(des)h(are)g(w)n(orth-)523 3960
y(while;)41 b(little-used)c(op)r(erations)d(ma)n(y)i(b)r(e)h(discarded)
e(and)h(new)h(ones)e(added.)63 b(After)37 b(a)523 4060
y(p)r(oin)n(t)27 b(the)g(de\014nition)g(will)g(b)r(e)g("frozen",)e
(meaning)h(that)h(existing)f(op)r(erations)f(ma)n(y)h(not)523
4159 y(b)r(e)41 b(deleted)f(\(though)g(new)h(ones)e(ma)n(y)h(b)r(e)g
(added;)46 b(some)40 b(op)r(erations)f(co)r(des)h(will)g(b)r(e)523
4259 y(reserv)n(ed)26 b(for)h(that)h(purp)r(ose\).)523
4441 y Fj(0:)235 b Fd(FOP-NOP)731 4541 y Fk(No)26 b(op)r(eration.)36
b(\(This)27 b(is)f(included)h(b)r(ecause)f(it)i(is)e(recognized)f(that)
i(some)f(imple-)731 4641 y(men)n(tations)31 b(ma)n(y)g(b)r(ene\014t)h
(from)g(alignmen)n(t)f(of)g(op)r(erands)g(to)h(some)f(op)r(erations,)
731 4740 y(for)d(example)g(to)g(32-bit)g(b)r(oundaries.)39
b(This)29 b(op)r(eration)e(can)h(b)r(e)i(used)e(to)h(pad)f(the)731
4840 y(instruction)f(stream)g(to)g(a)g(desired)h(b)r(oundary)-7
b(.\))1893 5147 y(143)p eop
%%Page: 144 145
144 144 bop 523 614 a Fj(1:)235 b Fd(FOP-POP)218 b Fe(\))j
Fk(table)731 714 y(One)27 b(item)h(is)f(p)r(opp)r(ed)i(from)e(the)h
(stac)n(k)f(and)g(added)g(to)h(the)g(table.)523 876 y
Fj(2:)235 b Fd(FOP-PUSH)218 b Fc(index)p Fk(\(4\))j Fe(\))h
Fk(stac)n(k)731 976 y(Item)22 b(n)n(um)n(b)r(er)g Fc(index)h
Fk(of)f(the)g(table)h(is)f(pushed)g(on)n(to)f(the)i(stac)n(k.)34
b(The)22 b(\014rst)g(elemen)n(t)731 1075 y(of)27 b(the)h(table)g(is)f
(item)h(n)n(um)n(b)r(er)g(zero.)523 1237 y Fj(3:)235
b Fd(FOP-BYTE-PUSH)216 b Fc(index)p Fk(\(1\))221 b Fe(\))h
Fk(stac)n(k)731 1337 y(Item)22 b(n)n(um)n(b)r(er)g Fc(index)h
Fk(of)f(the)g(table)h(is)f(pushed)g(on)n(to)f(the)i(stac)n(k.)34
b(The)22 b(\014rst)g(elemen)n(t)731 1436 y(of)27 b(the)h(table)g(is)f
(item)h(n)n(um)n(b)r(er)g(zero.)523 1598 y Fj(4:)235
b Fd(FOP-EMPTY-LIST)215 b Fe(\))222 b Fk(stac)n(k)731
1698 y(The)27 b(empt)n(y)h(list)g(\()p Fd(\(\))p Fk(\))f(is)h(pushed)f
(on)n(to)g(the)h(stac)n(k.)523 1860 y Fj(5:)235 b Fd(FOP-TRUTH)217
b Fe(\))222 b Fk(stac)n(k)731 1959 y(The)27 b(standard)g(truth)h(v)-5
b(alue)27 b(\()p Fd(T)p Fk(\))h(is)g(pushed)f(on)n(to)g(the)h(stac)n
(k.)523 2121 y Fj(6:)233 b Fd(FOP-SYMBOL-SAVE)214 b Fc(n)p
Fk(\(4\))219 b Fc(name)p Fk(\()p Fc(n)p Fk(\))g Fe(\))h
Fk(stac)n(k)25 b(&)h(table)731 2221 y(The)20 b(four-b)n(yte)g(op)r
(erand)f Fc(n)i Fk(sp)r(eci\014es)f(the)h(length)f(of)h(the)g(prin)n(t)
f(name)g(of)h(a)f(sym)n(b)r(ol.)731 2320 y(The)27 b(name)g(follo)n(ws,)
g(one)g(c)n(haracter)e(p)r(er)j(b)n(yte,)f(with)h(the)g(\014rst)f(b)n
(yte)g(of)h(the)f(prin)n(t)731 2420 y(name)k(b)r(eing)h(the)g(\014rst)f
(read.)48 b(The)32 b(name)f(is)h(in)n(terned)f(in)h(the)g(default)g
(pac)n(k)-5 b(age,)731 2520 y(and)27 b(the)h(resulting)f(sym)n(b)r(ol)g
(is)h(b)r(oth)g(pushed)f(on)n(to)g(the)h(stac)n(k)f(and)g(added)h(to)f
(the)731 2619 y(table.)523 2781 y Fj(7:)237 b Fd(FOP-SMALL-SYMBOL-)o
(SAV)o(E)221 b Fc(n)p Fk(\(1\))227 b Fc(name)p Fk(\()p
Fc(n)p Fk(\))h Fe(\))f Fk(stac)n(k)731 2881 y(&)27 b(table)731
2980 y(The)22 b(one-b)n(yte)f(op)r(erand)g Fc(n)h Fk(sp)r(eci\014es)g
(the)h(length)f(of)g(the)g(prin)n(t)g(name)g(of)g(a)g(sym)n(b)r(ol.)731
3080 y(The)27 b(name)g(follo)n(ws,)g(one)g(c)n(haracter)e(p)r(er)j(b)n
(yte,)f(with)h(the)g(\014rst)f(b)n(yte)g(of)h(the)f(prin)n(t)731
3180 y(name)k(b)r(eing)h(the)g(\014rst)f(read.)48 b(The)32
b(name)f(is)h(in)n(terned)f(in)h(the)g(default)g(pac)n(k)-5
b(age,)731 3279 y(and)27 b(the)h(resulting)f(sym)n(b)r(ol)g(is)h(b)r
(oth)g(pushed)f(on)n(to)g(the)h(stac)n(k)f(and)g(added)h(to)f(the)731
3379 y(table.)523 3541 y Fj(8:)235 b Fd(FOP-SYMBOL-IN-P)o(ACK)o(AG)o
(E-S)o(AV)o(E)215 b Fc(index)p Fk(\(4\))222 b Fc(n)p
Fk(\(4\))g Fc(name)p Fk(\()p Fc(n)p Fk(\))731 3641 y
Fe(\))f Fk(stac)n(k)27 b(&)g(table)731 3740 y(The)e(four-b)n(yte)g
Fc(index)h Fk(sp)r(eci\014es)f(a)h(pac)n(k)-5 b(age)24
b(stored)h(in)g(the)h(table.)37 b(The)25 b(four-b)n(yte)731
3840 y(op)r(erand)k Fc(n)g Fk(sp)r(eci\014es)h(the)g(length)g(of)g(the)
h(prin)n(t)e(name)h(of)g(a)f(sym)n(b)r(ol.)44 b(The)30
b(name)731 3939 y(follo)n(ws,)23 b(one)g(c)n(haracter)e(p)r(er)i(b)n
(yte,)h(with)g(the)f(\014rst)g(b)n(yte)g(of)h(the)f(prin)n(t)g(name)g
(b)r(eing)731 4039 y(the)37 b(\014rst)h(read.)65 b(The)38
b(name)f(is)h(in)n(terned)f(in)h(the)f(sp)r(eci\014ed)h(pac)n(k)-5
b(age,)39 b(and)e(the)731 4139 y(resulting)27 b(sym)n(b)r(ol)g(is)g(b)r
(oth)h(pushed)g(on)n(to)f(the)h(stac)n(k)e(and)i(added)f(to)h(the)g
(table.)523 4301 y Fj(9:)225 b Fd(FOP-SMALL-SYMBOL-)o(IN)o(-PA)o(CK)o
(AGE)o(-S)o(AV)o(E)197 b Fc(index)p Fk(\(4\))203 b Fc(n)p
Fk(\(1\))g Fc(name)p Fk(\()p Fc(n)p Fk(\))731 4400 y
Fe(\))221 b Fk(stac)n(k)27 b(&)g(table)731 4500 y(The)g(four-b)n(yte)g
Fc(index)h Fk(sp)r(eci\014es)g(a)f(pac)n(k)-5 b(age)26
b(stored)h(in)h(the)g(table.)37 b(The)27 b(one-b)n(yte)731
4599 y(op)r(erand)i Fc(n)g Fk(sp)r(eci\014es)h(the)g(length)g(of)g(the)
h(prin)n(t)e(name)h(of)g(a)f(sym)n(b)r(ol.)44 b(The)30
b(name)731 4699 y(follo)n(ws,)23 b(one)g(c)n(haracter)e(p)r(er)i(b)n
(yte,)h(with)g(the)f(\014rst)g(b)n(yte)g(of)h(the)f(prin)n(t)g(name)g
(b)r(eing)731 4799 y(the)37 b(\014rst)h(read.)65 b(The)38
b(name)f(is)h(in)n(terned)f(in)h(the)f(sp)r(eci\014ed)h(pac)n(k)-5
b(age,)39 b(and)e(the)731 4898 y(resulting)27 b(sym)n(b)r(ol)g(is)g(b)r
(oth)h(pushed)g(on)n(to)f(the)h(stac)n(k)e(and)i(added)f(to)h(the)g
(table.)1893 5147 y(144)p eop
%%Page: 145 146
145 145 bop 523 614 a Fj(10:)225 b Fd(FOP-SYMBOL-IN-BY)o(TE-)o(PA)o
(CKA)o(GE)o(-S)o(AVE)196 b Fc(index)p Fk(\(1\))203 b
Fc(n)p Fk(\(4\))g Fc(name)p Fk(\()p Fc(n)p Fk(\))731
714 y Fe(\))221 b Fk(stac)n(k)27 b(&)g(table)731 814
y(The)g(one-b)n(yte)g Fc(index)h Fk(sp)r(eci\014es)g(a)f(pac)n(k)-5
b(age)26 b(stored)h(in)h(the)g(table.)37 b(The)27 b(four-b)n(yte)731
913 y(op)r(erand)i Fc(n)g Fk(sp)r(eci\014es)h(the)g(length)g(of)g(the)h
(prin)n(t)e(name)h(of)g(a)f(sym)n(b)r(ol.)44 b(The)30
b(name)731 1013 y(follo)n(ws,)23 b(one)g(c)n(haracter)e(p)r(er)i(b)n
(yte,)h(with)g(the)f(\014rst)g(b)n(yte)g(of)h(the)f(prin)n(t)g(name)g
(b)r(eing)731 1112 y(the)37 b(\014rst)h(read.)65 b(The)38
b(name)f(is)h(in)n(terned)f(in)h(the)f(sp)r(eci\014ed)h(pac)n(k)-5
b(age,)39 b(and)e(the)731 1212 y(resulting)27 b(sym)n(b)r(ol)g(is)g(b)r
(oth)h(pushed)g(on)n(to)f(the)h(stac)n(k)e(and)i(added)f(to)h(the)g
(table.)523 1369 y Fj(11:)235 b Fd(FOP-SMALL-SYMBO)o(L-I)o(N-)o(BY)o
(TE-)o(PA)o(CKA)o(GE)o(-S)o(AVE)215 b Fc(index)p Fk(\(1\))223
b Fc(n)p Fk(\(1\))731 1468 y Fc(name)p Fk(\()p Fc(n)p
Fk(\))e Fe(\))h Fk(stac)n(k)26 b(&)i(table)731 1568 y(The)h(one-b)n
(yte)f Fc(index)i Fk(sp)r(eci\014es)f(a)g(pac)n(k)-5
b(age)28 b(stored)g(in)h(the)h(table.)42 b(The)29 b(one-b)n(yte)731
1668 y(op)r(erand)g Fc(n)g Fk(sp)r(eci\014es)h(the)g(length)g(of)g(the)
h(prin)n(t)e(name)h(of)g(a)f(sym)n(b)r(ol.)44 b(The)30
b(name)731 1767 y(follo)n(ws,)23 b(one)g(c)n(haracter)e(p)r(er)i(b)n
(yte,)h(with)g(the)f(\014rst)g(b)n(yte)g(of)h(the)f(prin)n(t)g(name)g
(b)r(eing)731 1867 y(the)37 b(\014rst)h(read.)65 b(The)38
b(name)f(is)h(in)n(terned)f(in)h(the)f(sp)r(eci\014ed)h(pac)n(k)-5
b(age,)39 b(and)e(the)731 1966 y(resulting)27 b(sym)n(b)r(ol)g(is)g(b)r
(oth)h(pushed)g(on)n(to)f(the)h(stac)n(k)e(and)i(added)f(to)h(the)g
(table.)523 2123 y Fj(12:)225 b Fd(FOP-UNINTERNED-S)o(YMB)o(OL)o(-SA)o
(VE)196 b Fc(n)p Fk(\(4\))203 b Fc(name)p Fk(\()p Fc(n)p
Fk(\))g Fe(\))g Fk(stac)n(k)731 2223 y(&)27 b(table)731
2322 y(Lik)n(e)g Fd(FOP-SYMBOL-SAVE)o Fk(,)22 b(except)28
b(that)g(it)g(creates)e(an)h(unin)n(terned)h(sym)n(b)r(ol.)523
2479 y Fj(13:)225 b Fd(FOP-UNINTERNED-S)o(MAL)o(L-)o(SYM)o(BO)o(L-)o
(SAV)o(E)197 b Fc(n)p Fk(\(1\))202 b Fc(name)p Fk(\()p
Fc(n)p Fk(\))i Fe(\))731 2578 y Fk(stac)n(k)26 b(&)h(table)731
2678 y(Lik)n(e)g Fd(FOP-SMALL-SYMBOL)o(-S)o(AVE)o Fk(,)22
b(except)28 b(that)g(it)h(creates)d(an)i(unin)n(terned)g(sym-)731
2778 y(b)r(ol.)523 2934 y Fj(14:)234 b Fd(FOP-PACKAGE)217
b Fe(\))222 b Fk(table)731 3034 y(An)30 b(item)h(is)f(p)r(opp)r(ed)h
(from)f(the)h(stac)n(k;)f(it)h(m)n(ust)f(b)r(e)h(a)f(sym)n(b)r(ol.)44
b(The)31 b(pac)n(k)-5 b(age)28 b(of)731 3133 y(that)f(name)h(is)f(lo)r
(cated)h(and)f(pushed)h(on)n(to)f(the)h(table.)523 3290
y Fj(15:)234 b Fd(FOP-LIST)218 b Fc(length)p Fk(\(1\))k
Fe(\))g Fk(stac)n(k)731 3390 y(The)23 b(unsigned)g(op)r(erand)g
Fc(length)h Fk(sp)r(eci\014es)f(a)g(n)n(um)n(b)r(er)g(of)g(op)r(erands)
g(to)g(b)r(e)h(p)r(opp)r(ed)731 3489 y(from)29 b(the)i(stac)n(k.)44
b(These)30 b(are)f(made)h(in)n(to)g(a)g(list)h(of)f(that)g(length,)h
(and)f(the)h(list)f(is)731 3589 y(pushed)25 b(on)n(to)g(the)h(stac)n
(k.)35 b(The)26 b(\014rst)f(item)h(p)r(opp)r(ed)g(from)f(the)h(stac)n
(k)f(b)r(ecomes)g(the)731 3689 y(last)i(elemen)n(t)g(of)h(the)f(list,)h
(and)f(so)g(on.)37 b(Hence)27 b(an)g(iterativ)n(e)g(lo)r(op)g(can)g
(start)g(with)731 3788 y(the)f(empt)n(y)h(list)f(and)g(p)r(erform)g("p)
r(op)g(an)g(item)h(and)f(cons)g(it)h(on)n(to)e(the)i(list")f
Fc(length)731 3888 y Fk(times.)36 b(\(Lists)26 b(of)g(length)h(greater)
d(than)i(255)f(can)g(b)r(e)i(made)f(b)n(y)f(using)h Fd(FOP-LIST*)731
3987 y Fk(rep)r(eatedly)-7 b(.\))523 4144 y Fj(16:)234
b Fd(FOP-LIST*)218 b Fc(length)p Fk(\(1\))k Fe(\))f Fk(stac)n(k)731
4244 y(This)32 b(is)h(lik)n(e)f Fd(FOP-LIST)e Fk(except)j(that)g(the)g
(constructed)f(list)h(is)g(terminated)f(not)731 4343
y(b)n(y)27 b Fd(\(\))h Fk(\(the)g(empt)n(y)g(list\),)h(but)g(b)n(y)e
(an)h(item)h(p)r(opp)r(ed)f(from)g(the)g(stac)n(k)f(b)r(efore)h(an)n(y)
731 4443 y(others)21 b(are.)34 b(Therefore)21 b Fc(length)p
Fk(+1)h(items)h(are)e(p)r(opp)r(ed)i(in)g(all.)35 b(Hence)22
b(an)g(iterativ)n(e)731 4542 y(lo)r(op)k(can)h(start)g(with)g(a)g(p)r
(opp)r(ed)h(item)f(and)g(p)r(erform)g("p)r(op)g(an)g(item)g(and)g(cons)
g(it)731 4642 y(on)n(to)f(the)i(list")g Fc(length)p Fk(+1)f(times.)523
4799 y Fj(17-24:)234 b Fd(FOP-LIST-1)p Fk(,)23 b Fd(FOP-LIST-2)p
Fk(,)h(...,)k Fd(FOP-LIST-8)731 4898 y(FOP-LIST-)p Fc(k)23
b Fk(is)k(lik)n(e)g Fd(FOP-LIST)d Fk(with)k(a)f(b)n(yte)g(con)n
(taining)f Fc(k)h Fk(follo)n(wing)f(it.)38 b(These)1893
5147 y(145)p eop
%%Page: 146 147
146 146 bop 731 614 a Fk(exist)28 b(purely)h(to)g(reduce)f(the)h(size)g
(of)g(F)-7 b(asload)28 b(\014les.)40 b(Measuremen)n(ts)28
b(need)h(to)g(b)r(e)731 714 y(made)e(to)g(determine)h(the)g(useful)g(v)
-5 b(alues)27 b(of)h Fc(k)p Fk(.)523 880 y Fj(25-32:)234
b Fd(FOP-LIST*-1)p Fk(,)23 b Fd(FOP-LIST*-2)p Fk(,)g(...,)28
b Fd(FOP-LIST*-8)731 980 y(FOP-LIST*-)p Fc(k)14 b Fk(is)19
b(lik)n(e)f Fd(FOP-LIST*)e Fk(with)j(a)f(b)n(yte)h(con)n(taining)f
Fc(k)h Fk(follo)n(wing)e(it.)35 b(These)731 1079 y(exist)28
b(purely)h(to)g(reduce)f(the)h(size)g(of)g(F)-7 b(asload)28
b(\014les.)40 b(Measuremen)n(ts)28 b(need)h(to)g(b)r(e)731
1179 y(made)e(to)g(determine)h(the)g(useful)g(v)-5 b(alues)27
b(of)h Fc(k)p Fk(.)523 1345 y Fj(33:)234 b Fd(FOP-INTEGER)217
b Fc(n)p Fk(\(4\))k Fc(value)p Fk(\()p Fc(n)p Fk(\))h
Fe(\))g Fk(stac)n(k)731 1445 y(A)41 b(four-b)n(yte)e(unsigned)i(op)r
(erand)f(sp)r(eci\014es)g(the)h(n)n(um)n(b)r(er)f(of)h(follo)n(wing)f
(b)n(ytes.)731 1544 y(These)22 b(b)n(ytes)g(de\014ne)h(the)g(v)-5
b(alue)22 b(of)h(a)f(signed)g(in)n(teger)g(in)h(t)n(w)n(o's-complemen)n
(t)e(form.)731 1644 y(The)27 b(\014rst)h(b)n(yte)f(of)h(the)g(v)-5
b(alue)27 b(is)h(the)g(least)f(signi\014can)n(t)g(b)n(yte.)523
1810 y Fj(34:)234 b Fd(FOP-SMALL-INTEGER)215 b Fc(n)p
Fk(\(1\))221 b Fc(value)p Fk(\()p Fc(n)p Fk(\))h Fe(\))f
Fk(stac)n(k)731 1910 y(A)43 b(one-b)n(yte)f(unsigned)h(op)r(erand)f(sp)
r(eci\014es)h(the)g(n)n(um)n(b)r(er)g(of)g(follo)n(wing)f(b)n(ytes.)731
2009 y(These)22 b(b)n(ytes)g(de\014ne)h(the)g(v)-5 b(alue)22
b(of)h(a)f(signed)g(in)n(teger)g(in)h(t)n(w)n(o's-complemen)n(t)e
(form.)731 2109 y(The)27 b(\014rst)h(b)n(yte)f(of)h(the)g(v)-5
b(alue)27 b(is)h(the)g(least)f(signi\014can)n(t)g(b)n(yte.)523
2275 y Fj(35:)234 b Fd(FOP-WORD-INTEGER)215 b Fc(value)p
Fk(\(4\))222 b Fe(\))g Fk(stac)n(k)731 2374 y(A)30 b(four-b)n(yte)f
(signed)g(in)n(teger)g(\(in)i(the)f(range)e Fe(\000)p
Fk(2)2328 2344 y Fa(31)2428 2374 y Fk(to)i(2)2574 2344
y Fa(31)2663 2374 y Fe(\000)20 b Fk(1\))30 b(follo)n(ws)f(the)h(op-)731
2474 y(eration)d(co)r(de.)40 b(A)29 b(LISP)f(in)n(teger)g(\(\014xn)n
(um)h(or)f(bign)n(um\))h(with)g(that)g(v)-5 b(alue)29
b(is)f(con-)731 2574 y(structed)f(and)h(pushed)f(on)n(to)g(the)h(stac)n
(k.)523 2740 y Fj(36:)234 b Fd(FOP-BYTE-INTEGER)215 b
Fc(value)p Fk(\(1\))222 b Fe(\))g Fk(stac)n(k)731 2839
y(A)26 b(one-b)n(yte)f(signed)g(in)n(teger)g(\(in)h(the)g(range)e(-128)
g(to)i(127\))f(follo)n(ws)f(the)i(op)r(eration)731 2939
y(co)r(de.)43 b(A)30 b(LISP)f(in)n(teger)g(\(\014xn)n(um)h(or)f(bign)n
(um\))h(with)g(that)h(v)-5 b(alue)29 b(is)h(constructed)731
3039 y(and)d(pushed)h(on)n(to)f(the)h(stac)n(k.)523 3205
y Fj(37:)234 b Fd(FOP-STRING)218 b Fc(n)p Fk(\(4\))j
Fc(name)p Fk(\()p Fc(n)p Fk(\))h Fe(\))f Fk(stac)n(k)731
3304 y(The)25 b(four-b)n(yte)f(op)r(erand)h Fc(n)g Fk(sp)r(eci\014es)g
(the)h(length)f(of)g(a)g(string)g(to)g(construct.)35
b(The)731 3404 y(c)n(haracters)d(of)k(the)f(string)g(follo)n(w,)h(one)f
(p)r(er)g(b)n(yte.)59 b(The)35 b(constructed)g(string)f(is)731
3504 y(pushed)27 b(on)n(to)g(the)h(stac)n(k.)523 3670
y Fj(38:)234 b Fd(FOP-SMALL-STRING)215 b Fc(n)p Fk(\(1\))221
b Fc(name)p Fk(\()p Fc(n)p Fk(\))h Fe(\))f Fk(stac)n(k)731
3769 y(The)27 b(one-b)n(yte)f(op)r(erand)g Fc(n)h Fk(sp)r(eci\014es)g
(the)h(length)f(of)g(a)g(string)f(to)h(construct.)36
b(The)731 3869 y(c)n(haracters)c(of)k(the)f(string)g(follo)n(w,)h(one)f
(p)r(er)g(b)n(yte.)59 b(The)35 b(constructed)g(string)f(is)731
3968 y(pushed)27 b(on)n(to)g(the)h(stac)n(k.)523 4134
y Fj(39:)234 b Fd(FOP-VECTOR)218 b Fc(n)p Fk(\(4\))j
Fe(\))g Fk(stac)n(k)731 4234 y(The)30 b(four-b)n(yte)g(op)r(erand)g
Fc(n)h Fk(sp)r(eci\014es)g(the)g(length)g(of)g(a)f(v)n(ector)g(of)g
(LISP)h(ob)5 b(jects)731 4334 y(to)35 b(construct.)60
b(The)36 b(elemen)n(ts)f(of)h(the)g(v)n(ector)e(are)h(p)r(opp)r(ed)h
(o\013)f(the)h(stac)n(k;)j(the)731 4433 y(\014rst)26
b(one)g(p)r(opp)r(ed)i(b)r(ecomes)e(the)h(last)f(elemen)n(t)h(of)g(the)
g(v)n(ector.)35 b(The)27 b(constructed)731 4533 y(v)n(ector)f(is)h
(pushed)h(on)n(to)f(the)h(stac)n(k.)523 4699 y Fj(40:)234
b Fd(FOP-SMALL-VECTOR)215 b Fc(n)p Fk(\(1\))221 b Fe(\))h
Fk(stac)n(k)731 4799 y(The)32 b(one-b)n(yte)g(op)r(erand)g
Fc(n)g Fk(sp)r(eci\014es)h(the)f(length)h(of)g(a)f(v)n(ector)f(of)i
(LISP)f(ob)5 b(jects)731 4898 y(to)35 b(construct.)60
b(The)36 b(elemen)n(ts)f(of)h(the)g(v)n(ector)e(are)h(p)r(opp)r(ed)h
(o\013)f(the)h(stac)n(k;)j(the)1893 5147 y(146)p eop
%%Page: 147 148
147 147 bop 731 614 a Fk(\014rst)26 b(one)g(p)r(opp)r(ed)i(b)r(ecomes)e
(the)h(last)f(elemen)n(t)h(of)g(the)g(v)n(ector.)35 b(The)27
b(constructed)731 714 y(v)n(ector)f(is)h(pushed)h(on)n(to)f(the)h(stac)
n(k.)523 880 y Fj(41:)234 b Fd(FOP-UNIFORM-VECTO)o(R)215
b Fc(n)p Fk(\(4\))221 b Fe(\))h Fk(stac)n(k)731 980 y(The)22
b(four-b)n(yte)g(op)r(erand)g Fc(n)h Fk(sp)r(eci\014es)f(the)i(length)f
(of)f(a)h(v)n(ector)e(of)i(LISP)f(ob)5 b(jects)23 b(to)731
1079 y(construct.)34 b(A)24 b(single)e(item)h(is)g(p)r(opp)r(ed)h(from)
e(the)h(stac)n(k)f(and)h(used)g(to)g(initialize)g(all)731
1179 y(elemen)n(ts)k(of)h(the)g(v)n(ector.)35 b(The)28
b(constructed)f(v)n(ector)f(is)i(pushed)g(on)n(to)e(the)i(stac)n(k.)523
1345 y Fj(42:)234 b Fd(FOP-SMALL-UNIFORM)o(-V)o(ECT)o(OR)215
b Fc(n)p Fk(\(1\))221 b Fe(\))g Fk(stac)n(k)731 1445
y(The)24 b(one-b)n(yte)g(op)r(erand)f Fc(n)h Fk(sp)r(eci\014es)h(the)f
(length)h(of)f(a)g(v)n(ector)f(of)i(LISP)f(ob)5 b(jects)23
b(to)731 1544 y(construct.)34 b(A)24 b(single)e(item)h(is)g(p)r(opp)r
(ed)h(from)e(the)h(stac)n(k)f(and)h(used)g(to)g(initialize)g(all)731
1644 y(elemen)n(ts)k(of)h(the)g(v)n(ector.)35 b(The)28
b(constructed)f(v)n(ector)f(is)i(pushed)g(on)n(to)e(the)i(stac)n(k.)523
1810 y Fj(43:)236 b Fd(FOP-INT-VECTOR)218 b Fc(len)p
Fk(\(4\))224 b Fc(size)p Fk(\(1\))h Fc(data)p Fk(\()p
Fe(d)q Fb(l)r(en)18 b Fe(\003)g Fb(count=)p Fk(8)p Fe(e)n
Fk(\))731 1910 y Fe(\))221 b Fk(stac)n(k)731 2009 y(The)33
b(four-b)n(yte)f(op)r(erand)g Fc(n)g Fk(sp)r(eci\014es)h(the)h(length)f
(of)g(a)f(v)n(ector)g(of)h(unsigned)f(in-)731 2109 y(tegers)k(to)h(b)r
(e)h(constructed.)66 b(Eac)n(h)37 b(in)n(teger)f(is)i
Fc(size)g Fk(bits)g(long,)h(and)e(is)h(pac)n(k)n(ed)731
2208 y(according)29 b(to)h(the)i(mac)n(hine's)e(nativ)n(e)g(b)n(yte)h
(ordering.)45 b Fc(size)31 b Fk(m)n(ust)g(b)r(e)g(a)g(directly)731
2308 y(supp)r(orted)23 b(i-v)n(ector)g(elemen)n(t)h(size.)35
b(Curren)n(tly)23 b(supp)r(orted)h(v)-5 b(alues)24 b(are)f(1,2,4,8,16)
731 2408 y(and)k(32.)523 2574 y Fj(44:)225 b Fd(FOP-UNIFORM-INT-)o(VEC)
o(TO)o(R)197 b Fc(n)p Fk(\(4\))203 b Fc(size)p Fk(\(1\))g
Fc(value)p Fk(\(@ceiling<)p Fc(size)p Fk(/8>\))731 2673
y Fe(\))221 b Fk(stac)n(k)731 2773 y(The)33 b(four-b)n(yte)f(op)r
(erand)g Fc(n)g Fk(sp)r(eci\014es)h(the)h(length)f(of)g(a)f(v)n(ector)g
(of)h(unsigned)f(in-)731 2873 y(tegers)c(to)h(construct.)41
b(Eac)n(h)28 b(in)n(teger)h(is)g Fc(size)h Fk(bits)f(big,)h(and)f(is)g
(initialized)h(to)f(the)731 2972 y(v)-5 b(alue)35 b(of)h(the)g(op)r
(erand)e Fc(value)p Fk(.)62 b(The)36 b(constructed)f(v)n(ector)f(is)h
(pushed)h(on)n(to)f(the)731 3072 y(stac)n(k.)523 3238
y Fj(45:)41 b Fk(Un)n(used)523 3404 y Fj(46:)234 b Fd(FOP-SINGLE-FLOAT)
215 b Fc(data)p Fk(\(4\))222 b Fe(\))g Fk(stac)n(k)731
3504 y(The)33 b Fc(data)h Fk(b)n(ytes)f(are)g(read)f(as)h(an)g(in)n
(teger,)h(then)g(turned)g(in)n(to)f(an)g(IEEE)f(single)731
3603 y(\015oat)27 b(\(as)g(though)g(b)n(y)h Fd(make-single-flo)o(at)p
Fk(\).)523 3769 y Fj(47:)234 b Fd(FOP-DOUBLE-FLOAT)215
b Fc(data)p Fk(\(8\))222 b Fe(\))g Fk(stac)n(k)731 3869
y(The)30 b Fc(data)i Fk(b)n(ytes)e(are)g(read)g(as)g(an)g(in)n(teger,)h
(then)g(turned)f(in)n(to)h(an)f(IEEE)f(double)731 3968
y(\015oat)e(\(as)g(though)g(b)n(y)h Fd(make-double-flo)o(at)p
Fk(\).)523 4134 y Fj(48:)234 b Fd(FOP-STRUCT)218 b Fc(n)p
Fk(\(4\))j Fe(\))g Fk(stac)n(k)731 4234 y(The)29 b(four-b)n(yte)f(op)r
(erand)g Fc(n)h Fk(sp)r(eci\014es)g(the)g(length)g(structure)g(to)g
(construct.)40 b(The)731 4334 y(elemen)n(ts)29 b(of)g(the)h(v)n(ector)e
(are)h(p)r(opp)r(ed)h(o\013)g(the)f(stac)n(k;)h(the)g(\014rst)f(one)g
(p)r(opp)r(ed)h(b)r(e-)731 4433 y(comes)24 b(the)h(last)g(elemen)n(t)g
(of)g(the)g(structure.)36 b(The)25 b(constructed)g(v)n(ector)e(is)i
(pushed)731 4533 y(on)n(to)h(the)i(stac)n(k.)523 4699
y Fj(49:)234 b Fd(FOP-SMALL-STRUCT)215 b Fc(n)p Fk(\(1\))221
b Fe(\))h Fk(stac)n(k)731 4799 y(The)30 b(one-b)n(yte)g(op)r(erand)g
Fc(n)h Fk(sp)r(eci\014es)f(the)i(length)f(structure)f(to)g(construct.)
46 b(The)1893 5147 y(147)p eop
%%Page: 148 149
148 148 bop 731 614 a Fk(elemen)n(ts)29 b(of)g(the)h(v)n(ector)e(are)h
(p)r(opp)r(ed)h(o\013)g(the)f(stac)n(k;)h(the)g(\014rst)f(one)g(p)r
(opp)r(ed)h(b)r(e-)731 714 y(comes)24 b(the)h(last)g(elemen)n(t)g(of)g
(the)g(structure.)36 b(The)25 b(constructed)g(v)n(ector)e(is)i(pushed)
731 814 y(on)n(to)h(the)i(stac)n(k.)523 976 y Fj(50-52:)40
b Fk(Un)n(used)523 1137 y Fj(53:)234 b Fd(FOP-EVAL)218
b Fe(\))k Fk(stac)n(k)731 1237 y(P)n(op)33 b(an)h(item)g(from)g(the)h
(stac)n(k)e(and)h(ev)-5 b(aluate)34 b(it)g(\(giv)n(e)g(it)g(to)g
Fd(EVAL)p Fk(\).)f(Push)h(the)731 1337 y(result)27 b(bac)n(k)g(on)n(to)
f(the)i(stac)n(k.)523 1499 y Fj(54:)234 b Fd(FOP-EVAL-FOR-EFFE)o(CT)731
1598 y Fk(P)n(op)29 b(an)h(item)i(from)e(the)h(stac)n(k)e(and)i(ev)-5
b(aluate)30 b(it)h(\(giv)n(e)f(it)h(to)g Fd(EVAL)p Fk(\).)e(The)i
(result)731 1698 y(is)c(ignored.)523 1860 y Fj(55:)234
b Fd(FOP-FUNCALL)217 b Fc(nar)l(gs)p Fk(\(1\))222 b Fe(\))f
Fk(stac)n(k)731 1959 y(P)n(op)34 b Fc(nar)l(gs)p Fk(+1)h(items)h(from)g
(the)g(stac)n(k)f(and)h(apply)f(the)h(last)g(one)f(p)r(opp)r(ed)i(as)e
(a)731 2059 y(function)29 b(to)f(all)h(the)g(rest)f(as)g(argumen)n(ts)f
(\(the)i(\014rst)g(one)f(p)r(opp)r(ed)h(b)r(eing)g(the)g(last)731
2159 y(argumen)n(t\).)36 b(Push)27 b(the)h(result)f(bac)n(k)g(on)n(to)g
(the)h(stac)n(k.)523 2320 y Fj(56:)234 b Fd(FOP-FUNCALL-FOR-E)o(FF)o
(ECT)215 b Fc(nar)l(gs)p Fk(\(1\))731 2420 y(P)n(op)34
b Fc(nar)l(gs)p Fk(+1)h(items)h(from)g(the)g(stac)n(k)f(and)h(apply)f
(the)h(last)g(one)f(p)r(opp)r(ed)i(as)e(a)731 2520 y(function)29
b(to)f(all)h(the)g(rest)f(as)g(argumen)n(ts)f(\(the)i(\014rst)g(one)f
(p)r(opp)r(ed)h(b)r(eing)g(the)g(last)731 2619 y(argumen)n(t\).)36
b(The)27 b(result)h(is)f(ignored.)523 2781 y Fj(57:)234
b Fd(FOP-CODE-FORMAT)215 b Fc(implementation)p Fk(\(1\))223
b Fc(version)p Fk(\(1\))731 2881 y(This)30 b(F)n(OP)f(sp)r(eci\014ers)h
(the)h(co)r(de)f(format)g(for)g(follo)n(wing)f(co)r(de)i(ob)5
b(jects.)45 b(The)30 b(op-)731 2980 y(erations)g Fd(FOP-CODE)d
Fk(and)k(its)h(relativ)n(es)e(ma)n(y)g(not)h(o)r(ccur)g(in)g(a)g(group)
f(un)n(til)i(after)731 3080 y Fd(FOP-CODE-FORMAT)26 b
Fk(has)32 b(app)r(eared;)j(there)d(is)h(no)f(default)h(format.)52
b(The)32 b Fc(imple-)731 3180 y(mentation)d Fk(is)h(an)f(in)n(teger)g
(indicating)g(the)h(target)f(hardw)n(are)f(and)h(en)n(vironmen)n(t.)731
3279 y(See)40 b Fd(compiler/generic/)o(vm-)o(ma)o(cs.)o(li)o(sp)34
b Fk(for)41 b(the)g(curren)n(tly)f(de\014ned)h(imple-)731
3379 y(men)n(tations.)36 b Fc(version)28 b Fk(for)f(an)g(implemen)n
(tation)h(is)f(increased)f(whenev)n(er)g(there)h(is)731
3479 y(a)g(c)n(hange)f(that)i(renders)f(old)g(fasl)g(\014les)h(un)n
(usable.)523 3641 y Fj(58:)225 b Fd(FOP-CODE)200 b Fc(nitems)p
Fk(\(4\))i Fc(size)p Fk(\(4\))i Fc(c)l(o)l(de)p Fk(\()p
Fc(size)p Fk(\))h Fe(\))e Fk(stac)n(k)731 3740 y(A)21
b(compiled)f(function)h(is)g(constructed)f(and)h(pushed)f(on)n(to)g
(the)h(stac)n(k.)34 b(This)21 b(ob)5 b(ject)731 3840
y(is)18 b(in)g(the)h(format)f(sp)r(eci\014ed)h(b)n(y)f(the)h(most)f
(recen)n(t)f(o)r(ccurrence)h(of)g Fd(FOP-CODE-FORMAT)p
Fk(.)731 3939 y(The)33 b(op)r(erand)g Fc(nitems)g Fk(sp)r(eci\014es)g
(a)g(n)n(um)n(b)r(er)h(of)f(items)h(to)f(p)r(op)h(o\013)f(the)h(stac)n
(k)f(to)731 4039 y(use)28 b(in)g(the)g("b)r(o)n(xed)g(storage")d
(section.)38 b(The)28 b(op)r(erand)g Fc(c)l(o)l(de)h
Fk(is)f(a)f(string)h(of)g(b)n(ytes)731 4139 y(constituting)f(the)h
(compiled)g(executable)f(co)r(de.)523 4301 y Fj(59:)234
b Fd(FOP-SMALL-CODE)214 b Fc(nitems)p Fk(\(1\))221 b
Fc(size)p Fk(\(2\))g Fc(c)l(o)l(de)p Fk(\()p Fc(size)p
Fk(\))h Fe(\))731 4400 y Fk(stac)n(k)731 4500 y(A)21
b(compiled)f(function)h(is)g(constructed)f(and)h(pushed)f(on)n(to)g
(the)h(stac)n(k.)34 b(This)21 b(ob)5 b(ject)731 4599
y(is)18 b(in)g(the)h(format)f(sp)r(eci\014ed)h(b)n(y)f(the)h(most)f
(recen)n(t)f(o)r(ccurrence)h(of)g Fd(FOP-CODE-FORMAT)p
Fk(.)731 4699 y(The)33 b(op)r(erand)g Fc(nitems)g Fk(sp)r(eci\014es)g
(a)g(n)n(um)n(b)r(er)h(of)f(items)h(to)f(p)r(op)h(o\013)f(the)h(stac)n
(k)f(to)731 4799 y(use)28 b(in)g(the)g("b)r(o)n(xed)g(storage")d
(section.)38 b(The)28 b(op)r(erand)g Fc(c)l(o)l(de)h
Fk(is)f(a)f(string)h(of)g(b)n(ytes)731 4898 y(constituting)f(the)h
(compiled)g(executable)f(co)r(de.)1893 5147 y(148)p eop
%%Page: 149 150
149 149 bop 523 614 a Fj(60-61:)40 b Fk(Un)n(used)523
780 y Fj(62:)234 b Fd(FOP-VERIFY-TABLE-)o(SI)o(ZE)215
b Fc(size)p Fk(\(4\))731 880 y(If)29 b(the)h(curren)n(t)e(size)h(of)g
(the)h(table)f(is)g(not)g(equal)g(to)g Fc(size)p Fk(,)h(then)g(an)f
(inconsistency)731 980 y(has)23 b(b)r(een)i(detected.)36
b(This)24 b(op)r(eration)f(is)h(inserted)g(in)n(to)g(a)g(F)-7
b(asload)23 b(\014le)h(purely)g(for)731 1079 y(error-c)n(hec)n(king)g
(purp)r(oses.)39 b(It)29 b(is)f(go)r(o)r(d)g(practice)f(for)h(a)g
(compiler)g(to)g(output)h(this)731 1179 y(at)e(least)g(at)h(the)g(end)g
(of)f(ev)n(ery)f(group,)h(if)h(not)g(more)e(often.)523
1345 y Fj(63:)234 b Fd(FOP-VERIFY-EMPTY-)o(ST)o(ACK)731
1445 y Fk(If)35 b(the)h(stac)n(k)f(is)g(not)h(curren)n(tly)e(empt)n(y)
-7 b(,)38 b(then)e(an)f(inconsistency)g(has)g(b)r(een)h(de-)731
1544 y(tected.)73 b(This)40 b(op)r(eration)e(is)i(inserted)f(in)n(to)h
(a)f(F)-7 b(asload)38 b(\014le)i(purely)g(for)f(error-)731
1644 y(c)n(hec)n(king)34 b(purp)r(oses.)60 b(It)36 b(is)g(go)r(o)r(d)f
(practice)g(for)g(a)g(compiler)g(to)g(output)i(this)f(at)731
1743 y(least)27 b(at)g(the)h(end)g(of)g(ev)n(ery)e(group,)g(if)j(not)e
(more)g(often.)523 1910 y Fj(64:)234 b Fd(FOP-END-GROUP)731
2009 y Fk(This)24 b(is)h(the)g(last)f(op)r(eration)g(of)h(a)f(group.)35
b(If)25 b(this)g(is)g(not)f(the)h(last)g(b)n(yte)f(of)h(the)g(\014le,)
731 2109 y(then)j(a)f(new)h(group)e(follo)n(ws;)h(the)h(next)f(nine)h
(b)n(ytes)g(m)n(ust)f(b)r(e)h(")p Fd(FASL)42 b(FILE)p
Fk(".)523 2275 y Fj(65:)234 b Fd(FOP-POP-FOR-EFFEC)o(T)215
b Fk(stac)n(k)221 b Fe(\))731 2374 y Fk(One)27 b(item)h(is)f(p)r(opp)r
(ed)i(from)e(the)h(stac)n(k.)523 2540 y Fj(66:)234 b
Fd(FOP-MISC-TRAP)216 b Fe(\))222 b Fk(stac)n(k)731 2640
y(A)28 b(trap)f(ob)5 b(ject)27 b(is)h(pushed)f(on)n(to)g(the)h(stac)n
(k.)523 2806 y Fj(67:)41 b Fk(Un)n(used)523 2972 y Fj(68:)234
b Fd(FOP-CHARACTER)216 b Fc(char)l(acter)p Fk(\(3\))223
b Fe(\))e Fk(stac)n(k)731 3072 y(The)23 b(three)g(b)n(ytes)g(are)g
(read)f(as)h(an)g(in)n(teger)g(then)h(con)n(v)n(erted)e(to)h(a)g(c)n
(haracter.)33 b(This)731 3171 y(F)n(OP)21 b(is)i(curren)n(tly)f(rather)
g(useless,)h(as)f(extended)h(c)n(haracters)e(are)h(not)g(supp)r(orted.)
523 3337 y Fj(69:)234 b Fd(FOP-SHORT-CHARACT)o(ER)215
b Fc(char)l(acter)p Fk(\(1\))222 b Fe(\))g Fk(stac)n(k)731
3437 y(The)33 b(one)h(b)n(yte)f(sp)r(eci\014es)h(the)g(co)r(de)f(of)h
(a)f(Common)g(Lisp)h(c)n(haracter)d(ob)5 b(ject.)55 b(A)731
3537 y(c)n(haracter)25 b(is)j(constructed)f(and)g(pushed)h(on)n(to)f
(the)h(stac)n(k.)523 3703 y Fj(70:)234 b Fd(FOP-RATIO)218
b Fe(\))j Fk(stac)n(k)731 3802 y(Creates)18 b(a)i(ratio)f(from)h(t)n(w)
n(o)f(in)n(tegers)g(p)r(opp)r(ed)h(from)g(the)g(stac)n(k.)33
b(The)20 b(denominator)731 3902 y(is)27 b(p)r(opp)r(ed)h(\014rst,)g
(the)g(n)n(umerator)e(second.)523 4068 y Fj(71:)234 b
Fd(FOP-COMPLEX)217 b Fe(\))222 b Fk(stac)n(k)731 4168
y(Creates)21 b(a)h(complex)h(n)n(um)n(b)r(er)f(from)g(t)n(w)n(o)g(n)n
(um)n(b)r(ers)g(p)r(opp)r(ed)i(from)e(the)h(stac)n(k.)34
b(The)731 4267 y(imaginary)26 b(part)h(is)g(p)r(opp)r(ed)h(\014rst,)g
(the)g(real)e(part)i(second.)523 4433 y Fj(72-73:)40
b Fk(Un)n(used)523 4599 y Fj(74:)234 b Fd(FOP-FSET)731
4699 y Fk(Except)29 b(in)h(the)g(cold)g(loader)f(\(Genesis\),)h(this)g
(is)g(a)g(no-op)f(with)h(t)n(w)n(o)f(stac)n(k)g(argu-)731
4799 y(men)n(ts.)34 b(In)22 b(the)g(initial)f(core)f(this)i(is)f(used)g
(to)h(mak)n(e)e(DEFUN)i(functions)g(de\014ned)g(at)731
4898 y(cold-load)e(time)j(so)f(that)g(global)f(functions)i(can)e(b)r(e)
i(called)f(b)r(efore)g(top-lev)n(el)f(forms)1893 5147
y(149)p eop
%%Page: 150 151
150 150 bop 731 614 a Fk(are)33 b(run)h(\(whic)n(h)h(normally)e
(installs)h(de\014nitions.\))58 b(Genesis)34 b(p)r(ops)g(the)h(top)f(t)
n(w)n(o)731 714 y(things)19 b(o\013)h(of)f(the)h(stac)n(k)f(and)h
(e\013ectiv)n(ely)f(do)r(es)g(\(SETF)h(SYMBOL-FUNCTION\).)523
880 y Fj(75:)237 b Fd(FOP-LISP-SYMBOL-)o(SA)o(VE)220
b Fc(n)p Fk(\(4\))226 b Fc(name)p Fk(\()p Fc(n)p Fk(\))h
Fe(\))f Fk(stac)n(k)731 980 y(&)27 b(table)731 1079 y(Lik)n(e)d
Fd(FOP-SYMBOL-SAVE)p Fk(,)19 b(except)25 b(that)g(it)h(creates)d(a)i
(sym)n(b)r(ol)f(in)i(the)f(LISP)g(pac)n(k-)731 1179 y(age.)523
1345 y Fj(76:)225 b Fd(FOP-LISP-SMALL-S)o(YMB)o(OL)o(-SA)o(VE)196
b Fc(n)p Fk(\(1\))203 b Fc(name)p Fk(\()p Fc(n)p Fk(\))g
Fe(\))g Fk(stac)n(k)731 1445 y(&)27 b(table)731 1544
y(Lik)n(e)20 b Fd(FOP-SMALL-SYMBOL)o(-S)o(AV)o(E)p Fk(,)15
b(except)21 b(that)g(it)g(creates)e(a)i(sym)n(b)r(ol)f(in)h(the)g(LISP)
731 1644 y(pac)n(k)-5 b(age.)523 1810 y Fj(77:)225 b
Fd(FOP-KEYWORD-SYMB)o(OL-)o(SA)o(VE)196 b Fc(n)p Fk(\(4\))203
b Fc(name)p Fk(\()p Fc(n)p Fk(\))h Fe(\))e Fk(stac)n(k)731
1910 y(&)27 b(table)731 2009 y(Lik)n(e)19 b Fd(FOP-SYMBOL-SAVE)p
Fk(,)13 b(except)20 b(that)g(it)g(creates)f(a)g(sym)n(b)r(ol)h(in)g
(the)g(KEYW)n(ORD)731 2109 y(pac)n(k)-5 b(age.)523 2275
y Fj(78:)239 b Fd(FOP-KEYWORD-SMALL)o(-SY)o(MB)o(OL-)o(SA)o(VE)225
b Fc(n)p Fk(\(1\))232 b Fc(name)p Fk(\()p Fc(n)p Fk(\))g
Fe(\))731 2374 y Fk(stac)n(k)26 b(&)h(table)731 2474
y(Lik)n(e)43 b Fd(FOP-SMALL-SYMBO)o(L-S)o(AV)o(E)p Fk(,)37
b(except)44 b(that)g(it)g(creates)e(a)h(sym)n(b)r(ol)g(in)h(the)731
2574 y(KEYW)n(ORD)27 b(pac)n(k)-5 b(age.)523 2740 y Fj(79-80:)40
b Fk(Un)n(used)523 2906 y Fj(81:)234 b Fd(FOP-NORMAL-LOAD)731
3005 y Fk(This)19 b(F)n(OP)f(is)h(used)g(in)h(conjunction)f(with)h(the)
f(cold)g(loader)f(\(Genesis\))h(to)g(read)g(top-)731
3105 y(lev)n(el)29 b(pac)n(k)-5 b(age)28 b(manipulation)h(forms.)43
b(These)29 b(forms)g(are)g(to)h(b)r(e)g(read)f(as)g(though)731
3205 y(b)n(y)k(the)i(normal)e(loaded,)i(so)e(that)h(they)g(can)g(b)r(e)
g(ev)-5 b(aluated)34 b(at)g(cold)g(load)f(time,)731 3304
y(instead)e(of)h(b)r(eing)g(dump)r(ed)h(in)n(to)f(the)g(initial)h(core)
e(image.)49 b(A)32 b(no-op)f(in)h(normal)731 3404 y(loading.)523
3570 y Fj(82:)234 b Fd(FOP-MAYBE-COLD-LO)o(AD)731 3670
y Fk(Undo)r(es)27 b(the)h(e\013ect)g(of)g Fd(FOP-NORMAL-LOAD)p
Fk(.)523 3836 y Fj(83:)234 b Fd(FOP-ARRAY)218 b Fc(r)l(ank)p
Fk(\(4\))j Fe(\))h Fk(stac)n(k)731 3935 y(This)26 b(op)r(eration)f
(creates)g(a)h(simple)g(arra)n(y)e(header)h(\(used)i(for)f(simple-arra)
n(ys)d(with)731 4035 y(rank)33 b(/=)h(1\).)57 b(The)34
b(data)g(v)n(ector)f(is)h(p)r(opp)r(ed)h(o\013)g(of)f(the)h(stac)n(k,)g
(and)f(then)h Fc(r)l(ank)731 4134 y Fk(dimensions)24
b(are)g(p)r(opp)r(ed)i(o\013)f(of)g(the)g(stac)n(k)f(\(the)i(highest)f
(dimensions)f(is)h(on)g(top.\))523 4301 y Fj(84-139:)40
b Fk(Un)n(used)523 4467 y Fj(140:)234 b Fd(FOP-ALTER-CODE)216
b Fc(index)p Fk(\(4\))731 4566 y(This)25 b(op)r(eration)f(mo)r
(di\014es)h(the)h(constan)n(ts)e(part)g(of)i(a)e(co)r(de)h(ob)5
b(ject)25 b(\(necessary)f(for)731 4666 y(creating)30
b(certain)g(circular)g(function)h(references.\))47 b(It)31
b(p)r(ops)g(the)g(new)h(v)-5 b(alue)31 b(and)731 4765
y(co)r(de)37 b(ob)5 b(ject)37 b(are)f(o\013)h(of)g(the)h(stac)n(k,)g
(storing)f(the)g(new)g(v)-5 b(alue)37 b(at)h(the)f(sp)r(eci\014ed)731
4865 y(index.)1893 5147 y(150)p eop
%%Page: 151 152
151 151 bop 523 614 a Fj(141:)234 b Fd(FOP-BYTE-ALTER-C)o(ODE)215
b Fc(index)p Fk(\(1\))731 714 y(Lik)n(e)27 b Fd(FOP-ALTER-CODE)p
Fk(,)22 b(but)28 b(has)f(only)g(a)g(one)g(b)n(yte)h(o\013set.)523
880 y Fj(142:)234 b Fd(FOP-FUNCTION-ENT)o(RY)215 b Fc(index)p
Fk(\(4\))222 b Fe(\))f Fk(stac)n(k)731 980 y(Initializes)40
b(a)f(function-en)n(try)h(header)f(inside)i(of)f(a)g(pre-existing)f(co)
r(de)h(ob)5 b(ject,)731 1079 y(and)23 b(returns)g(the)h(corresp)r
(onding)e(function)j(descriptor.)34 b Fc(index)24 b Fk(is)g(the)g(b)n
(yte)f(o\013set)731 1179 y(inside)28 b(of)g(the)g(co)r(de)g(ob)5
b(ject)28 b(where)f(the)h(header)g(should)f(b)r(e)i(plunk)n(ed)f(do)n
(wn.)37 b(The)731 1279 y(stac)n(k)g(argumen)n(ts)h(to)h(this)g(op)r
(eration)f(are)g(the)h(co)r(de)g(ob)5 b(ject,)41 b(function)f(name,)731
1378 y(function)28 b(debug)f(arglist)g(and)g(function)h(t)n(yp)r(e.)523
1544 y Fj(143:)40 b Fk(Un)n(used)523 1710 y Fj(144:)234
b Fd(FOP-ASSEMBLER-CO)o(DE)215 b Fc(length)p Fk(\(4\))222
b Fe(\))f Fk(stac)n(k)731 1810 y(This)36 b(op)r(eration)f(creates)g(a)g
(co)r(de)h(ob)5 b(ject)36 b(holding)g(assem)n(bly)f(routines.)62
b Fc(length)731 1910 y Fk(b)n(ytes)26 b(of)g(co)r(de)h(are)e(read)h
(and)g(placed)g(in)h(the)g(co)r(de)f(ob)5 b(ject,)27
b(and)f(the)h(co)r(de)g(ob)5 b(ject)731 2009 y(descriptor)34
b(is)h(pushed)g(on)g(the)h(stac)n(k.)59 b(This)35 b(F)n(OP)f(is)h(only)
g(recognized)f(b)n(y)h(the)731 2109 y(cold)27 b(loader)f(\(Genesis.\))
523 2275 y Fj(145:)234 b Fd(FOP-ASSEMBLER-RO)o(UTI)o(NE)215
b Fc(o\013set)p Fk(\(4\))221 b Fe(\))h Fk(stac)n(k)731
2374 y(This)29 b(op)r(eration)g(records)f(an)i(en)n(try)f(p)r(oin)n(t)h
(in)n(to)g(an)f(assem)n(bler)f(co)r(de)i(ob)5 b(ject)30
b(\(for)731 2474 y(use)20 b(with)i Fd(FOP-ASSEMBLER-FI)o(XU)o(P)p
Fk(\).)15 b(The)21 b(routine)g(name)f(\(a)h(sym)n(b)r(ol\))g(is)g(on)f
(stac)n(k)731 2574 y(top.)44 b(The)30 b(co)r(de)g(ob)5
b(ject)30 b(is)g(underneath.)45 b(The)30 b(en)n(try)f(p)r(oin)n(t)i(is)
f(de\014ned)g(at)g Fc(o\013set)731 2673 y Fk(b)n(ytes)22
b(inside)g(the)h(co)r(de)f(area)f(of)h(the)h(co)r(de)f(ob)5
b(ject,)23 b(and)f(the)h(co)r(de)f(ob)5 b(ject)22 b(is)h(left)g(on)731
2773 y(stac)n(k)29 b(top)h(\(allo)n(wing)f(m)n(ultiple)i(uses)f(of)g
(this)h(F)n(OP)e(to)h(b)r(e)h(c)n(hained.\))44 b(This)30
b(F)n(OP)731 2873 y(is)d(only)g(recognized)f(b)n(y)i(the)g(cold)f
(loader)f(\(Genesis.\))523 3039 y Fj(146:)40 b Fk(Un)n(used)523
3205 y Fj(147:)225 b Fd(FOP-FOREIGN-FIXU)o(P)197 b Fc(len)p
Fk(\(1\))203 b Fc(name)p Fk(\()p Fc(len)p Fk(\))h Fc(o\013set)p
Fk(\(4\))f Fe(\))731 3304 y Fk(stac)n(k)731 3404 y(This)38
b(op)r(eration)e(resolv)n(es)g(a)i(reference)f(to)h(a)f(foreign)g
(\(C\))i(sym)n(b)r(ol.)68 b Fc(len)38 b Fk(b)n(ytes)731
3504 y(are)f(read)h(and)h(in)n(terpreted)g(as)f(the)h(sym)n(b)r(ol)f
Fc(name)p Fk(.)72 b(First)38 b(the)i Fc(kind)f Fk(and)g(the)731
3603 y(co)r(de-ob)5 b(ject)34 b(to)i(patc)n(h)f(are)g(p)r(opp)r(ed)h
(from)f(the)h(stac)n(k.)60 b(The)35 b(kind)h(is)f(a)h(target-)731
3703 y(dep)r(enden)n(t)f(sym)n(b)r(ol)g(indicating)g(the)g(instruction)
g(format)g(of)g(the)g(patc)n(h)g(target)731 3802 y(\(at)c
Fc(o\013set)g Fk(b)n(ytes)g(from)g(the)h(start)f(of)g(the)g(co)r(de)g
(area.\))47 b(The)31 b(co)r(de)h(ob)5 b(ject)31 b(is)g(left)731
3902 y(on)c(stac)n(k)g(top)g(\(allo)n(wing)g(m)n(ultiple)h(uses)f(of)g
(this)h(F)n(OP)f(to)g(b)r(e)i(c)n(hained.\))523 4068
y Fj(148:)234 b Fd(FOP-ASSEMBLER-FI)o(XUP)215 b Fc(o\013set)p
Fk(\(4\))221 b Fe(\))g Fk(stac)n(k)731 4168 y(This)20
b(op)r(eration)g(resolv)n(es)e(a)j(reference)e(to)i(an)f(assem)n(bler)f
(routine.)35 b(The)20 b(stac)n(k)g(args)731 4267 y(are)27
b(\()p Fc(r)l(outine-name)p Fk(,)h Fc(kind)g Fk(and)g
Fc(c)l(o)l(de-obje)l(ct)p Fk(\).)40 b(The)28 b(kind)g(is)f(a)h
(target-dep)r(enden)n(t)731 4367 y(sym)n(b)r(ol)38 b(indicating)h(the)g
(instruction)g(format)g(of)g(the)g(patc)n(h)g(target)f(\(at)h
Fc(o\013set)731 4467 y Fk(b)n(ytes)32 b(from)h(the)g(start)f(of)h(the)h
(co)r(de)e(area.\))52 b(The)33 b(co)r(de)g(ob)5 b(ject)32
b(is)h(left)h(on)e(stac)n(k)731 4566 y(top)27 b(\(allo)n(wing)g(m)n
(ultiple)h(uses)f(of)h(this)f(F)n(OP)g(to)h(b)r(e)g(c)n(hained.\))523
4732 y Fj(149-199:)39 b Fk(Un)n(used)1893 5147 y(151)p
eop
%%Page: 152 153
152 152 bop 523 614 a Fj(200:)234 b Fd(FOP-RPLACA)217
b Fc(table-idx)p Fk(\(4\))222 b Fc(c)l(dr-o\013set)p
Fk(\(4\))523 880 y Fj(201:)234 b Fd(FOP-RPLACD)217 b
Fc(table-idx)p Fk(\(4\))222 b Fc(c)l(dr-o\013set)p Fk(\(4\))731
980 y(These)22 b(op)r(erations)g(destructiv)n(ely)g(mo)r(dify)i(a)e
(list)h(en)n(tered)g(in)g(the)g(table.)36 b Fc(table-idx)731
1079 y Fk(is)23 b(the)g(table)h(en)n(try)e(holding)h(the)h(list,)g(and)
f Fc(c)l(dr-o\013set)h Fk(designates)e(the)i(cons)e(in)i(the)731
1179 y(list)g(to)g(mo)r(dify)h(\(lik)n(e)f(the)h(argumen)n(t)e(to)h
Fd(nthcdr)p Fk(.\))34 b(The)24 b(new)g(v)-5 b(alue)24
b(is)h(p)r(opp)r(ed)f(o\013)731 1279 y(of)j(the)h(stac)n(k,)f(and)g
(stored)g(in)h(the)g Fd(car)e Fk(or)h Fd(cdr)p Fk(,)f(resp)r(ectiv)n
(ely)-7 b(.)523 1445 y Fj(202:)234 b Fd(FOP-SVSET)218
b Fc(table-idx)p Fk(\(4\))k Fc(ve)l(ctor-idx)p Fk(\(4\))731
1544 y(Destructiv)n(ely)33 b(mo)r(di\014es)h(a)f Fd(simple-vector)c
Fk(en)n(tered)k(in)h(the)g(table.)56 b(P)n(ops)32 b(the)731
1644 y(new)g(v)-5 b(alue)32 b(o\013)g(of)g(the)g(stac)n(k,)h(and)f
(stores)f(it)h(in)h(the)f Fc(ve)l(ctor-idx)h Fk(elemen)n(t)f(of)g(the)
731 1743 y(con)n(ten)n(ts)27 b(of)g(the)h(table)g(en)n(try)f
Fc(table-idx.)523 1910 y Fj(203:)234 b Fd(FOP-NTHCDR)217
b Fc(c)l(dr-o\013set)p Fk(\(4\))222 b Fe(\))f Fk(stac)n(k)731
2009 y(Do)r(es)27 b Fd(nthcdr)e Fk(on)j(the)g(top-of)f(stac)n(k,)f(lea)
n(ving)h(the)h(result)f(there.)523 2175 y Fj(204:)234
b Fd(FOP-STRUCTSET)216 b Fc(table-idx)p Fk(\(4\))222
b Fc(ve)l(ctor-idx)p Fk(\(4\))731 2275 y(Lik)n(e)27 b
Fd(FOP-SVSET)p Fk(,)d(except)j(it)h(alters)f(structure)g(slots.)523
2441 y Fj(255:)234 b Fd(FOP-END-HEADER)731 2540 y Fk(Indicates)27
b(the)h(end)g(of)f(a)g(group)g(header,)g(as)g(describ)r(ed)g(ab)r(o)n
(v)n(e.)1893 5147 y(152)p eop
%%Page: 153 154
153 153 bop 523 1237 a Fg(App)5 b(endix)65 b(A)523 1652
y Fi(Glossary)523 2095 y Fj(assert)32 b(\(a)g(t)m(yp)s(e\))42
b Fk(In)36 b(Python,)i(all)d(t)n(yp)r(e)h(c)n(hec)n(king)f(is)h(done)f
(via)g(a)h(general)e(t)n(yp)r(e)i(as-)731 2195 y(sertion)26
b(mec)n(hanism.)36 b(Explicit)27 b(declarations)e(and)i(implicit)g
(assertions)f(\(e.g.)36 b(the)731 2294 y(arg)20 b(to)j(+)e(is)i(a)e(n)n
(um)n(b)r(er\))i(are)e(recorded)g(in)h(the)h(fron)n(t-end)f(\(implicit)
h(con)n(tin)n(uation\))731 2394 y(represen)n(tation.)32
b(T)n(yp)r(e)21 b(assertions)e(\(and)h(th)n(us)h(t)n(yp)r(e-c)n(hec)n
(king\))e(are)h("un)n(bundled")731 2493 y(from)i(the)g(op)r(erations)g
(that)g(are)g(a\013ected)g(b)n(y)g(the)h(assertion.)34
b(This)22 b(has)g(t)n(w)n(o)g(ma)5 b(jor)731 2593 y(adv)-5
b(an)n(tages:)830 2759 y Fe(\017)41 b Fk(Co)r(de)25 b(that)g(implemen)n
(ts)g(op)r(erations)f(need)g(not)h(concern)f(itself)h(with)h(c)n(hec)n
(k-)913 2859 y(ing)i(op)r(erand)e(t)n(yp)r(es.)830 2992
y Fe(\017)41 b Fk(Run-time)23 b(t)n(yp)r(e)f(c)n(hec)n(ks)f(can)h(b)r
(e)g(eliminated)g(when)h(the)f(compiler)f(can)h(pro)n(v)n(e)913
3091 y(that)28 b(the)g(assertion)e(will)i(alw)n(a)n(ys)e(b)r(e)i
(satis\014ed.)731 3257 y(See)f(also)g Fc(r)l(estrict)p
Fk(.)523 3423 y Fj(bac)m(k)33 b(end)42 b Fk(The)32 b(bac)n(k)e(end)i
(is)g(the)g(part)f(of)g(the)h(compiler)f(that)h(op)r(erates)f(on)g(the)
h Fc(vir-)731 3523 y(tual)c(machine)h Fk(in)n(termediate)d(represen)n
(tation.)35 b(Also)27 b(included)g(are)f(the)h(compiler)731
3623 y(phases)34 b(in)n(v)n(olv)n(ed)g(in)i(the)g(con)n(v)n(ersion)d
(from)i(the)h Fc(fr)l(ont)g(end)g Fk(represen)n(tation)e(\(or)731
3722 y Fc(ICR)p Fk(\).)523 3888 y Fj(bind)e(no)s(de)40
b Fk(This)31 b(is)f(a)h(no)r(de)f(t)n(yp)r(e)h(the)g(that)g(marks)e
(the)i(start)f(of)h(a)f Fc(lamb)l(da)i Fk(b)r(o)r(dy)f(in)731
3988 y Fc(ICR)p Fk(.)c(This)h(serv)n(es)e(as)h(a)g(placeholder)f(for)h
(en)n(vironmen)n(t)g(manipulation)g(co)r(de.)523 4154
y Fj(IR1)41 b Fk(The)29 b(\014rst)g(in)n(termediate)g(represen)n
(tation,)e(also)h(kno)n(wn)h(as)f Fc(ICR)p Fk(,)h(or)f(the)i(Implicit)
731 4254 y(Con)n(tin)n(uation)c(Represenation.)523 4420
y Fj(IR2)41 b Fk(The)29 b(second)f(in)n(termediate)g(represen)n
(tation,)g(also)f(kno)n(wn)h(as)g Fc(VMR)p Fk(,)h(or)f(the)h(Vir-)731
4519 y(tual)e(Mac)n(hine)g(Represen)n(tation.)523 4685
y Fj(basic)32 b(blo)s(c)m(k)42 b Fk(A)29 b(basic)g(blo)r(c)n(k)g(\(or)g
(simply)g("blo)r(c)n(k"\))f(has)h(the)h(prett)n(y)f(m)n(uc)n(h)g(the)h
(usual)731 4785 y(meaning)35 b(of)h(represen)n(ting)e(a)h(straigh)n
(t-line)g(sequence)g(of)h(co)r(de.)61 b(Ho)n(w)n(ev)n(er,)36
b(the)731 4884 y(co)r(de)k(sequence)g(ultimately)i(generated)d(for)i(a)
f(blo)r(c)n(k)g(migh)n(t)h(con)n(tain)f(in)n(ternal)1893
5147 y(153)p eop
%%Page: 154 155
154 154 bop 731 614 a Fk(branc)n(hes)22 b(that)i(w)n(ere)f(hidden)i
(inside)f(the)g(implemen)n(tation)g(of)g(a)g(particular)e(op)r(er-)731
714 y(ation.)35 b(The)25 b(t)n(yp)r(e)g(of)g(a)f(blo)r(c)n(k)g(is)h
(actually)f Fd(cblock)p Fk(.)34 b(The)25 b Fd(block-info)20
b Fk(slot)25 b(holds)731 814 y(an)i Fd(VMR-block)d Fk(con)n(taining)i
(bac)n(k)n(end)h(information.)523 980 y Fj(blo)s(c)m(k)32
b(compilation)39 b Fk(Blo)r(c)n(k)c(compilation)g(is)h(a)f(term)h
(commonly)f(used)h(to)g(describ)r(e)731 1079 y(the)c(compile-time)h
(resolution)e(of)i(function)g(names.)51 b(This)32 b(enables)g(man)n(y)g
(opti-)731 1179 y(mizations.)523 1345 y Fj(call)g(graph)42
b Fk(Eac)n(h)34 b(no)r(de)h(in)h(the)g(call)e(graph)h(is)g(a)g
(function)h(\(represen)n(ted)e(b)n(y)h(a)g Fc(\015ow)731
1445 y(gr)l(aph)p Fk(.\))78 b(The)41 b(arcs)e(in)j(the)f(call)f(graph)g
(represen)n(t)g(a)g(p)r(ossible)h(call)f(from)h(one)731
1544 y(function)28 b(to)f(another.)36 b(See)28 b(also)e
Fc(tail)31 b(set)p Fk(.)523 1710 y Fj(clean)m(up)42 b
Fk(A)27 b(clean)n(up)g(is)f(the)h(part)g(of)f(the)i(implicit)f(con)n
(tin)n(uation)f(represen)n(tation)f(that)731 1810 y(retains)32
b(information)g(scoping)g(relationships.)52 b(F)-7 b(or)33
b(inde\014nite)g(exten)n(t)g(bindings)731 1910 y(\(v)-5
b(ariables)26 b(and)i(functions\),)g(w)n(e)g(can)f(abandon)g(scoping)g
(information)g(after)g(ICR)731 2009 y(con)n(v)n(ersion,)34
b(reco)n(v)n(ering)e(the)j(lifetime)g(information)f(using)g(\015o)n(w)g
(analysis.)57 b(But)731 2109 y(dynamic)34 b(bindings)h(\(sp)r(ecial)f
(v)-5 b(alues,)37 b(catc)n(h,)f(un)n(wind)e(protect,)j(etc.\))58
b(m)n(ust)35 b(b)r(e)731 2208 y(remo)n(v)n(ed)26 b(at)h(a)h(precise)f
(time)h(\(whenev)n(er)f(the)h(scop)r(e)f(is)h(exited.\))38
b(Clean)n(up)27 b(struc-)731 2308 y(tures)e(form)g(a)g(hierarc)n(h)n(y)
e(that)j(represen)n(ts)d(the)j(static)f(nesting)h(of)f(dynamic)g(bind-)
731 2408 y(ing)j(structures.)39 b(When)29 b(the)g(compiler)f(do)r(es)h
(a)f(con)n(trol)f(transfer,)h(it)h(can)g(use)f(the)731
2507 y(clean)n(up)c(information)g(to)h(determine)g(what)g(clean)n(up)g
(co)r(de)f(needs)h(to)g(b)r(e)g(emitted.)523 2673 y Fj(closure)31
b(v)-5 b(ariable)42 b Fk(A)28 b(closure)f(v)-5 b(ariable)27
b(is)i(an)n(y)e(lexical)g(v)-5 b(ariable)28 b(that)g(has)g(references)
731 2773 y(outside)f(of)h(its)f Fc(home)k(envir)l(onment)p
Fk(.)37 b(See)27 b(also)g Fc(indir)l(e)l(ct)j(value)g(c)l(el)t(l)p
Fk(.)523 2939 y Fj(closed)h(con)m(tin)m(uation)42 b Fk(A)22
b(closed)f(con)n(tin)n(uation)f(represen)n(ts)g(a)h Fd(tagbody)e
Fk(tag)i(or)f Fd(block)731 3039 y Fk(name)27 b(that)g(is)g(closed)g(o)n
(v)n(er.)35 b(These)27 b(t)n(w)n(o)f(cases)g(are)g(mostly)h
(indistinguishable)g(in)731 3138 y Fc(ICR)p Fk(.)523
3304 y Fj(home)40 b Fk(Home)29 b(is)g(a)f(term)h(used)g(to)g(describ)r
(e)g(v)-5 b(arious)28 b(bac)n(k-p)r(oin)n(ters.)39 b(A)30
b(lam)n(b)r(da)e(v)-5 b(ari-)731 3404 y(able's)36 b("home")g(is)g(the)i
(lam)n(b)r(da)e(that)h(the)g(v)-5 b(ariable)36 b(b)r(elongs)g(to.)65
b(A)37 b(lam)n(b)r(da's)731 3504 y("home)25 b(en)n(vironmen)n(t")g(is)h
(the)h(en)n(vironmen)n(t)e(in)i(whic)n(h)f(that)h(lam)n(b)r(da's)f(v)-5
b(ariables)731 3603 y(are)26 b(allo)r(cated.)523 3769
y Fj(indirect)32 b(v)-5 b(alue)31 b(cell)41 b Fk(An)n(y)26
b(closure)f(v)-5 b(ariable)25 b(that)h(has)f(assignmen)n(ts)g(\()p
Fd(setq)p Fk(s\))g(will)h(b)r(e)731 3869 y(allo)r(cated)e(in)i(an)f
(indirect)h(v)-5 b(alue)25 b(cell.)36 b(This)26 b(is)f(necessary)f(to)h
(ensure)g(that)h(all)f(ref-)731 3968 y(erences)19 b(to)h(the)h(v)-5
b(ariable)19 b(will)h(see)g(assigned)f(v)-5 b(alues,)21
b(since)f(the)h(compiler)f(normally)731 4068 y(freely)27
b(copies)g(v)-5 b(alues)27 b(when)h(creating)e(a)h(closure.)523
4234 y Fj(set)k(v)-5 b(ariable)42 b Fk(An)n(y)24 b(v)-5
b(ariable)22 b(that)i(is)g(assigned)f(to)g(is)h(called)f(a)g("set)h(v)
-5 b(ariable".)34 b(Sev)n(eral)731 4334 y(optimizations)39
b(m)n(ust)i(sp)r(ecial-case)e(set)h(v)-5 b(ariables,)43
b(and)d(set)g(closure)g(v)-5 b(ariables)731 4433 y(m)n(ust)27
b(ha)n(v)n(e)g(an)g Fc(indir)l(e)l(ct)j(value)h(c)l(el)t(l)p
Fk(.)523 4599 y Fj(co)s(de)g(generator)42 b Fk(The)31
b(co)r(de)g(generator)e(for)h(a)h Fc(V)n(OP)f Fk(is)h(a)g(p)r(oten)n
(tially)f(arbitrary)f(list)731 4699 y(co)r(de)i(fragmen)n(t)f(whic)n(h)
h(is)g(resp)r(onsible)g(for)f(emitting)i(assem)n(bly)e(co)r(de)h(to)g
(imple-)731 4799 y(men)n(t)c(that)h(V)n(OP)-7 b(.)1893
5147 y(154)p eop
%%Page: 155 156
155 155 bop 523 614 a Fj(constan)m(t)33 b(p)s(o)s(ol)40
b Fk(The)25 b(part)f(of)h(a)g(compiled)g(co)r(de)g(ob)5
b(ject)25 b(that)g(holds)g(p)r(oin)n(ters)f(to)h(non-)731
714 y(immediate)i(constan)n(ts.)523 877 y Fj(constan)m(t)33
b(TN)41 b Fk(A)26 b(constan)n(t)e(TN)h(is)f(the)i Fc(VMR)e
Fk(of)h(a)f(compile-time)h(constan)n(t)f(v)-5 b(alue.)36
b(A)731 977 y(constan)n(t)26 b(ma)n(y)h(b)r(e)h(immediate,)g(or)f(ma)n
(y)g(b)r(e)h(allo)r(cated)f(in)h(the)g Fc(c)l(onstant)h(p)l(o)l(ol)p
Fk(.)523 1141 y Fj(constan)m(t)k(leaf)41 b Fk(A)28 b(constan)n(t)f
Fc(le)l(af)i Fk(is)e(the)h Fc(ICR)g Fk(of)f(a)h(compile-time)f(constan)
n(t)g(v)-5 b(alue.)523 1304 y Fj(com)m(bination)40 b
Fk(A)31 b(com)n(bination)f Fc(no)l(de)i Fk(is)e(the)i
Fc(ICR)f Fk(of)f(an)n(y)g(\014xed-argumen)n(t)g(function)731
1404 y(call)d(\(not)h Fd(apply)d Fk(or)i Fd(multiple-value-c)o(all)o
Fk(.\))523 1567 y Fj(top-lev)m(el)k(comp)s(onen)m(t)40
b Fk(A)c(top-lev)n(el)g(comp)r(onen)n(t)g(is)g(an)n(y)f(comp)r(onen)n
(t)h(whose)g(only)731 1667 y(en)n(try)27 b(p)r(oin)n(ts)g(are)g
(top-lev)n(el)f(lam)n(b)r(das.)523 1830 y Fj(top-lev)m(el)31
b(lam)m(b)s(da)40 b Fk(A)34 b(top-lev)n(el)f(lam)n(b)r(da)g(represen)n
(ts)e(the)j(execution)f(of)h(the)f(outer-)731 1930 y(most)18
b(form)g(on)g(whic)n(h)g(the)h(compiler)f(w)n(as)f(in)n(v)n(ok)n(ed.)32
b(In)19 b(the)g(case)e(of)h Fd(compile-file)p Fk(,)731
2030 y(this)26 b(is)h(often)g(a)f(truly)g(top-lev)n(el)g(form)g(in)h
(the)g(source)f(\014le,)h(but)g(the)g(compiler)f(can)731
2129 y(recursiv)n(ely)21 b(descend)i(in)n(to)f(some)h(forms)f(\()p
Fd(eval-when)p Fk(,)f(etc.\))35 b(breaking)22 b(them)i(in)n(to)731
2229 y(separate)i(compilations.)523 2392 y Fj(comp)s(onen)m(t)40
b Fk(A)31 b(comp)r(onen)n(t)f(is)h(basically)e(a)h(sequence)h(of)f(blo)
r(c)n(ks.)45 b(Eac)n(h)30 b(comp)r(onen)n(t)731 2492
y(is)i(compiled)g(in)n(to)g(a)g(separate)e(co)r(de)i(ob)5
b(ject.)51 b(With)33 b Fc(blo)l(ck)i(c)l(ompilation)f
Fk(or)d Fc(lo)l(c)l(al)731 2592 y(functions)p Fk(,)c(a)g(comp)r(onen)n
(t)g(will)g(con)n(tain)g(the)g(co)r(de)g(for)g(more)g(than)g(one)g
(function.)731 2691 y(This)32 b(is)h(called)f(a)h(comp)r(onen)n(t)f(b)r
(ecause)h(it)g(represen)n(ts)e(a)i(connected)f(p)r(ortion)g(of)731
2791 y(the)c(call)f(graph.)36 b(Normally)26 b(the)i(blo)r(c)n(ks)f(are)
g(in)g(depth-\014rst)h(order)e(\()p Fc(DF)n(O)p Fk(\).)523
2954 y Fj(comp)s(onen)m(t,)k(initial)40 b Fk(During)33
b(ICR)g(con)n(v)n(ersion,)f(blo)r(c)n(ks)h(are)f(temp)r(orarily)g
(assigned)731 3054 y(to)38 b(initial)h(comp)r(onen)n(ts.)70
b(The)39 b("\015o)n(w)f(graph)f(canonicalization")g(phase)h(deter-)731
3154 y(mines)27 b(the)h(true)g(comp)r(onen)n(t)f(structure.)523
3317 y Fj(comp)s(onen)m(t,)j(head)i(and)g(tail)41 b Fk(The)d(head)g
(and)f(tail)h(of)g(a)f(comp)r(onen)n(t)g(are)g(dumm)n(y)731
3417 y(blo)r(c)n(ks)23 b(that)i(mark)e(the)i(start)f(and)g(end)g(of)h
(the)f Fc(DF)n(O)g Fk(sequence.)35 b(The)25 b(comp)r(onen)n(t)731
3516 y(head)j(and)g(tail)h(double)f(as)g(the)h(ro)r(ot)f(and)g
(\014nish)h(no)r(de)g(of)f(the)h(comp)r(onen)n(t's)f(\015o)n(w)731
3616 y(graph.)523 3779 y Fj(lo)s(cal)j(function)h(\(call\))42
b Fk(A)37 b(lo)r(cal)g(function)h(call)f(is)h(a)f(call)g(to)g(a)g
(function)h(kno)n(wn)f(at)731 3879 y(compile)i(time)h(to)g(b)r(e)g(in)f
(the)h(same)f Fc(c)l(omp)l(onent)p Fk(.)73 b(Lo)r(cal)39
b(call)g(allo)n(ws)g(compile)731 3979 y(time)34 b(resolution)f(of)i
(the)f(target)g(address)f(and)h(calling)f(con)n(v)n(en)n(tions.)55
b(See)34 b Fc(blo)l(ck)731 4078 y(c)l(ompilation)p Fk(.)523
4242 y Fj(con\015ict)e(\(of)g(TNs,)f(set\))41 b Fk(Register)34
b(allo)r(cation)f(terminology)-7 b(.)54 b(Tw)n(o)34 b(TNs)g(con\015ict)
g(if)731 4341 y(they)24 b(could)h(ev)n(er)e(b)r(e)i(liv)n(e)g(sim)n
(ultaneously)-7 b(.)35 b(The)24 b(con\015ict)h(set)g(of)f(a)h(TN)f(is)h
(all)f(TNs)731 4441 y(that)j(it)h(con\015icts)g(with.)523
4605 y Fj(con)m(tin)m(uation)42 b Fk(The)28 b(ICR)f(data)h(structure)f
(whic)n(h)g(represen)n(ts)f(b)r(oth:)830 4768 y Fe(\017)41
b Fk(The)28 b(receiving)e(of)i(a)f(v)-5 b(alue)28 b(\(or)f(m)n(ultiple)
h(v)-5 b(alues\),)27 b(and)830 4898 y Fe(\017)41 b Fk(A)28
b(con)n(trol)e(lo)r(cation)h(in)h(the)g(\015o)n(w)f(graph.)1893
5147 y(155)p eop
%%Page: 156 157
156 156 bop 731 614 a Fk(In)30 b(the)g(Implicit)h(Con)n(tin)n(uation)e
(Represen)n(tation,)h(the)g(en)n(vironmen)n(t)g(is)g(implicit)731
714 y(in)j(the)g(con)n(tin)n(uation's)f(BLOCK)g(\(hence)i(the)f
(name.\))54 b(The)33 b(ICR)g(con)n(tin)n(uation)731 814
y(is)j(v)n(ery)g(similar)g(to)h(a)g(CPS)g(con)n(tin)n(uation)f(in)h
(its)g(use,)i(but)f(its)f(represen)n(tation)731 913 y(do)r(esn't)27
b(m)n(uc)n(h)h(resem)n(ble)e(\(is)i(not)g(in)n(terc)n(hangeable)d
(with\))k(a)e(lam)n(b)r(da.)523 1079 y Fj(con)m(t)42
b Fk(A)e(slot)g(in)f(the)i Fc(no)l(de)f Fk(holding)f(the)h
Fc(c)l(ontinuation)g Fk(whic)n(h)f(receiv)n(es)f(the)j(no)r(de's)731
1179 y(v)-5 b(alue\(s\).)36 b(Unless)24 b(the)h(no)r(de)f(ends)h(a)f
Fc(blo)l(ck)p Fk(,)i(this)f(also)e(implicitly)i(indicates)f(whic)n(h)
731 1279 y(no)r(de)j(should)h(b)r(e)g(ev)-5 b(aluated)27
b(next.)523 1445 y Fj(cost)42 b Fk(Appro)n(ximations)23
b(of)h(the)h(run-time)g(costs)f(of)h(op)r(erations)e(are)h(widely)g
(used)h(in)g(the)731 1544 y(bac)n(k)33 b(end.)59 b(By)35
b(con)n(v)n(en)n(tion,)g(the)g(unit)g(is)g(generally)e(mac)n(hine)i
(cycles,)h(but)f(the)731 1644 y(v)-5 b(alues)33 b(are)f(only)h(used)g
(for)g(comparison)e(b)r(et)n(w)n(een)j(alternativ)n(es.)52
b(F)-7 b(or)33 b(example,)731 1743 y(the)j(V)n(OP)g(cost)g(is)g(used)g
(to)g(determine)h(the)f(preferred)g(order)f(in)h(whic)n(h)g(to)h(try)
731 1843 y(p)r(ossible)27 b(implemen)n(tations.)523 2009
y Fj(CSP)-8 b(,)32 b(CFP)41 b Fk(See)28 b Fc(c)l(ontr)l(ol)i(stack)g(p)
l(ointer)e Fk(and)g Fc(c)l(ontr)l(ol)h(fr)l(ame)i(p)l(ointer)p
Fk(.)523 2175 y Fj(Con)m(trol)h(stac)m(k)43 b Fk(The)36
b(main)g(call)g(stac)n(k,)h(whic)n(h)f(holds)g(function)h(stac)n(k)e
(frames.)62 b(All)731 2275 y(w)n(ords)33 b(on)i(the)g(con)n(trol)e
(stac)n(k)h(are)g(tagged)g Fc(descriptors)p Fk(.)60 b(In)35
b(all)f(p)r(orts)h(done)f(so)731 2374 y(far,)26 b(the)i(con)n(trol)d
(stac)n(k)h(gro)n(ws)f(from)i(lo)n(w)f(memory)g(to)h(high)g(memory)-7
b(.)36 b(The)27 b(most)731 2474 y(recen)n(t)g(call)g(frames)g(are)f
(considered)h(to)g(b)r(e)h(\\on)f(top")g(of)h(earlier)e(call)h(frames.)
523 2640 y Fj(Con)m(trol)32 b(stac)m(k)h(p)s(oin)m(ter)41
b Fk(The)21 b(allo)r(cation)f(p)r(oin)n(ter)g(for)g(the)i
Fc(c)l(ontr)l(ol)h(stack)p Fk(.)35 b(Generally)731 2740
y(this)27 b(p)r(oin)n(ts)h(to)f(the)h(\014rst)g(free)f(w)n(ord)g(at)g
(the)h(top)g(of)f(the)h(stac)n(k.)523 2906 y Fj(Con)m(trol)k(frame)f(p)
s(oin)m(ter)41 b Fk(The)24 b(p)r(oin)n(ter)f(to)h(the)g(base)g(of)f
(the)i Fc(c)l(ontr)l(ol)h(stack)e Fk(frame)g(for)731
3005 y(a)i(particular)g(function)h(in)n(v)n(o)r(cation.)36
b(The)27 b(CFP)f(for)h(the)g(running)g(function)g(m)n(ust)731
3105 y(b)r(e)h(in)f(a)h(register.)523 3271 y Fj(Num)m(b)s(er)i(stac)m
(k)43 b Fk(The)19 b(auxiliary)e(stac)n(k)g(used)h(to)h(hold)f(an)n(y)f
Fc(non-descriptor)j Fk(\(un)n(tagged\))731 3371 y(ob)5
b(jects.)36 b(This)26 b(is)h(generally)e(the)i(same)f(as)f(the)i(C)g
(call)f(stac)n(k,)g(and)g(th)n(us)h(t)n(ypically)731
3470 y(gro)n(ws)e(do)n(wn.)523 3636 y Fj(Num)m(b)s(er)30
b(stac)m(k)k(p)s(oin)m(ter)41 b Fk(The)29 b(allo)r(cation)f(p)r(oin)n
(ter)g(for)h(the)g Fc(numb)l(er)i(stack)p Fk(.)41 b(This)29
b(is)731 3736 y(t)n(ypically)e(the)h(C)f(stac)n(k)g(p)r(oin)n(ter,)g
(and)h(is)f(th)n(us)h(k)n(ept)f(in)h(a)f(register.)523
3902 y Fj(NSP)-8 b(,)31 b(NFP)42 b Fk(See)28 b Fc(numb)l(er)h(stack)h
(p)l(ointer)p Fk(,)e Fc(numb)l(er)h(fr)l(ame)h(p)l(ointer)p
Fk(.)523 4068 y Fj(Num)m(b)s(er)g(frame)h(p)s(oin)m(ter)41
b Fk(The)33 b(p)r(oin)n(ter)f(to)g(the)h(base)f(of)h(the)f
Fc(numb)l(er)i(stack)f Fk(frame)731 4168 y(for)25 b(a)g(particular)f
(function)i(in)n(v)n(o)r(cation.)35 b(F)-7 b(unctions)26
b(that)g(don't)f(use)h(the)g(n)n(um)n(b)r(er)731 4267
y(stac)n(k)21 b(w)n(on't)i(ha)n(v)n(e)e(an)h(NFP)-7 b(,)23
b(but)g(if)g(an)g(NFP)f(is)h(allo)r(cated,)g(it)g(is)f(alw)n(a)n(ys)f
(allo)r(cated)731 4367 y(in)34 b(a)g(particular)f(register.)56
b(If)34 b(there)g(is)h(no)f(v)-5 b(ariable-size)32 b(data)i(on)g(the)h
(n)n(um)n(b)r(er)731 4467 y(stac)n(k,)26 b(then)i(the)g(NFP)g(will)g
(generally)e(b)r(e)i(iden)n(tical)f(to)h(the)g(NSP)-7
b(.)523 4633 y Fj(Lisp)32 b(return)g(address)41 b Fk(The)22
b(name)g(of)g(the)g Fc(descriptor)i Fk(enco)r(ding)e(the)g("return)f(p)
r(c")h(for)731 4732 y(a)27 b(function)h(call.)1893 5147
y(156)p eop
%%Page: 157 158
157 157 bop 523 614 a Fj(LRA)42 b Fk(See)27 b Fc(lisp)j(r)l(eturn)e
(addr)l(ess)p Fk(.)38 b(Also,)27 b(the)h(name)f(of)g(the)g(register)f
(where)g(the)i(LRA)f(is)731 714 y(passed.)523 880 y Fj(Co)s(de)k(p)s
(oin)m(ter)41 b Fk(A)28 b(p)r(oin)n(ter)f(to)h(the)f(header)g(of)h(a)f
(co)r(de)g(ob)5 b(ject.)37 b(The)27 b(co)r(de)h(p)r(oin)n(ter)f(for)731
980 y(the)h(curren)n(tly)e(running)h(function)i(is)e(stored)g(in)h(the)
g Fd(code)e Fk(register.)523 1146 y Fj(In)m(terior)32
b(p)s(oin)m(ter)41 b Fk(A)29 b(p)r(oin)n(ter)e(in)n(to)h(the)h(inside)f
(of)g(some)g(heap-allo)r(cated)e(ob)5 b(ject.)39 b(In-)731
1245 y(terior)33 b(p)r(oin)n(ters)h(confuse)h(the)g(garbage)d
(collector,)j(so)f(their)h(use)f(is)h(highly)f(con-)731
1345 y(strained.)k(T)n(ypically)28 b(there)g(is)h(a)f(single)g
(register)f(dedicated)h(to)h(holding)f(in)n(terior)731
1445 y(p)r(oin)n(ters.)523 1611 y Fj(dest)41 b Fk(A)36
b(slot)f(in)g(the)h Fc(c)l(ontinuation)f Fk(whic)n(h)g(p)r(oin)n(ts)g
(the)h(the)g(no)r(de)f(that)g(receiv)n(es)f(this)731
1710 y(v)-5 b(alue.)36 b(Null)29 b(if)f(this)g(v)-5 b(alue)27
b(is)g(not)h(receiv)n(ed)f(b)n(y)g(an)n(y)n(one.)523
1876 y Fj(DFN,)k(DF)m(O)42 b Fk(See)28 b Fc(Depth)i(First)g(Numb)l(er)p
Fk(,)d Fc(Depth)j(First)g(Or)l(der)p Fk(.)523 2042 y
Fj(Depth)i(\014rst)g(n)m(um)m(b)s(er)41 b Fk(Blo)r(c)n(ks)33
b(are)g(n)n(um)n(b)r(ered)g(according)g(to)h(their)g(app)r(earance)e
(in)731 2142 y(the)22 b(depth-\014rst)g(ordering)e(\(the)j
Fd(block-number)17 b Fk(slot.\))35 b(The)23 b(n)n(um)n(b)r(ering)e
(actually)731 2242 y(increases)26 b(from)h(the)h(comp)r(onen)n(t)f
(tail,)h(so)f(earlier)f(blo)r(c)n(ks)h(ha)n(v)n(e)f(larger)g(n)n(um)n
(b)r(ers.)523 2408 y Fj(Depth)32 b(\014rst)g(order)42
b Fk(This)d(is)h(a)f(linearization)g(of)g(the)h(\015o)n(w)f(graph,)j
(obtained)d(b)n(y)h(a)731 2507 y(depth-\014rst)j(w)n(alk.)82
b(Iterativ)n(e)42 b(\015o)n(w)g(analysis)g(algorithms)f(w)n(ork)h(b)r
(etter)h(when)731 2607 y(blo)r(c)n(ks)26 b(are)h(pro)r(cessed)f(in)i
(DF)n(O)g(\(or)f(rev)n(erse)f(DF)n(O.\))523 2773 y Fj(Ob)5
b(ject)42 b Fk(In)28 b(lo)n(w-lev)n(el)e(design)h(discussions,)g(an)g
(ob)5 b(ject)27 b(is)h(one)f(of)h(the)g(follo)n(wing:)830
2939 y Fe(\017)41 b Fk(a)27 b(single)h(w)n(ord)e(con)n(taining)h
(immediate)g(data)h(\(c)n(haracters,)d(\014xn)n(ums,)j(etc\))830
3072 y Fe(\017)41 b Fk(a)27 b(single)h(w)n(ord)e(p)r(oin)n(ting)h(to)h
(an)f(ob)5 b(ject)28 b(\(structures,)f(conses,)f(etc.\))731
3238 y(These)33 b(are)g(tagged)g(with)i(three)f(lo)n(w-tag)e(bits)i(as)
g(describ)r(ed)g(in)g(the)g(section)g Fj(??)731 3337
y Fk(This)24 b(is)g(synon)n(ymous)f(with)i Fc(descriptor)p
Fk(.)38 b(In)25 b(other)f(parts)f(of)i(the)g(do)r(cumen)n(tation,)731
3437 y(ma)n(y)h(b)r(e)i(used)g(more)f(lo)r(osely)f(to)i(refer)f(to)g(a)
g Fc(lisp)k(obje)l(ct)p Fk(.)523 3603 y Fj(Lisp)h(ob)5
b(ject)42 b Fk(A)34 b(Lisp)g(ob)5 b(ject)34 b(is)h(a)e(high-lev)n(el)h
(ob)5 b(ject)34 b(discussed)f(as)h(a)g(data)g(t)n(yp)r(e)g(in)731
3703 y(the)28 b(Common)f(Lisp)g(de\014nition.)523 3869
y Fj(Data-blo)s(c)m(k)43 b Fk(A)29 b(data-blo)r(c)n(k)g(is)g(a)g
(dual-w)n(ord)f(aligned)h(blo)r(c)n(k)g(of)g(memory)g(that)h(either)731
3968 y(manifests)g(a)g(Lisp)g(ob)5 b(ject)30 b(\(v)n(ectors,)g(co)r
(de,)g(sym)n(b)r(ols,)h(etc.\))45 b(or)29 b(helps)i(manage)e(a)731
4068 y(Lisp)e(ob)5 b(ject)27 b(on)h(the)g(heap)f(\(arra)n(y)f(header,)g
(function)j(header,)d(etc.\).)523 4234 y Fj(Descriptor)42
b Fk(A)c(descriptor)f(is)h(a)f(tagged,)j(single-w)n(ord)c(ob)5
b(ject.)68 b(It)38 b(either)g(con)n(tains)731 4334 y(immediate)f(data)f
(or)g(a)h(p)r(oin)n(ter)f(to)h(data.)65 b(This)37 b(is)g(synon)n(ymous)
e(with)i Fc(obje)l(ct)p Fk(.)731 4433 y(Storage)23 b(lo)r(cations)i
(that)g(m)n(ust)h(con)n(tain)e(descriptors)g(are)g(referred)g(to)i(as)e
(descrip-)731 4533 y(tor)j(lo)r(cations.)523 4699 y Fj(P)m(oin)m(ter)32
b(descriptor)42 b Fk(A)32 b(descriptor)f(that)h(p)r(oin)n(ts)g(to)g(a)f
Fc(data)k(blo)l(ck)e Fk(in)f(memory)f(\(i.e.)731 4799
y(not)c(an)g(immediate)h(ob)5 b(ject.\))1893 5147 y(157)p
eop
%%Page: 158 159
158 158 bop 523 614 a Fj(Immediate)29 b(descriptor)41
b Fk(A)28 b(descriptor)f(that)h(enco)r(des)f(the)h(ob)5
b(ject)27 b(v)-5 b(alue)28 b(in)g(the)g(de-)731 714 y(scriptor)e
(itself;)i(used)g(for)f(c)n(haracters,)e(\014xn)n(ums,)j(etc.)523
869 y Fj(W)-8 b(ord)41 b Fk(A)28 b(w)n(ord)f(is)g(a)g(32-bit)g(quan)n
(tit)n(y)-7 b(.)523 1024 y Fj(Non-descriptor)41 b Fk(An)n(y)34
b(c)n(h)n(unk)f(of)h(bits)g(that)g(isn't)g(a)g(v)-5 b(alid)34
b(tagged)f(descriptor.)54 b(F)-7 b(or)731 1124 y(example,)31
b(a)f(double-\015oat)g(on)g(the)h(n)n(um)n(b)r(er)f(stac)n(k.)46
b(Storage)29 b(lo)r(cations)g(that)i(are)731 1223 y(not)37
b(scanned)g(b)n(y)h(the)g(garbage)d(collector)h(\(and)i(th)n(us)g
(cannot)f(con)n(tain)g Fc(p)l(ointer)731 1323 y(descriptors)p
Fk(\))k(are)e(called)g(non-descriptor)f(lo)r(cations.)72
b Fc(Imme)l(diate)42 b(descriptors)731 1422 y Fk(can)27
b(b)r(e)h(stored)f(in)g(non-descriptor)f(lo)r(cations.)523
1577 y Fj(En)m(try)33 b(p)s(oin)m(t)41 b Fk(An)g(en)n(try)f(p)r(oin)n
(t)h(is)g(a)g(function)g(that)g(ma)n(y)f(b)r(e)i(sub)5
b(ject)41 b(to)f(\\unpre-)731 1677 y(dictable")29 b(con)n(trol)g
(transfers.)42 b(All)30 b(en)n(try)g(p)r(oin)n(ts)f(are)g(link)n(ed)h
(to)g(the)g(ro)r(ot)f(of)h(the)731 1777 y(\015o)n(w)i(graph)g(\(the)i
(comp)r(onen)n(t)f(head.\))53 b(The)33 b(only)g(functions)g(that)g
(aren't)g(en)n(try)731 1876 y(p)r(oin)n(ts)25 b(are)g
Fc(let)g Fk(functions.)37 b(When)26 b(complex)f(lam)n(b)r(da-list)g
(syn)n(tax)g(is)g(used,)h(m)n(ulti-)731 1976 y(ple)19
b(en)n(try)h(p)r(oin)n(ts)f(ma)n(y)g(b)r(e)h(created)f(for)h(a)f
(single)g(lisp-lev)n(el)g(function.)35 b(See)19 b Fc(external)731
2076 y(entry)29 b(p)l(oint)p Fk(.)523 2231 y Fj(External)j(en)m(try)h
(p)s(oin)m(t)41 b Fk(A)31 b(function)h(that)f(serv)n(es)e(as)i(a)f
(\\tramp)r(oline")g(to)h(in)n(tercept)731 2330 y(function)h(calls)f
(coming)g(in)h(from)f(outside)h(of)g(the)g(comp)r(onen)n(t.)49
b(The)32 b(XEP)f(do)r(es)731 2430 y(argumen)n(t)20 b(syn)n(tax)h(and)g
(t)n(yp)r(e)g(c)n(hec)n(king,)h(and)f(ma)n(y)g(also)f(translate)h(the)h
(argumen)n(ts)731 2529 y(and)27 b(return)g(v)-5 b(alues)27
b(for)g(a)h(lo)r(cally)f(sp)r(ecialized)g(calling)g(calling)g(con)n(v)n
(en)n(tion.)523 2684 y Fj(XEP)42 b Fk(An)28 b Fc(external)h(entry)h(p)l
(oint)p Fk(.)523 2839 y Fj(lexical)h(en)m(vironmen)m(t)41
b Fk(A)35 b(lexical)g(en)n(vironmen)n(t)f(is)h(a)g(structure)g(that)h
(is)f(used)g(dur-)731 2939 y(ing)29 b(VMR)g(con)n(v)n(ersion)e(to)i
(represen)n(t)f(all)h(lexically)f(scop)r(ed)h(bindings)g(\(v)-5
b(ariables,)731 3039 y(functions,)31 b(declarations,)f(etc.\))46
b(Eac)n(h)29 b Fd(node)g Fk(is)i(annotated)f(with)h(its)g(lexical)f
(en-)731 3138 y(vironmen)n(t,)35 b(primarily)f(for)g(use)g(b)n(y)g(the)
h(debugger)e(and)h(other)g(user)g(in)n(terfaces.)731
3238 y(This)27 b(structure)g(is)h(also)e(the)i(en)n(vironmen)n(t)f(ob)5
b(ject)27 b(passed)g(to)g Fd(macroexpand)p Fk(.)523 3393
y Fj(en)m(vironmen)m(t)41 b Fk(The)21 b(en)n(vironmen)n(t)g(is)g(part)g
(of)h(the)g(ICR,)f(created)g(during)g(en)n(vironmen)n(t)731
3492 y(analysis.)35 b(En)n(vironmen)n(t)25 b(analysis)h(app)r(ortions)f
(co)r(de)i(to)g(disjoin)n(t)g(en)n(vironmen)n(ts,)731
3592 y(with)22 b(all)g(co)r(de)g(in)g(the)g(same)g(en)n(vironmen)n(t)f
(sharing)f(the)j(same)e(stac)n(k)g(frame.)35 b(Eac)n(h)731
3692 y(en)n(vironmen)n(t)d(has)h(a)g(\\)p Fc(r)l(e)l(al)p
Fk(")g(function)i(that)f(allo)r(cates)e(it,)k(and)d(some)g(collection)
731 3791 y Fd(let)e Fk(functions.)54 b(Although)33 b(en)n(vironmen)n(t)
f(analysis)f(is)i(the)h(last)e(ICR)h(phase,)h(in)731
3891 y(earlier)i(phases,)j(co)r(de)e(is)h(sometimes)f(said)g(to)g(b)r
(e)h(\\in)f(the)h(same/di\013eren)n(t)f(en-)731 3991
y(vironmen)n(t\(s\)".)54 b(This)33 b(means)h(that)f(the)i(co)r(de)e
(will)h(de\014nitely)g(b)r(e)g(in)g(the)g(same)731 4090
y(en)n(vironmen)n(t)23 b(\(b)r(ecause)i(it)f(is)h(in)g(the)g(same)e
(real)h(function\),)i(or)e(that)h(is)f(migh)n(t)g(not)731
4190 y(b)r(e)k(in)f(the)h(same)f(en)n(vironmen)n(t,)g(b)r(ecause)g(it)h
(is)g(not)f(in)h(the)g(same)f(function.)523 4345 y Fj(\014xup)42
b Fk(Some)30 b(sort)f(of)h(bac)n(k-patc)n(hing)e(annotation.)43
b(The)30 b(main)g(sort)f(encoun)n(tered)g(are)731 4444
y(load-time)e Fc(assembler)j(\014xups)p Fk(,)d(whic)n(h)h(are)e(a)h
(link)-5 b(age)28 b(annotation)e(mec)n(hanism.)523 4599
y Fj(\015o)m(w)32 b(graph)42 b Fk(A)33 b(\015o)n(w)f(graph)g(is)h(a)f
(directed)h(graph)f(of)g(basic)h(blo)r(c)n(ks,)g(where)f(eac)n(h)g(arc)
731 4699 y(represen)n(ts)h(a)h(p)r(ossible)g(con)n(trol)f(transfer.)57
b(The)34 b(\015o)n(w)g(graph)g(is)g(the)h(basic)f(data)731
4799 y(structure)21 b(used)i(to)f(represen)n(t)f(co)r(de,)i(and)f(pro)n
(vides)f(direct)h(supp)r(ort)g(for)g(data)g(\015o)n(w)731
4898 y(analysis.)35 b(See)28 b(comp)r(onen)n(t)f(and)g(ICR.)1893
5147 y(158)p eop
%%Page: 159 160
159 159 bop 523 614 a Fj(foldable)41 b Fk(An)31 b(attribute)g(of)g
Fc(known)i(functions)p Fk(.)47 b(A)31 b(function)g(is)g(foldable)g(if)g
(calls)f(ma)n(y)731 714 y(b)r(e)39 b(constan)n(t)e(folded)i(whenev)n
(er)f(the)h(argumen)n(ts)e(are)h(compile-time)g(constan)n(t.)731
814 y(Generally)26 b(this)i(means)f(that)h(it)g(is)g(a)f(pure)g
(function)h(with)h(no)e(side)g(e\013ects.)731 946 y(FSC)36
b(full)i(call)e(function)h(attribute)g(function)g("real")d(\(allo)r
(cates)i(en)n(vironmen)n(t\))731 1046 y(meaning)30 b(function-en)n(try)
h(more)f(v)-5 b(ague)30 b(\(an)n(y)h(lam)n(b)r(da?\))47
b(funn)n(y)32 b(function)f(GEN)731 1146 y(\(kill)25 b(and...\))36
b(global)24 b(TN,)h(con\015icts,)g(preference)f(GTN)h(\(n)n(um)n(b)r
(er\))g(IR)g(ICR)g(VMR)731 1245 y(ICR)31 b(con)n(v)n(ersion,)g(VMR)h
(con)n(v)n(ersion)d(\(translation\))i(inline)h(expansion,)g(call)f
(kill)731 1345 y(\(to)i(mak)n(e)f(dead\))h(kno)n(wn)g(function)h(LAMBD)
n(A)f(leaf)g(let)h(call)f(lifetime)h(analysis,)731 1445
y(liv)n(e)23 b(\(tn,)j(v)-5 b(ariable\))24 b(load)f(tn)i(LOCS)f
(\(passing,)g(return)g(lo)r(cations\))f(lo)r(cal)h(call)g(lo)r(cal)731
1544 y(TN,)29 b(con\015icts,)g(\(or)g(just)h(used)f(in)g(one)g(blo)r(c)
n(k\))g(lo)r(cation)f(\(selection\))i(L)-7 b(TN)29 b(\(n)n(um-)731
1644 y(b)r(er\))23 b(main)g(en)n(try)f(mess-up)h(\(for)f(clean)n(up\))h
(more)f(arg)g(\(en)n(try\))h(MV)g(non-lo)r(cal)f(exit)731
1743 y(non-pac)n(k)n(ed)33 b(SC,)j(TN)f(non-set)g(v)-5
b(ariable)34 b(op)r(erand)h(\(to)g(v)n(op\))g(optimizer)g(\(in)h(icr)
731 1843 y(optimize\))e(optional-dispatc)n(h)e(pac)n(k,)i(pac)n(king,)g
(pac)n(k)n(ed)e(pass)h(\(in)h(a)f(transform\))731 1943
y(passing)21 b(lo)r(cations)i(\(v)-5 b(alue\))23 b(con)n(v)n(en)n
(tions)e(\(kno)n(wn,)j(unkno)n(wn\))f(p)r(olicy)f(\(safe,)i(fast,)731
2042 y(small,)f(...\))36 b(predecessor)21 b(blo)r(c)n(k)h(primitiv)n
(e-t)n(yp)r(e)g(reac)n(hing)g(de\014nition)h(REF)g(repre-)731
2142 y(sen)n(tation)k(selection)g(for)g(v)-5 b(alue)28
b(result)g(con)n(tin)n(uation)e(\(for)i(function\))h(result)e(t)n(yp)r
(e)731 2242 y(assertion)g(\(for)h(template\))i(\(or)e(is)h(it)g
(restriction\))f(restrict)g(a)g(TN)h(to)g(\014nite)g(SBs)g(a)731
2341 y(template)c(op)r(erand)f(to)g(a)h(primitiv)n(e)f(t)n(yp)r(e)h
(\(b)r(o)n(xed...\))36 b(a)25 b(tn-ref)f(to)h(particular)e(SCs)731
2474 y(return)38 b(\(no)r(de,)43 b(v)n(ops\))38 b(safe,)j(safet)n(y)e
(sa)n(ving)e(\(of)j(registers,)g(costs\))f(SB)g(SC)g(\(re-)731
2574 y(striction\))d(semi-inline)g(side-e\013ect)h(in)f(ICR)h(in)g(VMR)
g(sparse)e(set)h(splitting)h(\(of)731 2673 y(VMR)d(blo)r(c)n(ks\))g
(SSET)g(SUBPRIMITIVE)g(successor)e(blo)r(c)n(k)i(tail)g(recursion)e
(tail)731 2773 y(recursiv)n(e)25 b(tail)j(recursiv)n(e)e(lo)r(op)h
(user)g(tail)h(recursion)731 2906 y(template)k(TN)h(TNBIND)g(TN-REF)f
(transform)f(\(source,)i(ICR\))f(t)n(yp)r(e)h(assertion)731
3005 y(inference)20 b(top-do)n(wn,)h(b)r(ottom-up)g(assertion)e
(propagation)f(deriv)n(ed,)j(asserted)f(de-)731 3105
y(scriptor,)29 b(sp)r(eci\014er,)h(in)n(tersection,)g(union,)g(mem)n(b)
r(er)g(t)n(yp)r(e)g(c)n(hec)n(k)f(t)n(yp)r(e-c)n(hec)n(k)g(\(in)731
3205 y(con)n(tin)n(uation\))36 b(UNBO)n(XED)g(\(b)r(o)n(xed\))h
(descriptor)f(unkno)n(wn)g(v)-5 b(alues)37 b(con)n(tin)n(ua-)731
3304 y(tion)24 b(unset)h(v)-5 b(ariable)24 b(un)n(wind-blo)r(c)n(k,)h
(un)n(winding)f(used)h(v)-5 b(alue)25 b(\(dest\))g(v)-5
b(alue)24 b(pass-)731 3404 y(ing)j(V)-9 b(AR)28 b(VM)g(V)n(OP)f(XEP)
1893 5147 y(159)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
