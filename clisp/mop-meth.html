<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>29.6. Methods</title><link rel="stylesheet" href="impnotes.css" type="text/css" /><link rev="made" href="mailto:clisp-list@lists.sourceforge.net" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot_7566" /><link rel="start" href="index.html" title="Implementation Notes for GNU CLISP" /><link rel="up" href="mop-chap.html" title="Chapter 29. Meta-Object Protocol" /><link rel="prev" href="mop-gf.html" title="29.5. Generic Functions" /><link rel="next" href="mop-accessors.html" title="29.7. Accessor Methods" /><link rel="copyright" href="legalese.html" title="Legal Status of the CLISP Implementation Notes" /><meta name="date" content="'generated: 2008-07-02 11:52:30-04:00'" /><link rel="author" title="Authors" href="index.html#authors" /><link rel="contents" title="Table of Contents" href="index.html" /><link rel="glossary" href="glossary.html" /><link rel="help" href="faq.html#faq-help" title="How do I ask for help?" /><link rel="home" title="Home" href="http://clisp.cons.org" /><link rel="index" href="idx.html" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">29.6. Methods</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="mop-gf.html">Prev</a> </td><th width="60%" align="center">Chapter 29. Meta-Object Protocol</th><td width="20%" align="right"> <a accesskey="n" href="mop-accessors.html">Next</a></td></tr></table><hr /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="mop-meth"></a>29.6. Methods</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mop-meth.html#mop-meth-inheritance">29.6.1. Inheritance Structure of method metaobject Classes</a></span></dt><dt><span class="section"><a href="mop-meth.html#mop-meth-mo-readers">29.6.2. Introspection: Readers for method metaobjects</a></span></dt><dd><dl><dt><span class="section"><a href="mop-meth.html#method-specializers">29.6.2.1. Generic Function <code class="function">CLOS:METHOD-SPECIALIZERS</code></a></span></dt><dt><span class="section"><a href="mop-meth.html#method-qualifiers">29.6.2.2. Generic Function <code class="function">METHOD-QUALIFIERS</code></a></span></dt><dt><span class="section"><a href="mop-meth.html#method-lambda-list">29.6.2.3. Generic Function <code class="function">CLOS:METHOD-LAMBDA-LIST</code></a></span></dt><dt><span class="section"><a href="mop-meth.html#method-gf">29.6.2.4. Generic Function <code class="function">CLOS:METHOD-GENERIC-FUNCTION</code></a></span></dt><dt><span class="section"><a href="mop-meth.html#method-function">29.6.2.5. Generic Function <code class="function">CLOS:METHOD-FUNCTION</code></a></span></dt><dt><span class="section"><a href="mop-meth.html#mop-meth-mo-readers-methods">29.6.2.6. Methods</a></span></dt></dl></dd><dt><span class="section"><a href="mop-meth.html#mop-meth-init">29.6.3. Initialization of Methods</a></span></dt><dd><dl><dt><span class="section"><a href="mop-meth.html#mop-meth-init-defmethod">29.6.3.1. Macro <code class="function">DEFMETHOD</code></a></span></dt><dd><dl><dt><span class="section"><a href="mop-meth.html#mop-meth-init-defmethod-body">29.6.3.1.1. Processing Method Bodies</a></span></dt><dt><span class="section"><a href="mop-meth.html#mop-meth-init-defmethod-mo">29.6.3.1.2. Initialization of Generic Function and method metaobjects</a></span></dt><dt><span class="section"><a href="mop-meth.html#mop-meth-efficiency">29.6.3.1.3. Efficiency</a></span></dt></dl></dd><dt><span class="section"><a href="mop-meth.html#mop-meth-init-mo">29.6.3.2. Initialization of method metaobjects</a></span></dt><dd><dl><dt><span class="section"><a href="mop-meth.html#mop-meth-init-mo-method">29.6.3.2.1. Methods</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="mop-meth.html#mop-meth-customize">29.6.4. Customization</a></span></dt><dd><dl><dt><span class="section"><a href="mop-meth.html#extract-lambda-list">29.6.4.1. Function <code class="function">CLOS:EXTRACT-LAMBDA-LIST</code></a></span></dt><dt><span class="section"><a href="mop-meth.html#extract-specializer-names">29.6.4.2. Function <code class="function">CLOS:EXTRACT-SPECIALIZER-NAMES</code></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-meth-inheritance"></a>29.6.1. Inheritance Structure of <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a> Classes</h3></div></div></div><div class="figure"><a id="mop-meth-inheritance-fig"></a><p class="title"><b>Figure 29.5. Inheritance structure of <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a> classes</b></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="100%"><tr><td><img src="mop-classes-method.png" width="100%" alt="Inheritance structure of method metaobject classes" /></td></tr></table></div></div></div><br class="figure-break" /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-meth-mo-readers"></a>29.6.2. Introspection: Readers for <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a>s</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mop-meth.html#method-specializers">29.6.2.1. Generic Function <code class="function">CLOS:METHOD-SPECIALIZERS</code></a></span></dt><dt><span class="section"><a href="mop-meth.html#method-qualifiers">29.6.2.2. Generic Function <code class="function">METHOD-QUALIFIERS</code></a></span></dt><dt><span class="section"><a href="mop-meth.html#method-lambda-list">29.6.2.3. Generic Function <code class="function">CLOS:METHOD-LAMBDA-LIST</code></a></span></dt><dt><span class="section"><a href="mop-meth.html#method-gf">29.6.2.4. Generic Function <code class="function">CLOS:METHOD-GENERIC-FUNCTION</code></a></span></dt><dt><span class="section"><a href="mop-meth.html#method-function">29.6.2.5. Generic Function <code class="function">CLOS:METHOD-FUNCTION</code></a></span></dt><dt><span class="section"><a href="mop-meth.html#mop-meth-mo-readers-methods">29.6.2.6. Methods</a></span></dt></dl></div><p>The reader generic functions which simply return information
associated with <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a>s are presented together here in the
format described in <a class="xref" href="mop-classes.html#mop-cl-readers" title="29.3.3. Introspection: Readers for class metaobjects">Section 29.3.3, “Introspection: Readers for class metaobjects”</a>.</p><p>Each of these reader generic functions have the same syntax,
accepting one required argument called <em class="replaceable"><code>method</code></em>, which must be a
<a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a>; otherwise, an <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.  An <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is also <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed
if the <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a> has not been initialized.</p><p>These generic functions can be called by the user or the
 implementation.</p><p>For any of these generic
 functions which returns a list, such lists will not be mutated by the
 implementation.  The results are undefined if a portable program allows
 such a list to be mutated.</p>
<!--begin method basic introspection-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="method-specializers"></a>29.6.2.1. Generic Function <a class="link" href="mop-meth.html#method-specializers" title="29.6.2.1. Generic Function CLOS:METHOD-SPECIALIZERS"><code class="function">CLOS:METHOD-SPECIALIZERS</code></a></h4></div><div><h5 class="subtitle"><code class="code">(<a class="link" href="mop-meth.html#method-specializers" title="29.6.2.1. Generic Function CLOS:METHOD-SPECIALIZERS"><code class="function">CLOS:METHOD-SPECIALIZERS</code></a> <em class="replaceable"><code>method</code></em>)</code></h5></div></div></div><p>Returns a list of the specializers of <em class="replaceable"><code>method</code></em>.  This value is a
list of specializer metaobjects.  This is the value of the
<code class="constant">:SPECIALIZERS</code> initialization argument that was associated with the
method during initialization.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="method-qualifiers"></a>29.6.2.2. Generic Function <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_met_d-qualifiers.html" target="_top"><code class="function">METHOD-QUALIFIERS</code></a></h4></div><div><h5 class="subtitle"><code class="code">(<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_met_d-qualifiers.html" target="_top"><code class="function">METHOD-QUALIFIERS</code></a> <em class="replaceable"><code>method</code></em>)</code></h5></div></div></div><p>Returns a (possibly empty) list of the qualifiers of <em class="replaceable"><code>method</code></em>.
This value is a list of non-<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> atoms.  This is the defaulted value of
the <code class="constant">:QUALIFIERS</code> initialization argument that was associated with the
method during initialization.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="method-lambda-list"></a>29.6.2.3. Generic Function <a class="link" href="mop-meth.html#method-lambda-list" title="29.6.2.3. Generic Function CLOS:METHOD-LAMBDA-LIST"><code class="function">CLOS:METHOD-LAMBDA-LIST</code></a></h4></div><div><h5 class="subtitle"><code class="code">(<a class="link" href="mop-meth.html#method-lambda-list" title="29.6.2.3. Generic Function CLOS:METHOD-LAMBDA-LIST"><code class="function">CLOS:METHOD-LAMBDA-LIST</code></a> <em class="replaceable"><code>method</code></em>)</code></h5></div></div></div><p>Returns the (unspecialized) <a class="link" href="lalist.html" title="3.4. Lambda Lists">lambda list</a> of <em class="replaceable"><code>method</code></em>.  This value
is a <a class="ulink" href="http://www.lisp.org" target="_top"><span class="command"><strong>Common Lisp</strong></span></a> <a class="link" href="lalist.html" title="3.4. Lambda Lists">lambda list</a>.  This is the value of the <code class="constant">:LAMBDA-LIST</code>
initialization argument that was associated with the method during
initialization.</p></div>
<!--end method basic introspection-->
<!--begin method advanced introspection-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="method-gf"></a>29.6.2.4. Generic Function <a class="link" href="mop-meth.html#method-gf" title="29.6.2.4. Generic Function CLOS:METHOD-GENERIC-FUNCTION"><code class="function">CLOS:METHOD-GENERIC-FUNCTION</code></a></h4></div><div><h5 class="subtitle"><code class="code">(<a class="link" href="mop-meth.html#method-gf" title="29.6.2.4. Generic Function CLOS:METHOD-GENERIC-FUNCTION"><code class="function">CLOS:METHOD-GENERIC-FUNCTION</code></a> <em class="replaceable"><code>method</code></em>)</code></h5></div></div></div><p>Returns the generic function that <em class="replaceable"><code>method</code></em> is currently
connected to, or <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if it is not currently connected to any generic
function.  This value is either a <a class="link" href="mop-overview.html#mop-gen-fun-mo">generic function metaobject</a> or <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.
When a method is first created it is not connected to any generic
function.  This connection is maintained by the generic functions
<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><code class="function">ADD-METHOD</code></a> and <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><code class="function">REMOVE-METHOD</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="method-function"></a>29.6.2.5. Generic Function <a class="link" href="mop-meth.html#method-function" title="29.6.2.5. Generic Function CLOS:METHOD-FUNCTION"><code class="function">CLOS:METHOD-FUNCTION</code></a></h4></div><div><h5 class="subtitle"><code class="code">(<a class="link" href="mop-meth.html#method-function" title="29.6.2.5. Generic Function CLOS:METHOD-FUNCTION"><code class="function">CLOS:METHOD-FUNCTION</code></a> <em class="replaceable"><code>method</code></em>)</code></h5></div></div></div><p>Returns the method function of <em class="replaceable"><code>method</code></em>.  This is the
value of the <code class="constant">:FUNCTION</code> initialization argument that was associated
with the method during initialization.</p></div>
<!--end method advanced introspection-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-meth-mo-readers-methods"></a>29.6.2.6. Methods</h4></div></div></div><div class="variablelist"><p class="title"><b>The specified methods for the <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a> readers</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a class="link" href="mop-meth.html#method-specializers" title="29.6.2.1. Generic Function CLOS:METHOD-SPECIALIZERS"><code class="function">CLOS:METHOD-SPECIALIZERS</code></a>
   (<em class="replaceable"><code>method</code></em> <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a>))</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_met_d-qualifiers.html" target="_top"><code class="function">METHOD-QUALIFIERS</code></a>
   (<em class="replaceable"><code>method</code></em> <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a>))</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a class="link" href="mop-meth.html#method-lambda-list" title="29.6.2.3. Generic Function CLOS:METHOD-LAMBDA-LIST"><code class="function">CLOS:METHOD-LAMBDA-LIST</code></a>
   (<em class="replaceable"><code>method</code></em> <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a>))</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a class="link" href="mop-meth.html#method-function" title="29.6.2.5. Generic Function CLOS:METHOD-FUNCTION"><code class="function">CLOS:METHOD-FUNCTION</code></a>
   (<em class="replaceable"><code>method</code></em> <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a>))</code></span></span></dt><dd>No behavior is specified for these
   methods beyond that which is specified for their respective generic
   functions.</dd><dt><span class="term"><span class="method"><code class="literal">(<a class="link" href="mop-meth.html#method-gf" title="29.6.2.4. Generic Function CLOS:METHOD-GENERIC-FUNCTION"><code class="function">CLOS:METHOD-GENERIC-FUNCTION</code></a>
   (<em class="replaceable"><code>method</code></em> <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a>))</code></span></span></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>The value returned by this method is maintained by
  <span class="method"><code class="literal"><a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><code class="function">ADD-METHOD</code></a>(<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>
   <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a>)</code></span> and
  <span class="method"><code class="literal"><a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><code class="function">REMOVE-METHOD</code></a>(<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>
   <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a>)</code></span>.</p></dd></dl></div></div>
<!--mop-meth-mo-readers-methods-->
</div>
<!--mop-meth-mo-readers-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-meth-init"></a>29.6.3. Initialization of Methods</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mop-meth.html#mop-meth-init-defmethod">29.6.3.1. Macro <code class="function">DEFMETHOD</code></a></span></dt><dd><dl><dt><span class="section"><a href="mop-meth.html#mop-meth-init-defmethod-body">29.6.3.1.1. Processing Method Bodies</a></span></dt><dt><span class="section"><a href="mop-meth.html#mop-meth-init-defmethod-mo">29.6.3.1.2. Initialization of Generic Function and method metaobjects</a></span></dt><dt><span class="section"><a href="mop-meth.html#mop-meth-efficiency">29.6.3.1.3. Efficiency</a></span></dt></dl></dd><dt><span class="section"><a href="mop-meth.html#mop-meth-init-mo">29.6.3.2. Initialization of method metaobjects</a></span></dt><dd><dl><dt><span class="section"><a href="mop-meth.html#mop-meth-init-mo-method">29.6.3.2.1. Methods</a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-meth-init-defmethod"></a>29.6.3.1. Macro <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a></h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mop-meth.html#mop-meth-init-defmethod-body">29.6.3.1.1. Processing Method Bodies</a></span></dt><dt><span class="section"><a href="mop-meth.html#mop-meth-init-defmethod-mo">29.6.3.1.2. Initialization of Generic Function and method metaobjects</a></span></dt><dt><span class="section"><a href="mop-meth.html#mop-meth-efficiency">29.6.3.1.3. Efficiency</a></span></dt></dl></div><p>The evaluation or execution of a <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> form requires first
that the body of the method be converted to a method function.
This process is described
<a class="link" href="mop-meth.html#mop-meth-init-defmethod-body" title="29.6.3.1.1. Processing Method Bodies">below</a>.
The result of this process is a method function and a set of additional
initialization arguments to be used when creating the new method.
Given these two values, the evaluation or execution of a <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a>
form proceeds in three steps.</p><p>The first step ensures the existence of a generic function with
the specified name.  This is done by calling the function <a class="link" href="mop-gf.html#ensure-gf" title="29.5.4.2. Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a>.
The first argument in this call is the generic function name specified
in the <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> form.</p><p>The second step is the creation of the new <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a> by calling
<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>.  The class of the new <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a> is determined by calling
<a class="link" href="mop-gf.html#gf-method-class" title="29.5.2.6. Generic Function CLOS:GENERIC-FUNCTION-METHOD-CLASS"><code class="function">CLOS:GENERIC-FUNCTION-METHOD-CLASS</code></a> on the result of the call to <a class="link" href="mop-gf.html#ensure-gf" title="29.5.4.2. Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a> from the
first step.</p><p>The initialization arguments received by the call to <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>
are as follows:</p><div class="itemizedlist"><ul type="disc"><li>The value of the <code class="constant">:QUALIFIERS</code> initialization
argument is a list of the qualifiers which appeared in the <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a>
form.  No special processing is done on these values.  The order of the
elements of this list is the same as in the <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> form.
</li><li>The value of the <code class="constant">:LAMBDA-LIST</code> initialization
argument is the unspecialized <a class="link" href="lalist.html" title="3.4. Lambda Lists">lambda list</a> from the <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> form.
</li><li>The value of the <code class="constant">:SPECIALIZERS</code> initialization
argument is a list of the specializers for the method.  For specializers
which are classes, the specializer is the <a class="link" href="mop-overview.html#mop-class-mo">class metaobject</a> itself.  In
the case of <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><code class="classname">EQL</code></a> specializers, it will be an <a class="link" href="mop-overview.html#mop-inherit-struct" title="Table 29.1. Direct Superclass Relationships Among The Specified Metaobject Classes"><code class="classname">CLOS:EQL-SPECIALIZER</code></a>
metaobject obtained by calling <a class="link" href="mop-specializers.html#intern-eql-specializer" title="29.8.3.1. Function CLOS:INTERN-EQL-SPECIALIZER"><code class="function">CLOS:INTERN-EQL-SPECIALIZER</code></a> on the result of
evaluating the <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><code class="classname">EQL</code></a> specializer form in the <a class="clhs" href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html">lexical environment</a> of the
<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> form.</li><li>The value of the <code class="constant">:FUNCTION</code> initialization
argument is the method function.</li><li><p>The value of the <code class="constant">:DECLARATIONS</code> initialization
argument is a list of the <a class="" href="http://www.lisp.org/HyperSpec/Body/glo_d.html#declaration_specifier">declaration specifier</a>s from the <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> form.
If there are no declarations in the macro form, this initialization argument
either does not appear, or appears with a value of the empty list.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span class="command"><strong>CLISP</strong></span></h3><p>No <code class="constant">:DECLARATIONS</code> initialization argument is
  provided, because method initialization does not support a <code class="constant">:DECLARATIONS</code>
  argument, and because the method function is already completely provided
  through the <code class="constant">:FUNCTION</code> initialization argument.</p></div></li><li>The value of the <code class="constant">:DOCUMENTATION</code> initialization
argument is the documentation string from the <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> form.  If
there is no documentation string in the macro form this initialization
argument either does not appear, or appears with a value of false.
</li><li>Any other initialization argument produced in
conjunction with the method function are also included.</li><li>The implementation is free to include additional
initialization arguments provided these are not symbols accessible in
the <a class="clhs" href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a> package, or exported by any package defined in the
[<span class="citation"><a class="link" href="references.html#ansi-cl" title="ANSI INCITS 226-1994 (R1999) Information Technology - Programming Language - Common Lisp [formerly ANSI X3.226-1994 (R1999)]">ANSI CL standard</a></span>].</li></ul></div><p>In the third step, <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><code class="function">ADD-METHOD</code></a> is called to add the newly created
method to the set of methods associated with the <a class="link" href="mop-overview.html#mop-gen-fun-mo">generic function metaobject</a>.</p><p>The result of the call to <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><code class="function">ADD-METHOD</code></a> is returned as the result
of evaluating or executing the <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> form.</p><p>An example showing a typical <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> form and a sample
expansion is shown in the following example:
</p><div class="informalexample"><a id="defmethod-ex-1"></a><p>An example <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> form and one possible correct
  expansion. In the expansion, <em class="replaceable"><code>method-lambda</code></em>
  is the result of calling <a class="link" href="mop-gf.html#make-method-lambda" title="29.5.4.10. Generic Function CLOS:MAKE-METHOD-LAMBDA"><code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a> as described in
  <a class="xref" href="mop-meth.html#mop-meth-init-defmethod-body" title="29.6.3.1.1. Processing Method Bodies">Section 29.6.3.1.1, “Processing Method Bodies”</a>.
  The initargs appearing after <code class="constant">:FUNCTION</code> are assumed to be additional
  initargs returned from the call to <a class="link" href="mop-gf.html#make-method-lambda" title="29.5.4.10. Generic Function CLOS:MAKE-METHOD-LAMBDA"><code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a>.</p><pre class="programlisting">
(defmethod move :before ((p position) (l (eql 0))
                         <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> (visiblyp t)
                         <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> color)
  (set-to-origin p)
  (when visiblyp (show-move p 0 color)))

(let ((#:g001 (ensure-generic-function 'move)))
  (add-method #:g001
    (make-instance (generic-function-method-class #:g001)
                   :qualifiers '(:before)
                   :specializers (list (find-class 'position)
                                       (intern-eql-specializer 0))
                   :lambda-list '(p l <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> (visiblyp t)
                                      <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> color)
                   :function (function <em class="replaceable"><code>method-lambda</code></em>)
                   'additional-initarg-1 't
                   'additional-initarg-2 '39)))
</pre></div><p>The processing of the method body for this method is shown
 <a class="link" href="mop-meth.html#defmethod-ex-2">below</a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-meth-init-defmethod-body"></a>29.6.3.1.1. Processing Method Bodies</h5></div></div></div><p>Before a method can be created, the list of forms comprising the
method body must be converted to a method function.  This conversion is
a two step process.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>The body of methods can also appear in the
<code class="constant">:METHOD</code> option of <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><code class="function">DEFGENERIC</code></a> forms.  Initial methods are
not considered by any of the protocols specified in this document.
</p></div><div class="informalexample"><a id="defmethod-ex-2"></a><p>During macro-expansion of the <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> macro shown in
  the <a class="link" href="mop-meth.html#defmethod-ex-1">previous example</a> code
  similar to this would be run to produce the method lambda and
  additional initargs.  In this example, <em class="replaceable"><code><a class="clhs" href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-4.html">environment</a></code></em> is the macroexpansion
  environment of the <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> macro form.</p><pre class="programlisting">
(let ((gf (ensure-generic-function 'move)))
  (make-method-lambda
    gf
    (class-prototype (generic-function-method-class gf))
    '(lambda (p l <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> (visiblyp t) <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> color)
       (set-to-origin p)
       (when visiblyp (show-move p 0 color)))
    <em class="replaceable"><code><a class="clhs" href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-4.html">environment</a></code></em>))
</pre></div><p>The first step occurs during macro-expansion of the macro form.
In this step, the method <a class="link" href="lalist.html" title="3.4. Lambda Lists">lambda list</a>, declarations and body are
converted to a <a class="clhs" href="http://www.lisp.org/HyperSpec/Body/sec_3-1-3.html">lambda expression</a> called a <strong class="first"><em class="firstterm">method
lambda</em></strong>.  This conversion is based on information associated
with the generic function definition in effect at the time the macro
form is expanded.</p><p>The generic function definition is obtained by calling <a class="link" href="mop-gf.html#ensure-gf" title="29.5.4.2. Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a>
with a first argument of the generic function name specified in the
macro form.  The <code class="constant">:LAMBDA-LIST</code> keyword argument is not passed in this
call.</p><p>Given the generic function, production of the method lambda
proceeds by calling <a class="link" href="mop-gf.html#make-method-lambda" title="29.5.4.10. Generic Function CLOS:MAKE-METHOD-LAMBDA"><code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a>.  The first argument in this
call is the generic function obtained as described above.  The second
argument is the result of calling <a class="link" href="mop-classes.html#class-prototype" title="29.3.3.10. Generic Function CLOS:CLASS-PROTOTYPE"><code class="function">CLOS:CLASS-PROTOTYPE</code></a> on the result of
calling <a class="link" href="mop-gf.html#gf-method-class" title="29.5.2.6. Generic Function CLOS:GENERIC-FUNCTION-METHOD-CLASS"><code class="function">CLOS:GENERIC-FUNCTION-METHOD-CLASS</code></a> on the generic function.  The
third argument is a <a class="clhs" href="http://www.lisp.org/HyperSpec/Body/sec_3-1-3.html">lambda expression</a> formed from the method <a class="link" href="lalist.html" title="3.4. Lambda Lists">lambda list</a>,
declarations and body.  The fourth argument is the macro-expansion
environment of the macro form; this is the value of the
<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;ENVIRONMENT</code></a> argument to the <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> macro.</p><p>The generic function <a class="link" href="mop-gf.html#make-method-lambda" title="29.5.4.10. Generic Function CLOS:MAKE-METHOD-LAMBDA"><code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a> returns two values.  The
first is the method lambda itself.  The second is a list of
initialization arguments and values.  These are included in the
initialization arguments when the method is created.</p><p>In the second step, the method lambda is converted to a function
which properly captures the lexical scope of the macro form.  This is
done by having the method lambda appear in the macro-expansion as the
argument of the <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/speope_function.html" target="_top"><code class="function">FUNCTION</code></a> special form.  During the subsequent
evaluation of the macro-expansion, the result of the <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/speope_function.html" target="_top"><code class="function">FUNCTION</code></a> special
form is the method function.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span class="command"><strong>CLISP</strong></span></h3><p>See <a class="xref" href="mop-gf.html#no-make-method-lambda" title="The generic function CLOS:MAKE-METHOD-LAMBDA is not implemented">The generic function <code class="function">CLOS:MAKE-METHOD-LAMBDA</code> is not implemented</a>.
</p></div></div>
<!--mop-meth-init-defmethod-body-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-meth-init-defmethod-mo"></a>29.6.3.1.2. Initialization of Generic Function and <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a>s</h5></div></div></div><p>An example of creating a generic function and a <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a>, and then
adding the method to the generic function is shown below.  This example
is comparable to the method definition shown
 <a class="link" href="mop-meth.html#defmethod-ex-1">above</a>:
</p><pre class="programlisting">
(let* ((gf (make-instance 'standard-generic-function
                          :lambda-list '(p l <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> visiblyp <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>)))
       (method-class (generic-function-method-class gf)))
  (multiple-value-bind (lambda initargs)
       (make-method-lambda
         gf
         (class-prototype method-class)
         '(lambda (p l <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> (visiblyp t) <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> color)
            (set-to-origin p)
            (when visiblyp (show-move p 0 color)))
         nil)
    (add-method gf
                (apply #'make-instance method-class
                       :function (compile nil lambda)
                       :specializers (list (find-class 'position)
                                           (intern-eql-specializer 0))
                       :qualifiers ()
                       :lambda-list '(p l <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> (visiblyp t)
                                          <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> color)
                       initargs))))
</pre></div>
<!--mop-meth-init-defmethod-mo-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-meth-efficiency"></a>29.6.3.1.3. Efficiency</h5></div><div><h6 class="subtitle">Implementation dependent: only in <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a> and some other
  implementations</h6></div></div></div><p>Methods created through <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> have a faster calling
  convention than methods created through a portable <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>
  invocation.</p></div>
<!--mop-meth-efficiency-->
</div>
<!--mop-meth-init-defmethod-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-meth-init-mo"></a>29.6.3.2. Initialization of <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a>s</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mop-meth.html#mop-meth-init-mo-method">29.6.3.2.1. Methods</a></span></dt></dl></div><p>A <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a> can be created by calling <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>.
The initialization arguments establish the definition of the method.
A <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a> cannot be redefined;
calling <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a> <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>.</p><p>Initialization of a <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a> must be done by calling <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>
and allowing it to call <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a>.  Portable programs must
<span class="strong"><strong>not</strong></span></p><div class="itemizedlist"><ul type="disc"><li>... call <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a> directly to
    initialize a <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a>;</li><li>... call <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><code class="function">SHARED-INITIALIZE</code></a> directly to
    initialize a <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a>;</li><li>... call <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_change-class.html" target="_top"><code class="function">CHANGE-CLASS</code></a> to change the class of any
    <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a> or to turn a non-method object into a <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a>.
</li></ul></div><p>Since metaobject classes may not be redefined,
 no behavior is specified for the result of calls to
 <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_efined-class.html" target="_top"><code class="function">UPDATE-INSTANCE-FOR-REDEFINED-CLASS</code></a> on <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a>s.
 Since the class of a <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a> cannot be changed,
 no behavior is specified for the result of calls to
 <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_ferent-class.html" target="_top"><code class="function">UPDATE-INSTANCE-FOR-DIFFERENT-CLASS</code></a> on <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a>s.</p><p>During initialization, each initialization argument is checked
for errors and then associated with the <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a>.  The value
can then be accessed by calling the appropriate accessor as shown in
<a class="xref" href="mop-meth.html#mop-meth-initargs" title="Table 29.5. Initialization arguments and accessors for method metaobjects">Table 29.5, “Initialization arguments and
  accessors for method metaobjects”</a>.</p><p>This section begins with a description of the error checking and
processing of each initialization argument.  This is followed by a table
showing the generic functions that can be used to access the stored
initialization arguments.  The section ends with a set of restrictions
on portable methods affecting <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a> initialization.</p><p>In these descriptions, the phrase “<span class="quote">this argument defaults to
<em class="replaceable"><code>value</code></em></span>” means that when that initialization argument is not
supplied, initialization is performed as if <em class="replaceable"><code>value</code></em> had been supplied.
For some initialization arguments this could be done by the use of
default initialization arguments, but whether it is done this way is not
specified.  Implementations are free to define default initialization
arguments for specified <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a> classes.  Portable programs
are free to define default initialization arguments for portable
subclasses of the class <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a>.</p><div class="itemizedlist"><ul type="disc"><li>The <code class="constant">:QUALIFIERS</code> argument is a list of method
   qualifiers.  An <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if this value is not a <a class="" href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list">proper list</a>, or if
   any element of the list is not a non-null atom. This argument
   defaults to the empty list.</li><li>The <code class="constant">:LAMBDA-LIST</code> argument is the unspecialized
   <a class="link" href="lalist.html" title="3.4. Lambda Lists">lambda list</a> of the method.  An <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if this value is not a
   proper <a class="link" href="lalist.html" title="3.4. Lambda Lists">lambda list</a>. If this value is not supplied, an <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.
 </li><li>The <code class="constant">:SPECIALIZERS</code> argument is a list of the
   specializer metaobjects for the method.  An <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if this value
   is not a <a class="" href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list">proper list</a>, or if the length of the list differs from the
   number of required arguments in the <code class="constant">:LAMBDA-LIST</code> argument, or if
   any element of the list is not a specializer metaobject.  If this
   value is not supplied, an <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.</li><li> The <code class="constant">:FUNCTION</code> argument is a method function.  It
   must be compatible with the methods on <a class="link" href="mop-gf.html#compute-effective-method" title="29.5.4.8. Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</code></a>
   defined for this class of method and generic function with which it
   will be used.  That is, it must accept the same number of arguments
   as all uses of <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><code class="function">CALL-METHOD</code></a> that will call it supply.  (See
   <a class="link" href="mop-gf.html#compute-effective-method" title="29.5.4.8. Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</code></a> and <a class="link" href="mop-gf.html#make-method-lambda" title="29.5.4.10. Generic Function CLOS:MAKE-METHOD-LAMBDA"><code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a> for more information.)
   An <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if this argument is not supplied.</li><li> When the method being initialized is an instance of
   a subclass of <a class="link" href="mop-meth.html#mop-meth-init-mo" title="29.6.3.2. Initialization of method metaobjects"><code class="classname">CLOS:STANDARD-ACCESSOR-METHOD</code></a>, the <code class="constant">:SLOT-DEFINITION</code>
   initialization argument must be provided.  Its value is the direct
   <a class="link" href="mop-overview.html#mop-slot-def-mo">slot definition metaobject</a> which defines this accessor method.  An <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if the value
   is not an instance of a subclass of <a class="link" href="mop-overview.html#mop-inherit-struct" title="Table 29.1. Direct Superclass Relationships Among The Specified Metaobject Classes"><code class="classname">CLOS:DIRECT-SLOT-DEFINITION</code></a>.</li><li>The <code class="constant">:DOCUMENTATION</code> argument is a string or <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.
   An <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if this value is not a string or <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.  This argument
   defaults to <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</li></ul></div><p>After the processing and defaulting of initialization arguments
described above, the value of each initialization argument is associated
with the <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a>.  These values can then be accessed by calling the
corresponding generic function.  The correspondences are as follows:

</p><div class="table"><a id="mop-meth-initargs"></a><p class="title"><b>Table 29.5. Initialization arguments and
  accessors for <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a>s</b></p><div class="table-contents"><table summary="Initialization arguments and&#10;  accessors for method metaobjects" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">Initialization Argument</th><th align="center">Generic Function</th></tr></thead><tbody><tr><td align="center"><code class="constant">:QUALIFIERS</code></td><td align="center"><a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_met_d-qualifiers.html" target="_top"><code class="function">METHOD-QUALIFIERS</code></a></td></tr><tr><td align="center"><code class="constant">:LAMBDA-LIST</code></td><td align="center"><a class="link" href="mop-meth.html#method-lambda-list" title="29.6.2.3. Generic Function CLOS:METHOD-LAMBDA-LIST"><code class="function">CLOS:METHOD-LAMBDA-LIST</code></a></td></tr><tr><td align="center"><code class="constant">:SPECIALIZERS</code></td><td align="center"><a class="link" href="mop-meth.html#method-specializers" title="29.6.2.1. Generic Function CLOS:METHOD-SPECIALIZERS"><code class="function">CLOS:METHOD-SPECIALIZERS</code></a></td></tr><tr><td align="center"><code class="constant">:FUNCTION</code></td><td align="center"><a class="link" href="mop-meth.html#method-function" title="29.6.2.5. Generic Function CLOS:METHOD-FUNCTION"><code class="function">CLOS:METHOD-FUNCTION</code></a></td></tr><tr><td align="center"><code class="constant">:SLOT-DEFINITION</code></td><td align="center"><a class="link" href="mop-accessors.html#accessor-method-slotdef" title="29.7.1.1. Generic Function CLOS:ACCESSOR-METHOD-SLOT-DEFINITION"><code class="function">CLOS:ACCESSOR-METHOD-SLOT-DEFINITION</code></a></td></tr><tr><td align="center"><code class="constant">:DOCUMENTATION</code></td><td align="center"><a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_doc_umentationcp.html" target="_top"><code class="function">DOCUMENTATION</code></a></td></tr></tbody></table></div></div><p><br class="table-break" /></p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-meth-init-mo-method"></a>29.6.3.2.1. Methods</h5></div></div></div><p>It is not specified which methods provide the initialization
behavior described above.  Instead, the information needed to allow
portable programs to specialize this behavior is presented in as a set
of restrictions on the methods a portable program can define.  The model
is that portable initialization methods have access to the <a class="link" href="mop-overview.html#mop-method-mo">method metaobject</a> when
either all or none of the specified initialization has taken
effect.</p><p>These restrictions govern the methods that a portable program can
define on the generic functions <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a>,
<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a>, and <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><code class="function">SHARED-INITIALIZE</code></a>.  These restrictions
apply only to methods on these generic functions for which the first
specializer is a subclass of the class <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a>.  Other portable
methods on these generic functions are not affected by these
restrictions.</p><div class="itemizedlist"><ul type="disc"><li>Portable programs must not define methods on
   <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><code class="function">SHARED-INITIALIZE</code></a> or <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a>.</li><li><p>For <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a>:
   </p><div class="itemizedlist"><ul type="circle"><li>Portable programs must not define primary methods.
 </li><li>Portable programs may define around-methods, but
   these must be extending, not overriding methods.</li><li>Portable before-methods must assume that when they
   are run, none of the initialization behavior described above has been
   completed.</li><li>Portable after-methods must assume that when they
   are run, all of the initialization behavior described above has been
   completed.</li></ul></div></li></ul></div><p>The results are undefined if any of
 these restrictions are violated.</p></div>
<!--mop-meth-init-mo-method-->
</div>
<!--mop-meth-init-mo-->
</div>
<!--mop-meth-init-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-meth-customize"></a>29.6.4. Customization</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mop-meth.html#extract-lambda-list">29.6.4.1. Function <code class="function">CLOS:EXTRACT-LAMBDA-LIST</code></a></span></dt><dt><span class="section"><a href="mop-meth.html#extract-specializer-names">29.6.4.2. Function <code class="function">CLOS:EXTRACT-SPECIALIZER-NAMES</code></a></span></dt></dl></div>
<!--begin method advanced customization-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="extract-lambda-list"></a>29.6.4.1. Function <a class="link" href="mop-meth.html#extract-lambda-list" title="29.6.4.1. Function CLOS:EXTRACT-LAMBDA-LIST"><code class="function">CLOS:EXTRACT-LAMBDA-LIST</code></a></h4></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a class="link" href="mop-meth.html#extract-lambda-list" title="29.6.4.1. Function CLOS:EXTRACT-LAMBDA-LIST"><code class="function">CLOS:EXTRACT-LAMBDA-LIST</code></a> <em class="replaceable"><code>specialized-lambda-list</code></em>)
</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>specialized-lambda-list</code></em></span></dt><dd>a <a class="clhs" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-3.html">specialized lambda list</a> as accepted by <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a>.
</dd></dl></div></dd><dt><span class="term">Value</span></dt><dd>An unspecialized <a class="link" href="lalist.html" title="3.4. Lambda Lists">lambda list</a>.
</dd><dt><span class="term">Purpose</span></dt><dd><p>This function takes a <a class="clhs" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-3.html">specialized lambda list</a> and
   returns the <a class="link" href="lalist.html" title="3.4. Lambda Lists">lambda list</a> with the specializers removed.  This is a
   non-destructive operation.  Whether the result shares any structure
   with the argument is unspecified.</p><p>If the <em class="replaceable"><code>specialized-lambda-list</code></em> argument does not have legal syntax,
   an <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.  This syntax checking does not check the syntax of the
   actual specializer names, only the syntax of the <a class="link" href="lalist.html" title="3.4. Lambda Lists">lambda list</a> and
   where the specializers appear.
</p></dd></dl></div><div class="informalexample"><a id="extract-lambda-list-ex"></a><pre class="programlisting">
(<a class="link" href="mop-meth.html#extract-lambda-list" title="29.6.4.1. Function CLOS:EXTRACT-LAMBDA-LIST"><code class="function">CLOS:EXTRACT-LAMBDA-LIST</code></a> '((p position)))
⇒ <code class="computeroutput">(P)</code>
(<a class="link" href="mop-meth.html#extract-lambda-list" title="29.6.4.1. Function CLOS:EXTRACT-LAMBDA-LIST"><code class="function">CLOS:EXTRACT-LAMBDA-LIST</code></a> '((p position) x y))
⇒ <code class="computeroutput">(P X Y)</code>
(<a class="link" href="mop-meth.html#extract-lambda-list" title="29.6.4.1. Function CLOS:EXTRACT-LAMBDA-LIST"><code class="function">CLOS:EXTRACT-LAMBDA-LIST</code></a> '(a (b (eql x)) c <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> i))
⇒ <code class="computeroutput">(A B C <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> I)</code>
</pre></div></div>
<!--extract-lambda-list-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="extract-specializer-names"></a>29.6.4.2. Function <a class="link" href="mop-meth.html#extract-specializer-names" title="29.6.4.2. Function CLOS:EXTRACT-SPECIALIZER-NAMES"><code class="function">CLOS:EXTRACT-SPECIALIZER-NAMES</code></a></h4></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a class="link" href="mop-meth.html#extract-specializer-names" title="29.6.4.2. Function CLOS:EXTRACT-SPECIALIZER-NAMES"><code class="function">CLOS:EXTRACT-SPECIALIZER-NAMES</code></a>
    <em class="replaceable"><code>specialized-lambda-list</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>specialized-lambda-list</code></em></span></dt><dd>a <a class="clhs" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-3.html">specialized lambda list</a> as accepted by <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a>.
</dd></dl></div></dd><dt><span class="term">Value</span></dt><dd>A list of specializer names.
</dd><dt><span class="term">Purpose</span></dt><dd><p>This function takes a <a class="clhs" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-3.html">specialized lambda list</a> and
   returns its specializer names.  This is a non-destructive operation.
   Whether the result shares structure with the argument is unspecified.
  </p><p>The list returned by this function
 will not be mutated by the implementation.  The results are undefined
 if a portable program mutates the list returned by this function.</p><p>The result of this function will be a list with a
   number of elements equal to the number of required arguments in
   <em class="replaceable"><code>specialized-lambda-list</code></em>.  Specializers are defaulted to the symbol <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>.
  </p><p>If the <em class="replaceable"><code>specialized-lambda-list</code></em> argument does not have legal
   syntax, an <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.  This syntax checking does not check the syntax
   of the actual specializer names, only the syntax of the <a class="link" href="lalist.html" title="3.4. Lambda Lists">lambda list</a>
   and where the specializers appear.
</p></dd></dl></div><div class="informalexample"><a id="extract-specializer-names-ex"></a><pre class="programlisting">
(<a class="link" href="mop-meth.html#extract-specializer-names" title="29.6.4.2. Function CLOS:EXTRACT-SPECIALIZER-NAMES"><code class="function">CLOS:EXTRACT-SPECIALIZER-NAMES</code></a> '((p position)))
⇒ <code class="computeroutput">(POSITION)</code>
(<a class="link" href="mop-meth.html#extract-specializer-names" title="29.6.4.2. Function CLOS:EXTRACT-SPECIALIZER-NAMES"><code class="function">CLOS:EXTRACT-SPECIALIZER-NAMES</code></a> '((p position) x y))
⇒ <code class="computeroutput">(POSITION T T)</code>
(<a class="link" href="mop-meth.html#extract-specializer-names" title="29.6.4.2. Function CLOS:EXTRACT-SPECIALIZER-NAMES"><code class="function">CLOS:EXTRACT-SPECIALIZER-NAMES</code></a> '(a (b (eql x)) c <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> i))
⇒ <code class="computeroutput">(T (EQL X) T)</code>
</pre></div></div>
<!--extract-specializer-names-->
<!--end method advanced customization-->
</div>
<!--mop-meth-customize-->
</div><div class="bookinfo"><hr /><table width="100%" summary="impnotes meta info"><th><td align="left">These notes document <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a> version 2.46</td><td align="right">Last modified: 2008-07-02</td></th></table></div><div class="custom-footer"><hr /><table width="100%"><tr><td align="left"><a href="http://clisp.cons.org"><img src="clisp.png" width="48" height="48" alt="[CLISP home]" /></a></td><td align="center"><a href="http://sourceforge.net/donate/index.php?group_id=1355"><img src="http://images.sourceforge.net/images/project-support.jpg" width="88" height="32" alt="[Support CLISP]" /></a></td><td align="right"><a href="http://sourceforge.net"><img width="125" height="37" alt="[SourceForge]" src="http://sflogo.sourceforge.net/sflogo.php?group_id=1355&amp;type=2&amp;page=mop-meth" /></a></td></tr></table></div><hr /><form method="get" action="http://www.google.com/custom" target="_top"><table width="100%" border="0"><tr><td nowrap="nowrap" align="center"><input type="hidden" name="domains" value="clisp.cons.org;clisp.podval.org;www.lisp.org" /><label for="sbi" style="display: none">Enter your search terms</label><input type="text" name="q" size="50" maxlength="255" id="sbi" value="29.6. Methods" /><label for="sbb" style="display: none">Submit search form</label><input type="submit" name="sa" value="Google Search" id="sbb" /></td></tr><tr><td nowrap="nowrap" align="center"><input type="radio" name="sitesearch" value="" checked="1" id="ss0" /><label for="ss0" title="Search the Web"><small>Web</small></label><input type="radio" name="sitesearch" value="clisp.cons.org" id="ss1" /><label for="ss1" title="Search clisp.cons.org"><small>clisp.cons.org</small></label><input type="radio" name="sitesearch" value="clisp.podval.org" id="ss2" /><label for="ss2" title="Search clisp.podval.org"><small>clisp.podval.org</small></label><input type="radio" name="sitesearch" value="www.lisp.org" id="ss3" /><label for="ss3" title="Search www.lisp.org"><small>www.lisp.org</small></label><input type="hidden" name="client" value="pub-4445255502750357" /><input type="hidden" name="forid" value="1" /><input type="hidden" name="ie" value="UTF-8" /><input type="hidden" name="oe" value="UTF-8" /><input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:000000;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;LH:48;LW:48;L:http://clisp.cons.org/clisp.png;S:http://clisp.cons.org;FORID:1" /><input type="hidden" name="hl" value="en" /></td></tr></table></form><hr /><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="mop-gf.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="mop-chap.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="mop-accessors.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">29.5. Generic Functions </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 29.7. Accessor Methods</td></tr></table></div></body></html>
