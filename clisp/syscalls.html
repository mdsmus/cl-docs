<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>33.1. System Calls</title><link rel="stylesheet" href="impnotes.css" type="text/css" /><link rev="made" href="mailto:clisp-list@lists.sourceforge.net" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot_7566" /><link rel="start" href="index.html" title="Implementation Notes for GNU CLISP" /><link rel="up" href="ext-modules.html" title="Chapter 33. Extensions Implemented as Modules" /><link rel="prev" href="ext-modules.html" title="Chapter 33. Extensions Implemented as Modules" /><link rel="next" href="i18n-mod.html" title="33.2. Internationalization of User Programs" /><link rel="copyright" href="legalese.html" title="Legal Status of the CLISP Implementation Notes" /><meta name="date" content="'generated: 2008-07-02 11:52:30-04:00'" /><link rel="author" title="Authors" href="index.html#authors" /><link rel="contents" title="Table of Contents" href="index.html" /><link rel="glossary" href="glossary.html" /><link rel="help" href="faq.html#faq-help" title="How do I ask for help?" /><link rel="home" title="Home" href="http://clisp.cons.org" /><link rel="index" href="idx.html" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">33.1. System Calls</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ext-modules.html">Prev</a> </td><th width="60%" align="center">Chapter 33. Extensions Implemented as Modules</th><td width="20%" align="right"> <a accesskey="n" href="i18n-mod.html">Next</a></td></tr></table><hr /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="syscalls"></a>33.1. System Calls</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="syscalls.html#neworking">33.1.1. Networking</a></span></dt><dt><span class="section"><a href="syscalls.html#file-system">33.1.2. File system</a></span></dt><dt><span class="section"><a href="syscalls.html#user-group">33.1.3. Users and Groups</a></span></dt><dt><span class="section"><a href="syscalls.html#sysinfo">33.1.4. System Information</a></span></dt><dt><span class="section"><a href="syscalls.html#posix-math">33.1.5. Mathematical functions</a></span></dt><dt><span class="section"><a href="syscalls.html#encryption">33.1.6. Encryption</a></span></dt><dt><span class="section"><a href="syscalls.html#sys-log">33.1.7. Syslog</a></span></dt><dt><span class="section"><a href="syscalls.html#processes">33.1.8. Processes</a></span></dt><dt><span class="section"><a href="syscalls.html#accounting">33.1.9. Accounting</a></span></dt><dt><span class="section"><a href="syscalls.html#strtime">33.1.10. Time conversion</a></span></dt><dt><span class="section"><a href="syscalls.html#mk-xterm-io">33.1.11. XTerm</a></span></dt><dt><span class="section"><a href="syscalls.html#stdio">33.1.12. Standard file input and output</a></span></dt><dt><span class="section"><a href="syscalls.html#errno">33.1.13. Error handling</a></span></dt></dl></div><p>The <a class="link" href="syscalls.html" title="33.1. System Calls"><strong class="package">“<span class="quote">POSIX</span>”</strong></a> module makes some system calls available from lisp.
 Not all of these system calls are actually POSIX, so this package has a
 nickname <strong class="package">“<span class="quote">OS</span>”</strong>.  If the package prefix is
 not specified below, the symbol resides in this package.</p><p>This module is present in the <a href="modules.html#base-modules" class="olink"><span class="command"><strong>base</strong></span></a> <a href="modules.html#linkset" class="olink">linking set</a> by default.</p><p>When this module is present, <a href="features.html" class="olink"><code class="varname">*FEATURES*</code></a>
 contains the symbol <code class="constant">:SYSCALLS</code>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="neworking"></a>33.1.1. Networking</h3></div></div></div><div class="variablelist"><dl><dt><a id="resolve-host"></a><span class="term"><code class="code">(<a class="link" href="syscalls.html#resolve-host"><code class="function">POSIX:RESOLVE-HOST-IPADDR</code></a>
    <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>host</code></em>)</code></span></dt><dd><p>Returns the <span class="type">HOSTENT</span> structure:
   </p><div class="variablelist"><dl><dt><span class="term"><em class="structfield"><code>name</code></em></span></dt><dd>host name</dd><dt><span class="term"><em class="structfield"><code>aliases</code></em></span></dt><dd><a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> of aliases</dd><dt><span class="term"><em class="structfield"><code>addr-list</code></em></span></dt><dd><a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> of IP addresses as dotted quads (for IPv4) or
       coloned octets (for IPv6)</dd><dt><span class="term"><em class="structfield"><code>addrtype</code></em></span></dt><dd><a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> address type (IPv4 or IPv6)
   </dd></dl></div><p>
   When <em class="replaceable"><code>host</code></em> is omitted or <code class="constant">:DEFAULT</code>, return the data for the
   current host. When <em class="replaceable"><code>host</code></em> is <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, all the
   host database is returned as a list (this would be the contents of the
   <code class="filename">/etc/hosts</code> file on a <a class="ulink" href="http://www.unix.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> system or
   <code class="filename">${windir}/system32/etc/hosts</code> on a <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a> system).
  </p><p>This is an interface
   to <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/gethostent.html"><code class="function">gethostent</code></a>,
   <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/gethostbyname.html"><code class="function">gethostbyname</code></a>,
   and <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/gethostbyaddr.html"><code class="function">gethostbyaddr</code></a>.</p></dd><dt><a id="service"></a><span class="term"><code class="code">(<code class="function">OS:SERVICE</code>
    <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>service-name</code></em>
    <em class="replaceable"><code>protocol</code></em>)</code></span></dt><dd><p>A convenience function for looking up a port given
   the service name, such as “<span class="quote">WWW</span>” or “<span class="quote">FTP</span>”.
   It returns the <span class="type">SERVICE</span> structure
   (name, list of aliases, port, protocol) for the given
   <em class="replaceable"><code>service-name</code></em> and <em class="replaceable"><code>protocol</code></em>,
   or all services as a <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> if <em class="replaceable"><code>service-name</code></em>
   is missing or <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</p><p>This is an interface
   to <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/getservent.html"><code class="function">getservent</code></a>,
   <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/getservbyname.html"><code class="function">getservbyname</code></a>,
   and <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/getservbyport.html"><code class="function">getservbyport</code></a>.</p></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="file-system"></a>33.1.2. File system</h3></div></div></div><div class="variablelist"><dl><dt><a id="file-stat"></a><span class="term"><code class="code">(<code class="function">POSIX:FILE-STAT</code>
    <em class="replaceable"><code>pathname</code></em> <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>link-p</code></em>)</code></span></dt><dd><p>Return the <span class="type">FILE-STAT</span> structure.
   <em class="replaceable"><code>pathname</code></em> can be a <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>, a <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><code class="classname">PATHNAME</code></a>, a <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or a
   <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><code class="classname">NUMBER</code></a> (on a <a class="ulink" href="http://www.unix.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> system, meaning <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap03.html#tag_03_165">file descriptor</a>).
   The first slot of the structure returned is the string or the
   number on which <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/stat.html"><code class="function">stat</code></a>,
   <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/fstat.html"><code class="function">fstat</code></a>,
   or <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/lstat.html"><code class="function">lstat</code></a> was called.
   The other slots are numbers, members of the <span class="type">struct stat</span>:
    </p><div class="variablelist"><dl><dt><span class="term"><em class="structfield"><code>dev</code></em></span></dt><dd>Device ID of device containing file.
     </dd><dt><span class="term"><em class="structfield"><code>ino</code></em></span></dt><dd>File serial number.
     </dd><dt><span class="term"><em class="structfield"><code>mode</code></em></span></dt><dd>Mode of file.
     </dd><dt><span class="term"><em class="structfield"><code>nlink</code></em></span></dt><dd>Number of hard links to the file.
     </dd><dt><span class="term"><em class="structfield"><code>uid</code></em></span></dt><dd>User ID of file.
     </dd><dt><span class="term"><em class="structfield"><code>gid</code></em></span></dt><dd>Group ID of file.
     </dd><dt><span class="term"><em class="structfield"><code>rdev</code></em></span></dt><dd>Device ID (if file is character or block
        special).</dd><dt><span class="term"><em class="structfield"><code>size</code></em></span></dt><dd>For regular files, the file size in bytes.
        For symbolic links, the length in bytes of the pathname contained
        in the symbolic link.
        For a shared memory object, the length in bytes.
        For a typed memory object, the length in bytes.
        For other file types, the use of this field is unspecified.
     </dd><dt><span class="term"><em class="structfield"><code>atime</code></em></span></dt><dd><a class="clhs" href="http://www.lisp.org/HyperSpec/Body/sec_25-1-4-2.html">universal time</a> of last access.
     </dd><dt><span class="term"><em class="structfield"><code>mtime</code></em></span></dt><dd><a class="clhs" href="http://www.lisp.org/HyperSpec/Body/sec_25-1-4-2.html">universal time</a> of last data modification.
     </dd><dt><span class="term"><em class="structfield"><code>ctime</code></em></span></dt><dd><a class="clhs" href="http://www.lisp.org/HyperSpec/Body/sec_25-1-4-2.html">universal time</a> of last status change
        (on <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a> - creation time).</dd><dt><span class="term"><em class="structfield"><code>blksize</code></em></span></dt><dd>A file system-specific preferred I/O block size
        for this object.  In some file system types, this may vary from
        file to file.</dd><dt><span class="term"><em class="structfield"><code>blocks</code></em></span></dt><dd>Number of blocks allocated for this object.
     </dd></dl></div><p>
    All slots are read-only.</p><p>If the system does not support a particular field (e.g.,
    <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a> prior to 2000 does not have hard links), <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> (or the
    default, like 1 for the number of hard links for old <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a>) is
    returned.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><span class="platform">Win32</span> platform only.</h3><p>Normally, one would expect <code class="code">(POSIX:FILE-STAT
      "foo")</code> and <code class="code">(POSIX:FILE-STAT (<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><code class="function">OPEN</code></a> "foo"))</code> to
     return “<span class="quote">similar</span>” objects (<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><code class="function">OPEN</code></a>ing a file changes its
     access time though).  This is <span class="strong"><strong>not</strong></span> the case on <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a>,
     where <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/stat.html"><code class="function">stat</code></a>
     works but <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/fstat.html"><code class="function">fstat</code></a> does <span class="strong"><strong>not</strong></span>.
     Specifically, <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/fstat.html"><code class="function">fstat</code></a> requires
     an <span class="type">int</span> argument of an unknown nature,
     and it is not clear how do deduce it from the <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a> file handle.
     Therefore, instead of always failing on open <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><code class="classname">FILE-STREAM</code></a> arguments,
     this function calls
     <a class="win32" href="http://search.msdn.microsoft.com/Default.aspx?query=GetFileInformationByHandle"><code class="function">GetFileInformationByHandle</code></a> and
     fills the <span class="type">FILE-STAT</span> return value based on that.
 </p></div></dd><dt><a id="set-file-stat"></a><span class="term"><code class="code">(<code class="function">POSIX:SET-FILE-STAT</code> <em class="replaceable"><code>pathname</code></em>
    <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> :ATIME :MTIME :MODE :UID :GID)</code></span></dt><dd>Set some file attributes using
    <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/chmod.html"><code class="function">chmod</code></a>,
    <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/chown.html"><code class="function">chown</code></a>,
    and <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/utime.html"><code class="function">utime</code></a>.
 </dd><dt><a id="stat-vfs"></a><span class="term"><code class="code">(<code class="function">POSIX:STAT-VFS</code>
    <em class="replaceable"><code>pathname</code></em>)</code></span></dt><dd><p>Return a <span class="type">STAT-VFS</span> structure.
   <em class="replaceable"><code>pathname</code></em> can be a <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>, a <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><code class="classname">PATHNAME</code></a>, a <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or a
   <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><code class="classname">NUMBER</code></a> (on a <a class="ulink" href="http://www.unix.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> system, meaning <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap03.html#tag_03_165">file descriptor</a>).
   The first slot of the structure returned is the string
   or the number on which <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/statvfs.html"><code class="function">statvfs</code></a> or
   <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/fstatvfs.html"><code class="function">fstatvfs</code></a> was called.
   The other slots are members of the <span class="type">struct statvfs</span>:
   </p><div class="variablelist"><dl><dt><span class="term"><em class="structfield"><code>bsize</code></em></span></dt><dd>File system block size.
    </dd><dt><span class="term"><em class="structfield"><code>frsize</code></em></span></dt><dd>Fundamental file system block size.
    </dd><dt><span class="term"><em class="structfield"><code>blocks</code></em></span></dt><dd>Total number of blocks on file system in units of
       <em class="structfield"><code>frsize</code></em>.</dd><dt><span class="term"><em class="structfield"><code>bfree</code></em></span></dt><dd>Total number of free blocks.
    </dd><dt><span class="term"><em class="structfield"><code>bavail</code></em></span></dt><dd>Number of free blocks available to
       non-privileged processes.</dd><dt><span class="term"><em class="structfield"><code>files</code></em></span></dt><dd>Total number of file serial numbers.
    </dd><dt><span class="term"><em class="structfield"><code>ffree</code></em></span></dt><dd>Total number of free file serial numbers.
    </dd><dt><span class="term"><em class="structfield"><code>favail</code></em></span></dt><dd>Number of file serial numbers available to
       non-privileged processes.</dd><dt><span class="term"><em class="structfield"><code>fsid</code></em></span></dt><dd>File system ID.</dd><dt><span class="term"><em class="structfield"><code>flag</code></em></span></dt><dd>List of platform-dependent values, such as <code class="constant">:READ-ONLY</code>.
    </dd><dt><span class="term"><em class="structfield"><code>namemax</code></em></span></dt><dd>Maximum filename length.
   </dd><dt><span class="term"><em class="structfield"><code>vol-name</code></em></span></dt><dd>Volume name (<a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a> only).
   </dd><dt><span class="term"><em class="structfield"><code>fs-type</code></em></span></dt><dd>File system type (<a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a> only).
   </dd></dl></div><p>
   All slots are read-only.
 </p></dd><dt><a id="file-info"></a><span class="term"><code class="code">(<code class="function">OS:FILE-INFO</code>
    <em class="replaceable"><code>pathname</code></em> <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> all)</code></span></dt><dd><p>Return the <span class="type">FILE-INFO</span> structure.
    <em class="replaceable"><code>pathname</code></em> should be a <a class="link" href="filename-misc.html#path-des" title="Pathname Designators">pathname designator</a>. The 7 slots are</p><table class="simplelist" border="0" summary="Simple list"><tr><td><em class="structfield"><code>attributes</code></em></td></tr><tr><td><em class="structfield"><code>ctime</code></em></td></tr><tr><td><em class="structfield"><code>atime</code></em></td></tr><tr><td><em class="structfield"><code>wtime</code></em></td></tr><tr><td><em class="structfield"><code>size</code></em></td></tr><tr><td><em class="structfield"><code>name</code></em></td></tr><tr><td><em class="structfield"><code>name-short</code></em></td></tr></table><p>When <em class="replaceable"><code>pathname</code></em> is wild, returns just the first match,
    unless the second (optional) argument is non-<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, in which case a
    <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> of objects is returned, one for each match.
 </p></dd><dt><a id="stream-lock"></a><span class="term">
   <code class="code">(<code class="function">POSIX:STREAM-LOCK</code> <em class="replaceable"><code>stream</code></em>
    <em class="replaceable"><code>lock-p</code></em> <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
    (:BLOCK <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>) (:SHARED <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>) (:START 0) (:END <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>))</code></span></dt><dd><p>Set or remove a file lock for the (portion of the)
    file associated with <em class="replaceable"><code>stream</code></em>,
    depending on <em class="replaceable"><code>lock-p</code></em>.
    When <em class="replaceable"><code>block</code></em> is <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, the call is non-blocking,
    and when locking fails, it returns <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.
    When <em class="replaceable"><code>shared</code></em> is non-<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>,
    then lock can be shared between several callers.
    Several processes can set a <em class="replaceable"><code>shared</code></em>
    (i.e., <span class="emphasis"><em>read</em></span>) lock, but only one can set
    an <em class="replaceable"><code>exclusive</code></em> (i.e., <span class="emphasis"><em>write</em></span>,
    or non-<em class="replaceable"><code>shared</code></em>) lock.
    Uses <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/fcntl.html"><code class="function">fcntl</code></a>
    or <a class="win32" href="http://search.msdn.microsoft.com/Default.aspx?query=LockFileEx"><code class="function">LockFileEx</code></a>.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><a class="ulink" href="http://www.unix.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> and <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a> differ on locking 0-length files: on
     <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a>, two processes can have exclusive locks on it!</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a> locks are <span class="emphasis"><em>mandatory</em></span>:
     if you lock a file, others will not be able to open it!
     <a class="ulink" href="http://www.unix.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> locks are usually <span class="emphasis"><em>advisory</em></span>: a process
     is free to ignore it, but on some <a class="ulink" href="http://www.unix.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> systems one can mount some
     file system with <span class="emphasis"><em>mandatory</em></span> locks.</p></div></dd><dt><a id="with-stream-lock"></a><span class="term">
   <code class="code">(<code class="function">POSIX:WITH-STREAM-LOCK</code> (<em class="replaceable"><code>stream</code></em>
    <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>options</code></em>) <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;BODY</code></a> <em class="replaceable"><code>body</code></em>)</code></span></dt><dd>Lock the <em class="replaceable"><code>stream</code></em>, execute the <em class="replaceable"><code>body</code></em>, unlock
    the <em class="replaceable"><code>stream</code></em>.  Pass <em class="replaceable"><code>options</code></em> to <a class="link" href="syscalls.html#stream-lock"><code class="function">POSIX:STREAM-LOCK</code></a>.
 </dd><dt><a id="fcntl"></a><span class="term"><code class="code">(<a class="link" href="syscalls.html#fcntl"><code class="function">POSIX:STREAM-OPTIONS</code></a>
    <em class="replaceable"><code>stream</code></em> <em class="replaceable"><code>command</code></em> <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>value</code></em>)</code></span></dt><dd>Call <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/fcntl.html"><code class="function">fcntl</code></a>,
    <em class="replaceable"><code>command</code></em> can be <code class="constant">:FD</code> or <code class="constant">:FL</code>.
 </dd><dt><a id="mknod"></a><span class="term"><code class="code">(<code class="function">POSIX:MKNOD</code>
    <em class="replaceable"><code>pathname</code></em> <em class="replaceable"><code>type</code></em> <em class="replaceable"><code>mode</code></em>)</code></span></dt><dd>Create a special file using
   <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/mknod.html"><code class="function">mknod</code></a>.
   Use <code class="constant">:FIFO</code> to create pipes
   and <code class="constant">:SOCK</code> to create sockets.
 </dd><dt><a id="convert-mode"></a><span class="term"><code class="code">(<code class="function">POSIX:CONVERT-MODE</code> <em class="replaceable"><code>mode</code></em>)</code></span></dt><dd>Convert between numeric, (e.g., <code class="literal">0644</code>)
    and symbolic (e.g., <span class="data"><code class="literal">(:RUSR :WUSR :RGRP
     :ROTH)</code></span>) file modes.</dd><dt><a id="umask"></a><span class="term"><code class="code">(<code class="function">POSIX:UMASK</code>
    <em class="replaceable"><code>mode</code></em>)</code></span></dt><dd>Change process mask using
   <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/umask.html"><code class="function">umask</code></a>.
 </dd><dt><a id="copy-file"></a><span class="term"><code class="code">(<a class="link" href="syscalls.html#copy-file"><code class="function">POSIX:COPY-FILE</code></a> <em class="replaceable"><code>source</code></em> <em class="replaceable"><code>destination</code></em>
    <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> :METHOD :PRESERVE :IF-EXISTS :IF-DOES-NOT-EXIST)</code></span></dt><dd><p>This is an interface to
    <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/symlink.html"><code class="function">symlink</code></a>
    (when <em class="replaceable"><code>method</code></em> is <code class="constant">:SYMLINK</code>),
    <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/link.html"><code class="function">link</code></a>
    (when it is <code class="constant">:HARDLINK</code>),
    and <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/rename.html"><code class="function">rename</code></a>
    (when it is <code class="constant">:RENAME</code>) system calls, as well as,
    you guessed it, a generic file copy utility (when <em class="replaceable"><code>method</code></em> is <code class="constant">:COPY</code>).
   </p><p>Both <em class="replaceable"><code>source</code></em> and <em class="replaceable"><code>destination</code></em> may be wild, in which
    case <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/fun_translate-pathname.html" target="_top"><code class="function">TRANSLATE-PATHNAME</code></a> is used.</p></dd><dt><a id="dup-handle"></a><span class="term"><code class="code">(<a class="link" href="syscalls.html#dup-handle"><code class="function">POSIX:DUPLICATE-HANDLE</code></a>
    <em class="replaceable"><code>fd1</code></em> <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
    <em class="replaceable"><code>fd2</code></em>)</code></span></dt><dd>This is an interface to the
    <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/dup.html"><code class="function">dup</code></a> system calls on
    <a class="ulink" href="http://www.unix.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> systems and to <a class="win32" href="http://search.msdn.microsoft.com/Default.aspx?query=DuplicateHandle"><code class="function">DuplicateHandle</code></a>
    system call on <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a>.</dd><dt><span class="term"><code class="code">(OS:SHORTCUT-INFO <em class="replaceable"><code>pathname</code></em>)</code></span></dt><dd>Return information about a <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a> shortcut
    (<code class="filename">#P".lnk"</code>) file contents in a
    <span class="type">SHORTCUT-INFO</span> structure.</dd><dt><span class="term"><code class="code">(OS:MAKE-SHORTCUT <em class="replaceable"><code>pathname</code></em> <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
    :WORKING-DIRECTORY :ARGUMENTS :SHOW-COMMAND :ICON :DESCRIPTION
    :HOT-KEY :PATH)</code></span></dt><dd>Create (or modify the properties of an existing one)
    a <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a> shortcut (<code class="filename">#P".lnk"</code>) file.
 </dd><dt><a id="file-properties"></a><span class="term"><code class="code">(OS:FILE-PROPERTIES
    filename set <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> :INITID <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;ALLOW-OTHER-KEYS</code></a>)</code></span></dt><dd><p>Wrapper for the <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a>
    <a class="win32" href="http://search.msdn.microsoft.com/Default.aspx?query=IPropertyStorage"><code class="function">IPropertyStorage</code></a> functionality.
    </p><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>filename</code></em></span></dt><dd>name of a compound file (where properties are stored)
      or (on NTFS) name of any file (properties are stored in the filesystem).
      For compound files on NTFS, file storage is preferred.
     </dd><dt><span class="term"><em class="replaceable"><code>set</code></em></span></dt><dd>property set, either <code class="constant">:BUILT-IN</code>
        or <code class="constant">:USER-DEFINED</code>
     </dd><dt><span class="term"><code class="constant">:INITID</code>
       <em class="replaceable"><code>init-id</code></em></span></dt><dd>set the <em class="replaceable"><code>init-id</code></em>
     </dd><dt><span class="term"><em class="replaceable"><code>specifier value</code></em></span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>specifier</code></em></span></dt><dd><p>the property specifier: an <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>,
            <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/typ_keyword.html" target="_top"><code class="classname">KEYWORD</code></a>, <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or a <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> of an <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> or a
            <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/typ_keyword.html" target="_top"><code class="classname">KEYWORD</code></a> and a <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>.
            </p><div class="variablelist"><dl><dt><span class="term"><a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a></span></dt><dd>a property identifier
             </dd><dt><span class="term"><a class="ulink" href="http://www.lisp.org/HyperSpec/Body/typ_keyword.html" target="_top"><code class="classname">KEYWORD</code></a></span></dt><dd><p>Predefined <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/typ_keyword.html" target="_top"><code class="classname">KEYWORD</code></a> IDs are
                </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="constant">:APPNAME</code></td><td><code class="constant">:CREATE-DTM</code></td><td><code class="constant">:LASTPRINTED</code></td><td><code class="constant">:SUBJECT</code></td></tr><tr><td><code class="constant">:AUTHOR</code></td><td><code class="constant">:DOC-SECURITY</code></td><td><code class="constant">:LASTSAVE-DTM</code></td><td><code class="constant">:TEMPLATE</code></td></tr><tr><td><code class="constant">:CHARCOUNT</code></td><td><code class="constant">:EDITTIME</code></td><td><code class="constant">:LOCALE</code></td><td><code class="constant">:THUMBNAIL</code></td></tr><tr><td><code class="constant">:CODEPAGE</code></td><td><code class="constant">:KEYWORDS</code></td><td><code class="constant">:PAGECOUNT</code></td><td><code class="constant">:TITLE</code></td></tr><tr><td><code class="constant">:COMMENTS</code></td><td><code class="constant">:LASTAUTHOR</code></td><td><code class="constant">:REVNUMBER</code></td><td><code class="constant">:WORDCOUNT</code></td></tr></table></dd><dt><span class="term"><a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a></span></dt><dd>string property specifier.
                If no match is found, the first ID &gt;= init-id
                (which defaults to 2) is associated with the
                string and its value is replaced with new value.
             </dd><dt><span class="term">(<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>|<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/typ_keyword.html" target="_top"><code class="classname">KEYWORD</code></a>
               <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>)</span></dt><dd>the first element is used as
                a specifier, the string is associated with this ID.
            </dd></dl></div><p>
           </p></dd><dt><span class="term"><em class="replaceable"><code>value</code></em></span></dt><dd><p>the new value of the property, a suitable Lisp
            object, <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> or a <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> of a <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/typ_keyword.html" target="_top"><code class="classname">KEYWORD</code></a> and the value
            itself.  If <em class="replaceable"><code>value</code></em> is <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, no assignment is done.
            <code class="constant">:EMPTY</code> and <code class="constant">:NULL</code>
            correspond to the <span class="type">VT_EMPTY</span>
            and <span class="type">VT_NULL</span> data types.
            <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/typ_keyword.html" target="_top"><code class="classname">KEYWORD</code></a> in the <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> specifies the desired type of
            the property being set.
            Supported types are</p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="constant">:BOOL</code></td><td><code class="constant">:I1</code></td><td><code class="constant">:LPWSTR</code></td><td><code class="constant">:UI4</code></td></tr><tr><td><code class="constant">:BSTR</code></td><td><code class="constant">:I2</code></td><td><code class="constant">:R4</code></td><td><code class="constant">:UI8</code></td></tr><tr><td><code class="constant">:DATE</code></td><td><code class="constant">:I4</code></td><td><code class="constant">:R8</code></td><td><code class="constant">:UINT</code></td></tr><tr><td><code class="constant">:ERROR</code></td><td><code class="constant">:I8</code></td><td><code class="constant">:UI1</code></td><td> </td></tr><tr><td><code class="constant">:FILETIME</code></td><td><code class="constant">:LPSTR</code></td><td><code class="constant">:UI2</code></td><td> </td></tr></table><p>
            <span class="type">FILETIME</span>s are converted to/from the universal
            time format, while <span class="type">DATE</span>s are not.
       </p></dd></dl></div><p>
    </p></dd></dl></div><p>
    Returns the property contents before assignment as multiple values.
 </p></dd><dt><a id="file-owner"></a><span class="term"><code class="code">(OS:FILE-OWNER
    <em class="replaceable"><code>filename</code></em>)</code></span></dt><dd><p>Return the owner of the file.</p><p><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a class="ulink" href="http://www.unix.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a> platforms only.</span></span></p></dd><dt><a id="mkstemp"></a><span class="term"><code class="code">(POSIX:MKSTEMP <em class="replaceable"><code>filename</code></em>
    <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <code class="constant">:DIRECTION</code> <a class="link" href="open.html#eltype"><code class="constant">:ELEMENT-TYPE</code></a> <a class="link" href="open.html#extfmt"><code class="constant">:EXTERNAL-FORMAT</code></a> <a class="link" href="open.html#buffered"><code class="constant">:BUFFERED</code></a>)</code></span></dt><dd><p>Calls <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/mkstemp.html"><code class="function">mkstemp</code></a>,
    returns a <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><code class="classname">FILE-STREAM</code></a>.</p><p><code class="constant">:DIRECTION</code> should allow output.</p><p>When <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/mkstemp.html"><code class="function">mkstemp</code></a> is missing,
    use <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/tempnam.html"><code class="function">tempnam</code></a>.
    On <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a> use <a class="win32" href="http://search.msdn.microsoft.com/Default.aspx?query=GetTempFileName"><code class="function">GetTempFileName</code></a>.
 </p></dd><dt><a id="mkdtemp"></a><span class="term"><code class="code">(POSIX:MKDTEMP
    <em class="replaceable"><code>filename</code></em>)</code></span></dt><dd>Calls <a class="bsd" href="http://www.freebsd.org/cgi/man.cgi?query=mkdtemp"><code class="function">mkdtemp</code></a>
    (similar to <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/mkstemp.html"><code class="function">mkstemp</code></a> but not in POSIX),
    returns the namestring of a new empty temporary directory.
 </dd><dt><a id="sync"></a><span class="term"><code class="code">(POSIX:SYNC <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
    <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd>Calls <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/fsync.html"><code class="function">fsync</code></a>
    (<a class="win32" href="http://search.msdn.microsoft.com/Default.aspx?query=FlushFileBuffers"><code class="function">FlushFileBuffers</code></a> on <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a>)
    on the <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap03.html#tag_03_165">file descriptor</a> associated with <em class="replaceable"><code>stream</code></em>,
    or <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/sync.html"><code class="function">sync</code></a>
    when <em class="replaceable"><code>stream</code></em> is not supplied</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="user-group"></a>33.1.3. Users and Groups</h3></div></div></div><div class="variablelist"><dl><dt><a id="user-info"></a><span class="term"><code class="code">(<code class="function">POSIX:USER-INFO</code>
    <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>user</code></em>)</code></span></dt><dd><p>Return the <span class="type">USER-INFO</span> structure (name,
   encoded password, UID, GID, full name, home directory, shell).
   <em class="replaceable"><code>user</code></em> should be a <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>
   (<a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/getpwnam.html"><code class="function">getpwnam</code></a> is used) or an <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>
   (<a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/getpwuid.html"><code class="function">getpwuid</code></a> is used).
   When <em class="replaceable"><code>user</code></em> is missing or <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, return all
   users (using <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/getpwent.html"><code class="function">getpwent</code></a>).
   When <em class="replaceable"><code>user</code></em> is <code class="constant">:DEFAULT</code>, return the information about the current user
   (using <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/getlogin.html"><code class="function">getlogin</code></a>).</p><p><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a class="ulink" href="http://www.unix.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> platform only.</span></span></p></dd><dt><a id="group-info"></a><span class="term"><code class="code">(<code class="function">POSIX:GROUP-INFO</code>
    <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>group</code></em>)</code></span></dt><dd><p>Return the <span class="type">GROUP-INFO</span> structure (name,
   GID, member <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a>). <em class="replaceable"><code>group</code></em> should be a
   <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> (<a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/getgrnam.html"><code class="function">getgrnam</code></a> is used) or an
   <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> (<a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/getgrgid.html"><code class="function">getgrgid</code></a> is used).
   When <em class="replaceable"><code>group</code></em> is missing or <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, return all
   groups (using <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/getgrent.html"><code class="function">getgrent</code></a>).</p><p><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a class="ulink" href="http://www.unix.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> platform only.</span></span></p></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="sysinfo"></a>33.1.4. System Information</h3></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="code">(<code class="function">POSIX:UNAME</code>)</code></span></dt><dd>Return a structure describing the OS, derived from
    <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/uname.html"><code class="function">uname</code></a>.</dd><dt><span class="term"><code class="code">(<code class="function">POSIX:SYSCONF</code>
    <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>what</code></em>)</code><br /></span><span class="term"><code class="code">(<code class="function">POSIX:CONFSTR</code>
    <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>what</code></em>)</code></span></dt><dd>Return the specified configuration parameter or a
    <a class="" href="http://www.lisp.org/HyperSpec/Body/glo_p.html#property_list">property list</a> of all available parameters (when <em class="replaceable"><code>what</code></em> is missing or
    <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>), by calling <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/sysconf.html"><code class="function">sysconf</code></a>
    and <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/confstr.html"><code class="function">confstr</code></a> respectively.
 </dd><dt><span class="term"><code class="code">(<code class="function">POSIX:PATHCONF</code>
    <em class="replaceable"><code>pathname</code></em> <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>what</code></em>)</code></span></dt><dd>Return the specified configuration parameter or a
    <a class="" href="http://www.lisp.org/HyperSpec/Body/glo_p.html#property_list">property list</a> of all available parameters (when <em class="replaceable"><code>what</code></em> is missing or
    <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>), by calling <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/fpathconf.html"><code class="function">fpathconf</code></a> on
    open file streams and <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/pathconf.html"><code class="function">pathconf</code></a> on
    all other <a class="link" href="filename-misc.html#path-des" title="Pathname Designators">pathname designator</a>s.</dd><dt><a id="rlimit"></a><span class="term"><code class="code">(<a class="link" href="syscalls.html#rlimit"><code class="function">POSIX:RLIMIT</code></a>
    <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>what</code></em>)</code></span></dt><dd>Return the current and the maximal limits as two
    values when <em class="replaceable"><code>what</code></em> is specified or the <a class="" href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list">association list</a> of all available
    limits (as an <span class="type">RLIMIT</span> structure) when <em class="replaceable"><code>what</code></em> is
    missing or <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, by calling <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/getrlimit.html"><code class="function">getrlimit</code></a>.
 </dd><dt><a id="set-rlimit"></a><span class="term"><code class="code">(<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<a class="link" href="syscalls.html#rlimit"><code class="function">POSIX:RLIMIT</code></a> <em class="replaceable"><code>what</code></em>)
    (<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/acc_values.html" target="_top"><code class="function">VALUES</code></a> cur max))</code><br /></span><span class="term"><code class="code">(<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<a class="link" href="syscalls.html#rlimit"><code class="function">POSIX:RLIMIT</code></a> <em class="replaceable"><code>what</code></em>) rlimit)</code><br /></span><span class="term"><code class="code">(<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<a class="link" href="syscalls.html#rlimit"><code class="function">POSIX:RLIMIT</code></a>) rlimit-alist)</code></span></dt><dd><p>Set the limits using
    <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/setrlimit.html"><code class="function">setrlimit</code></a>.</p><div class="orderedlist"><ol type="1"><li>In the first form, <em class="replaceable"><code>cur</code></em>
       and <em class="replaceable"><code>max</code></em> are numbers
       (or <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> for <code class="constant">RLIM_INFINITY</code>).</li><li>In the second form, <em class="replaceable"><code>rlimit</code></em>
       is an <span class="type">RLIMIT</span> structure.</li><li>In the third form,
       <em class="replaceable"><code>rlimit-alist</code></em> is an <a class="" href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list">association list</a>, as returned by
       <code class="code">(<a class="link" href="syscalls.html#rlimit"><code class="function">POSIX:RLIMIT</code></a>)</code>.</li></ol></div></dd><dt><a id="usage"></a><span class="term"><code class="code">(<code class="function">POSIX:USAGE</code>)</code></span></dt><dd>Return 2 structures describing the resource usage
    by the lisp process and its children, using
    <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/getrusage.html"><code class="function">getrusage</code></a>.
 </dd><dt><a id="bogomips"></a><span class="term"><code class="code">(POSIX:BOGOMIPS)</code></span></dt><dd>Compute the
    <a class="ulink" href="http://en.wikipedia.org/wiki/BogoMips" target="_top">BogoMips</a>
    rating.</dd><dt><a id="loadavg"></a><span class="term"><code class="code">(POSIX:LOADAVG <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
    percentp)</code></span></dt><dd>Return 1, 5, and 15 minute system load averages,
    retrieved by <a class="bsd" href="http://www.freebsd.org/cgi/man.cgi?query=getloadavg"><code class="function">getloadavg</code></a>.
    If the argument is specified and non-<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, the values are returned
    as integer percentiles.</dd><dt><span class="term"><code class="code">(OS:SYSTEM-INFO)</code></span></dt><dd>Return <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a> system information in a
    <span class="type">SYSTEM-INFO</span> structure.</dd><dt><span class="term"><code class="code">(OS:VERSION)</code></span></dt><dd>Return <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a> version information in a
    <span class="type">VERSION</span> structure.</dd><dt><span class="term"><code class="code">(OS:MEMORY-STATUS)</code></span></dt><dd>Return <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a> memory status information in a
    <span class="type">MEMORY-STATUS</span> structure.</dd><dt><a id="phys-mem"></a><span class="term"><code class="code">(OS:PHYSICAL-MEMORY)</code></span></dt><dd><p>Return 2 values: total and available physical memory.
   </p><p><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a class="ulink" href="http://www.unix.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a> platforms only.</span></span></p></dd><dt><a id="gethostid"></a><span class="term"><code class="code">(OS:GETHOSTID)</code></span></dt><dd><p>Call <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/gethostid.html"><code class="function">gethostid</code></a> and
    return a (hopefully) universally unique <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> identifier of
    this machine.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>On <a class="ulink" href="http://www.linux.org/" target="_top"><span class="platform">Linux</span></a> this number appears to be the IPv4 32-bit
     address with the first 2 bytes and the last 2 bytes swapped:
</p><pre class="programlisting">(<a class="link" href="rawsock.html#rawsock-convert-address"><code class="function">RAWSOCK:CONVERT-ADDRESS</code></a> :inet (os:gethostid))
⇒ <code class="computeroutput">"7.3.192.168"</code>
(first (posix:hostent-addr-list (<a class="link" href="syscalls.html#resolve-host"><code class="function">POSIX:RESOLVE-HOST-IPADDR</code></a> :default)))
⇒ <code class="computeroutput">"192.168.7.3"</code></pre><p>This, of
course, means that “<span class="quote">universally unique</span>” it is <span class="strong"><strong>not</strong></span>.
   </p></div><p><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a class="ulink" href="http://www.unix.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a> platforms only.</span></span></p></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="posix-math"></a>33.1.5. Mathematical functions</h3></div></div></div><p>We implement access to </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/erf.html"><code class="function">erf</code></a> <em class="replaceable"><code>real</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/erfc.html"><code class="function">erfc</code></a> <em class="replaceable"><code>real</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/j0.html"><code class="function">j0</code></a> <em class="replaceable"><code>real</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/j1.html"><code class="function">j1</code></a> <em class="replaceable"><code>real</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/jn.html"><code class="function">jn</code></a> <em class="replaceable"><code>integer</code></em>
    <em class="replaceable"><code>real</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/y0.html"><code class="function">y0</code></a> <em class="replaceable"><code>real</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/y1.html"><code class="function">y1</code></a> <em class="replaceable"><code>real</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/yn.html"><code class="function">yn</code></a> <em class="replaceable"><code>integer</code></em>
    <em class="replaceable"><code>real</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/tgamma.html"><code class="function">tgamma</code></a>
    <em class="replaceable"><code>real</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/lgamma.html"><code class="function">lgamma</code></a>
    <em class="replaceable"><code>real</code></em>)</code></td></tr></table><p>
which compute the error functions, Bessel functions and Gamma.</p><p>These functions are required by the POSIX standard and should
 be declared in <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/basedefs/math.h.html">&lt;<code class="filename">math.h</code>&gt;</a>.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>Please note that these functions do not provide
  lisp-style error handling and precision, and do all the computations
  at the <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">DOUBLE-FLOAT</code></a> level.</p></div><p>Function <code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/ffs.html"><code class="function">ffs</code></a> <em class="replaceable"><code>n</code></em>)</code>
 finds the first bit set. It is implemented in pure Lisp and supports
 <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/typ_bignum.html" target="_top"><code class="classname">BIGNUM</code></a>s.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="encryption"></a>33.1.6. Encryption</h3></div></div></div><div class="variablelist"><dl><dt><a id="crypt"></a><span class="term"><code class="code">(POSIX:CRYPT <em class="replaceable"><code>key</code></em>
    <em class="replaceable"><code>salt</code></em>)</code></span></dt><dd>Call <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/crypt.html"><code class="function">crypt</code></a>,
    arguments are <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>s.</dd><dt><a id="encrypt"></a><span class="term"><code class="code">(POSIX:ENCRYPT <em class="replaceable"><code>block</code></em>
    <em class="replaceable"><code>decrypt-p</code></em>)</code><br /></span><span class="term"><code class="code">(POSIX:SETKEY <em class="replaceable"><code>key</code></em>)</code></span></dt><dd>Call <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/encrypt.html"><code class="function">encrypt</code></a>
    and <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/setkey.html"><code class="function">setkey</code></a>, respectively.
    <em class="replaceable"><code>block</code></em> and <em class="replaceable"><code>key</code></em> are of type
    <span class="type"><code class="literal">(<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/fun_vector.html" target="_top"><code class="function">VECTOR</code></a> (<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8) 8)</code></span>.
    <em class="replaceable"><code>decrypt-p</code></em> is <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><code class="classname">BOOLEAN</code></a>.
 </dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="sys-log"></a>33.1.7. Syslog</h3></div></div></div><div class="variablelist"><dl><dt><a id="openlog"></a><span class="term"><code class="code">(POSIX:OPENLOG ident <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
    :PID :CONS :NDELAY :ODELAY :NOWAIT :FACILITY)</code></span></dt><dd>Calls <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/openlog.html"><code class="function">openlog</code></a>
 </dd><dt><a id="setlogmask"></a><span class="term"><code class="code">(POSIX:SETLOGMASK
    maskpri)</code></span></dt><dd>Calls <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/setlogmask.html"><code class="function">setlogmask</code></a>.
 </dd><dt><a id="syslog"></a><span class="term"><code class="code">(POSIX:SYSLOG severity facility
    <em class="replaceable"><code>format-string</code></em> <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>arguments</code></em>)</code></span></dt><dd><p>Calls <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/syslog.html"><code class="function">syslog</code></a> on
    <code class="code">(<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><code class="function">APPLY</code></a> <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> <em class="replaceable"><code>format-string</code></em> <em class="replaceable"><code>arguments</code></em>)</code>.</p><p>No <span class="data"><code class="literal">%</code></span> conversion is performed,
    you must do all formatting in Lisp.</p></dd><dt><a id="closelog"></a><span class="term"><code class="code">(POSIX:CLOSELOG)</code></span></dt><dd>Calls <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/closelog.html"><code class="function">closelog</code></a>.
</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="processes"></a>33.1.8. Processes</h3></div></div></div><div class="variablelist"><dl><dt><a id="process-id"></a><span class="term"><code class="code">(OS:PROCESS-ID)</code></span></dt><dd>Return the process ID
    (on <a class="ulink" href="http://www.unix.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> calls <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/getpid.html"><code class="function">getpid</code></a>,
    on <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a> calls <a class="win32" href="http://search.msdn.microsoft.com/Default.aspx?query=GetCurrentProcessId"><code class="function">GetCurrentProcessId</code></a>)
 </dd><dt><a id="priority"></a><span class="term"><code class="code">(OS:PRIORITY <em class="replaceable"><code>pid</code></em>
    <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>what</code></em>)</code><br /></span><span class="term"><code class="code">(<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (OS:PRIORITY <em class="replaceable"><code>pid</code></em> <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>what</code></em>)
    priority)</code></span></dt><dd><p>Return or set the process priority, platform-dependent
    <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> or platform-independent <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a>, one of
    </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="constant">:REALTIME</code></td><td><code class="constant">:NORMAL</code></td><td><code class="constant">:IDLE</code></td></tr><tr><td><code class="constant">:HIGH</code></td><td><code class="constant">:BELOW-NORMAL</code></td><td> </td></tr><tr><td><code class="constant">:ABOVE-NORMAL</code></td><td><code class="constant">:LOW</code></td><td> </td></tr></table><p>
    On <a class="ulink" href="http://www.unix.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> calls <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/getpriority.html"><code class="function">getpriority</code></a>
    and <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/setpriority.html"><code class="function">setpriority</code></a>, on
    <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a> calls <a class="win32" href="http://search.msdn.microsoft.com/Default.aspx?query=GetPriorityClass"><code class="function">GetPriorityClass</code></a> and
    <a class="win32" href="http://search.msdn.microsoft.com/Default.aspx?query=SetPriorityClass"><code class="function">SetPriorityClass</code></a>.</p></dd><dt><a id="kill"></a><span class="term"><code class="code">(POSIX:KILL <em class="replaceable"><code>pid</code></em> <em class="replaceable"><code>signal</code></em>)</code></span></dt><dd>Calls <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/kill.html"><code class="function">kill</code></a>.
 </dd><dt><a id="getppid"></a><span class="term"><code class="code">(POSIX:GETPPID)</code></span></dt><dd>Calls <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/getppid.html"><code class="function">getppid</code></a>.
 </dd><dt><a id="getpgrp"></a><span class="term"><code class="code">(POSIX:GETPGRP)</code></span></dt><dd>Calls <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/getpgrp.html"><code class="function">getpgrp</code></a>.
 </dd><dt><a id="setpgrp"></a><span class="term"><code class="code">(POSIX:SETPGRP)</code></span></dt><dd>Calls <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/setpgrp.html"><code class="function">setpgrp</code></a>;
    on non-POSIX systems where it requires 2 arguments (legacy
    BSD-style), it is called as <code class="code">setpgrp(0,0)</code>.
 </dd><dt><a id="getsid"></a><span class="term"><code class="code">(POSIX:GETSID <em class="replaceable"><code>pid</code></em>)</code></span></dt><dd>Calls <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/getsid.html"><code class="function">getsid</code></a>.
 </dd><dt><a id="setsid"></a><span class="term"><code class="code">(POSIX:SETSID)</code></span></dt><dd>Calls <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/setsid.html"><code class="function">setsid</code></a>.
 </dd><dt><a id="getpgid"></a><span class="term"><code class="code">(POSIX:PGID <em class="replaceable"><code>pid</code></em>)</code><br /></span><span class="term"><code class="code">(<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (POSIX:PGID <em class="replaceable"><code>pid</code></em>)
    <em class="replaceable"><code>pgid</code></em>)</code></span></dt><dd>Call <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/getpgid.html"><code class="function">getpgid</code></a> and
   <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/setpgid.html"><code class="function">setpgid</code></a>.</dd><dt><a id="setreuid"></a><span class="term"><code class="code">(POSIX:SETREUID
    ruid euid)</code></span></dt><dd>Call <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/setreuid.html"><code class="function">setreuid</code></a>.
 </dd><dt><a id="setregid"></a><span class="term"><code class="code">(POSIX:SETREGID
    rgid egid)</code></span></dt><dd>Call <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/setregid.html"><code class="function">setregid</code></a>.
 </dd><dt><a id="getuid"></a><span class="term"><code class="code">(POSIX:UID)</code><br /></span><span class="term"><code class="code">(<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (POSIX:UID) <em class="replaceable"><code>uid</code></em>)</code></span></dt><dd>Call <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/getuid.html"><code class="function">getuid</code></a> and
   <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/setuid.html"><code class="function">setuid</code></a>.</dd><dt><a id="getgid"></a><span class="term"><code class="code">(POSIX:GID)</code><br /></span><span class="term"><code class="code">(<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (POSIX:GID) <em class="replaceable"><code>gid</code></em>)</code></span></dt><dd>Call <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/getgid.html"><code class="function">getgid</code></a> and
   <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/setgid.html"><code class="function">setgid</code></a>.</dd><dt><a id="geteuid"></a><span class="term"><code class="code">(POSIX:EUID)</code><br /></span><span class="term"><code class="code">(<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (POSIX:EUID) <em class="replaceable"><code>uid</code></em>)</code></span></dt><dd>Call <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/geteuid.html"><code class="function">geteuid</code></a> and
   <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/seteuid.html"><code class="function">seteuid</code></a>.</dd><dt><a id="getegid"></a><span class="term"><code class="code">(POSIX:EGID)</code><br /></span><span class="term"><code class="code">(<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (POSIX:EGID) <em class="replaceable"><code>gid</code></em>)</code></span></dt><dd>Call <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/getegid.html"><code class="function">getegid</code></a> and
   <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/setegid.html"><code class="function">setegid</code></a>.</dd><dt><a id="getgroups"></a><span class="term"><code class="code">(POSIX:GROUPS)</code><br /></span><span class="term"><code class="code">(<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (POSIX:GROUPS) <em class="replaceable"><code>list</code></em>)</code></span></dt><dd>Call <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/getgroups.html"><code class="function">getgroups</code></a> and
   <a class="bsd" href="http://www.freebsd.org/cgi/man.cgi?query=setgroups"><code class="function">setgroups</code></a>.
 </dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="accounting"></a>33.1.9. Accounting</h3></div></div></div><div class="variablelist"><dl><dt><a id="endutxent"></a><span class="term"><code class="code">(POSIX:ENDUTXENT)</code></span></dt><dd>Calls <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/endutxent.html"><code class="function">endutxent</code></a>.
 </dd><dt><a id="getutxent"></a><span class="term"><code class="code">(POSIX:GETUTXENT
    <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> utmpx)</code></span></dt><dd>Calls <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/getutxent.html"><code class="function">getutxent</code></a>,
    returns a <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html" target="_top"><code class="classname">STRUCTURE-OBJECT</code></a> of
    type <span class="type">POSIX:UTMPX</span>, which can be passed to subsequent calls to
    this function and re-used.</dd><dt><a id="getutxid"></a><span class="term"><code class="code">(POSIX:GETUTXID id)</code></span></dt><dd>Calls <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/getutxid.html"><code class="function">getutxid</code></a>,
    the argument is filled and returned.</dd><dt><a id="getutxline"></a><span class="term"><code class="code">(POSIX:GETUTXLINE line)</code></span></dt><dd>Calls <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/getutxline.html"><code class="function">getutxline</code></a>,
    the argument is filled and returned.</dd><dt><a id="pututxline"></a><span class="term"><code class="code">(POSIX:PUTUTXLINE
    utmpx)</code></span></dt><dd>Calls <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/pututxline.html"><code class="function">pututxline</code></a>,
    the argument is filled and returned.</dd><dt><a id="setutxent"></a><span class="term"><code class="code">(POSIX:SETUTXENT)</code></span></dt><dd>Calls <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/setutxent.html"><code class="function">setutxent</code></a>.
</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="strtime"></a>33.1.10. Time conversion</h3></div></div></div><p><code class="code">(OS:STRING-TIME <em class="replaceable"><code>format-string</code></em> <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>object</code></em> timezone)</code>
 </p><div class="itemizedlist"><ul type="disc"><li>When <em class="replaceable"><code>object</code></em> is a <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>, is is
    parsed according to <em class="replaceable"><code>format-string</code></em> by <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/strptime.html"><code class="function">strptime</code></a>.
  </li><li>When it is an <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>, it
    is formatted according to <em class="replaceable"><code>format-string</code></em> by
    <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/strftime.html"><code class="function">strftime</code></a>.
    <em class="replaceable"><code>object</code></em> defaults to <code class="code">(<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/fun_get-unive_decoded-time.html" target="_top"><code class="function">GET-UNIVERSAL-TIME</code></a>)</code>.
</li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mk-xterm-io"></a>33.1.11. XTerm</h3></div></div></div><p><code class="code">(<a class="link" href="syscalls.html#mk-xterm-io" title="33.1.11. XTerm"><code class="function">POSIX:MAKE-XTERM-IO-STREAM</code></a> <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> title xterm)</code>
 When running under the <a class="ulink" href="http://www.x.org/" target="_top">X Window System</a>, you can create a <a class="" href="http://www.lisp.org/HyperSpec/Body/glo_b.html#bidirectional">bidirectional</a> <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>, which uses a new
 dedicated text window (created by the executable specified by
 the <code class="constant">:XTERM</code> argument which should be compatible
 with <span class="command"><strong>xterm</strong></span> and <span class="command"><strong>rxvt</strong></span>, i.e., accept
 options <code class="option">-n</code>, <code class="option">-T</code>, and <code class="option">-e</code>)
 using the function <a class="link" href="syscalls.html#mk-xterm-io" title="33.1.11. XTerm"><code class="function">POSIX:MAKE-XTERM-IO-STREAM</code></a>: </p><pre class="programlisting">
(<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><code class="function">SETQ</code></a> <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><code class="varname">*ERROR-OUTPUT*</code></a>
      (<a class="ulink" href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><code class="function">SETQ</code></a> <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><code class="varname">*DEBUG-IO*</code></a>
            (<a class="link" href="syscalls.html#mk-xterm-io" title="33.1.11. XTerm"><code class="function">POSIX:MAKE-XTERM-IO-STREAM</code></a> :title "clisp errors and debug")))
</pre><p><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a class="ulink" href="http://www.unix.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> platform only.</span></span></p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="stdio"></a>33.1.12. Standard file input and output</h3></div></div></div><p>We define the type <span class="type">FFI:file</span> = <a class="link" href="dffi.html#fptr"><code class="classname">FFI:FOREIGN-POINTER</code></a> and
 the following functions:</p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/fopen.html"><code class="function">fopen</code></a> <em class="replaceable"><code>filename</code></em>
    <em class="replaceable"><code>mode</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/fdopen.html"><code class="function">fdopen</code></a> fd
    <em class="replaceable"><code>mode</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/freopen.html"><code class="function">freopen</code></a> <em class="replaceable"><code>filename</code></em>
    <em class="replaceable"><code>mode</code></em> <em class="replaceable"><code>file</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/fclose.html"><code class="function">fclose</code></a>
    <em class="replaceable"><code>file</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/fflush.html"><code class="function">fflush</code></a>
    <em class="replaceable"><code>file</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/clearerr.html"><code class="function">clearerr</code></a>
    <em class="replaceable"><code>file</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/feof.html"><code class="function">feof</code></a>
    <em class="replaceable"><code>file</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/ferror.html"><code class="function">ferror</code></a>
    <em class="replaceable"><code>file</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/fileno.html"><code class="function">fileno</code></a>
    <em class="replaceable"><code>file</code></em>)</code></td></tr></table><p>call their namesakes defined in <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/basedefs/stdio.h.html">&lt;<code class="filename">stdio.h</code>&gt;</a>.</p><p>Functions </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">OS:FOPEN</code></td></tr><tr><td><code class="function">OS:FDOPEN</code></td></tr><tr><td><code class="function">OS:FREOPEN</code></td></tr><tr><td><code class="function">OS:FCLOSE</code></td></tr><tr><td><code class="function">OS:FFLUSH</code></td></tr><tr><td><code class="function">OS:FILENO</code></td></tr></table><p> may <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a> an <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>.</p><div class="variablelist"><p class="title"><b>Return values</b></p><dl><dt><span class="term"><code class="function">OS:FOPEN</code><br /></span><span class="term"><code class="function">OS:FDOPEN</code></span></dt><dd><span class="type">FFI:file</span> = <a class="link" href="dffi.html#fptr"><code class="classname">FFI:FOREIGN-POINTER</code></a>
  </dd><dt><span class="term"><code class="function">OS:FREOPEN</code><br /></span><span class="term"><code class="function">OS:FCLOSE</code><br /></span><span class="term"><code class="function">OS:FFLUSH</code><br /></span><span class="term"><code class="function">OS:CLEARERR</code></span></dt><dd>no values (they modify their <em class="replaceable"><code>file</code></em> argument in place)
  </dd><dt><span class="term"><code class="function">OS:FEOF</code><br /></span><span class="term"><code class="function">OS:FERROR</code></span></dt><dd><a class="ulink" href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><code class="classname">BOOLEAN</code></a></dd><dt><span class="term"><code class="function">OS:FILENO</code></span></dt><dd><a class="ulink" href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> (<a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap03.html#tag_03_165">file descriptor</a>)</dd></dl></div><p>We also define 3 constants </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="constant">OS:STDIN</code></td></tr><tr><td><code class="constant">OS:STDOUT</code></td></tr><tr><td><code class="constant">OS:STDERR</code></td></tr></table><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This functionality is <span class="strong"><strong>not</strong></span> for i/o, but merely for
   for <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> modules which interface to functions which use the
   <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a> <span class="type">FILE*</span> pointers. E.g., <span class="module"><a class="filename" href="postgresql.html" title="33.8. PostgreSQL Database Access"><code class="filename">postgresql</code></a></span> has a
   function <a class="pq" href="http://search.postgresql.org/search?q=PQtrace"><code class="function">PQtrace</code></a>
   which expects a <span class="type">FILE*</span> argument.
   You can use <code class="function">OS:FOPEN</code>
   and <code class="function">OS:FCLOSE</code> for that.</p></div><p>This functionality is only present if <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> is present.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="errno"></a>33.1.13. Error handling</h3></div></div></div><p>To handle errors in foreign functions, the following two
 functions are provided: </p><div class="variablelist"><dl><dt><span class="term"><code class="code">(OS:ERRNO <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>error-code</code></em>)</code></span></dt><dd><p>When <em class="replaceable"><code>error-code</code></em> (a number or a keyword) is supplied,
   <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/errno.html"><code class="varname">errno</code></a> is set (useful before a system call which sets <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/errno.html"><code class="varname">errno</code></a> as the
   only way to report an error).</p><p>The current <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/errno.html"><code class="varname">errno</code></a> is returned as a keyword if possible, a
   number otherwise.  When <em class="replaceable"><code>error-code</code></em> is <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>, all known error codes are
   returned as an <a class="" href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list">association list</a>.</p><p>On <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a>, <a class="win32" href="http://search.msdn.microsoft.com/Default.aspx?query=GetLastError"><code class="function">GetLastError</code></a>
   and <a class="win32" href="http://search.msdn.microsoft.com/Default.aspx?query=SetLastError"><code class="function">SetLastError</code></a> are used instead
   of <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/errno.html"><code class="varname">errno</code></a>.</p></dd><dt><span class="term"><code class="code">(OS:STRERROR <a class="ulink" href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>error-code</code></em>)</code></span></dt><dd><p>Return a string description of <em class="replaceable"><code>error-code</code></em>.
   When <em class="replaceable"><code>error-code</code></em> is not supplied, <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/errno.html"><code class="varname">errno</code></a>
   (<a class="win32" href="http://search.msdn.microsoft.com/Default.aspx?query=GetLastError"><code class="function">GetLastError</code></a> on <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a>) is used.
  </p><p>This calls <a class="unix" href="http://www.opengroup.org/onlinepubs/009695399/functions/strerror.html"><code class="function">strerror</code></a> on <a class="ulink" href="http://www.unix.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> and
   <a class="win32" href="http://search.msdn.microsoft.com/Default.aspx?query=FormatMessage"><code class="function">FormatMessage</code></a> on <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a>.</p></dd></dl></div><p>This functionality is only present if <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> is present.</p></div></div><div class="bookinfo"><hr /><table width="100%" summary="impnotes meta info"><th><td align="left">These notes document <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a> version 2.46</td><td align="right">Last modified: 2008-07-02</td></th></table></div><div class="custom-footer"><hr /><table width="100%"><tr><td align="left"><a href="http://clisp.cons.org"><img src="clisp.png" width="48" height="48" alt="[CLISP home]" /></a></td><td align="center"><a href="http://sourceforge.net/donate/index.php?group_id=1355"><img src="http://images.sourceforge.net/images/project-support.jpg" width="88" height="32" alt="[Support CLISP]" /></a></td><td align="right"><a href="http://sourceforge.net"><img width="125" height="37" alt="[SourceForge]" src="http://sflogo.sourceforge.net/sflogo.php?group_id=1355&amp;type=2&amp;page=syscalls" /></a></td></tr></table></div><hr /><form method="get" action="http://www.google.com/custom" target="_top"><table width="100%" border="0"><tr><td nowrap="nowrap" align="center"><input type="hidden" name="domains" value="clisp.cons.org;clisp.podval.org;www.lisp.org" /><label for="sbi" style="display: none">Enter your search terms</label><input type="text" name="q" size="50" maxlength="255" id="sbi" value="33.1. System Calls" /><label for="sbb" style="display: none">Submit search form</label><input type="submit" name="sa" value="Google Search" id="sbb" /></td></tr><tr><td nowrap="nowrap" align="center"><input type="radio" name="sitesearch" value="" checked="1" id="ss0" /><label for="ss0" title="Search the Web"><small>Web</small></label><input type="radio" name="sitesearch" value="clisp.cons.org" id="ss1" /><label for="ss1" title="Search clisp.cons.org"><small>clisp.cons.org</small></label><input type="radio" name="sitesearch" value="clisp.podval.org" id="ss2" /><label for="ss2" title="Search clisp.podval.org"><small>clisp.podval.org</small></label><input type="radio" name="sitesearch" value="www.lisp.org" id="ss3" /><label for="ss3" title="Search www.lisp.org"><small>www.lisp.org</small></label><input type="hidden" name="client" value="pub-4445255502750357" /><input type="hidden" name="forid" value="1" /><input type="hidden" name="ie" value="UTF-8" /><input type="hidden" name="oe" value="UTF-8" /><input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:000000;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;LH:48;LW:48;L:http://clisp.cons.org/clisp.png;S:http://clisp.cons.org;FORID:1" /><input type="hidden" name="hl" value="en" /></td></tr></table></form><hr /><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ext-modules.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ext-modules.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="i18n-mod.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 33. Extensions Implemented as Modules </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 33.2. Internationalization of User Programs</td></tr></table></div></body></html>
